<?xml version="1.0" encoding="UTF-8"?>
<robot rpa="false" generated="20191025 23:46:23.125" generator="Robot 3.1.2 (Python 2.7.5 on linux2)">
<suite source="/opt/hadoop/smoketest/s3" id="s1" name="ozonesecure-s3">
<suite source="/opt/hadoop/smoketest/s3/awss3.robot" id="s1-s1" name="Awss3">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:46:23.197" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:46:23.205" level="INFO">${rc} = 1</msg>
<msg timestamp="20191025 23:46:23.205" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191025 23:46:23.205" starttime="20191025 23:46:23.196"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191025 23:46:23.208" starttime="20191025 23:46:23.206"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:46:23.210" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:46:23.404" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:46:23.405" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.002'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191025 23:46:23.405" starttime="20191025 23:46:23.208"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:46:23.411" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:46:56.388" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:46:56.389" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Determining fastest mirrors
 * base: mirrors.xtom.com
 * epel: mirror.prgmr.com
 * extras: mirror.fileplanet.com
 * updates: mirrors.xtom.com
Resolving Dependencies
...</msg>
<status status="PASS" endtime="20191025 23:46:56.389" starttime="20191025 23:46:23.408"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:46:56.391" level="INFO">Loaded plugins: fastestmirror, ovl
Determining fastest mirrors
 * base: mirrors.xtom.com
 * epel: mirror.prgmr.com
 * extras: mirror.fileplanet.com
 * updates: mirrors.xtom.com
Resolving Dependencies
--&gt; Running transaction check
---&gt; Package awscli.noarch 0:1.14.28-5.el7_5.1 will be installed
--&gt; Processing Dependency: python-s3transfer &gt;= 0.1.9 for package: awscli-1.14.28-5.el7_5.1.noarch
--&gt; Processing Dependency: python-docutils &gt;= 0.10 for package: awscli-1.14.28-5.el7_5.1.noarch
--&gt; Processing Dependency: python-cryptography &gt;= 1.7.2 for package: awscli-1.14.28-5.el7_5.1.noarch
--&gt; Processing Dependency: PyYAML &gt;= 3.10 for package: awscli-1.14.28-5.el7_5.1.noarch
--&gt; Running transaction check
---&gt; Package PyYAML.x86_64 0:3.10-11.el7 will be installed
--&gt; Processing Dependency: libyaml-0.so.2()(64bit) for package: PyYAML-3.10-11.el7.x86_64
---&gt; Package python-docutils.noarch 0:0.11-0.3.20130715svn7687.el7 will be installed
--&gt; Processing Dependency: python-imaging for package: python-docutils-0.11-0.3.20130715svn7687.el7.noarch
---&gt; Package python-s3transfer.noarch 0:0.1.13-1.el7.0.1 will be installed
--&gt; Processing Dependency: python-dateutil &gt;= 1.4 for package: python-s3transfer-0.1.13-1.el7.0.1.noarch
---&gt; Package python2-cryptography.x86_64 0:1.7.2-2.el7 will be installed
--&gt; Processing Dependency: python-six &gt;= 1.4.1 for package: python2-cryptography-1.7.2-2.el7.x86_64
--&gt; Processing Dependency: python-pyasn1 &gt;= 0.1.8 for package: python2-cryptography-1.7.2-2.el7.x86_64
--&gt; Processing Dependency: python-idna &gt;= 2.0 for package: python2-cryptography-1.7.2-2.el7.x86_64
--&gt; Processing Dependency: python-cffi &gt;= 1.4.1 for package: python2-cryptography-1.7.2-2.el7.x86_64
--&gt; Processing Dependency: python-enum34 for package: python2-cryptography-1.7.2-2.el7.x86_64
--&gt; Processing Dependency: openssl for package: python2-cryptography-1.7.2-2.el7.x86_64
--&gt; Running transaction check
---&gt; Package libyaml.x86_64 0:0.1.4-11.el7_0 will be installed
---&gt; Package openssl.x86_64 1:1.0.2k-19.el7 will be installed
--&gt; Processing Dependency: openssl-libs(x86-64) = 1:1.0.2k-19.el7 for package: 1:openssl-1.0.2k-19.el7.x86_64
--&gt; Processing Dependency: make for package: 1:openssl-1.0.2k-19.el7.x86_64
---&gt; Package python-cffi.x86_64 0:1.6.0-5.el7 will be installed
--&gt; Processing Dependency: python-pycparser for package: python-cffi-1.6.0-5.el7.x86_64
---&gt; Package python-dateutil.noarch 0:1.5-7.el7 will be installed
---&gt; Package python-enum34.noarch 0:1.0.4-1.el7 will be installed
---&gt; Package python-idna.noarch 0:2.4-1.el7 will be installed
---&gt; Package python-pillow.x86_64 0:2.0.0-19.gitd1c6db8.el7 will be installed
--&gt; Processing Dependency: libtiff.so.5(LIBTIFF_4.0)(64bit) for package: python-pillow-2.0.0-19.gitd1c6db8.el7.x86_64
--&gt; Processing Dependency: libwebp.so.4()(64bit) for package: python-pillow-2.0.0-19.gitd1c6db8.el7.x86_64
--&gt; Processing Dependency: libtiff.so.5()(64bit) for package: python-pillow-2.0.0-19.gitd1c6db8.el7.x86_64
---&gt; Package python-six.noarch 0:1.9.0-2.el7 will be installed
---&gt; Package python2-pyasn1.noarch 0:0.1.9-7.el7 will be installed
--&gt; Running transaction check
---&gt; Package libtiff.x86_64 0:4.0.3-32.el7 will be installed
--&gt; Processing Dependency: libjbig.so.2.0()(64bit) for package: libtiff-4.0.3-32.el7.x86_64
---&gt; Package libwebp.x86_64 0:0.3.0-7.el7 will be installed
---&gt; Package make.x86_64 1:3.82-24.el7 will be installed
---&gt; Package openssl-libs.x86_64 1:1.0.2k-16.el7 will be updated
---&gt; Package openssl-libs.x86_64 1:1.0.2k-19.el7 will be an update
---&gt; Package python-pycparser.noarch 0:2.14-1.el7 will be installed
--&gt; Processing Dependency: python-ply for package: python-pycparser-2.14-1.el7.noarch
--&gt; Running transaction check
---&gt; Package jbigkit-libs.x86_64 0:2.0-11.el7 will be installed
---&gt; Package python-ply.noarch 0:3.4-11.el7 will be installed
--&gt; Finished Dependency Resolution

Dependencies Resolved

================================================================================
 Package                Arch     Version                           Repository
                                                                           Size
================================================================================
Installing:
 awscli                 noarch   1.14.28-5.el7_5.1                 base   1.0 M
Installing for dependencies:
 PyYAML                 x86_64   3.10-11.el7                       base   153 k
 jbigkit-libs           x86_64   2.0-11.el7                        base    46 k
 libtiff                x86_64   4.0.3-32.el7                      base   171 k
 libwebp                x86_64   0.3.0-7.el7                       base   170 k
 libyaml                x86_64   0.1.4-11.el7_0                    base    55 k
 make                   x86_64   1:3.82-24.el7                     base   421 k
 openssl                x86_64   1:1.0.2k-19.el7                   base   493 k
 python-cffi            x86_64   1.6.0-5.el7                       base   218 k
 python-dateutil        noarch   1.5-7.el7                         base    85 k
 python-docutils        noarch   0.11-0.3.20130715svn7687.el7      base   1.5 M
 python-enum34          noarch   1.0.4-1.el7                       base    52 k
 python-idna            noarch   2.4-1.el7                         base    94 k
 python-pillow          x86_64   2.0.0-19.gitd1c6db8.el7           base   438 k
 python-ply             noarch   3.4-11.el7                        base   123 k
 python-pycparser       noarch   2.14-1.el7                        base   104 k
 python-s3transfer      noarch   0.1.13-1.el7.0.1                  base   2.9 M
 python-six             noarch   1.9.0-2.el7                       base    29 k
 python2-cryptography   x86_64   1.7.2-2.el7                       base   502 k
 python2-pyasn1         noarch   0.1.9-7.el7                       base   100 k
Updating for dependencies:
 openssl-libs           x86_64   1:1.0.2k-19.el7                   base   1.2 M

Transaction Summary
================================================================================
Install  1 Package  (+19 Dependent packages)
Upgrade             (  1 Dependent package)

Total download size: 9.9 M
Downloading packages:
Delta RPMs disabled because /usr/bin/applydeltarpm not installed.
--------------------------------------------------------------------------------
Total                                               30 MB/s | 9.9 MB  00:00     
Running transaction check
Running transaction test
Transaction test succeeded
Running transaction
  Updating   : 1:openssl-libs-1.0.2k-19.el7.x86_64                         1/22 
  Installing : python2-pyasn1-0.1.9-7.el7.noarch                           2/22 
  Installing : libyaml-0.1.4-11.el7_0.x86_64                               3/22 
  Installing : PyYAML-3.10-11.el7.x86_64                                   4/22 
  Installing : jbigkit-libs-2.0-11.el7.x86_64                              5/22 
  Installing : libtiff-4.0.3-32.el7.x86_64                                 6/22 
  Installing : python-ply-3.4-11.el7.noarch                                7/22 
  Installing : python-pycparser-2.14-1.el7.noarch                          8/22 
  Installing : python-cffi-1.6.0-5.el7.x86_64                              9/22 
  Installing : python-idna-2.4-1.el7.noarch                               10/22 
  Installing : python-six-1.9.0-2.el7.noarch                              11/22 
  Installing : 1:make-3.82-24.el7.x86_64                                  12/22 
  Installing : 1:openssl-1.0.2k-19.el7.x86_64                             13/22 
  Installing : python-dateutil-1.5-7.el7.noarch                           14/22 
  Installing : python-enum34-1.0.4-1.el7.noarch                           15/22 
  Installing : python2-cryptography-1.7.2-2.el7.x86_64                    16/22 
  Installing : libwebp-0.3.0-7.el7.x86_64                                 17/22 
  Installing : python-pillow-2.0.0-19.gitd1c6db8.el7.x86_64               18/22 
  Installing : python-docutils-0.11-0.3.20130715svn7687.el7.noarch        19/22 
  Installing : python-s3transfer-0.1.13-1.el7.0.1.noarch                  20/22 
  Installing : awscli-1.14.28-5.el7_5.1.noarch                            21/22 
  Cleanup    : 1:openssl-libs-1.0.2k-16.el7.x86_64                        22/22 
  Verifying  : libwebp-0.3.0-7.el7.x86_64                                  1/22 
  Verifying  : python-enum34-1.0.4-1.el7.noarch                            2/22 
  Verifying  : python-docutils-0.11-0.3.20130715svn7687.el7.noarch         3/22 
  Verifying  : 1:openssl-libs-1.0.2k-19.el7.x86_64                         4/22 
  Verifying  : python-dateutil-1.5-7.el7.noarch                            5/22 
  Verifying  : 1:make-3.82-24.el7.x86_64                                   6/22 
  Verifying  : python-six-1.9.0-2.el7.noarch                               7/22 
  Verifying  : python-s3transfer-0.1.13-1.el7.0.1.noarch                   8/22 
  Verifying  : python-idna-2.4-1.el7.noarch                                9/22 
  Verifying  : python-ply-3.4-11.el7.noarch                               10/22 
  Verifying  : 1:openssl-1.0.2k-19.el7.x86_64                             11/22 
  Verifying  : python-cffi-1.6.0-5.el7.x86_64                             12/22 
  Verifying  : awscli-1.14.28-5.el7_5.1.noarch                            13/22 
  Verifying  : python-pillow-2.0.0-19.gitd1c6db8.el7.x86_64               14/22 
  Verifying  : jbigkit-libs-2.0-11.el7.x86_64                             15/22 
  Verifying  : python-pycparser-2.14-1.el7.noarch                         16/22 
  Verifying  : libyaml-0.1.4-11.el7_0.x86_64                              17/22 
  Verifying  : libtiff-4.0.3-32.el7.x86_64                                18/22 
  Verifying  : python2-pyasn1-0.1.9-7.el7.noarch                          19/22 
  Verifying  : PyYAML-3.10-11.el7.x86_64                                  20/22 
  Verifying  : python2-cryptography-1.7.2-2.el7.x86_64                    21/22 
  Verifying  : 1:openssl-libs-1.0.2k-16.el7.x86_64                        22/22 

Installed:
  awscli.noarch 0:1.14.28-5.el7_5.1                                             

Dependency Installed:
  PyYAML.x86_64 0:3.10-11.el7                                                   
  jbigkit-libs.x86_64 0:2.0-11.el7                                              
  libtiff.x86_64 0:4.0.3-32.el7                                                 
  libwebp.x86_64 0:0.3.0-7.el7                                                  
  libyaml.x86_64 0:0.1.4-11.el7_0                                               
  make.x86_64 1:3.82-24.el7                                                     
  openssl.x86_64 1:1.0.2k-19.el7                                                
  python-cffi.x86_64 0:1.6.0-5.el7                                              
  python-dateutil.noarch 0:1.5-7.el7                                            
  python-docutils.noarch 0:0.11-0.3.20130715svn7687.el7                         
  python-enum34.noarch 0:1.0.4-1.el7                                            
  python-idna.noarch 0:2.4-1.el7                                                
  python-pillow.x86_64 0:2.0.0-19.gitd1c6db8.el7                                
  python-ply.noarch 0:3.4-11.el7                                                
  python-pycparser.noarch 0:2.14-1.el7                                          
  python-s3transfer.noarch 0:0.1.13-1.el7.0.1                                   
  python-six.noarch 0:1.9.0-2.el7                                               
  python2-cryptography.x86_64 0:1.7.2-2.el7                                     
  python2-pyasn1.noarch 0:0.1.9-7.el7                                           

Dependency Updated:
  openssl-libs.x86_64 1:1.0.2k-19.el7                                           

Complete!</msg>
<status status="PASS" endtime="20191025 23:46:56.392" starttime="20191025 23:46:56.390"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:46:56.393" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:46:56.393" starttime="20191025 23:46:56.392"></status>
</kw>
<status status="PASS" endtime="20191025 23:46:56.394" starttime="20191025 23:46:23.408"></status>
</kw>
<status status="PASS" endtime="20191025 23:46:56.394" starttime="20191025 23:46:23.407"></status>
</kw>
<status status="PASS" endtime="20191025 23:46:56.394" starttime="20191025 23:46:23.406"></status>
</kw>
<status status="PASS" endtime="20191025 23:46:56.395" starttime="20191025 23:46:23.195"></status>
</kw>
<status status="PASS" endtime="20191025 23:46:56.395" starttime="20191025 23:46:23.195"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:46:56.402" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:46:56.410" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:46:56.410" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191025 23:46:56.410" starttime="20191025 23:46:56.400"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:46:56.412" level="INFO">s3g</msg>
<status status="PASS" endtime="20191025 23:46:56.412" starttime="20191025 23:46:56.411"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:46:56.413" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:46:56.413" starttime="20191025 23:46:56.412"></status>
</kw>
<msg timestamp="20191025 23:46:56.414" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191025 23:46:56.414" starttime="20191025 23:46:56.399"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191025 23:46:56.417" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:46:56.417" starttime="20191025 23:46:56.414"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:46:56.422" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:46:56.442" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:46:56.443" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:46:56.443" starttime="20191025 23:46:56.420"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:46:56.445" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:46:56.445" starttime="20191025 23:46:56.444"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:46:56.446" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:46:56.446" starttime="20191025 23:46:56.445"></status>
</kw>
<status status="PASS" endtime="20191025 23:46:56.447" starttime="20191025 23:46:56.418"></status>
</kw>
<status status="PASS" endtime="20191025 23:46:56.447" starttime="20191025 23:46:56.417"></status>
</kw>
<status status="PASS" endtime="20191025 23:46:56.448" starttime="20191025 23:46:56.398"></status>
</kw>
<status status="PASS" endtime="20191025 23:46:56.448" starttime="20191025 23:46:56.397"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:46:56.453" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:46:59.440" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:46:59.440" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:46:59.440" starttime="20191025 23:46:56.451"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:46:59.442" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
awsAccessKey=testuser/s3g@EXAMPLE.COM
awsSecret=c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671</msg>
<status status="PASS" endtime="20191025 23:46:59.442" starttime="20191025 23:46:59.441"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:46:59.443" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:46:59.443" starttime="20191025 23:46:59.442"></status>
</kw>
<msg timestamp="20191025 23:46:59.444" level="INFO">${result} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:46:59.444" starttime="20191025 23:46:56.450"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsAccessKey=).*</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:46:59.445" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:46:59.446" starttime="20191025 23:46:59.444"></status>
</kw>
<kw name="Get Variable Value" library="BuiltIn">
<doc>Returns variable value or ``default`` if the variable does not exist.</doc>
<arguments>
<arg>${accessKey}</arg>
<arg>sdsdasaasdasd</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:46:59.447" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:46:59.447" starttime="20191025 23:46:59.446"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsSecret=).*</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:46:59.448" level="INFO">${secret} = [u'c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671']</msg>
<status status="PASS" endtime="20191025 23:46:59.448" starttime="20191025 23:46:59.447"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${accessKey[0]}</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:46:59.449" level="INFO">${accessKey} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:46:59.449" starttime="20191025 23:46:59.448"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${secret[0]}</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:46:59.450" level="INFO">${secret} = c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671</msg>
<status status="PASS" endtime="20191025 23:46:59.450" starttime="20191025 23:46:59.450"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set default.s3.signature_version s3v4</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:46:59.454" level="INFO">Running command 'aws configure set default.s3.signature_version s3v4 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:46:59.960" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:46:59.960" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:46:59.960" starttime="20191025 23:46:59.451"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:46:59.961" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:46:59.962" starttime="20191025 23:46:59.961"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:46:59.962" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:46:59.962" starttime="20191025 23:46:59.962"></status>
</kw>
<status status="PASS" endtime="20191025 23:46:59.963" starttime="20191025 23:46:59.451"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_access_key_id ${accessKey}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:46:59.966" level="INFO">Running command 'aws configure set aws_access_key_id testuser/s3g@EXAMPLE.COM 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:47:00.417" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:47:00.417" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:47:00.418" starttime="20191025 23:46:59.964"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:47:00.419" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:47:00.419" starttime="20191025 23:47:00.418"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:47:00.419" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:47:00.420" starttime="20191025 23:47:00.419"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:00.420" starttime="20191025 23:46:59.963"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_secret_access_key ${secret}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:47:00.422" level="INFO">Running command 'aws configure set aws_secret_access_key c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:47:00.907" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:47:00.907" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:47:00.908" starttime="20191025 23:47:00.421"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:47:00.909" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:47:00.910" starttime="20191025 23:47:00.908"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:47:00.911" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:47:00.911" starttime="20191025 23:47:00.910"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:00.912" starttime="20191025 23:47:00.420"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set region us-west-1</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:47:00.916" level="INFO">Running command 'aws configure set region us-west-1 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:47:01.382" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:47:01.382" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:47:01.382" starttime="20191025 23:47:00.913"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:47:01.384" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:47:01.384" starttime="20191025 23:47:01.383"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:47:01.385" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:47:01.385" starttime="20191025 23:47:01.385"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:01.386" starttime="20191025 23:47:00.912"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:01.386" starttime="20191025 23:46:56.449"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:01.386" starttime="20191025 23:46:56.448"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'false'</arg>
<arg>Setup dummy credentials for S3</arg>
</arguments>
<status status="PASS" endtime="20191025 23:47:01.388" starttime="20191025 23:47:01.387"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:01.388" starttime="20191025 23:46:56.396"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:01.388" starttime="20191025 23:46:56.395"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${BUCKET}' == 'generated'</arg>
<arg>Create bucket</arg>
</arguments>
<kw name="Create bucket" library="commonawslib">
<kw name="Generate Random String" library="String">
<doc>Generates a string with a desired ``length`` from the given ``chars``.</doc>
<arguments>
<arg>5</arg>
<arg>[NUMBERS]</arg>
</arguments>
<assign>
<var>${postfix}</var>
</assign>
<msg timestamp="20191025 23:47:01.391" level="INFO">${postfix} = 98663</msg>
<status status="PASS" endtime="20191025 23:47:01.391" starttime="20191025 23:47:01.390"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${BUCKET}</arg>
<arg>bucket-${postfix}</arg>
</arguments>
<msg timestamp="20191025 23:47:01.392" level="INFO">${BUCKET} = bucket-98663</msg>
<status status="PASS" endtime="20191025 23:47:01.392" starttime="20191025 23:47:01.391"></status>
</kw>
<kw name="Execute AWSS3APICli" library="commonawslib">
<arguments>
<arg>create-bucket --bucket ${BUCKET}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws s3api --endpoint-url ${ENDPOINT_URL} ${command}</arg>
</arguments>
<assign>
<var>${output}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:47:01.397" level="INFO">Running command 'aws s3api --endpoint-url http://s3g:9878 create-bucket --bucket bucket-98663 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:47:08.624" level="INFO">${rc} = 255</msg>
<msg timestamp="20191025 23:47:08.625" level="INFO">${output} = 
An error occurred (500) when calling the CreateBucket operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:47:08.625" starttime="20191025 23:47:01.394"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:47:08.627" level="INFO">
An error occurred (500) when calling the CreateBucket operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:47:08.627" starttime="20191025 23:47:08.626"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:47:08.628" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191025 23:47:08.629" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191025 23:47:08.629" starttime="20191025 23:47:08.627"></status>
</kw>
<status status="FAIL" endtime="20191025 23:47:08.630" starttime="20191025 23:47:01.393"></status>
</kw>
<status status="FAIL" endtime="20191025 23:47:08.630" starttime="20191025 23:47:01.393"></status>
</kw>
<status status="FAIL" endtime="20191025 23:47:08.630" starttime="20191025 23:47:01.389"></status>
</kw>
<status status="FAIL" endtime="20191025 23:47:08.630" starttime="20191025 23:47:01.388"></status>
</kw>
<status status="FAIL" endtime="20191025 23:47:08.631" starttime="20191025 23:46:23.194"></status>
</kw>
<test id="s1-s1-t1" name="File upload and directory list">
<status status="FAIL" endtime="20191025 23:47:08.632" critical="yes" starttime="20191025 23:47:08.631">Parent suite setup failed:
255 != 0</status>
</test>
<doc>S3 gateway test with aws cli</doc>
<status status="FAIL" endtime="20191025 23:47:08.633" starttime="20191025 23:46:23.187">Suite setup failed:
255 != 0</status>
</suite>
<suite source="/opt/hadoop/smoketest/s3/bucketcreate.robot" id="s1-s2" name="Bucketcreate">
<test id="s1-s2-t1" name="Create bucket which already exists">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:47:08.653" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:47:08.660" level="INFO">${rc} = 1</msg>
<msg timestamp="20191025 23:47:08.661" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191025 23:47:08.661" starttime="20191025 23:47:08.651"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191025 23:47:08.662" starttime="20191025 23:47:08.661"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:47:08.665" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:47:08.859" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:47:08.859" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.002'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191025 23:47:08.859" starttime="20191025 23:47:08.663"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:47:08.866" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:47:09.343" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:47:09.344" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirrors.xtom.com
 * epel: mirror.prgmr.com
 * extras: mirror.fileplanet.com
 * updates: mirrors.xtom.com
Package ...</msg>
<status status="PASS" endtime="20191025 23:47:09.344" starttime="20191025 23:47:08.863"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:47:09.346" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirrors.xtom.com
 * epel: mirror.prgmr.com
 * extras: mirror.fileplanet.com
 * updates: mirrors.xtom.com
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191025 23:47:09.346" starttime="20191025 23:47:09.345"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:47:09.347" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:47:09.347" starttime="20191025 23:47:09.346"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:09.348" starttime="20191025 23:47:08.862"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:09.348" starttime="20191025 23:47:08.861"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:09.349" starttime="20191025 23:47:08.860"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:09.349" starttime="20191025 23:47:08.650"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:09.349" starttime="20191025 23:47:08.649"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:47:09.357" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:47:09.364" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:47:09.364" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191025 23:47:09.364" starttime="20191025 23:47:09.354"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:47:09.366" level="INFO">s3g</msg>
<status status="PASS" endtime="20191025 23:47:09.366" starttime="20191025 23:47:09.365"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:47:09.367" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:47:09.368" starttime="20191025 23:47:09.367"></status>
</kw>
<msg timestamp="20191025 23:47:09.368" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191025 23:47:09.368" starttime="20191025 23:47:09.353"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191025 23:47:09.372" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:47:09.372" starttime="20191025 23:47:09.369"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:47:09.377" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:47:09.396" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:47:09.396" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:47:09.396" starttime="20191025 23:47:09.375"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:47:09.399" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:47:09.399" starttime="20191025 23:47:09.397"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:47:09.400" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:47:09.400" starttime="20191025 23:47:09.399"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:09.401" starttime="20191025 23:47:09.373"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:09.401" starttime="20191025 23:47:09.372"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:09.402" starttime="20191025 23:47:09.353"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:09.402" starttime="20191025 23:47:09.352"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:47:09.407" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:47:12.077" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:47:12.078" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:47:12.078" starttime="20191025 23:47:09.405"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:47:12.080" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
awsAccessKey=testuser/s3g@EXAMPLE.COM
awsSecret=c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671</msg>
<status status="PASS" endtime="20191025 23:47:12.080" starttime="20191025 23:47:12.079"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:47:12.081" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:47:12.082" starttime="20191025 23:47:12.081"></status>
</kw>
<msg timestamp="20191025 23:47:12.082" level="INFO">${result} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:47:12.083" starttime="20191025 23:47:09.404"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsAccessKey=).*</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:47:12.084" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:47:12.084" starttime="20191025 23:47:12.083"></status>
</kw>
<kw name="Get Variable Value" library="BuiltIn">
<doc>Returns variable value or ``default`` if the variable does not exist.</doc>
<arguments>
<arg>${accessKey}</arg>
<arg>sdsdasaasdasd</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:47:12.086" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:47:12.086" starttime="20191025 23:47:12.084"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsSecret=).*</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:47:12.087" level="INFO">${secret} = [u'c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671']</msg>
<status status="PASS" endtime="20191025 23:47:12.087" starttime="20191025 23:47:12.086"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${accessKey[0]}</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:47:12.089" level="INFO">${accessKey} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:47:12.089" starttime="20191025 23:47:12.087"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${secret[0]}</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:47:12.090" level="INFO">${secret} = c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671</msg>
<status status="PASS" endtime="20191025 23:47:12.090" starttime="20191025 23:47:12.089"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set default.s3.signature_version s3v4</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:47:12.094" level="INFO">Running command 'aws configure set default.s3.signature_version s3v4 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:47:12.641" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:47:12.641" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:47:12.641" starttime="20191025 23:47:12.091"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:47:12.643" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:47:12.644" starttime="20191025 23:47:12.642"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:47:12.645" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:47:12.645" starttime="20191025 23:47:12.644"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:12.645" starttime="20191025 23:47:12.090"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_access_key_id ${accessKey}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:47:12.649" level="INFO">Running command 'aws configure set aws_access_key_id testuser/s3g@EXAMPLE.COM 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:47:13.172" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:47:13.172" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:47:13.172" starttime="20191025 23:47:12.647"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:47:13.174" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:47:13.174" starttime="20191025 23:47:13.173"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:47:13.175" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:47:13.175" starttime="20191025 23:47:13.174"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:13.176" starttime="20191025 23:47:12.646"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_secret_access_key ${secret}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:47:13.179" level="INFO">Running command 'aws configure set aws_secret_access_key c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:47:13.659" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:47:13.659" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:47:13.660" starttime="20191025 23:47:13.177"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:47:13.661" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:47:13.662" starttime="20191025 23:47:13.660"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:47:13.663" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:47:13.663" starttime="20191025 23:47:13.662"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:13.664" starttime="20191025 23:47:13.176"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set region us-west-1</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:47:13.668" level="INFO">Running command 'aws configure set region us-west-1 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:47:14.148" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:47:14.148" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:47:14.149" starttime="20191025 23:47:13.665"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:47:14.151" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:47:14.151" starttime="20191025 23:47:14.150"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:47:14.153" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:47:14.153" starttime="20191025 23:47:14.151"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:14.154" starttime="20191025 23:47:13.664"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:14.154" starttime="20191025 23:47:09.403"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:14.154" starttime="20191025 23:47:09.402"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'false'</arg>
<arg>Setup dummy credentials for S3</arg>
</arguments>
<status status="PASS" endtime="20191025 23:47:14.155" starttime="20191025 23:47:14.155"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:14.156" starttime="20191025 23:47:09.351"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:14.156" starttime="20191025 23:47:09.349"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${BUCKET}' == 'generated'</arg>
<arg>Create bucket</arg>
</arguments>
<kw name="Create bucket" library="commonawslib">
<kw name="Generate Random String" library="String">
<doc>Generates a string with a desired ``length`` from the given ``chars``.</doc>
<arguments>
<arg>5</arg>
<arg>[NUMBERS]</arg>
</arguments>
<assign>
<var>${postfix}</var>
</assign>
<msg timestamp="20191025 23:47:14.159" level="INFO">${postfix} = 43412</msg>
<status status="PASS" endtime="20191025 23:47:14.159" starttime="20191025 23:47:14.158"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${BUCKET}</arg>
<arg>bucket-${postfix}</arg>
</arguments>
<msg timestamp="20191025 23:47:14.160" level="INFO">${BUCKET} = bucket-43412</msg>
<status status="PASS" endtime="20191025 23:47:14.161" starttime="20191025 23:47:14.159"></status>
</kw>
<kw name="Execute AWSS3APICli" library="commonawslib">
<arguments>
<arg>create-bucket --bucket ${BUCKET}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws s3api --endpoint-url ${ENDPOINT_URL} ${command}</arg>
</arguments>
<assign>
<var>${output}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:47:14.165" level="INFO">Running command 'aws s3api --endpoint-url http://s3g:9878 create-bucket --bucket bucket-43412 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:47:20.502" level="INFO">${rc} = 255</msg>
<msg timestamp="20191025 23:47:20.502" level="INFO">${output} = 
An error occurred (500) when calling the CreateBucket operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:47:20.503" starttime="20191025 23:47:14.163"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:47:20.505" level="INFO">
An error occurred (500) when calling the CreateBucket operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:47:20.505" starttime="20191025 23:47:20.503"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:47:20.506" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191025 23:47:20.507" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191025 23:47:20.507" starttime="20191025 23:47:20.505"></status>
</kw>
<status status="FAIL" endtime="20191025 23:47:20.507" starttime="20191025 23:47:14.162"></status>
</kw>
<status status="FAIL" endtime="20191025 23:47:20.508" starttime="20191025 23:47:14.161"></status>
</kw>
<status status="FAIL" endtime="20191025 23:47:20.508" starttime="20191025 23:47:14.157"></status>
</kw>
<status status="FAIL" endtime="20191025 23:47:20.508" starttime="20191025 23:47:14.156"></status>
</kw>
<status status="FAIL" endtime="20191025 23:47:20.509" starttime="20191025 23:47:08.648"></status>
</kw>
<status status="FAIL" endtime="20191025 23:47:20.509" critical="yes" starttime="20191025 23:47:08.647">Setup failed:
255 != 0</status>
</test>
<doc>S3 gateway test with aws cli</doc>
<status status="FAIL" endtime="20191025 23:47:20.511" starttime="20191025 23:47:08.635"></status>
</suite>
<suite source="/opt/hadoop/smoketest/s3/buckethead.robot" id="s1-s3" name="Buckethead">
<test id="s1-s3-t1" name="Head Bucket not existent">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:47:20.533" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:47:20.540" level="INFO">${rc} = 1</msg>
<msg timestamp="20191025 23:47:20.540" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191025 23:47:20.540" starttime="20191025 23:47:20.531"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191025 23:47:20.542" starttime="20191025 23:47:20.541"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:47:20.545" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:47:20.738" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:47:20.738" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.002'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191025 23:47:20.738" starttime="20191025 23:47:20.543"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:47:20.745" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:47:21.301" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:47:21.301" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirrors.xtom.com
 * epel: mirror.prgmr.com
 * extras: mirror.fileplanet.com
 * updates: mirrors.xtom.com
Package ...</msg>
<status status="PASS" endtime="20191025 23:47:21.301" starttime="20191025 23:47:20.742"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:47:21.303" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirrors.xtom.com
 * epel: mirror.prgmr.com
 * extras: mirror.fileplanet.com
 * updates: mirrors.xtom.com
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191025 23:47:21.303" starttime="20191025 23:47:21.302"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:47:21.304" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:47:21.305" starttime="20191025 23:47:21.304"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:21.305" starttime="20191025 23:47:20.741"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:21.305" starttime="20191025 23:47:20.741"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:21.306" starttime="20191025 23:47:20.739"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:21.306" starttime="20191025 23:47:20.529"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:21.306" starttime="20191025 23:47:20.529"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:47:21.313" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:47:21.320" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:47:21.320" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191025 23:47:21.320" starttime="20191025 23:47:21.311"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:47:21.322" level="INFO">s3g</msg>
<status status="PASS" endtime="20191025 23:47:21.322" starttime="20191025 23:47:21.321"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:47:21.322" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:47:21.323" starttime="20191025 23:47:21.322"></status>
</kw>
<msg timestamp="20191025 23:47:21.323" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191025 23:47:21.323" starttime="20191025 23:47:21.310"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191025 23:47:21.325" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:47:21.325" starttime="20191025 23:47:21.323"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:47:21.328" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:47:21.343" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:47:21.343" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:47:21.343" starttime="20191025 23:47:21.327"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:47:21.344" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:47:21.344" starttime="20191025 23:47:21.344"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:47:21.345" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:47:21.345" starttime="20191025 23:47:21.345"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:21.346" starttime="20191025 23:47:21.326"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:21.346" starttime="20191025 23:47:21.325"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:21.346" starttime="20191025 23:47:21.309"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:21.346" starttime="20191025 23:47:21.308"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:47:21.349" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:47:24.114" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:47:24.115" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:47:24.115" starttime="20191025 23:47:21.348"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:47:24.117" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
awsAccessKey=testuser/s3g@EXAMPLE.COM
awsSecret=c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671</msg>
<status status="PASS" endtime="20191025 23:47:24.117" starttime="20191025 23:47:24.116"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:47:24.119" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:47:24.119" starttime="20191025 23:47:24.117"></status>
</kw>
<msg timestamp="20191025 23:47:24.120" level="INFO">${result} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:47:24.120" starttime="20191025 23:47:21.347"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsAccessKey=).*</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:47:24.121" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:47:24.121" starttime="20191025 23:47:24.120"></status>
</kw>
<kw name="Get Variable Value" library="BuiltIn">
<doc>Returns variable value or ``default`` if the variable does not exist.</doc>
<arguments>
<arg>${accessKey}</arg>
<arg>sdsdasaasdasd</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:47:24.123" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:47:24.123" starttime="20191025 23:47:24.122"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsSecret=).*</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:47:24.124" level="INFO">${secret} = [u'c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671']</msg>
<status status="PASS" endtime="20191025 23:47:24.124" starttime="20191025 23:47:24.123"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${accessKey[0]}</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:47:24.125" level="INFO">${accessKey} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:47:24.126" starttime="20191025 23:47:24.124"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${secret[0]}</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:47:24.127" level="INFO">${secret} = c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671</msg>
<status status="PASS" endtime="20191025 23:47:24.127" starttime="20191025 23:47:24.126"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set default.s3.signature_version s3v4</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:47:24.131" level="INFO">Running command 'aws configure set default.s3.signature_version s3v4 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:47:24.565" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:47:24.565" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:47:24.565" starttime="20191025 23:47:24.128"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:47:24.567" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:47:24.567" starttime="20191025 23:47:24.566"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:47:24.568" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:47:24.568" starttime="20191025 23:47:24.567"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:24.569" starttime="20191025 23:47:24.127"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_access_key_id ${accessKey}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:47:24.573" level="INFO">Running command 'aws configure set aws_access_key_id testuser/s3g@EXAMPLE.COM 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:47:25.009" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:47:25.010" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:47:25.010" starttime="20191025 23:47:24.570"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:47:25.012" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:47:25.012" starttime="20191025 23:47:25.011"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:47:25.013" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:47:25.013" starttime="20191025 23:47:25.012"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:25.014" starttime="20191025 23:47:24.569"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_secret_access_key ${secret}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:47:25.018" level="INFO">Running command 'aws configure set aws_secret_access_key c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:47:25.483" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:47:25.484" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:47:25.484" starttime="20191025 23:47:25.016"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:47:25.486" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:47:25.486" starttime="20191025 23:47:25.485"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:47:25.487" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:47:25.487" starttime="20191025 23:47:25.486"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:25.488" starttime="20191025 23:47:25.014"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set region us-west-1</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:47:25.492" level="INFO">Running command 'aws configure set region us-west-1 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:47:25.927" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:47:25.927" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:47:25.928" starttime="20191025 23:47:25.489"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:47:25.930" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:47:25.930" starttime="20191025 23:47:25.928"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:47:25.931" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:47:25.931" starttime="20191025 23:47:25.930"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:25.932" starttime="20191025 23:47:25.488"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:25.932" starttime="20191025 23:47:21.347"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:25.932" starttime="20191025 23:47:21.346"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'false'</arg>
<arg>Setup dummy credentials for S3</arg>
</arguments>
<status status="PASS" endtime="20191025 23:47:25.934" starttime="20191025 23:47:25.933"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:25.934" starttime="20191025 23:47:21.308"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:25.934" starttime="20191025 23:47:21.307"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${BUCKET}' == 'generated'</arg>
<arg>Create bucket</arg>
</arguments>
<kw name="Create bucket" library="commonawslib">
<kw name="Generate Random String" library="String">
<doc>Generates a string with a desired ``length`` from the given ``chars``.</doc>
<arguments>
<arg>5</arg>
<arg>[NUMBERS]</arg>
</arguments>
<assign>
<var>${postfix}</var>
</assign>
<msg timestamp="20191025 23:47:25.938" level="INFO">${postfix} = 43653</msg>
<status status="PASS" endtime="20191025 23:47:25.938" starttime="20191025 23:47:25.937"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${BUCKET}</arg>
<arg>bucket-${postfix}</arg>
</arguments>
<msg timestamp="20191025 23:47:25.939" level="INFO">${BUCKET} = bucket-43653</msg>
<status status="PASS" endtime="20191025 23:47:25.939" starttime="20191025 23:47:25.938"></status>
</kw>
<kw name="Execute AWSS3APICli" library="commonawslib">
<arguments>
<arg>create-bucket --bucket ${BUCKET}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws s3api --endpoint-url ${ENDPOINT_URL} ${command}</arg>
</arguments>
<assign>
<var>${output}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:47:25.944" level="INFO">Running command 'aws s3api --endpoint-url http://s3g:9878 create-bucket --bucket bucket-43653 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:47:37.621" level="INFO">${rc} = 255</msg>
<msg timestamp="20191025 23:47:37.621" level="INFO">${output} = 
An error occurred (500) when calling the CreateBucket operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:47:37.621" starttime="20191025 23:47:25.942"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:47:37.624" level="INFO">
An error occurred (500) when calling the CreateBucket operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:47:37.624" starttime="20191025 23:47:37.622"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:47:37.625" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191025 23:47:37.626" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191025 23:47:37.626" starttime="20191025 23:47:37.625"></status>
</kw>
<status status="FAIL" endtime="20191025 23:47:37.627" starttime="20191025 23:47:25.940"></status>
</kw>
<status status="FAIL" endtime="20191025 23:47:37.627" starttime="20191025 23:47:25.940"></status>
</kw>
<status status="FAIL" endtime="20191025 23:47:37.628" starttime="20191025 23:47:25.936"></status>
</kw>
<status status="FAIL" endtime="20191025 23:47:37.628" starttime="20191025 23:47:25.935"></status>
</kw>
<status status="FAIL" endtime="20191025 23:47:37.628" starttime="20191025 23:47:20.528"></status>
</kw>
<status status="FAIL" endtime="20191025 23:47:37.629" critical="yes" starttime="20191025 23:47:20.527">Setup failed:
255 != 0</status>
</test>
<doc>S3 gateway test with aws cli</doc>
<status status="FAIL" endtime="20191025 23:47:37.630" starttime="20191025 23:47:20.514"></status>
</suite>
<suite source="/opt/hadoop/smoketest/s3/bucketlist.robot" id="s1-s4" name="Bucketlist">
<test id="s1-s4-t1" name="List buckets">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:47:37.652" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:47:37.659" level="INFO">${rc} = 1</msg>
<msg timestamp="20191025 23:47:37.659" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191025 23:47:37.659" starttime="20191025 23:47:37.649"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191025 23:47:37.662" starttime="20191025 23:47:37.660"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:47:37.664" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:47:37.860" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:47:37.860" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.002'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191025 23:47:37.860" starttime="20191025 23:47:37.662"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:47:37.867" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:47:38.382" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:47:38.383" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirrors.xtom.com
 * epel: mirror.prgmr.com
 * extras: mirror.fileplanet.com
 * updates: mirrors.xtom.com
Package ...</msg>
<status status="PASS" endtime="20191025 23:47:38.383" starttime="20191025 23:47:37.865"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:47:38.385" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirrors.xtom.com
 * epel: mirror.prgmr.com
 * extras: mirror.fileplanet.com
 * updates: mirrors.xtom.com
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191025 23:47:38.385" starttime="20191025 23:47:38.384"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:47:38.386" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:47:38.386" starttime="20191025 23:47:38.385"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:38.387" starttime="20191025 23:47:37.864"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:38.387" starttime="20191025 23:47:37.863"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:38.387" starttime="20191025 23:47:37.861"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:38.388" starttime="20191025 23:47:37.647"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:38.388" starttime="20191025 23:47:37.646"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:47:38.395" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:47:38.402" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:47:38.403" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191025 23:47:38.403" starttime="20191025 23:47:38.393"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:47:38.404" level="INFO">s3g</msg>
<status status="PASS" endtime="20191025 23:47:38.405" starttime="20191025 23:47:38.403"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:47:38.406" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:47:38.406" starttime="20191025 23:47:38.405"></status>
</kw>
<msg timestamp="20191025 23:47:38.407" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191025 23:47:38.407" starttime="20191025 23:47:38.392"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191025 23:47:38.410" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:47:38.410" starttime="20191025 23:47:38.407"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:47:38.415" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:47:38.433" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:47:38.433" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:47:38.433" starttime="20191025 23:47:38.413"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:47:38.435" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:47:38.435" starttime="20191025 23:47:38.434"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:47:38.436" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:47:38.436" starttime="20191025 23:47:38.435"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:38.437" starttime="20191025 23:47:38.412"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:38.437" starttime="20191025 23:47:38.411"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:38.437" starttime="20191025 23:47:38.391"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:38.438" starttime="20191025 23:47:38.390"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:47:38.443" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:47:41.144" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:47:41.144" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:47:41.145" starttime="20191025 23:47:38.441"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:47:41.147" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
awsAccessKey=testuser/s3g@EXAMPLE.COM
awsSecret=c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671</msg>
<status status="PASS" endtime="20191025 23:47:41.147" starttime="20191025 23:47:41.146"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:47:41.150" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:47:41.150" starttime="20191025 23:47:41.148"></status>
</kw>
<msg timestamp="20191025 23:47:41.151" level="INFO">${result} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:47:41.151" starttime="20191025 23:47:38.440"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsAccessKey=).*</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:47:41.153" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:47:41.153" starttime="20191025 23:47:41.152"></status>
</kw>
<kw name="Get Variable Value" library="BuiltIn">
<doc>Returns variable value or ``default`` if the variable does not exist.</doc>
<arguments>
<arg>${accessKey}</arg>
<arg>sdsdasaasdasd</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:47:41.155" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:47:41.155" starttime="20191025 23:47:41.154"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsSecret=).*</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:47:41.156" level="INFO">${secret} = [u'c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671']</msg>
<status status="PASS" endtime="20191025 23:47:41.156" starttime="20191025 23:47:41.155"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${accessKey[0]}</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:47:41.158" level="INFO">${accessKey} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:47:41.158" starttime="20191025 23:47:41.157"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${secret[0]}</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:47:41.159" level="INFO">${secret} = c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671</msg>
<status status="PASS" endtime="20191025 23:47:41.159" starttime="20191025 23:47:41.158"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set default.s3.signature_version s3v4</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:47:41.163" level="INFO">Running command 'aws configure set default.s3.signature_version s3v4 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:47:41.659" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:47:41.659" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:47:41.659" starttime="20191025 23:47:41.160"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:47:41.662" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:47:41.662" starttime="20191025 23:47:41.661"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:47:41.663" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:47:41.663" starttime="20191025 23:47:41.662"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:41.664" starttime="20191025 23:47:41.160"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_access_key_id ${accessKey}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:47:41.668" level="INFO">Running command 'aws configure set aws_access_key_id testuser/s3g@EXAMPLE.COM 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:47:42.096" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:47:42.096" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:47:42.096" starttime="20191025 23:47:41.665"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:47:42.098" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:47:42.099" starttime="20191025 23:47:42.097"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:47:42.100" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:47:42.100" starttime="20191025 23:47:42.099"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:42.100" starttime="20191025 23:47:41.664"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_secret_access_key ${secret}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:47:42.104" level="INFO">Running command 'aws configure set aws_secret_access_key c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:47:42.562" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:47:42.562" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:47:42.562" starttime="20191025 23:47:42.102"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:47:42.564" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:47:42.564" starttime="20191025 23:47:42.563"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:47:42.565" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:47:42.566" starttime="20191025 23:47:42.565"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:42.566" starttime="20191025 23:47:42.101"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set region us-west-1</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:47:42.570" level="INFO">Running command 'aws configure set region us-west-1 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:47:43.074" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:47:43.074" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:47:43.074" starttime="20191025 23:47:42.567"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:47:43.076" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:47:43.077" starttime="20191025 23:47:43.075"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:47:43.078" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:47:43.078" starttime="20191025 23:47:43.077"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:43.079" starttime="20191025 23:47:42.566"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:43.079" starttime="20191025 23:47:38.439"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:43.079" starttime="20191025 23:47:38.438"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'false'</arg>
<arg>Setup dummy credentials for S3</arg>
</arguments>
<status status="PASS" endtime="20191025 23:47:43.081" starttime="20191025 23:47:43.080"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:43.081" starttime="20191025 23:47:38.389"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:43.081" starttime="20191025 23:47:38.388"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${BUCKET}' == 'generated'</arg>
<arg>Create bucket</arg>
</arguments>
<kw name="Create bucket" library="commonawslib">
<kw name="Generate Random String" library="String">
<doc>Generates a string with a desired ``length`` from the given ``chars``.</doc>
<arguments>
<arg>5</arg>
<arg>[NUMBERS]</arg>
</arguments>
<assign>
<var>${postfix}</var>
</assign>
<msg timestamp="20191025 23:47:43.084" level="INFO">${postfix} = 18104</msg>
<status status="PASS" endtime="20191025 23:47:43.085" starttime="20191025 23:47:43.084"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${BUCKET}</arg>
<arg>bucket-${postfix}</arg>
</arguments>
<msg timestamp="20191025 23:47:43.086" level="INFO">${BUCKET} = bucket-18104</msg>
<status status="PASS" endtime="20191025 23:47:43.086" starttime="20191025 23:47:43.085"></status>
</kw>
<kw name="Execute AWSS3APICli" library="commonawslib">
<arguments>
<arg>create-bucket --bucket ${BUCKET}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws s3api --endpoint-url ${ENDPOINT_URL} ${command}</arg>
</arguments>
<assign>
<var>${output}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:47:43.091" level="INFO">Running command 'aws s3api --endpoint-url http://s3g:9878 create-bucket --bucket bucket-18104 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:47:50.643" level="INFO">${rc} = 255</msg>
<msg timestamp="20191025 23:47:50.644" level="INFO">${output} = 
An error occurred (500) when calling the CreateBucket operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:47:50.644" starttime="20191025 23:47:43.089"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:47:50.646" level="INFO">
An error occurred (500) when calling the CreateBucket operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:47:50.647" starttime="20191025 23:47:50.645"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:47:50.648" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191025 23:47:50.649" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191025 23:47:50.649" starttime="20191025 23:47:50.647"></status>
</kw>
<status status="FAIL" endtime="20191025 23:47:50.650" starttime="20191025 23:47:43.087"></status>
</kw>
<status status="FAIL" endtime="20191025 23:47:50.650" starttime="20191025 23:47:43.086"></status>
</kw>
<status status="FAIL" endtime="20191025 23:47:50.650" starttime="20191025 23:47:43.083"></status>
</kw>
<status status="FAIL" endtime="20191025 23:47:50.650" starttime="20191025 23:47:43.082"></status>
</kw>
<status status="FAIL" endtime="20191025 23:47:50.651" starttime="20191025 23:47:37.646"></status>
</kw>
<status status="FAIL" endtime="20191025 23:47:50.651" critical="yes" starttime="20191025 23:47:37.645">Setup failed:
255 != 0</status>
</test>
<doc>S3 gateway test with aws cli</doc>
<status status="FAIL" endtime="20191025 23:47:50.653" starttime="20191025 23:47:37.633"></status>
</suite>
<suite source="/opt/hadoop/smoketest/s3/MultipartUpload.robot" id="s1-s5" name="MultipartUpload">
<test id="s1-s5-t1" name="Test Multipart Upload">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:47:50.673" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:47:50.680" level="INFO">${rc} = 1</msg>
<msg timestamp="20191025 23:47:50.680" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191025 23:47:50.680" starttime="20191025 23:47:50.671"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191025 23:47:50.683" starttime="20191025 23:47:50.681"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:47:50.685" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:47:50.879" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:47:50.879" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.002'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191025 23:47:50.879" starttime="20191025 23:47:50.683"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:47:50.884" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:47:51.390" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:47:51.390" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirrors.xtom.com
 * epel: mirror.prgmr.com
 * extras: mirror.fileplanet.com
 * updates: mirrors.xtom.com
Package ...</msg>
<status status="PASS" endtime="20191025 23:47:51.391" starttime="20191025 23:47:50.882"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:47:51.392" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirrors.xtom.com
 * epel: mirror.prgmr.com
 * extras: mirror.fileplanet.com
 * updates: mirrors.xtom.com
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191025 23:47:51.393" starttime="20191025 23:47:51.391"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:47:51.394" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:47:51.394" starttime="20191025 23:47:51.393"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:51.395" starttime="20191025 23:47:50.881"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:51.395" starttime="20191025 23:47:50.881"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:51.395" starttime="20191025 23:47:50.880"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:51.396" starttime="20191025 23:47:50.670"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:51.396" starttime="20191025 23:47:50.669"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:47:51.404" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:47:51.411" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:47:51.411" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191025 23:47:51.411" starttime="20191025 23:47:51.401"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:47:51.413" level="INFO">s3g</msg>
<status status="PASS" endtime="20191025 23:47:51.413" starttime="20191025 23:47:51.412"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:47:51.414" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:47:51.414" starttime="20191025 23:47:51.413"></status>
</kw>
<msg timestamp="20191025 23:47:51.415" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191025 23:47:51.415" starttime="20191025 23:47:51.400"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191025 23:47:51.418" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:47:51.419" starttime="20191025 23:47:51.416"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:47:51.423" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:47:51.442" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:47:51.442" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:47:51.442" starttime="20191025 23:47:51.421"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:47:51.444" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:47:51.444" starttime="20191025 23:47:51.443"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:47:51.445" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:47:51.446" starttime="20191025 23:47:51.445"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:51.446" starttime="20191025 23:47:51.420"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:51.446" starttime="20191025 23:47:51.419"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:51.447" starttime="20191025 23:47:51.399"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:51.447" starttime="20191025 23:47:51.398"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:47:51.452" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:47:54.190" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:47:54.191" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:47:54.191" starttime="20191025 23:47:51.450"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:47:54.192" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
awsAccessKey=testuser/s3g@EXAMPLE.COM
awsSecret=c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671</msg>
<status status="PASS" endtime="20191025 23:47:54.193" starttime="20191025 23:47:54.191"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:47:54.193" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:47:54.193" starttime="20191025 23:47:54.193"></status>
</kw>
<msg timestamp="20191025 23:47:54.194" level="INFO">${result} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:47:54.194" starttime="20191025 23:47:51.449"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsAccessKey=).*</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:47:54.194" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:47:54.195" starttime="20191025 23:47:54.194"></status>
</kw>
<kw name="Get Variable Value" library="BuiltIn">
<doc>Returns variable value or ``default`` if the variable does not exist.</doc>
<arguments>
<arg>${accessKey}</arg>
<arg>sdsdasaasdasd</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:47:54.195" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:47:54.195" starttime="20191025 23:47:54.195"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsSecret=).*</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:47:54.196" level="INFO">${secret} = [u'c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671']</msg>
<status status="PASS" endtime="20191025 23:47:54.196" starttime="20191025 23:47:54.196"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${accessKey[0]}</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:47:54.197" level="INFO">${accessKey} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:47:54.197" starttime="20191025 23:47:54.196"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${secret[0]}</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:47:54.198" level="INFO">${secret} = c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671</msg>
<status status="PASS" endtime="20191025 23:47:54.198" starttime="20191025 23:47:54.197"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set default.s3.signature_version s3v4</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:47:54.200" level="INFO">Running command 'aws configure set default.s3.signature_version s3v4 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:47:54.681" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:47:54.681" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:47:54.682" starttime="20191025 23:47:54.198"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:47:54.684" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:47:54.684" starttime="20191025 23:47:54.683"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:47:54.686" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:47:54.686" starttime="20191025 23:47:54.685"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:54.686" starttime="20191025 23:47:54.198"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_access_key_id ${accessKey}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:47:54.691" level="INFO">Running command 'aws configure set aws_access_key_id testuser/s3g@EXAMPLE.COM 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:47:55.231" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:47:55.232" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:47:55.232" starttime="20191025 23:47:54.688"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:47:55.233" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:47:55.233" starttime="20191025 23:47:55.232"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:47:55.234" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:47:55.234" starttime="20191025 23:47:55.233"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:55.234" starttime="20191025 23:47:54.687"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_secret_access_key ${secret}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:47:55.237" level="INFO">Running command 'aws configure set aws_secret_access_key c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:47:55.727" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:47:55.727" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:47:55.727" starttime="20191025 23:47:55.235"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:47:55.729" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:47:55.729" starttime="20191025 23:47:55.728"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:47:55.730" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:47:55.730" starttime="20191025 23:47:55.730"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:55.731" starttime="20191025 23:47:55.234"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set region us-west-1</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:47:55.734" level="INFO">Running command 'aws configure set region us-west-1 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:47:56.180" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:47:56.181" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:47:56.181" starttime="20191025 23:47:55.732"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:47:56.183" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:47:56.183" starttime="20191025 23:47:56.182"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:47:56.184" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:47:56.185" starttime="20191025 23:47:56.184"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:56.185" starttime="20191025 23:47:55.731"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:56.186" starttime="20191025 23:47:51.448"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:56.186" starttime="20191025 23:47:51.447"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'false'</arg>
<arg>Setup dummy credentials for S3</arg>
</arguments>
<status status="PASS" endtime="20191025 23:47:56.187" starttime="20191025 23:47:56.186"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:56.188" starttime="20191025 23:47:51.397"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:56.188" starttime="20191025 23:47:51.396"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${BUCKET}' == 'generated'</arg>
<arg>Create bucket</arg>
</arguments>
<kw name="Create bucket" library="commonawslib">
<kw name="Generate Random String" library="String">
<doc>Generates a string with a desired ``length`` from the given ``chars``.</doc>
<arguments>
<arg>5</arg>
<arg>[NUMBERS]</arg>
</arguments>
<assign>
<var>${postfix}</var>
</assign>
<msg timestamp="20191025 23:47:56.191" level="INFO">${postfix} = 18347</msg>
<status status="PASS" endtime="20191025 23:47:56.191" starttime="20191025 23:47:56.190"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${BUCKET}</arg>
<arg>bucket-${postfix}</arg>
</arguments>
<msg timestamp="20191025 23:47:56.193" level="INFO">${BUCKET} = bucket-18347</msg>
<status status="PASS" endtime="20191025 23:47:56.193" starttime="20191025 23:47:56.192"></status>
</kw>
<kw name="Execute AWSS3APICli" library="commonawslib">
<arguments>
<arg>create-bucket --bucket ${BUCKET}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws s3api --endpoint-url ${ENDPOINT_URL} ${command}</arg>
</arguments>
<assign>
<var>${output}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:47:56.198" level="INFO">Running command 'aws s3api --endpoint-url http://s3g:9878 create-bucket --bucket bucket-18347 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:47:59.898" level="INFO">${rc} = 255</msg>
<msg timestamp="20191025 23:47:59.898" level="INFO">${output} = 
An error occurred (500) when calling the CreateBucket operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:47:59.898" starttime="20191025 23:47:56.195"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:47:59.901" level="INFO">
An error occurred (500) when calling the CreateBucket operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:47:59.901" starttime="20191025 23:47:59.899"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:47:59.902" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191025 23:47:59.902" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191025 23:47:59.902" starttime="20191025 23:47:59.901"></status>
</kw>
<status status="FAIL" endtime="20191025 23:47:59.903" starttime="20191025 23:47:56.194"></status>
</kw>
<status status="FAIL" endtime="20191025 23:47:59.903" starttime="20191025 23:47:56.193"></status>
</kw>
<status status="FAIL" endtime="20191025 23:47:59.903" starttime="20191025 23:47:56.189"></status>
</kw>
<status status="FAIL" endtime="20191025 23:47:59.903" starttime="20191025 23:47:56.188"></status>
</kw>
<status status="FAIL" endtime="20191025 23:47:59.904" starttime="20191025 23:47:50.668"></status>
</kw>
<status status="FAIL" endtime="20191025 23:47:59.904" critical="yes" starttime="20191025 23:47:50.668">Setup failed:
255 != 0</status>
</test>
<test id="s1-s5-t2" name="Test Multipart Upload Complete">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:47:59.910" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:47:59.915" level="INFO">${rc} = 1</msg>
<msg timestamp="20191025 23:47:59.915" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191025 23:47:59.916" starttime="20191025 23:47:59.907"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191025 23:47:59.918" starttime="20191025 23:47:59.916"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:47:59.920" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:48:00.111" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:48:00.111" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.002'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191025 23:48:00.112" starttime="20191025 23:47:59.918"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:48:00.118" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:48:00.614" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:48:00.614" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirrors.xtom.com
 * epel: mirror.prgmr.com
 * extras: mirror.fileplanet.com
 * updates: mirrors.xtom.com
Package ...</msg>
<status status="PASS" endtime="20191025 23:48:00.614" starttime="20191025 23:48:00.116"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:48:00.616" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirrors.xtom.com
 * epel: mirror.prgmr.com
 * extras: mirror.fileplanet.com
 * updates: mirrors.xtom.com
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191025 23:48:00.616" starttime="20191025 23:48:00.615"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:48:00.617" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:48:00.618" starttime="20191025 23:48:00.617"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:00.618" starttime="20191025 23:48:00.115"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:00.619" starttime="20191025 23:48:00.114"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:00.619" starttime="20191025 23:48:00.112"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:00.619" starttime="20191025 23:47:59.907"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:00.619" starttime="20191025 23:47:59.906"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:48:00.627" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:48:00.634" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:48:00.635" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191025 23:48:00.635" starttime="20191025 23:48:00.625"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:48:00.637" level="INFO">s3g</msg>
<status status="PASS" endtime="20191025 23:48:00.637" starttime="20191025 23:48:00.636"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:48:00.638" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:48:00.638" starttime="20191025 23:48:00.637"></status>
</kw>
<msg timestamp="20191025 23:48:00.639" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191025 23:48:00.639" starttime="20191025 23:48:00.624"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191025 23:48:00.641" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:48:00.641" starttime="20191025 23:48:00.640"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:48:00.646" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:48:00.664" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:48:00.664" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:48:00.665" starttime="20191025 23:48:00.644"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:48:00.666" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:48:00.666" starttime="20191025 23:48:00.665"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:48:00.667" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:48:00.667" starttime="20191025 23:48:00.667"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:00.668" starttime="20191025 23:48:00.642"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:00.668" starttime="20191025 23:48:00.641"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:00.668" starttime="20191025 23:48:00.623"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:00.669" starttime="20191025 23:48:00.622"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:48:00.674" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:48:03.448" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:48:03.449" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:48:03.449" starttime="20191025 23:48:00.671"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:48:03.451" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
awsAccessKey=testuser/s3g@EXAMPLE.COM
awsSecret=c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671</msg>
<status status="PASS" endtime="20191025 23:48:03.451" starttime="20191025 23:48:03.450"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:48:03.452" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:48:03.453" starttime="20191025 23:48:03.451"></status>
</kw>
<msg timestamp="20191025 23:48:03.453" level="INFO">${result} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:48:03.453" starttime="20191025 23:48:00.671"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsAccessKey=).*</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:48:03.455" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:48:03.455" starttime="20191025 23:48:03.454"></status>
</kw>
<kw name="Get Variable Value" library="BuiltIn">
<doc>Returns variable value or ``default`` if the variable does not exist.</doc>
<arguments>
<arg>${accessKey}</arg>
<arg>sdsdasaasdasd</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:48:03.456" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:48:03.456" starttime="20191025 23:48:03.455"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsSecret=).*</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:48:03.458" level="INFO">${secret} = [u'c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671']</msg>
<status status="PASS" endtime="20191025 23:48:03.458" starttime="20191025 23:48:03.457"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${accessKey[0]}</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:48:03.459" level="INFO">${accessKey} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:48:03.459" starttime="20191025 23:48:03.458"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${secret[0]}</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:48:03.460" level="INFO">${secret} = c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671</msg>
<status status="PASS" endtime="20191025 23:48:03.460" starttime="20191025 23:48:03.459"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set default.s3.signature_version s3v4</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:48:03.464" level="INFO">Running command 'aws configure set default.s3.signature_version s3v4 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:48:03.895" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:48:03.895" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:48:03.895" starttime="20191025 23:48:03.462"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:48:03.897" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:48:03.897" starttime="20191025 23:48:03.896"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:48:03.898" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:48:03.899" starttime="20191025 23:48:03.898"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:03.899" starttime="20191025 23:48:03.461"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_access_key_id ${accessKey}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:48:03.904" level="INFO">Running command 'aws configure set aws_access_key_id testuser/s3g@EXAMPLE.COM 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:48:04.282" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:48:04.282" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:48:04.282" starttime="20191025 23:48:03.901"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:48:04.284" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:48:04.284" starttime="20191025 23:48:04.283"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:48:04.285" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:48:04.285" starttime="20191025 23:48:04.284"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:04.286" starttime="20191025 23:48:03.900"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_secret_access_key ${secret}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:48:04.290" level="INFO">Running command 'aws configure set aws_secret_access_key c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:48:04.740" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:48:04.741" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:48:04.741" starttime="20191025 23:48:04.287"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:48:04.743" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:48:04.743" starttime="20191025 23:48:04.742"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:48:04.744" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:48:04.744" starttime="20191025 23:48:04.743"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:04.745" starttime="20191025 23:48:04.286"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set region us-west-1</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:48:04.749" level="INFO">Running command 'aws configure set region us-west-1 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:48:05.262" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:48:05.262" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:48:05.262" starttime="20191025 23:48:04.746"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:48:05.264" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:48:05.264" starttime="20191025 23:48:05.263"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:48:05.266" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:48:05.267" starttime="20191025 23:48:05.265"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:05.267" starttime="20191025 23:48:04.745"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:05.268" starttime="20191025 23:48:00.670"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:05.268" starttime="20191025 23:48:00.669"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'false'</arg>
<arg>Setup dummy credentials for S3</arg>
</arguments>
<status status="PASS" endtime="20191025 23:48:05.269" starttime="20191025 23:48:05.268"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:05.269" starttime="20191025 23:48:00.621"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:05.269" starttime="20191025 23:48:00.620"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${BUCKET}' == 'generated'</arg>
<arg>Create bucket</arg>
</arguments>
<status status="PASS" endtime="20191025 23:48:05.270" starttime="20191025 23:48:05.270"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:05.271" starttime="20191025 23:47:59.906"></status>
</kw>
<kw name="Execute AWSS3APICli" library="commonawslib">
<arguments>
<arg>create-multipart-upload --bucket ${BUCKET} --key multipartKey1</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws s3api --endpoint-url ${ENDPOINT_URL} ${command}</arg>
</arguments>
<assign>
<var>${output}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:48:05.276" level="INFO">Running command 'aws s3api --endpoint-url http://s3g:9878 create-multipart-upload --bucket bucket-18347 --key multipartKey1 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:48:11.296" level="INFO">${rc} = 255</msg>
<msg timestamp="20191025 23:48:11.296" level="INFO">${output} = 
An error occurred (500) when calling the CreateMultipartUpload operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:48:11.296" starttime="20191025 23:48:05.273"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:48:11.298" level="INFO">
An error occurred (500) when calling the CreateMultipartUpload operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:48:11.298" starttime="20191025 23:48:11.297"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:48:11.298" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191025 23:48:11.299" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191025 23:48:11.299" starttime="20191025 23:48:11.298"></status>
</kw>
<status status="FAIL" endtime="20191025 23:48:11.299" starttime="20191025 23:48:05.272"></status>
</kw>
<status status="FAIL" endtime="20191025 23:48:11.299" starttime="20191025 23:48:05.271"></status>
</kw>
<status status="FAIL" endtime="20191025 23:48:11.300" critical="yes" starttime="20191025 23:47:59.905">255 != 0</status>
</test>
<test id="s1-s5-t3" name="Test Multipart Upload Complete Entity too small">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:48:11.304" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:48:11.311" level="INFO">${rc} = 1</msg>
<msg timestamp="20191025 23:48:11.312" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191025 23:48:11.312" starttime="20191025 23:48:11.303"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191025 23:48:11.313" starttime="20191025 23:48:11.312"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:48:11.315" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:48:11.554" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:48:11.554" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.002'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191025 23:48:11.554" starttime="20191025 23:48:11.313"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:48:11.561" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:48:12.054" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:48:12.054" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirrors.xtom.com
 * epel: mirror.prgmr.com
 * extras: mirror.fileplanet.com
 * updates: mirrors.xtom.com
Package ...</msg>
<status status="PASS" endtime="20191025 23:48:12.054" starttime="20191025 23:48:11.558"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:48:12.056" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirrors.xtom.com
 * epel: mirror.prgmr.com
 * extras: mirror.fileplanet.com
 * updates: mirrors.xtom.com
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191025 23:48:12.056" starttime="20191025 23:48:12.055"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:48:12.057" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:48:12.057" starttime="20191025 23:48:12.056"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:12.058" starttime="20191025 23:48:11.558"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:12.058" starttime="20191025 23:48:11.557"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:12.058" starttime="20191025 23:48:11.555"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:12.059" starttime="20191025 23:48:11.302"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:12.059" starttime="20191025 23:48:11.302"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:48:12.066" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:48:12.072" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:48:12.072" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191025 23:48:12.072" starttime="20191025 23:48:12.064"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:48:12.075" level="INFO">s3g</msg>
<status status="PASS" endtime="20191025 23:48:12.075" starttime="20191025 23:48:12.073"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:48:12.076" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:48:12.076" starttime="20191025 23:48:12.076"></status>
</kw>
<msg timestamp="20191025 23:48:12.077" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191025 23:48:12.077" starttime="20191025 23:48:12.063"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191025 23:48:12.078" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:48:12.079" starttime="20191025 23:48:12.077"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:48:12.083" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:48:12.112" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:48:12.112" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:48:12.112" starttime="20191025 23:48:12.081"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:48:12.114" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:48:12.114" starttime="20191025 23:48:12.113"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:48:12.115" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:48:12.116" starttime="20191025 23:48:12.115"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:12.116" starttime="20191025 23:48:12.080"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:12.116" starttime="20191025 23:48:12.079"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:12.117" starttime="20191025 23:48:12.062"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:12.117" starttime="20191025 23:48:12.061"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:48:12.123" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:48:15.032" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:48:15.032" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:48:15.033" starttime="20191025 23:48:12.120"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:48:15.035" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
awsAccessKey=testuser/s3g@EXAMPLE.COM
awsSecret=c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671</msg>
<status status="PASS" endtime="20191025 23:48:15.035" starttime="20191025 23:48:15.034"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:48:15.036" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:48:15.036" starttime="20191025 23:48:15.035"></status>
</kw>
<msg timestamp="20191025 23:48:15.037" level="INFO">${result} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:48:15.037" starttime="20191025 23:48:12.119"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsAccessKey=).*</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:48:15.039" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:48:15.039" starttime="20191025 23:48:15.038"></status>
</kw>
<kw name="Get Variable Value" library="BuiltIn">
<doc>Returns variable value or ``default`` if the variable does not exist.</doc>
<arguments>
<arg>${accessKey}</arg>
<arg>sdsdasaasdasd</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:48:15.040" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:48:15.041" starttime="20191025 23:48:15.039"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsSecret=).*</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:48:15.042" level="INFO">${secret} = [u'c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671']</msg>
<status status="PASS" endtime="20191025 23:48:15.042" starttime="20191025 23:48:15.041"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${accessKey[0]}</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:48:15.043" level="INFO">${accessKey} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:48:15.043" starttime="20191025 23:48:15.042"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${secret[0]}</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:48:15.045" level="INFO">${secret} = c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671</msg>
<status status="PASS" endtime="20191025 23:48:15.045" starttime="20191025 23:48:15.044"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set default.s3.signature_version s3v4</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:48:15.049" level="INFO">Running command 'aws configure set default.s3.signature_version s3v4 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:48:15.532" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:48:15.533" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:48:15.533" starttime="20191025 23:48:15.046"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:48:15.535" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:48:15.535" starttime="20191025 23:48:15.534"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:48:15.536" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:48:15.537" starttime="20191025 23:48:15.536"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:15.537" starttime="20191025 23:48:15.045"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_access_key_id ${accessKey}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:48:15.542" level="INFO">Running command 'aws configure set aws_access_key_id testuser/s3g@EXAMPLE.COM 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:48:16.038" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:48:16.038" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:48:16.038" starttime="20191025 23:48:15.539"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:48:16.041" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:48:16.041" starttime="20191025 23:48:16.039"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:48:16.042" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:48:16.042" starttime="20191025 23:48:16.041"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:16.043" starttime="20191025 23:48:15.538"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_secret_access_key ${secret}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:48:16.047" level="INFO">Running command 'aws configure set aws_secret_access_key c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:48:16.521" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:48:16.521" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:48:16.521" starttime="20191025 23:48:16.045"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:48:16.524" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:48:16.524" starttime="20191025 23:48:16.522"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:48:16.526" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:48:16.526" starttime="20191025 23:48:16.525"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:16.527" starttime="20191025 23:48:16.043"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set region us-west-1</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:48:16.531" level="INFO">Running command 'aws configure set region us-west-1 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:48:16.956" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:48:16.956" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:48:16.956" starttime="20191025 23:48:16.528"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:48:16.958" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:48:16.958" starttime="20191025 23:48:16.957"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:48:16.959" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:48:16.960" starttime="20191025 23:48:16.958"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:16.960" starttime="20191025 23:48:16.527"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:16.960" starttime="20191025 23:48:12.119"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:16.961" starttime="20191025 23:48:12.117"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'false'</arg>
<arg>Setup dummy credentials for S3</arg>
</arguments>
<status status="PASS" endtime="20191025 23:48:16.962" starttime="20191025 23:48:16.961"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:16.962" starttime="20191025 23:48:12.060"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:16.963" starttime="20191025 23:48:12.059"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${BUCKET}' == 'generated'</arg>
<arg>Create bucket</arg>
</arguments>
<status status="PASS" endtime="20191025 23:48:16.964" starttime="20191025 23:48:16.963"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:16.964" starttime="20191025 23:48:11.301"></status>
</kw>
<kw name="Execute AWSS3APICli" library="commonawslib">
<arguments>
<arg>create-multipart-upload --bucket ${BUCKET} --key multipartKey2</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws s3api --endpoint-url ${ENDPOINT_URL} ${command}</arg>
</arguments>
<assign>
<var>${output}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:48:16.969" level="INFO">Running command 'aws s3api --endpoint-url http://s3g:9878 create-multipart-upload --bucket bucket-18347 --key multipartKey2 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:48:24.189" level="INFO">${rc} = 255</msg>
<msg timestamp="20191025 23:48:24.189" level="INFO">${output} = 
An error occurred (500) when calling the CreateMultipartUpload operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:48:24.189" starttime="20191025 23:48:16.967"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:48:24.191" level="INFO">
An error occurred (500) when calling the CreateMultipartUpload operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:48:24.191" starttime="20191025 23:48:24.190"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:48:24.193" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191025 23:48:24.193" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191025 23:48:24.193" starttime="20191025 23:48:24.192"></status>
</kw>
<status status="FAIL" endtime="20191025 23:48:24.194" starttime="20191025 23:48:16.966"></status>
</kw>
<status status="FAIL" endtime="20191025 23:48:24.194" starttime="20191025 23:48:16.965"></status>
</kw>
<status status="FAIL" endtime="20191025 23:48:24.195" critical="yes" starttime="20191025 23:48:11.300">255 != 0</status>
</test>
<test id="s1-s5-t4" name="Test Multipart Upload Complete Invalid part">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:48:24.202" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:48:24.209" level="INFO">${rc} = 1</msg>
<msg timestamp="20191025 23:48:24.209" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191025 23:48:24.209" starttime="20191025 23:48:24.199"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191025 23:48:24.211" starttime="20191025 23:48:24.210"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:48:24.214" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:48:24.403" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:48:24.404" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.002'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191025 23:48:24.404" starttime="20191025 23:48:24.212"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:48:24.411" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:48:24.968" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:48:24.968" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirrors.xtom.com
 * epel: mirror.prgmr.com
 * extras: mirror.fileplanet.com
 * updates: mirrors.xtom.com
Package ...</msg>
<status status="PASS" endtime="20191025 23:48:24.968" starttime="20191025 23:48:24.408"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:48:24.970" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirrors.xtom.com
 * epel: mirror.prgmr.com
 * extras: mirror.fileplanet.com
 * updates: mirrors.xtom.com
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191025 23:48:24.970" starttime="20191025 23:48:24.969"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:48:24.971" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:48:24.972" starttime="20191025 23:48:24.971"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:24.972" starttime="20191025 23:48:24.407"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:24.973" starttime="20191025 23:48:24.406"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:24.973" starttime="20191025 23:48:24.405"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:24.973" starttime="20191025 23:48:24.199"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:24.974" starttime="20191025 23:48:24.198"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:48:24.981" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:48:24.989" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:48:24.989" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191025 23:48:24.989" starttime="20191025 23:48:24.979"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:48:24.992" level="INFO">s3g</msg>
<status status="PASS" endtime="20191025 23:48:24.993" starttime="20191025 23:48:24.990"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:48:24.994" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:48:24.994" starttime="20191025 23:48:24.993"></status>
</kw>
<msg timestamp="20191025 23:48:24.995" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191025 23:48:24.995" starttime="20191025 23:48:24.978"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191025 23:48:24.996" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:48:24.997" starttime="20191025 23:48:24.995"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:48:25.002" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:48:25.027" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:48:25.027" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:48:25.027" starttime="20191025 23:48:24.999"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:48:25.029" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:48:25.029" starttime="20191025 23:48:25.028"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:48:25.030" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:48:25.030" starttime="20191025 23:48:25.030"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:25.031" starttime="20191025 23:48:24.998"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:25.031" starttime="20191025 23:48:24.997"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:25.032" starttime="20191025 23:48:24.977"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:25.032" starttime="20191025 23:48:24.976"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:48:25.037" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:48:27.713" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:48:27.714" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:48:27.714" starttime="20191025 23:48:25.035"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:48:27.715" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
awsAccessKey=testuser/s3g@EXAMPLE.COM
awsSecret=c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671</msg>
<status status="PASS" endtime="20191025 23:48:27.715" starttime="20191025 23:48:27.714"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:48:27.716" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:48:27.716" starttime="20191025 23:48:27.716"></status>
</kw>
<msg timestamp="20191025 23:48:27.717" level="INFO">${result} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:48:27.717" starttime="20191025 23:48:25.034"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsAccessKey=).*</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:48:27.718" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:48:27.718" starttime="20191025 23:48:27.717"></status>
</kw>
<kw name="Get Variable Value" library="BuiltIn">
<doc>Returns variable value or ``default`` if the variable does not exist.</doc>
<arguments>
<arg>${accessKey}</arg>
<arg>sdsdasaasdasd</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:48:27.719" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:48:27.719" starttime="20191025 23:48:27.718"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsSecret=).*</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:48:27.720" level="INFO">${secret} = [u'c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671']</msg>
<status status="PASS" endtime="20191025 23:48:27.720" starttime="20191025 23:48:27.719"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${accessKey[0]}</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:48:27.721" level="INFO">${accessKey} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:48:27.721" starttime="20191025 23:48:27.720"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${secret[0]}</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:48:27.722" level="INFO">${secret} = c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671</msg>
<status status="PASS" endtime="20191025 23:48:27.722" starttime="20191025 23:48:27.721"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set default.s3.signature_version s3v4</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:48:27.725" level="INFO">Running command 'aws configure set default.s3.signature_version s3v4 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:48:28.198" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:48:28.198" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:48:28.198" starttime="20191025 23:48:27.723"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:48:28.200" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:48:28.201" starttime="20191025 23:48:28.199"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:48:28.202" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:48:28.202" starttime="20191025 23:48:28.201"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:28.203" starttime="20191025 23:48:27.722"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_access_key_id ${accessKey}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:48:28.207" level="INFO">Running command 'aws configure set aws_access_key_id testuser/s3g@EXAMPLE.COM 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:48:28.700" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:48:28.700" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:48:28.700" starttime="20191025 23:48:28.204"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:48:28.702" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:48:28.702" starttime="20191025 23:48:28.701"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:48:28.703" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:48:28.704" starttime="20191025 23:48:28.703"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:28.704" starttime="20191025 23:48:28.203"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_secret_access_key ${secret}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:48:28.709" level="INFO">Running command 'aws configure set aws_secret_access_key c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:48:29.198" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:48:29.198" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:48:29.198" starttime="20191025 23:48:28.706"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:48:29.201" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:48:29.201" starttime="20191025 23:48:29.199"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:48:29.202" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:48:29.202" starttime="20191025 23:48:29.201"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:29.203" starttime="20191025 23:48:28.705"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set region us-west-1</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:48:29.206" level="INFO">Running command 'aws configure set region us-west-1 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:48:29.693" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:48:29.693" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:48:29.693" starttime="20191025 23:48:29.204"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:48:29.695" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:48:29.696" starttime="20191025 23:48:29.694"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:48:29.696" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:48:29.697" starttime="20191025 23:48:29.696"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:29.697" starttime="20191025 23:48:29.203"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:29.697" starttime="20191025 23:48:25.033"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:29.698" starttime="20191025 23:48:25.032"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'false'</arg>
<arg>Setup dummy credentials for S3</arg>
</arguments>
<status status="PASS" endtime="20191025 23:48:29.699" starttime="20191025 23:48:29.698"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:29.699" starttime="20191025 23:48:24.975"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:29.699" starttime="20191025 23:48:24.974"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${BUCKET}' == 'generated'</arg>
<arg>Create bucket</arg>
</arguments>
<status status="PASS" endtime="20191025 23:48:29.700" starttime="20191025 23:48:29.699"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:29.700" starttime="20191025 23:48:24.197"></status>
</kw>
<kw name="Execute AWSS3APICli" library="commonawslib">
<arguments>
<arg>create-multipart-upload --bucket ${BUCKET} --key multipartKey3</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws s3api --endpoint-url ${ENDPOINT_URL} ${command}</arg>
</arguments>
<assign>
<var>${output}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:48:29.705" level="INFO">Running command 'aws s3api --endpoint-url http://s3g:9878 create-multipart-upload --bucket bucket-18347 --key multipartKey3 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:48:34.224" level="INFO">${rc} = 255</msg>
<msg timestamp="20191025 23:48:34.224" level="INFO">${output} = 
An error occurred (500) when calling the CreateMultipartUpload operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:48:34.224" starttime="20191025 23:48:29.702"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:48:34.226" level="INFO">
An error occurred (500) when calling the CreateMultipartUpload operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:48:34.226" starttime="20191025 23:48:34.225"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:48:34.227" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191025 23:48:34.228" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191025 23:48:34.228" starttime="20191025 23:48:34.227"></status>
</kw>
<status status="FAIL" endtime="20191025 23:48:34.229" starttime="20191025 23:48:29.702"></status>
</kw>
<status status="FAIL" endtime="20191025 23:48:34.229" starttime="20191025 23:48:29.701"></status>
</kw>
<status status="FAIL" endtime="20191025 23:48:34.230" critical="yes" starttime="20191025 23:48:24.196">255 != 0</status>
</test>
<test id="s1-s5-t5" name="Test abort Multipart upload">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:48:34.237" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:48:34.244" level="INFO">${rc} = 1</msg>
<msg timestamp="20191025 23:48:34.245" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191025 23:48:34.245" starttime="20191025 23:48:34.234"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191025 23:48:34.247" starttime="20191025 23:48:34.246"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:48:34.250" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:48:34.417" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:48:34.418" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.002'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191025 23:48:34.418" starttime="20191025 23:48:34.247"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:48:34.425" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:48:34.957" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:48:34.957" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirrors.xtom.com
 * epel: mirror.prgmr.com
 * extras: mirror.fileplanet.com
 * updates: mirrors.xtom.com
Package ...</msg>
<status status="PASS" endtime="20191025 23:48:34.957" starttime="20191025 23:48:34.422"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:48:34.959" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirrors.xtom.com
 * epel: mirror.prgmr.com
 * extras: mirror.fileplanet.com
 * updates: mirrors.xtom.com
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191025 23:48:34.960" starttime="20191025 23:48:34.958"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:48:34.961" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:48:34.961" starttime="20191025 23:48:34.960"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:34.961" starttime="20191025 23:48:34.421"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:34.962" starttime="20191025 23:48:34.420"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:34.962" starttime="20191025 23:48:34.419"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:34.962" starttime="20191025 23:48:34.233"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:34.962" starttime="20191025 23:48:34.233"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:48:34.970" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:48:34.977" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:48:34.977" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191025 23:48:34.977" starttime="20191025 23:48:34.967"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:48:34.981" level="INFO">s3g</msg>
<status status="PASS" endtime="20191025 23:48:34.982" starttime="20191025 23:48:34.978"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:48:34.983" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:48:34.983" starttime="20191025 23:48:34.982"></status>
</kw>
<msg timestamp="20191025 23:48:34.984" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191025 23:48:34.984" starttime="20191025 23:48:34.967"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191025 23:48:34.985" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:48:34.985" starttime="20191025 23:48:34.984"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:48:34.990" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:48:35.022" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:48:35.022" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:48:35.022" starttime="20191025 23:48:34.988"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:48:35.024" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:48:35.024" starttime="20191025 23:48:35.023"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:48:35.025" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:48:35.025" starttime="20191025 23:48:35.024"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:35.026" starttime="20191025 23:48:34.987"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:35.026" starttime="20191025 23:48:34.986"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:35.026" starttime="20191025 23:48:34.966"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:35.026" starttime="20191025 23:48:34.965"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:48:35.032" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:48:37.748" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:48:37.748" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:48:37.748" starttime="20191025 23:48:35.029"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:48:37.750" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
awsAccessKey=testuser/s3g@EXAMPLE.COM
awsSecret=c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671</msg>
<status status="PASS" endtime="20191025 23:48:37.751" starttime="20191025 23:48:37.749"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:48:37.752" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:48:37.752" starttime="20191025 23:48:37.751"></status>
</kw>
<msg timestamp="20191025 23:48:37.753" level="INFO">${result} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:48:37.753" starttime="20191025 23:48:35.029"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsAccessKey=).*</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:48:37.754" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:48:37.754" starttime="20191025 23:48:37.753"></status>
</kw>
<kw name="Get Variable Value" library="BuiltIn">
<doc>Returns variable value or ``default`` if the variable does not exist.</doc>
<arguments>
<arg>${accessKey}</arg>
<arg>sdsdasaasdasd</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:48:37.756" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:48:37.756" starttime="20191025 23:48:37.755"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsSecret=).*</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:48:37.757" level="INFO">${secret} = [u'c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671']</msg>
<status status="PASS" endtime="20191025 23:48:37.757" starttime="20191025 23:48:37.756"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${accessKey[0]}</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:48:37.759" level="INFO">${accessKey} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:48:37.759" starttime="20191025 23:48:37.758"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${secret[0]}</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:48:37.760" level="INFO">${secret} = c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671</msg>
<status status="PASS" endtime="20191025 23:48:37.760" starttime="20191025 23:48:37.759"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set default.s3.signature_version s3v4</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:48:37.764" level="INFO">Running command 'aws configure set default.s3.signature_version s3v4 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:48:38.260" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:48:38.260" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:48:38.260" starttime="20191025 23:48:37.761"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:48:38.262" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:48:38.263" starttime="20191025 23:48:38.261"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:48:38.264" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:48:38.264" starttime="20191025 23:48:38.263"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:38.265" starttime="20191025 23:48:37.760"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_access_key_id ${accessKey}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:48:38.269" level="INFO">Running command 'aws configure set aws_access_key_id testuser/s3g@EXAMPLE.COM 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:48:38.753" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:48:38.754" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:48:38.754" starttime="20191025 23:48:38.266"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:48:38.756" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:48:38.756" starttime="20191025 23:48:38.755"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:48:38.757" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:48:38.757" starttime="20191025 23:48:38.756"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:38.758" starttime="20191025 23:48:38.265"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_secret_access_key ${secret}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:48:38.762" level="INFO">Running command 'aws configure set aws_secret_access_key c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:48:39.295" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:48:39.295" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:48:39.296" starttime="20191025 23:48:38.759"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:48:39.297" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:48:39.297" starttime="20191025 23:48:39.296"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:48:39.299" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:48:39.299" starttime="20191025 23:48:39.298"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:39.299" starttime="20191025 23:48:38.758"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set region us-west-1</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:48:39.303" level="INFO">Running command 'aws configure set region us-west-1 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:48:39.766" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:48:39.766" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:48:39.767" starttime="20191025 23:48:39.300"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:48:39.768" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:48:39.768" starttime="20191025 23:48:39.767"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:48:39.769" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:48:39.770" starttime="20191025 23:48:39.769"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:39.770" starttime="20191025 23:48:39.300"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:39.770" starttime="20191025 23:48:35.028"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:39.770" starttime="20191025 23:48:35.027"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'false'</arg>
<arg>Setup dummy credentials for S3</arg>
</arguments>
<status status="PASS" endtime="20191025 23:48:39.772" starttime="20191025 23:48:39.771"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:39.772" starttime="20191025 23:48:34.964"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:39.772" starttime="20191025 23:48:34.963"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${BUCKET}' == 'generated'</arg>
<arg>Create bucket</arg>
</arguments>
<status status="PASS" endtime="20191025 23:48:39.773" starttime="20191025 23:48:39.772"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:39.773" starttime="20191025 23:48:34.232"></status>
</kw>
<kw name="Execute AWSS3APICli" library="commonawslib">
<arguments>
<arg>create-multipart-upload --bucket ${BUCKET} --key multipartKey4 --storage-class REDUCED_REDUNDANCY</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws s3api --endpoint-url ${ENDPOINT_URL} ${command}</arg>
</arguments>
<assign>
<var>${output}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:48:39.777" level="INFO">Running command 'aws s3api --endpoint-url http://s3g:9878 create-multipart-upload --bucket bucket-18347 --key multipartKey4 --storage-class REDUCED_REDUNDANCY 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:48:47.599" level="INFO">${rc} = 255</msg>
<msg timestamp="20191025 23:48:47.599" level="INFO">${output} = 
An error occurred (500) when calling the CreateMultipartUpload operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:48:47.599" starttime="20191025 23:48:39.775"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:48:47.601" level="INFO">
An error occurred (500) when calling the CreateMultipartUpload operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:48:47.602" starttime="20191025 23:48:47.600"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:48:47.603" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191025 23:48:47.604" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191025 23:48:47.604" starttime="20191025 23:48:47.602"></status>
</kw>
<status status="FAIL" endtime="20191025 23:48:47.604" starttime="20191025 23:48:39.774"></status>
</kw>
<status status="FAIL" endtime="20191025 23:48:47.605" starttime="20191025 23:48:39.774"></status>
</kw>
<status status="FAIL" endtime="20191025 23:48:47.605" critical="yes" starttime="20191025 23:48:34.231">255 != 0</status>
</test>
<test id="s1-s5-t6" name="Test abort Multipart upload with invalid uploadId">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:48:47.612" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:48:47.620" level="INFO">${rc} = 1</msg>
<msg timestamp="20191025 23:48:47.620" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191025 23:48:47.621" starttime="20191025 23:48:47.610"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191025 23:48:47.623" starttime="20191025 23:48:47.622"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:48:47.625" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:48:47.815" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:48:47.815" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.002'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191025 23:48:47.816" starttime="20191025 23:48:47.623"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:48:47.822" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:48:48.359" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:48:48.359" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirrors.xtom.com
 * epel: mirror.prgmr.com
 * extras: mirror.fileplanet.com
 * updates: mirrors.xtom.com
Package ...</msg>
<status status="PASS" endtime="20191025 23:48:48.359" starttime="20191025 23:48:47.820"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:48:48.362" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirrors.xtom.com
 * epel: mirror.prgmr.com
 * extras: mirror.fileplanet.com
 * updates: mirrors.xtom.com
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191025 23:48:48.362" starttime="20191025 23:48:48.361"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:48:48.363" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:48:48.363" starttime="20191025 23:48:48.362"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:48.364" starttime="20191025 23:48:47.819"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:48.364" starttime="20191025 23:48:47.818"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:48.364" starttime="20191025 23:48:47.816"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:48.365" starttime="20191025 23:48:47.609"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:48.365" starttime="20191025 23:48:47.608"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:48:48.372" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:48:48.379" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:48:48.380" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191025 23:48:48.380" starttime="20191025 23:48:48.370"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:48:48.383" level="INFO">s3g</msg>
<status status="PASS" endtime="20191025 23:48:48.383" starttime="20191025 23:48:48.381"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:48:48.384" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:48:48.385" starttime="20191025 23:48:48.383"></status>
</kw>
<msg timestamp="20191025 23:48:48.385" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191025 23:48:48.385" starttime="20191025 23:48:48.369"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191025 23:48:48.387" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:48:48.387" starttime="20191025 23:48:48.386"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:48:48.392" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:48:48.411" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:48:48.411" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:48:48.411" starttime="20191025 23:48:48.390"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:48:48.413" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:48:48.413" starttime="20191025 23:48:48.412"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:48:48.414" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:48:48.414" starttime="20191025 23:48:48.413"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:48.414" starttime="20191025 23:48:48.389"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:48.415" starttime="20191025 23:48:48.388"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:48.415" starttime="20191025 23:48:48.368"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:48.415" starttime="20191025 23:48:48.367"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:48:48.420" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:48:50.922" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:48:50.922" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:48:50.923" starttime="20191025 23:48:48.418"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:48:50.925" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
awsAccessKey=testuser/s3g@EXAMPLE.COM
awsSecret=c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671</msg>
<status status="PASS" endtime="20191025 23:48:50.925" starttime="20191025 23:48:50.923"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:48:50.926" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:48:50.926" starttime="20191025 23:48:50.925"></status>
</kw>
<msg timestamp="20191025 23:48:50.927" level="INFO">${result} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:48:50.927" starttime="20191025 23:48:48.417"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsAccessKey=).*</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:48:50.928" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:48:50.928" starttime="20191025 23:48:50.927"></status>
</kw>
<kw name="Get Variable Value" library="BuiltIn">
<doc>Returns variable value or ``default`` if the variable does not exist.</doc>
<arguments>
<arg>${accessKey}</arg>
<arg>sdsdasaasdasd</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:48:50.930" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:48:50.930" starttime="20191025 23:48:50.929"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsSecret=).*</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:48:50.931" level="INFO">${secret} = [u'c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671']</msg>
<status status="PASS" endtime="20191025 23:48:50.931" starttime="20191025 23:48:50.930"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${accessKey[0]}</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:48:50.932" level="INFO">${accessKey} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:48:50.932" starttime="20191025 23:48:50.931"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${secret[0]}</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:48:50.933" level="INFO">${secret} = c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671</msg>
<status status="PASS" endtime="20191025 23:48:50.933" starttime="20191025 23:48:50.933"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set default.s3.signature_version s3v4</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:48:50.937" level="INFO">Running command 'aws configure set default.s3.signature_version s3v4 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:48:51.434" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:48:51.434" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:48:51.434" starttime="20191025 23:48:50.935"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:48:51.436" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:48:51.436" starttime="20191025 23:48:51.435"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:48:51.438" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:48:51.438" starttime="20191025 23:48:51.437"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:51.438" starttime="20191025 23:48:50.934"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_access_key_id ${accessKey}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:48:51.443" level="INFO">Running command 'aws configure set aws_access_key_id testuser/s3g@EXAMPLE.COM 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:48:51.983" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:48:51.983" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:48:51.983" starttime="20191025 23:48:51.440"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:48:51.985" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:48:51.986" starttime="20191025 23:48:51.984"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:48:51.987" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:48:51.987" starttime="20191025 23:48:51.986"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:51.988" starttime="20191025 23:48:51.439"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_secret_access_key ${secret}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:48:51.992" level="INFO">Running command 'aws configure set aws_secret_access_key c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:48:52.492" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:48:52.493" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:48:52.493" starttime="20191025 23:48:51.989"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:48:52.495" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:48:52.495" starttime="20191025 23:48:52.494"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:48:52.496" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:48:52.497" starttime="20191025 23:48:52.495"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:52.497" starttime="20191025 23:48:51.988"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set region us-west-1</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:48:52.501" level="INFO">Running command 'aws configure set region us-west-1 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:48:52.994" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:48:52.994" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:48:52.994" starttime="20191025 23:48:52.498"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:48:52.996" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:48:52.997" starttime="20191025 23:48:52.995"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:48:52.998" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:48:52.998" starttime="20191025 23:48:52.997"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:52.998" starttime="20191025 23:48:52.498"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:52.999" starttime="20191025 23:48:48.416"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:52.999" starttime="20191025 23:48:48.415"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'false'</arg>
<arg>Setup dummy credentials for S3</arg>
</arguments>
<status status="PASS" endtime="20191025 23:48:53.000" starttime="20191025 23:48:52.999"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:53.001" starttime="20191025 23:48:48.366"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:53.001" starttime="20191025 23:48:48.365"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${BUCKET}' == 'generated'</arg>
<arg>Create bucket</arg>
</arguments>
<status status="PASS" endtime="20191025 23:48:53.002" starttime="20191025 23:48:53.001"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:53.002" starttime="20191025 23:48:47.608"></status>
</kw>
<kw name="Execute AWSS3APICli and checkrc" library="commonawslib">
<arguments>
<arg>abort-multipart-upload --bucket ${BUCKET} --key multipartKey5 --upload-id "random"</arg>
<arg>255</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Execute and checkrc" library="commonlib">
<arguments>
<arg>aws s3api --endpoint-url ${ENDPOINT_URL} ${command}</arg>
<arg>${expected_error_code}</arg>
</arguments>
<assign>
<var>${output}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:48:53.007" level="INFO">Running command 'aws s3api --endpoint-url http://s3g:9878 abort-multipart-upload --bucket bucket-18347 --key multipartKey5 --upload-id "random" 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:49:03.450" level="INFO">${rc} = 255</msg>
<msg timestamp="20191025 23:49:03.450" level="INFO">${output} = 
An error occurred (500) when calling the AbortMultipartUpload operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:49:03.451" starttime="20191025 23:48:53.005"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:49:03.452" level="INFO">
An error occurred (500) when calling the AbortMultipartUpload operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:49:03.452" starttime="20191025 23:49:03.451"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
</arguments>
<msg timestamp="20191025 23:49:03.453" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:49:03.453" starttime="20191025 23:49:03.453"></status>
</kw>
<msg timestamp="20191025 23:49:03.454" level="INFO">${output} = 
An error occurred (500) when calling the AbortMultipartUpload operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:49:03.454" starttime="20191025 23:48:53.004"></status>
</kw>
<msg timestamp="20191025 23:49:03.454" level="INFO">${result} = 
An error occurred (500) when calling the AbortMultipartUpload operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:49:03.454" starttime="20191025 23:48:53.003"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:03.455" critical="yes" starttime="20191025 23:48:47.606"></status>
</test>
<test id="s1-s5-t7" name="Upload part with Incorrect uploadID">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:49:03.460" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:49:03.467" level="INFO">${rc} = 1</msg>
<msg timestamp="20191025 23:49:03.467" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191025 23:49:03.467" starttime="20191025 23:49:03.458"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191025 23:49:03.469" starttime="20191025 23:49:03.468"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:49:03.472" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:49:03.659" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:49:03.660" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.002'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191025 23:49:03.660" starttime="20191025 23:49:03.470"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:49:03.666" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:49:04.169" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:49:04.169" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirrors.xtom.com
 * epel: mirror.prgmr.com
 * extras: mirror.fileplanet.com
 * updates: mirrors.xtom.com
Package ...</msg>
<status status="PASS" endtime="20191025 23:49:04.169" starttime="20191025 23:49:03.664"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:49:04.171" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirrors.xtom.com
 * epel: mirror.prgmr.com
 * extras: mirror.fileplanet.com
 * updates: mirrors.xtom.com
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191025 23:49:04.171" starttime="20191025 23:49:04.170"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:49:04.172" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:49:04.173" starttime="20191025 23:49:04.172"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:04.173" starttime="20191025 23:49:03.663"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:04.174" starttime="20191025 23:49:03.662"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:04.174" starttime="20191025 23:49:03.661"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:04.174" starttime="20191025 23:49:03.457"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:04.174" starttime="20191025 23:49:03.457"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:49:04.182" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:49:04.189" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:49:04.189" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191025 23:49:04.189" starttime="20191025 23:49:04.179"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:49:04.191" level="INFO">s3g</msg>
<status status="PASS" endtime="20191025 23:49:04.191" starttime="20191025 23:49:04.190"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:49:04.192" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:49:04.192" starttime="20191025 23:49:04.191"></status>
</kw>
<msg timestamp="20191025 23:49:04.193" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191025 23:49:04.193" starttime="20191025 23:49:04.179"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191025 23:49:04.194" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:49:04.194" starttime="20191025 23:49:04.193"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:49:04.199" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:49:04.217" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:49:04.217" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:49:04.217" starttime="20191025 23:49:04.197"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:49:04.218" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:49:04.219" starttime="20191025 23:49:04.218"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:49:04.220" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:49:04.220" starttime="20191025 23:49:04.219"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:04.220" starttime="20191025 23:49:04.196"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:04.221" starttime="20191025 23:49:04.195"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:04.221" starttime="20191025 23:49:04.178"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:04.221" starttime="20191025 23:49:04.177"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:49:04.226" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:49:07.047" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:49:07.048" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:49:07.048" starttime="20191025 23:49:04.224"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:49:07.049" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
awsAccessKey=testuser/s3g@EXAMPLE.COM
awsSecret=c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671</msg>
<status status="PASS" endtime="20191025 23:49:07.050" starttime="20191025 23:49:07.048"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:49:07.051" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:49:07.051" starttime="20191025 23:49:07.050"></status>
</kw>
<msg timestamp="20191025 23:49:07.051" level="INFO">${result} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:49:07.051" starttime="20191025 23:49:04.223"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsAccessKey=).*</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:49:07.053" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:49:07.053" starttime="20191025 23:49:07.052"></status>
</kw>
<kw name="Get Variable Value" library="BuiltIn">
<doc>Returns variable value or ``default`` if the variable does not exist.</doc>
<arguments>
<arg>${accessKey}</arg>
<arg>sdsdasaasdasd</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:49:07.054" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:49:07.054" starttime="20191025 23:49:07.053"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsSecret=).*</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:49:07.055" level="INFO">${secret} = [u'c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671']</msg>
<status status="PASS" endtime="20191025 23:49:07.055" starttime="20191025 23:49:07.054"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${accessKey[0]}</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:49:07.055" level="INFO">${accessKey} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:49:07.055" starttime="20191025 23:49:07.055"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${secret[0]}</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:49:07.056" level="INFO">${secret} = c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671</msg>
<status status="PASS" endtime="20191025 23:49:07.056" starttime="20191025 23:49:07.056"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set default.s3.signature_version s3v4</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:49:07.059" level="INFO">Running command 'aws configure set default.s3.signature_version s3v4 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:49:07.493" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:49:07.494" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:49:07.494" starttime="20191025 23:49:07.057"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:49:07.496" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:49:07.496" starttime="20191025 23:49:07.495"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:49:07.497" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:49:07.497" starttime="20191025 23:49:07.496"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:07.498" starttime="20191025 23:49:07.056"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_access_key_id ${accessKey}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:49:07.502" level="INFO">Running command 'aws configure set aws_access_key_id testuser/s3g@EXAMPLE.COM 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:49:07.963" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:49:07.963" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:49:07.964" starttime="20191025 23:49:07.499"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:49:07.966" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:49:07.966" starttime="20191025 23:49:07.965"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:49:07.967" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:49:07.967" starttime="20191025 23:49:07.966"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:07.968" starttime="20191025 23:49:07.498"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_secret_access_key ${secret}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:49:07.972" level="INFO">Running command 'aws configure set aws_secret_access_key c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:49:08.442" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:49:08.442" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:49:08.442" starttime="20191025 23:49:07.969"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:49:08.445" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:49:08.445" starttime="20191025 23:49:08.443"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:49:08.446" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:49:08.446" starttime="20191025 23:49:08.445"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:08.447" starttime="20191025 23:49:07.968"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set region us-west-1</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:49:08.450" level="INFO">Running command 'aws configure set region us-west-1 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:49:08.940" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:49:08.940" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:49:08.940" starttime="20191025 23:49:08.448"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:49:08.942" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:49:08.943" starttime="20191025 23:49:08.941"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:49:08.944" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:49:08.944" starttime="20191025 23:49:08.943"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:08.945" starttime="20191025 23:49:08.447"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:08.945" starttime="20191025 23:49:04.222"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:08.945" starttime="20191025 23:49:04.221"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'false'</arg>
<arg>Setup dummy credentials for S3</arg>
</arguments>
<status status="PASS" endtime="20191025 23:49:08.946" starttime="20191025 23:49:08.946"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:08.947" starttime="20191025 23:49:04.176"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:08.947" starttime="20191025 23:49:04.175"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${BUCKET}' == 'generated'</arg>
<arg>Create bucket</arg>
</arguments>
<status status="PASS" endtime="20191025 23:49:08.948" starttime="20191025 23:49:08.947"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:08.948" starttime="20191025 23:49:03.456"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>echo "Multipart upload" &gt; /tmp/testfile</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:49:08.952" level="INFO">Running command 'echo "Multipart upload" &gt; /tmp/testfile'.</msg>
<msg timestamp="20191025 23:49:08.958" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:49:08.958" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:49:08.958" starttime="20191025 23:49:08.950"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:49:08.960" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:49:08.960" starttime="20191025 23:49:08.959"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:49:08.961" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:49:08.961" starttime="20191025 23:49:08.960"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:08.962" starttime="20191025 23:49:08.949"></status>
</kw>
<kw name="Execute AWSS3APICli and checkrc" library="commonawslib">
<arguments>
<arg>upload-part --bucket ${BUCKET} --key multipartKey --part-number 1 --body /tmp/testfile --upload-id "random"</arg>
<arg>255</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Execute and checkrc" library="commonlib">
<arguments>
<arg>aws s3api --endpoint-url ${ENDPOINT_URL} ${command}</arg>
<arg>${expected_error_code}</arg>
</arguments>
<assign>
<var>${output}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:49:08.967" level="INFO">Running command 'aws s3api --endpoint-url http://s3g:9878 upload-part --bucket bucket-18347 --key multipartKey --part-number 1 --body /tmp/testfile --upload-id "random" 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:49:18.764" level="INFO">${rc} = 255</msg>
<msg timestamp="20191025 23:49:18.764" level="INFO">${output} = 
An error occurred (500) when calling the UploadPart operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:49:18.764" starttime="20191025 23:49:08.964"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:49:18.766" level="INFO">
An error occurred (500) when calling the UploadPart operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:49:18.767" starttime="20191025 23:49:18.765"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
</arguments>
<msg timestamp="20191025 23:49:18.768" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:49:18.768" starttime="20191025 23:49:18.767"></status>
</kw>
<msg timestamp="20191025 23:49:18.768" level="INFO">${output} = 
An error occurred (500) when calling the UploadPart operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:49:18.769" starttime="20191025 23:49:08.963"></status>
</kw>
<msg timestamp="20191025 23:49:18.769" level="INFO">${result} = 
An error occurred (500) when calling the UploadPart operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:49:18.769" starttime="20191025 23:49:08.962"></status>
</kw>
<kw name="Should Contain" library="BuiltIn">
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<arguments>
<arg>${result}</arg>
<arg>NoSuchUpload</arg>
</arguments>
<msg timestamp="20191025 23:49:18.770" level="FAIL">'
An error occurred (500) when calling the UploadPart operation (reached max retries: 4): Internal Server Error' does not contain 'NoSuchUpload'</msg>
<status status="FAIL" endtime="20191025 23:49:18.771" starttime="20191025 23:49:18.769"></status>
</kw>
<status status="FAIL" endtime="20191025 23:49:18.771" critical="yes" starttime="20191025 23:49:03.455">'
An error occurred (500) when calling the UploadPart operation (reached max retries: 4): Internal Server Error' does not contain 'NoSuchUpload'</status>
</test>
<test id="s1-s5-t8" name="Test list parts">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:49:18.777" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:49:18.785" level="INFO">${rc} = 1</msg>
<msg timestamp="20191025 23:49:18.785" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191025 23:49:18.785" starttime="20191025 23:49:18.775"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191025 23:49:18.788" starttime="20191025 23:49:18.786"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:49:18.790" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:49:18.978" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:49:18.978" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.002'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191025 23:49:18.978" starttime="20191025 23:49:18.788"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:49:18.984" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:49:19.467" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:49:19.467" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirrors.xtom.com
 * epel: mirror.prgmr.com
 * extras: mirror.fileplanet.com
 * updates: mirrors.xtom.com
Package ...</msg>
<status status="PASS" endtime="20191025 23:49:19.468" starttime="20191025 23:49:18.982"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:49:19.469" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirrors.xtom.com
 * epel: mirror.prgmr.com
 * extras: mirror.fileplanet.com
 * updates: mirrors.xtom.com
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191025 23:49:19.469" starttime="20191025 23:49:19.468"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:49:19.470" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:49:19.471" starttime="20191025 23:49:19.470"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:19.471" starttime="20191025 23:49:18.981"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:19.472" starttime="20191025 23:49:18.980"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:19.472" starttime="20191025 23:49:18.979"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:19.472" starttime="20191025 23:49:18.774"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:19.472" starttime="20191025 23:49:18.774"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:49:19.480" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:49:19.487" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:49:19.487" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191025 23:49:19.488" starttime="20191025 23:49:19.478"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:49:19.489" level="INFO">s3g</msg>
<status status="PASS" endtime="20191025 23:49:19.490" starttime="20191025 23:49:19.488"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:49:19.491" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:49:19.491" starttime="20191025 23:49:19.490"></status>
</kw>
<msg timestamp="20191025 23:49:19.492" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191025 23:49:19.492" starttime="20191025 23:49:19.477"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191025 23:49:19.493" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:49:19.493" starttime="20191025 23:49:19.492"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:49:19.498" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:49:20.675" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:49:20.675" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:49:20.675" starttime="20191025 23:49:19.496"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:49:20.677" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:49:20.677" starttime="20191025 23:49:20.676"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:49:20.678" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:49:20.679" starttime="20191025 23:49:20.678"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:20.679" starttime="20191025 23:49:19.495"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:20.679" starttime="20191025 23:49:19.494"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:20.680" starttime="20191025 23:49:19.476"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:20.680" starttime="20191025 23:49:19.475"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:49:20.686" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:49:23.482" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:49:23.482" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:49:23.483" starttime="20191025 23:49:20.683"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:49:23.485" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
awsAccessKey=testuser/s3g@EXAMPLE.COM
awsSecret=c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671</msg>
<status status="PASS" endtime="20191025 23:49:23.485" starttime="20191025 23:49:23.484"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:49:23.486" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:49:23.486" starttime="20191025 23:49:23.485"></status>
</kw>
<msg timestamp="20191025 23:49:23.487" level="INFO">${result} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:49:23.487" starttime="20191025 23:49:20.682"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsAccessKey=).*</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:49:23.489" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:49:23.489" starttime="20191025 23:49:23.488"></status>
</kw>
<kw name="Get Variable Value" library="BuiltIn">
<doc>Returns variable value or ``default`` if the variable does not exist.</doc>
<arguments>
<arg>${accessKey}</arg>
<arg>sdsdasaasdasd</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:49:23.490" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:49:23.490" starttime="20191025 23:49:23.489"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsSecret=).*</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:49:23.492" level="INFO">${secret} = [u'c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671']</msg>
<status status="PASS" endtime="20191025 23:49:23.492" starttime="20191025 23:49:23.491"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${accessKey[0]}</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:49:23.493" level="INFO">${accessKey} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:49:23.493" starttime="20191025 23:49:23.492"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${secret[0]}</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:49:23.494" level="INFO">${secret} = c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671</msg>
<status status="PASS" endtime="20191025 23:49:23.494" starttime="20191025 23:49:23.493"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set default.s3.signature_version s3v4</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:49:23.498" level="INFO">Running command 'aws configure set default.s3.signature_version s3v4 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:49:23.967" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:49:23.967" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:49:23.967" starttime="20191025 23:49:23.496"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:49:23.969" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:49:23.969" starttime="20191025 23:49:23.968"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:49:23.970" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:49:23.971" starttime="20191025 23:49:23.969"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:23.971" starttime="20191025 23:49:23.495"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_access_key_id ${accessKey}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:49:23.976" level="INFO">Running command 'aws configure set aws_access_key_id testuser/s3g@EXAMPLE.COM 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:49:24.484" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:49:24.484" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:49:24.485" starttime="20191025 23:49:23.973"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:49:24.487" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:49:24.488" starttime="20191025 23:49:24.486"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:49:24.489" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:49:24.490" starttime="20191025 23:49:24.488"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:24.490" starttime="20191025 23:49:23.972"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_secret_access_key ${secret}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:49:24.496" level="INFO">Running command 'aws configure set aws_secret_access_key c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:49:24.957" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:49:24.958" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:49:24.958" starttime="20191025 23:49:24.492"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:49:24.960" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:49:24.960" starttime="20191025 23:49:24.959"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:49:24.961" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:49:24.961" starttime="20191025 23:49:24.960"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:24.962" starttime="20191025 23:49:24.491"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set region us-west-1</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:49:24.965" level="INFO">Running command 'aws configure set region us-west-1 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:49:25.464" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:49:25.465" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:49:25.465" starttime="20191025 23:49:24.963"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:49:25.466" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:49:25.467" starttime="20191025 23:49:25.465"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:49:25.468" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:49:25.468" starttime="20191025 23:49:25.467"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:25.468" starttime="20191025 23:49:24.962"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:25.469" starttime="20191025 23:49:20.681"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:25.469" starttime="20191025 23:49:20.680"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'false'</arg>
<arg>Setup dummy credentials for S3</arg>
</arguments>
<status status="PASS" endtime="20191025 23:49:25.470" starttime="20191025 23:49:25.469"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:25.470" starttime="20191025 23:49:19.474"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:25.470" starttime="20191025 23:49:19.473"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${BUCKET}' == 'generated'</arg>
<arg>Create bucket</arg>
</arguments>
<status status="PASS" endtime="20191025 23:49:25.471" starttime="20191025 23:49:25.471"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:25.472" starttime="20191025 23:49:18.773"></status>
</kw>
<kw name="Execute AWSS3APICli" library="commonawslib">
<arguments>
<arg>create-multipart-upload --bucket ${BUCKET} --key multipartKey5</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws s3api --endpoint-url ${ENDPOINT_URL} ${command}</arg>
</arguments>
<assign>
<var>${output}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:49:25.477" level="INFO">Running command 'aws s3api --endpoint-url http://s3g:9878 create-multipart-upload --bucket bucket-18347 --key multipartKey5 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:49:36.582" level="INFO">${rc} = 255</msg>
<msg timestamp="20191025 23:49:36.582" level="INFO">${output} = 
An error occurred (500) when calling the CreateMultipartUpload operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:49:36.582" starttime="20191025 23:49:25.474"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:49:36.584" level="INFO">
An error occurred (500) when calling the CreateMultipartUpload operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:49:36.585" starttime="20191025 23:49:36.583"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:49:36.586" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191025 23:49:36.586" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191025 23:49:36.587" starttime="20191025 23:49:36.585"></status>
</kw>
<status status="FAIL" endtime="20191025 23:49:36.587" starttime="20191025 23:49:25.473"></status>
</kw>
<status status="FAIL" endtime="20191025 23:49:36.588" starttime="20191025 23:49:25.472"></status>
</kw>
<status status="FAIL" endtime="20191025 23:49:36.588" critical="yes" starttime="20191025 23:49:18.772">255 != 0</status>
</test>
<test id="s1-s5-t9" name="Test Multipart Upload with the simplified aws s3 cp API">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:49:36.595" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:49:36.603" level="INFO">${rc} = 1</msg>
<msg timestamp="20191025 23:49:36.604" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191025 23:49:36.604" starttime="20191025 23:49:36.593"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191025 23:49:36.606" starttime="20191025 23:49:36.605"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:49:36.609" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:49:36.796" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:49:36.796" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.002'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191025 23:49:36.796" starttime="20191025 23:49:36.606"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:49:36.802" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:49:37.307" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:49:37.308" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirrors.xtom.com
 * epel: mirror.prgmr.com
 * extras: mirror.fileplanet.com
 * updates: mirrors.xtom.com
Package ...</msg>
<status status="PASS" endtime="20191025 23:49:37.308" starttime="20191025 23:49:36.800"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:49:37.310" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirrors.xtom.com
 * epel: mirror.prgmr.com
 * extras: mirror.fileplanet.com
 * updates: mirrors.xtom.com
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191025 23:49:37.310" starttime="20191025 23:49:37.309"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:49:37.311" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:49:37.311" starttime="20191025 23:49:37.310"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:37.312" starttime="20191025 23:49:36.799"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:37.312" starttime="20191025 23:49:36.798"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:37.312" starttime="20191025 23:49:36.797"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:37.313" starttime="20191025 23:49:36.592"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:37.313" starttime="20191025 23:49:36.591"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:49:37.321" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:49:37.328" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:49:37.328" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191025 23:49:37.329" starttime="20191025 23:49:37.319"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:49:37.330" level="INFO">s3g</msg>
<status status="PASS" endtime="20191025 23:49:37.330" starttime="20191025 23:49:37.329"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:49:37.331" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:49:37.332" starttime="20191025 23:49:37.331"></status>
</kw>
<msg timestamp="20191025 23:49:37.332" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191025 23:49:37.332" starttime="20191025 23:49:37.318"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191025 23:49:37.334" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:49:37.334" starttime="20191025 23:49:37.333"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:49:37.338" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:49:37.356" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:49:37.356" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:49:37.357" starttime="20191025 23:49:37.336"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:49:37.358" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:49:37.358" starttime="20191025 23:49:37.357"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:49:37.359" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:49:37.359" starttime="20191025 23:49:37.358"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:37.360" starttime="20191025 23:49:37.335"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:37.360" starttime="20191025 23:49:37.334"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:37.360" starttime="20191025 23:49:37.316"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:37.360" starttime="20191025 23:49:37.315"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:49:37.365" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:49:40.093" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:49:40.093" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:49:40.093" starttime="20191025 23:49:37.363"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:49:40.095" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
awsAccessKey=testuser/s3g@EXAMPLE.COM
awsSecret=c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671</msg>
<status status="PASS" endtime="20191025 23:49:40.095" starttime="20191025 23:49:40.094"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:49:40.095" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:49:40.095" starttime="20191025 23:49:40.095"></status>
</kw>
<msg timestamp="20191025 23:49:40.096" level="INFO">${result} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:49:40.096" starttime="20191025 23:49:37.362"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsAccessKey=).*</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:49:40.097" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:49:40.097" starttime="20191025 23:49:40.096"></status>
</kw>
<kw name="Get Variable Value" library="BuiltIn">
<doc>Returns variable value or ``default`` if the variable does not exist.</doc>
<arguments>
<arg>${accessKey}</arg>
<arg>sdsdasaasdasd</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:49:40.098" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:49:40.098" starttime="20191025 23:49:40.097"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsSecret=).*</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:49:40.099" level="INFO">${secret} = [u'c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671']</msg>
<status status="PASS" endtime="20191025 23:49:40.100" starttime="20191025 23:49:40.098"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${accessKey[0]}</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:49:40.101" level="INFO">${accessKey} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:49:40.101" starttime="20191025 23:49:40.100"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${secret[0]}</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:49:40.102" level="INFO">${secret} = c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671</msg>
<status status="PASS" endtime="20191025 23:49:40.103" starttime="20191025 23:49:40.102"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set default.s3.signature_version s3v4</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:49:40.107" level="INFO">Running command 'aws configure set default.s3.signature_version s3v4 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:49:40.593" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:49:40.593" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:49:40.593" starttime="20191025 23:49:40.104"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:49:40.595" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:49:40.596" starttime="20191025 23:49:40.594"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:49:40.597" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:49:40.597" starttime="20191025 23:49:40.596"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:40.598" starttime="20191025 23:49:40.103"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_access_key_id ${accessKey}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:49:40.602" level="INFO">Running command 'aws configure set aws_access_key_id testuser/s3g@EXAMPLE.COM 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:49:41.113" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:49:41.113" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:49:41.114" starttime="20191025 23:49:40.599"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:49:41.117" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:49:41.117" starttime="20191025 23:49:41.115"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:49:41.118" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:49:41.118" starttime="20191025 23:49:41.117"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:41.118" starttime="20191025 23:49:40.598"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_secret_access_key ${secret}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:49:41.122" level="INFO">Running command 'aws configure set aws_secret_access_key c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:49:41.601" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:49:41.602" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:49:41.602" starttime="20191025 23:49:41.120"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:49:41.604" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:49:41.604" starttime="20191025 23:49:41.603"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:49:41.605" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:49:41.605" starttime="20191025 23:49:41.604"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:41.606" starttime="20191025 23:49:41.119"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set region us-west-1</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:49:41.610" level="INFO">Running command 'aws configure set region us-west-1 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:49:42.093" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:49:42.093" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:49:42.093" starttime="20191025 23:49:41.607"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:49:42.095" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:49:42.096" starttime="20191025 23:49:42.094"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:49:42.097" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:49:42.097" starttime="20191025 23:49:42.096"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:42.098" starttime="20191025 23:49:41.606"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:42.098" starttime="20191025 23:49:37.361"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:42.098" starttime="20191025 23:49:37.361"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'false'</arg>
<arg>Setup dummy credentials for S3</arg>
</arguments>
<status status="PASS" endtime="20191025 23:49:42.100" starttime="20191025 23:49:42.099"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:42.100" starttime="20191025 23:49:37.314"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:42.100" starttime="20191025 23:49:37.313"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${BUCKET}' == 'generated'</arg>
<arg>Create bucket</arg>
</arguments>
<status status="PASS" endtime="20191025 23:49:42.101" starttime="20191025 23:49:42.101"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:42.102" starttime="20191025 23:49:36.590"></status>
</kw>
<kw name="Create Random file">
<arguments>
<arg>22</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>dd if=/dev/urandom of=/tmp/part1 bs=1048576 count=${size_in_megabytes}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:49:42.107" level="INFO">Running command 'dd if=/dev/urandom of=/tmp/part1 bs=1048576 count=22 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:49:42.305" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:49:42.305" level="INFO">${output} = 22+0 records in
22+0 records out
23068672 bytes (23 MB) copied, 0.190063 s, 121 MB/s</msg>
<status status="PASS" endtime="20191025 23:49:42.305" starttime="20191025 23:49:42.104"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:49:42.307" level="INFO">22+0 records in
22+0 records out
23068672 bytes (23 MB) copied, 0.190063 s, 121 MB/s</msg>
<status status="PASS" endtime="20191025 23:49:42.307" starttime="20191025 23:49:42.306"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:49:42.308" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:49:42.309" starttime="20191025 23:49:42.308"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:42.309" starttime="20191025 23:49:42.103"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:42.310" starttime="20191025 23:49:42.102"></status>
</kw>
<kw name="Execute AWSS3Cli" library="commonawslib">
<arguments>
<arg>cp /tmp/part1 s3://${BUCKET}/mpyawscli</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws s3 --endpoint-url ${ENDPOINT_URL} ${command}</arg>
</arguments>
<assign>
<var>${output}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:49:42.315" level="INFO">Running command 'aws s3 --endpoint-url http://s3g:9878 cp /tmp/part1 s3://bucket-18347/mpyawscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:49:49.145" level="INFO">${rc} = 1</msg>
<msg timestamp="20191025 23:49:49.145" level="INFO">${output} = upload failed: ../../tmp/part1 to s3://bucket-18347/mpyawscli An error occurred (500) when calling the CreateMultipartUpload operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:49:49.145" starttime="20191025 23:49:42.313"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:49:49.146" level="INFO">upload failed: ../../tmp/part1 to s3://bucket-18347/mpyawscli An error occurred (500) when calling the CreateMultipartUpload operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:49:49.146" starttime="20191025 23:49:49.145"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:49:49.147" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191025 23:49:49.147" level="FAIL">1 != 0</msg>
<status status="FAIL" endtime="20191025 23:49:49.147" starttime="20191025 23:49:49.146"></status>
</kw>
<status status="FAIL" endtime="20191025 23:49:49.148" starttime="20191025 23:49:42.311"></status>
</kw>
<status status="FAIL" endtime="20191025 23:49:49.148" starttime="20191025 23:49:42.310"></status>
</kw>
<status status="FAIL" endtime="20191025 23:49:49.148" critical="yes" starttime="20191025 23:49:36.589">1 != 0</status>
</test>
<test id="s1-s5-t10" name="Test Multipart Upload Put With Copy">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:49:49.153" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:49:49.159" level="INFO">${rc} = 1</msg>
<msg timestamp="20191025 23:49:49.160" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191025 23:49:49.160" starttime="20191025 23:49:49.151"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191025 23:49:49.162" starttime="20191025 23:49:49.160"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:49:49.164" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:49:49.357" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:49:49.357" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.002'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191025 23:49:49.357" starttime="20191025 23:49:49.162"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:49:49.365" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:49:49.900" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:49:49.901" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirrors.xtom.com
 * epel: mirror.prgmr.com
 * extras: mirror.fileplanet.com
 * updates: mirrors.xtom.com
Package ...</msg>
<status status="PASS" endtime="20191025 23:49:49.901" starttime="20191025 23:49:49.363"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:49:49.902" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirrors.xtom.com
 * epel: mirror.prgmr.com
 * extras: mirror.fileplanet.com
 * updates: mirrors.xtom.com
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191025 23:49:49.902" starttime="20191025 23:49:49.901"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:49:49.903" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:49:49.903" starttime="20191025 23:49:49.902"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:49.903" starttime="20191025 23:49:49.361"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:49.903" starttime="20191025 23:49:49.360"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:49.903" starttime="20191025 23:49:49.358"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:49.904" starttime="20191025 23:49:49.150"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:49.904" starttime="20191025 23:49:49.150"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:49:49.909" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:49:49.916" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:49:49.916" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191025 23:49:49.916" starttime="20191025 23:49:49.907"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:49:49.918" level="INFO">s3g</msg>
<status status="PASS" endtime="20191025 23:49:49.918" starttime="20191025 23:49:49.917"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:49:49.920" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:49:49.920" starttime="20191025 23:49:49.919"></status>
</kw>
<msg timestamp="20191025 23:49:49.921" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191025 23:49:49.921" starttime="20191025 23:49:49.906"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191025 23:49:49.922" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:49:49.922" starttime="20191025 23:49:49.921"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:49:49.927" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:49:49.944" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:49:49.944" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:49:49.944" starttime="20191025 23:49:49.925"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:49:49.945" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:49:49.945" starttime="20191025 23:49:49.945"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:49:49.946" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:49:49.947" starttime="20191025 23:49:49.946"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:49.947" starttime="20191025 23:49:49.924"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:49.947" starttime="20191025 23:49:49.923"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:49.948" starttime="20191025 23:49:49.906"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:49.948" starttime="20191025 23:49:49.905"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:49:49.953" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:49:52.630" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:49:52.630" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:49:52.630" starttime="20191025 23:49:49.950"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:49:52.631" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
awsAccessKey=testuser/s3g@EXAMPLE.COM
awsSecret=c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671</msg>
<status status="PASS" endtime="20191025 23:49:52.632" starttime="20191025 23:49:52.631"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:49:52.632" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:49:52.632" starttime="20191025 23:49:52.632"></status>
</kw>
<msg timestamp="20191025 23:49:52.633" level="INFO">${result} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:49:52.633" starttime="20191025 23:49:49.950"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsAccessKey=).*</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:49:52.634" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:49:52.634" starttime="20191025 23:49:52.633"></status>
</kw>
<kw name="Get Variable Value" library="BuiltIn">
<doc>Returns variable value or ``default`` if the variable does not exist.</doc>
<arguments>
<arg>${accessKey}</arg>
<arg>sdsdasaasdasd</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:49:52.635" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:49:52.635" starttime="20191025 23:49:52.634"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsSecret=).*</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:49:52.635" level="INFO">${secret} = [u'c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671']</msg>
<status status="PASS" endtime="20191025 23:49:52.635" starttime="20191025 23:49:52.635"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${accessKey[0]}</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:49:52.636" level="INFO">${accessKey} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:49:52.636" starttime="20191025 23:49:52.636"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${secret[0]}</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:49:52.637" level="INFO">${secret} = c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671</msg>
<status status="PASS" endtime="20191025 23:49:52.637" starttime="20191025 23:49:52.637"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set default.s3.signature_version s3v4</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:49:52.640" level="INFO">Running command 'aws configure set default.s3.signature_version s3v4 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:49:53.131" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:49:53.131" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:49:53.132" starttime="20191025 23:49:52.638"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:49:53.133" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:49:53.133" starttime="20191025 23:49:53.132"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:49:53.134" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:49:53.135" starttime="20191025 23:49:53.134"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:53.135" starttime="20191025 23:49:52.637"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_access_key_id ${accessKey}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:49:53.138" level="INFO">Running command 'aws configure set aws_access_key_id testuser/s3g@EXAMPLE.COM 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:49:53.643" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:49:53.643" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:49:53.643" starttime="20191025 23:49:53.136"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:49:53.645" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:49:53.645" starttime="20191025 23:49:53.644"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:49:53.647" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:49:53.647" starttime="20191025 23:49:53.646"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:53.647" starttime="20191025 23:49:53.135"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_secret_access_key ${secret}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:49:53.652" level="INFO">Running command 'aws configure set aws_secret_access_key c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:49:54.109" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:49:54.110" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:49:54.110" starttime="20191025 23:49:53.649"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:49:54.112" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:49:54.112" starttime="20191025 23:49:54.111"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:49:54.113" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:49:54.113" starttime="20191025 23:49:54.112"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:54.114" starttime="20191025 23:49:53.648"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set region us-west-1</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:49:54.117" level="INFO">Running command 'aws configure set region us-west-1 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:49:54.594" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:49:54.594" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:49:54.595" starttime="20191025 23:49:54.115"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:49:54.596" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:49:54.596" starttime="20191025 23:49:54.595"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:49:54.597" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:49:54.597" starttime="20191025 23:49:54.597"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:54.598" starttime="20191025 23:49:54.114"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:54.598" starttime="20191025 23:49:49.949"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:54.598" starttime="20191025 23:49:49.948"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'false'</arg>
<arg>Setup dummy credentials for S3</arg>
</arguments>
<status status="PASS" endtime="20191025 23:49:54.599" starttime="20191025 23:49:54.598"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:54.599" starttime="20191025 23:49:49.905"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:54.600" starttime="20191025 23:49:49.904"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${BUCKET}' == 'generated'</arg>
<arg>Create bucket</arg>
</arguments>
<status status="PASS" endtime="20191025 23:49:54.600" starttime="20191025 23:49:54.600"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:54.601" starttime="20191025 23:49:49.150"></status>
</kw>
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Create Random file</arg>
<arg>5</arg>
</arguments>
<kw name="Create Random file">
<arguments>
<arg>5</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>dd if=/dev/urandom of=/tmp/part1 bs=1048576 count=${size_in_megabytes}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:49:54.605" level="INFO">Running command 'dd if=/dev/urandom of=/tmp/part1 bs=1048576 count=5 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:49:54.676" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:49:54.676" level="INFO">${output} = 5+0 records in
5+0 records out
5242880 bytes (5.2 MB) copied, 0.0539956 s, 97.1 MB/s</msg>
<status status="PASS" endtime="20191025 23:49:54.677" starttime="20191025 23:49:54.603"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:49:54.678" level="INFO">5+0 records in
5+0 records out
5242880 bytes (5.2 MB) copied, 0.0539956 s, 97.1 MB/s</msg>
<status status="PASS" endtime="20191025 23:49:54.678" starttime="20191025 23:49:54.677"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:49:54.679" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:49:54.680" starttime="20191025 23:49:54.679"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:54.680" starttime="20191025 23:49:54.602"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:54.681" starttime="20191025 23:49:54.602"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:54.681" starttime="20191025 23:49:54.601"></status>
</kw>
<kw name="Execute AWSS3APICli" library="commonawslib">
<arguments>
<arg>put-object --bucket ${BUCKET} --key copytest/source --body /tmp/part1</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws s3api --endpoint-url ${ENDPOINT_URL} ${command}</arg>
</arguments>
<assign>
<var>${output}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:49:54.686" level="INFO">Running command 'aws s3api --endpoint-url http://s3g:9878 put-object --bucket bucket-18347 --key copytest/source --body /tmp/part1 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:50:02.818" level="INFO">${rc} = 255</msg>
<msg timestamp="20191025 23:50:02.818" level="INFO">${output} = 
('Connection aborted.', error(32, 'Broken pipe'))</msg>
<status status="PASS" endtime="20191025 23:50:02.818" starttime="20191025 23:49:54.683"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:50:02.821" level="INFO">
('Connection aborted.', error(32, 'Broken pipe'))</msg>
<status status="PASS" endtime="20191025 23:50:02.821" starttime="20191025 23:50:02.819"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:50:02.822" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191025 23:50:02.822" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191025 23:50:02.823" starttime="20191025 23:50:02.821"></status>
</kw>
<status status="FAIL" endtime="20191025 23:50:02.823" starttime="20191025 23:49:54.682"></status>
</kw>
<status status="FAIL" endtime="20191025 23:50:02.824" starttime="20191025 23:49:54.681"></status>
</kw>
<status status="FAIL" endtime="20191025 23:50:02.824" critical="yes" starttime="20191025 23:49:49.149">255 != 0</status>
</test>
<test id="s1-s5-t11" name="Test Multipart Upload Put With Copy and range">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:50:02.833" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:50:02.841" level="INFO">${rc} = 1</msg>
<msg timestamp="20191025 23:50:02.841" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191025 23:50:02.841" starttime="20191025 23:50:02.829"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191025 23:50:02.843" starttime="20191025 23:50:02.842"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:50:02.846" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:50:03.037" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:50:03.037" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.002'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191025 23:50:03.037" starttime="20191025 23:50:02.844"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:50:03.044" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:50:03.607" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:50:03.607" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirrors.xtom.com
 * epel: mirror.prgmr.com
 * extras: mirror.fileplanet.com
 * updates: mirrors.xtom.com
Package ...</msg>
<status status="PASS" endtime="20191025 23:50:03.608" starttime="20191025 23:50:03.041"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:50:03.609" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirrors.xtom.com
 * epel: mirror.prgmr.com
 * extras: mirror.fileplanet.com
 * updates: mirrors.xtom.com
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191025 23:50:03.610" starttime="20191025 23:50:03.608"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:50:03.611" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:50:03.611" starttime="20191025 23:50:03.610"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:03.612" starttime="20191025 23:50:03.040"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:03.612" starttime="20191025 23:50:03.040"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:03.612" starttime="20191025 23:50:03.038"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:03.612" starttime="20191025 23:50:02.828"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:03.613" starttime="20191025 23:50:02.827"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:50:03.620" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:50:03.627" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:50:03.628" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191025 23:50:03.628" starttime="20191025 23:50:03.617"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:50:03.630" level="INFO">s3g</msg>
<status status="PASS" endtime="20191025 23:50:03.630" starttime="20191025 23:50:03.629"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:50:03.631" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:50:03.631" starttime="20191025 23:50:03.630"></status>
</kw>
<msg timestamp="20191025 23:50:03.632" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191025 23:50:03.632" starttime="20191025 23:50:03.617"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191025 23:50:03.634" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:50:03.634" starttime="20191025 23:50:03.633"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:50:03.639" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:50:03.657" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:50:03.657" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:50:03.657" starttime="20191025 23:50:03.637"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:50:03.659" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:50:03.659" starttime="20191025 23:50:03.658"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:50:03.660" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:50:03.660" starttime="20191025 23:50:03.659"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:03.661" starttime="20191025 23:50:03.636"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:03.661" starttime="20191025 23:50:03.634"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:03.661" starttime="20191025 23:50:03.616"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:03.662" starttime="20191025 23:50:03.615"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:50:03.667" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:50:06.554" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:50:06.554" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:50:06.554" starttime="20191025 23:50:03.665"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:50:06.556" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
awsAccessKey=testuser/s3g@EXAMPLE.COM
awsSecret=c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671</msg>
<status status="PASS" endtime="20191025 23:50:06.556" starttime="20191025 23:50:06.555"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:50:06.557" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:50:06.557" starttime="20191025 23:50:06.556"></status>
</kw>
<msg timestamp="20191025 23:50:06.558" level="INFO">${result} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:50:06.558" starttime="20191025 23:50:03.664"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsAccessKey=).*</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:50:06.560" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:50:06.560" starttime="20191025 23:50:06.558"></status>
</kw>
<kw name="Get Variable Value" library="BuiltIn">
<doc>Returns variable value or ``default`` if the variable does not exist.</doc>
<arguments>
<arg>${accessKey}</arg>
<arg>sdsdasaasdasd</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:50:06.561" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:50:06.561" starttime="20191025 23:50:06.560"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsSecret=).*</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:50:06.562" level="INFO">${secret} = [u'c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671']</msg>
<status status="PASS" endtime="20191025 23:50:06.562" starttime="20191025 23:50:06.561"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${accessKey[0]}</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:50:06.563" level="INFO">${accessKey} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:50:06.563" starttime="20191025 23:50:06.562"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${secret[0]}</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:50:06.564" level="INFO">${secret} = c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671</msg>
<status status="PASS" endtime="20191025 23:50:06.564" starttime="20191025 23:50:06.563"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set default.s3.signature_version s3v4</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:50:06.567" level="INFO">Running command 'aws configure set default.s3.signature_version s3v4 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:50:07.053" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:50:07.053" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:50:07.053" starttime="20191025 23:50:06.565"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:50:07.055" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:50:07.055" starttime="20191025 23:50:07.054"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:50:07.056" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:50:07.057" starttime="20191025 23:50:07.056"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:07.057" starttime="20191025 23:50:06.564"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_access_key_id ${accessKey}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:50:07.061" level="INFO">Running command 'aws configure set aws_access_key_id testuser/s3g@EXAMPLE.COM 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:50:07.560" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:50:07.561" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:50:07.561" starttime="20191025 23:50:07.059"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:50:07.563" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:50:07.563" starttime="20191025 23:50:07.562"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:50:07.564" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:50:07.565" starttime="20191025 23:50:07.564"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:07.565" starttime="20191025 23:50:07.058"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_secret_access_key ${secret}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:50:07.570" level="INFO">Running command 'aws configure set aws_secret_access_key c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:50:08.076" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:50:08.076" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:50:08.076" starttime="20191025 23:50:07.567"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:50:08.078" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:50:08.078" starttime="20191025 23:50:08.077"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:50:08.079" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:50:08.079" starttime="20191025 23:50:08.078"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:08.080" starttime="20191025 23:50:07.566"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set region us-west-1</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:50:08.084" level="INFO">Running command 'aws configure set region us-west-1 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:50:08.511" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:50:08.511" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:50:08.511" starttime="20191025 23:50:08.081"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:50:08.513" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:50:08.513" starttime="20191025 23:50:08.512"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:50:08.515" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:50:08.515" starttime="20191025 23:50:08.514"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:08.515" starttime="20191025 23:50:08.080"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:08.516" starttime="20191025 23:50:03.663"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:08.516" starttime="20191025 23:50:03.662"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'false'</arg>
<arg>Setup dummy credentials for S3</arg>
</arguments>
<status status="PASS" endtime="20191025 23:50:08.517" starttime="20191025 23:50:08.516"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:08.518" starttime="20191025 23:50:03.614"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:08.518" starttime="20191025 23:50:03.613"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${BUCKET}' == 'generated'</arg>
<arg>Create bucket</arg>
</arguments>
<status status="PASS" endtime="20191025 23:50:08.519" starttime="20191025 23:50:08.518"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:08.519" starttime="20191025 23:50:02.826"></status>
</kw>
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Create Random file</arg>
<arg>10</arg>
</arguments>
<kw name="Create Random file">
<arguments>
<arg>10</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>dd if=/dev/urandom of=/tmp/part1 bs=1048576 count=${size_in_megabytes}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:50:08.525" level="INFO">Running command 'dd if=/dev/urandom of=/tmp/part1 bs=1048576 count=10 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:50:08.630" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:50:08.630" level="INFO">${output} = 10+0 records in
10+0 records out
10485760 bytes (10 MB) copied, 0.0973276 s, 108 MB/s</msg>
<status status="PASS" endtime="20191025 23:50:08.630" starttime="20191025 23:50:08.523"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:50:08.632" level="INFO">10+0 records in
10+0 records out
10485760 bytes (10 MB) copied, 0.0973276 s, 108 MB/s</msg>
<status status="PASS" endtime="20191025 23:50:08.632" starttime="20191025 23:50:08.631"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:50:08.633" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:50:08.633" starttime="20191025 23:50:08.632"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:08.634" starttime="20191025 23:50:08.522"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:08.634" starttime="20191025 23:50:08.521"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:08.634" starttime="20191025 23:50:08.520"></status>
</kw>
<kw name="Execute AWSS3APICli" library="commonawslib">
<arguments>
<arg>put-object --bucket ${BUCKET} --key copyrange/source --body /tmp/part1</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws s3api --endpoint-url ${ENDPOINT_URL} ${command}</arg>
</arguments>
<assign>
<var>${output}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:50:08.639" level="INFO">Running command 'aws s3api --endpoint-url http://s3g:9878 put-object --bucket bucket-18347 --key copyrange/source --body /tmp/part1 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:50:17.328" level="INFO">${rc} = 255</msg>
<msg timestamp="20191025 23:50:17.328" level="INFO">${output} = 
('Connection aborted.', error(32, 'Broken pipe'))</msg>
<status status="PASS" endtime="20191025 23:50:17.328" starttime="20191025 23:50:08.637"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:50:17.330" level="INFO">
('Connection aborted.', error(32, 'Broken pipe'))</msg>
<status status="PASS" endtime="20191025 23:50:17.331" starttime="20191025 23:50:17.329"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:50:17.333" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191025 23:50:17.333" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191025 23:50:17.334" starttime="20191025 23:50:17.331"></status>
</kw>
<status status="FAIL" endtime="20191025 23:50:17.334" starttime="20191025 23:50:08.636"></status>
</kw>
<status status="FAIL" endtime="20191025 23:50:17.334" starttime="20191025 23:50:08.635"></status>
</kw>
<status status="FAIL" endtime="20191025 23:50:17.335" critical="yes" starttime="20191025 23:50:02.825">255 != 0</status>
</test>
<test id="s1-s5-t12" name="Test Multipart Upload list">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:50:17.341" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:50:17.350" level="INFO">${rc} = 1</msg>
<msg timestamp="20191025 23:50:17.350" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191025 23:50:17.350" starttime="20191025 23:50:17.339"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191025 23:50:17.353" starttime="20191025 23:50:17.351"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:50:17.355" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:50:17.564" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:50:17.564" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.002'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191025 23:50:17.565" starttime="20191025 23:50:17.353"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:50:17.570" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:50:18.071" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:50:18.071" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirrors.xtom.com
 * epel: mirror.prgmr.com
 * extras: mirror.fileplanet.com
 * updates: mirrors.xtom.com
Package ...</msg>
<status status="PASS" endtime="20191025 23:50:18.071" starttime="20191025 23:50:17.568"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:50:18.073" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirrors.xtom.com
 * epel: mirror.prgmr.com
 * extras: mirror.fileplanet.com
 * updates: mirrors.xtom.com
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191025 23:50:18.073" starttime="20191025 23:50:18.072"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:50:18.074" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:50:18.075" starttime="20191025 23:50:18.074"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:18.075" starttime="20191025 23:50:17.567"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:18.075" starttime="20191025 23:50:17.567"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:18.076" starttime="20191025 23:50:17.565"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:18.076" starttime="20191025 23:50:17.338"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:18.076" starttime="20191025 23:50:17.338"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:50:18.083" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:50:18.091" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:50:18.091" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191025 23:50:18.091" starttime="20191025 23:50:18.081"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:50:18.093" level="INFO">s3g</msg>
<status status="PASS" endtime="20191025 23:50:18.093" starttime="20191025 23:50:18.092"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:50:18.094" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:50:18.094" starttime="20191025 23:50:18.093"></status>
</kw>
<msg timestamp="20191025 23:50:18.095" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191025 23:50:18.095" starttime="20191025 23:50:18.080"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191025 23:50:18.097" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:50:18.097" starttime="20191025 23:50:18.095"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:50:18.103" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:50:18.119" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:50:18.119" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:50:18.119" starttime="20191025 23:50:18.099"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:50:18.120" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:50:18.121" starttime="20191025 23:50:18.120"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:50:18.121" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:50:18.122" starttime="20191025 23:50:18.121"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:18.122" starttime="20191025 23:50:18.098"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:18.122" starttime="20191025 23:50:18.097"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:18.123" starttime="20191025 23:50:18.079"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:18.123" starttime="20191025 23:50:18.078"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:50:18.128" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:50:20.807" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:50:20.808" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:50:20.808" starttime="20191025 23:50:18.125"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:50:20.809" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
awsAccessKey=testuser/s3g@EXAMPLE.COM
awsSecret=c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671</msg>
<status status="PASS" endtime="20191025 23:50:20.809" starttime="20191025 23:50:20.808"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:50:20.810" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:50:20.810" starttime="20191025 23:50:20.810"></status>
</kw>
<msg timestamp="20191025 23:50:20.811" level="INFO">${result} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:50:20.811" starttime="20191025 23:50:18.125"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsAccessKey=).*</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:50:20.812" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:50:20.812" starttime="20191025 23:50:20.811"></status>
</kw>
<kw name="Get Variable Value" library="BuiltIn">
<doc>Returns variable value or ``default`` if the variable does not exist.</doc>
<arguments>
<arg>${accessKey}</arg>
<arg>sdsdasaasdasd</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:50:20.813" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:50:20.813" starttime="20191025 23:50:20.812"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsSecret=).*</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:50:20.813" level="INFO">${secret} = [u'c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671']</msg>
<status status="PASS" endtime="20191025 23:50:20.813" starttime="20191025 23:50:20.813"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${accessKey[0]}</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:50:20.814" level="INFO">${accessKey} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:50:20.814" starttime="20191025 23:50:20.814"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${secret[0]}</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:50:20.815" level="INFO">${secret} = c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671</msg>
<status status="PASS" endtime="20191025 23:50:20.815" starttime="20191025 23:50:20.815"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set default.s3.signature_version s3v4</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:50:20.818" level="INFO">Running command 'aws configure set default.s3.signature_version s3v4 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:50:21.295" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:50:21.295" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:50:21.295" starttime="20191025 23:50:20.816"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:50:21.297" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:50:21.297" starttime="20191025 23:50:21.296"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:50:21.298" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:50:21.298" starttime="20191025 23:50:21.297"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:21.299" starttime="20191025 23:50:20.815"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_access_key_id ${accessKey}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:50:21.302" level="INFO">Running command 'aws configure set aws_access_key_id testuser/s3g@EXAMPLE.COM 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:50:21.828" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:50:21.828" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:50:21.828" starttime="20191025 23:50:21.300"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:50:21.830" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:50:21.831" starttime="20191025 23:50:21.829"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:50:21.832" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:50:21.832" starttime="20191025 23:50:21.831"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:21.832" starttime="20191025 23:50:21.299"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_secret_access_key ${secret}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:50:21.836" level="INFO">Running command 'aws configure set aws_secret_access_key c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:50:22.290" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:50:22.290" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:50:22.290" starttime="20191025 23:50:21.834"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:50:22.292" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:50:22.292" starttime="20191025 23:50:22.291"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:50:22.293" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:50:22.293" starttime="20191025 23:50:22.292"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:22.294" starttime="20191025 23:50:21.833"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set region us-west-1</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:50:22.298" level="INFO">Running command 'aws configure set region us-west-1 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:50:22.753" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:50:22.753" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:50:22.753" starttime="20191025 23:50:22.295"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:50:22.755" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:50:22.755" starttime="20191025 23:50:22.754"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:50:22.756" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:50:22.757" starttime="20191025 23:50:22.755"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:22.758" starttime="20191025 23:50:22.294"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:22.758" starttime="20191025 23:50:18.124"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:22.758" starttime="20191025 23:50:18.123"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'false'</arg>
<arg>Setup dummy credentials for S3</arg>
</arguments>
<status status="PASS" endtime="20191025 23:50:22.760" starttime="20191025 23:50:22.759"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:22.760" starttime="20191025 23:50:18.078"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:22.760" starttime="20191025 23:50:18.077"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${BUCKET}' == 'generated'</arg>
<arg>Create bucket</arg>
</arguments>
<status status="PASS" endtime="20191025 23:50:22.761" starttime="20191025 23:50:22.761"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:22.762" starttime="20191025 23:50:17.337"></status>
</kw>
<kw name="Execute AWSS3APICli" library="commonawslib">
<arguments>
<arg>create-multipart-upload --bucket ${BUCKET} --key listtest/key1</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws s3api --endpoint-url ${ENDPOINT_URL} ${command}</arg>
</arguments>
<assign>
<var>${output}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:50:22.767" level="INFO">Running command 'aws s3api --endpoint-url http://s3g:9878 create-multipart-upload --bucket bucket-18347 --key listtest/key1 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:50:29.057" level="INFO">${rc} = 255</msg>
<msg timestamp="20191025 23:50:29.057" level="INFO">${output} = 
An error occurred (500) when calling the CreateMultipartUpload operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:50:29.057" starttime="20191025 23:50:22.764"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:50:29.059" level="INFO">
An error occurred (500) when calling the CreateMultipartUpload operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:50:29.059" starttime="20191025 23:50:29.058"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:50:29.060" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191025 23:50:29.061" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191025 23:50:29.061" starttime="20191025 23:50:29.060"></status>
</kw>
<status status="FAIL" endtime="20191025 23:50:29.062" starttime="20191025 23:50:22.763"></status>
</kw>
<status status="FAIL" endtime="20191025 23:50:29.062" starttime="20191025 23:50:22.762"></status>
</kw>
<status status="FAIL" endtime="20191025 23:50:29.063" critical="yes" starttime="20191025 23:50:17.336">255 != 0</status>
</test>
<doc>S3 gateway test with aws cli</doc>
<status status="FAIL" endtime="20191025 23:50:29.067" starttime="20191025 23:47:50.655"></status>
</suite>
<suite source="/opt/hadoop/smoketest/s3/objectcopy.robot" id="s1-s6" name="Objectcopy">
<test id="s1-s6-t1" name="Copy Object Happy Scenario">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:50:29.099" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:50:29.106" level="INFO">${rc} = 1</msg>
<msg timestamp="20191025 23:50:29.106" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191025 23:50:29.107" starttime="20191025 23:50:29.095"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191025 23:50:29.109" starttime="20191025 23:50:29.108"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:50:29.112" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:50:29.318" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:50:29.318" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.002'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191025 23:50:29.318" starttime="20191025 23:50:29.109"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:50:29.325" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:50:29.901" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:50:29.901" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirrors.xtom.com
 * epel: mirror.prgmr.com
 * extras: mirror.fileplanet.com
 * updates: mirrors.xtom.com
Package ...</msg>
<status status="PASS" endtime="20191025 23:50:29.901" starttime="20191025 23:50:29.322"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:50:29.902" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirrors.xtom.com
 * epel: mirror.prgmr.com
 * extras: mirror.fileplanet.com
 * updates: mirrors.xtom.com
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191025 23:50:29.902" starttime="20191025 23:50:29.901"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:50:29.903" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:50:29.903" starttime="20191025 23:50:29.903"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:29.904" starttime="20191025 23:50:29.321"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:29.904" starttime="20191025 23:50:29.321"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:29.904" starttime="20191025 23:50:29.319"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:29.904" starttime="20191025 23:50:29.093"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:29.904" starttime="20191025 23:50:29.093"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:50:29.909" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:50:29.915" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:50:29.916" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191025 23:50:29.916" starttime="20191025 23:50:29.907"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:50:29.917" level="INFO">s3g</msg>
<status status="PASS" endtime="20191025 23:50:29.917" starttime="20191025 23:50:29.916"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:50:29.918" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:50:29.918" starttime="20191025 23:50:29.918"></status>
</kw>
<msg timestamp="20191025 23:50:29.919" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191025 23:50:29.919" starttime="20191025 23:50:29.907"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191025 23:50:29.922" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:50:29.922" starttime="20191025 23:50:29.919"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:50:29.926" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:50:29.956" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:50:29.956" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:50:29.956" starttime="20191025 23:50:29.924"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:50:29.957" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:50:29.957" starttime="20191025 23:50:29.956"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:50:29.958" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:50:29.958" starttime="20191025 23:50:29.958"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:29.959" starttime="20191025 23:50:29.923"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:29.959" starttime="20191025 23:50:29.922"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:29.959" starttime="20191025 23:50:29.906"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:29.959" starttime="20191025 23:50:29.906"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:50:29.963" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:50:32.673" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:50:32.673" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:50:32.673" starttime="20191025 23:50:29.961"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:50:32.675" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
awsAccessKey=testuser/s3g@EXAMPLE.COM
awsSecret=c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671</msg>
<status status="PASS" endtime="20191025 23:50:32.676" starttime="20191025 23:50:32.674"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:50:32.676" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:50:32.676" starttime="20191025 23:50:32.676"></status>
</kw>
<msg timestamp="20191025 23:50:32.677" level="INFO">${result} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:50:32.677" starttime="20191025 23:50:29.961"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsAccessKey=).*</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:50:32.678" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:50:32.678" starttime="20191025 23:50:32.677"></status>
</kw>
<kw name="Get Variable Value" library="BuiltIn">
<doc>Returns variable value or ``default`` if the variable does not exist.</doc>
<arguments>
<arg>${accessKey}</arg>
<arg>sdsdasaasdasd</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:50:32.678" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:50:32.679" starttime="20191025 23:50:32.678"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsSecret=).*</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:50:32.679" level="INFO">${secret} = [u'c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671']</msg>
<status status="PASS" endtime="20191025 23:50:32.679" starttime="20191025 23:50:32.679"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${accessKey[0]}</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:50:32.680" level="INFO">${accessKey} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:50:32.680" starttime="20191025 23:50:32.679"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${secret[0]}</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:50:32.681" level="INFO">${secret} = c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671</msg>
<status status="PASS" endtime="20191025 23:50:32.681" starttime="20191025 23:50:32.680"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set default.s3.signature_version s3v4</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:50:32.683" level="INFO">Running command 'aws configure set default.s3.signature_version s3v4 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:50:33.161" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:50:33.161" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:50:33.161" starttime="20191025 23:50:32.682"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:50:33.163" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:50:33.163" starttime="20191025 23:50:33.162"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:50:33.164" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:50:33.165" starttime="20191025 23:50:33.164"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:33.165" starttime="20191025 23:50:32.681"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_access_key_id ${accessKey}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:50:33.169" level="INFO">Running command 'aws configure set aws_access_key_id testuser/s3g@EXAMPLE.COM 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:50:33.603" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:50:33.603" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:50:33.603" starttime="20191025 23:50:33.167"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:50:33.605" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:50:33.605" starttime="20191025 23:50:33.604"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:50:33.607" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:50:33.607" starttime="20191025 23:50:33.606"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:33.607" starttime="20191025 23:50:33.166"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_secret_access_key ${secret}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:50:33.612" level="INFO">Running command 'aws configure set aws_secret_access_key c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:50:34.008" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:50:34.009" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:50:34.009" starttime="20191025 23:50:33.609"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:50:34.011" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:50:34.011" starttime="20191025 23:50:34.010"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:50:34.012" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:50:34.012" starttime="20191025 23:50:34.011"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:34.013" starttime="20191025 23:50:33.608"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set region us-west-1</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:50:34.016" level="INFO">Running command 'aws configure set region us-west-1 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:50:34.410" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:50:34.410" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:50:34.410" starttime="20191025 23:50:34.014"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:50:34.412" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:50:34.412" starttime="20191025 23:50:34.411"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:50:34.413" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:50:34.414" starttime="20191025 23:50:34.413"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:34.414" starttime="20191025 23:50:34.013"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:34.414" starttime="20191025 23:50:29.960"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:34.415" starttime="20191025 23:50:29.959"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'false'</arg>
<arg>Setup dummy credentials for S3</arg>
</arguments>
<status status="PASS" endtime="20191025 23:50:34.416" starttime="20191025 23:50:34.415"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:34.416" starttime="20191025 23:50:29.905"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:34.416" starttime="20191025 23:50:29.904"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${BUCKET}' == 'generated'</arg>
<arg>Create bucket</arg>
</arguments>
<kw name="Create bucket" library="commonawslib">
<kw name="Generate Random String" library="String">
<doc>Generates a string with a desired ``length`` from the given ``chars``.</doc>
<arguments>
<arg>5</arg>
<arg>[NUMBERS]</arg>
</arguments>
<assign>
<var>${postfix}</var>
</assign>
<msg timestamp="20191025 23:50:34.419" level="INFO">${postfix} = 95363</msg>
<status status="PASS" endtime="20191025 23:50:34.419" starttime="20191025 23:50:34.418"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${BUCKET}</arg>
<arg>bucket-${postfix}</arg>
</arguments>
<msg timestamp="20191025 23:50:34.420" level="INFO">${BUCKET} = bucket-95363</msg>
<status status="PASS" endtime="20191025 23:50:34.421" starttime="20191025 23:50:34.420"></status>
</kw>
<kw name="Execute AWSS3APICli" library="commonawslib">
<arguments>
<arg>create-bucket --bucket ${BUCKET}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws s3api --endpoint-url ${ENDPOINT_URL} ${command}</arg>
</arguments>
<assign>
<var>${output}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:50:34.425" level="INFO">Running command 'aws s3api --endpoint-url http://s3g:9878 create-bucket --bucket bucket-95363 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:50:44.315" level="INFO">${rc} = 255</msg>
<msg timestamp="20191025 23:50:44.316" level="INFO">${output} = 
An error occurred (500) when calling the CreateBucket operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:50:44.316" starttime="20191025 23:50:34.423"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:50:44.319" level="INFO">
An error occurred (500) when calling the CreateBucket operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:50:44.319" starttime="20191025 23:50:44.317"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:50:44.320" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191025 23:50:44.321" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191025 23:50:44.321" starttime="20191025 23:50:44.319"></status>
</kw>
<status status="FAIL" endtime="20191025 23:50:44.322" starttime="20191025 23:50:34.422"></status>
</kw>
<status status="FAIL" endtime="20191025 23:50:44.322" starttime="20191025 23:50:34.421"></status>
</kw>
<status status="FAIL" endtime="20191025 23:50:44.322" starttime="20191025 23:50:34.418"></status>
</kw>
<status status="FAIL" endtime="20191025 23:50:44.323" starttime="20191025 23:50:34.417"></status>
</kw>
<status status="FAIL" endtime="20191025 23:50:44.323" starttime="20191025 23:50:29.092"></status>
</kw>
<status status="FAIL" endtime="20191025 23:50:44.323" critical="yes" starttime="20191025 23:50:29.090">Setup failed:
255 != 0</status>
</test>
<test id="s1-s6-t2" name="Copy Object Where Bucket is not available">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:50:44.330" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:50:44.338" level="INFO">${rc} = 1</msg>
<msg timestamp="20191025 23:50:44.338" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191025 23:50:44.338" starttime="20191025 23:50:44.327"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191025 23:50:44.340" starttime="20191025 23:50:44.339"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:50:44.343" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:50:44.518" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:50:44.518" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.002'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191025 23:50:44.518" starttime="20191025 23:50:44.340"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:50:44.525" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:50:45.028" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:50:45.028" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirrors.xtom.com
 * epel: mirror.prgmr.com
 * extras: mirror.fileplanet.com
 * updates: mirrors.xtom.com
Package ...</msg>
<status status="PASS" endtime="20191025 23:50:45.028" starttime="20191025 23:50:44.522"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:50:45.030" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirrors.xtom.com
 * epel: mirror.prgmr.com
 * extras: mirror.fileplanet.com
 * updates: mirrors.xtom.com
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191025 23:50:45.030" starttime="20191025 23:50:45.029"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:50:45.031" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:50:45.032" starttime="20191025 23:50:45.031"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:45.032" starttime="20191025 23:50:44.521"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:45.033" starttime="20191025 23:50:44.520"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:45.033" starttime="20191025 23:50:44.519"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:45.033" starttime="20191025 23:50:44.327"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:45.033" starttime="20191025 23:50:44.326"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:50:45.041" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:50:45.046" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:50:45.047" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191025 23:50:45.047" starttime="20191025 23:50:45.038"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:50:45.048" level="INFO">s3g</msg>
<status status="PASS" endtime="20191025 23:50:45.048" starttime="20191025 23:50:45.047"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:50:45.049" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:50:45.049" starttime="20191025 23:50:45.048"></status>
</kw>
<msg timestamp="20191025 23:50:45.050" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191025 23:50:45.050" starttime="20191025 23:50:45.038"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191025 23:50:45.051" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:50:45.051" starttime="20191025 23:50:45.050"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:50:45.055" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:50:45.072" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:50:45.072" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:50:45.072" starttime="20191025 23:50:45.053"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:50:45.073" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:50:45.073" starttime="20191025 23:50:45.072"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:50:45.074" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:50:45.074" starttime="20191025 23:50:45.073"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:45.074" starttime="20191025 23:50:45.052"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:45.074" starttime="20191025 23:50:45.051"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:45.075" starttime="20191025 23:50:45.037"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:45.075" starttime="20191025 23:50:45.036"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:50:45.079" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:50:47.922" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:50:47.922" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:50:47.922" starttime="20191025 23:50:45.077"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:50:47.924" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
awsAccessKey=testuser/s3g@EXAMPLE.COM
awsSecret=c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671</msg>
<status status="PASS" endtime="20191025 23:50:47.925" starttime="20191025 23:50:47.923"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:50:47.926" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:50:47.926" starttime="20191025 23:50:47.925"></status>
</kw>
<msg timestamp="20191025 23:50:47.927" level="INFO">${result} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:50:47.927" starttime="20191025 23:50:45.076"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsAccessKey=).*</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:50:47.928" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:50:47.928" starttime="20191025 23:50:47.927"></status>
</kw>
<kw name="Get Variable Value" library="BuiltIn">
<doc>Returns variable value or ``default`` if the variable does not exist.</doc>
<arguments>
<arg>${accessKey}</arg>
<arg>sdsdasaasdasd</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:50:47.929" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:50:47.930" starttime="20191025 23:50:47.929"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsSecret=).*</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:50:47.931" level="INFO">${secret} = [u'c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671']</msg>
<status status="PASS" endtime="20191025 23:50:47.931" starttime="20191025 23:50:47.930"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${accessKey[0]}</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:50:47.932" level="INFO">${accessKey} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:50:47.932" starttime="20191025 23:50:47.931"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${secret[0]}</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:50:47.934" level="INFO">${secret} = c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671</msg>
<status status="PASS" endtime="20191025 23:50:47.934" starttime="20191025 23:50:47.933"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set default.s3.signature_version s3v4</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:50:47.938" level="INFO">Running command 'aws configure set default.s3.signature_version s3v4 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:50:48.351" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:50:48.351" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:50:48.352" starttime="20191025 23:50:47.935"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:50:48.354" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:50:48.354" starttime="20191025 23:50:48.353"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:50:48.355" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:50:48.355" starttime="20191025 23:50:48.354"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:48.356" starttime="20191025 23:50:47.934"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_access_key_id ${accessKey}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:50:48.360" level="INFO">Running command 'aws configure set aws_access_key_id testuser/s3g@EXAMPLE.COM 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:50:48.803" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:50:48.804" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:50:48.804" starttime="20191025 23:50:48.357"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:50:48.806" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:50:48.806" starttime="20191025 23:50:48.805"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:50:48.807" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:50:48.807" starttime="20191025 23:50:48.806"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:48.808" starttime="20191025 23:50:48.356"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_secret_access_key ${secret}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:50:48.812" level="INFO">Running command 'aws configure set aws_secret_access_key c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:50:49.328" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:50:49.328" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:50:49.328" starttime="20191025 23:50:48.810"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:50:49.329" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:50:49.329" starttime="20191025 23:50:49.328"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:50:49.330" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:50:49.330" starttime="20191025 23:50:49.329"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:49.330" starttime="20191025 23:50:48.808"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set region us-west-1</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:50:49.333" level="INFO">Running command 'aws configure set region us-west-1 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:50:49.804" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:50:49.805" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:50:49.805" starttime="20191025 23:50:49.331"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:50:49.807" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:50:49.807" starttime="20191025 23:50:49.806"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:50:49.808" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:50:49.810" starttime="20191025 23:50:49.808"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:49.811" starttime="20191025 23:50:49.331"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:49.811" starttime="20191025 23:50:45.076"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:49.811" starttime="20191025 23:50:45.075"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'false'</arg>
<arg>Setup dummy credentials for S3</arg>
</arguments>
<status status="PASS" endtime="20191025 23:50:49.812" starttime="20191025 23:50:49.811"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:49.813" starttime="20191025 23:50:45.035"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:49.813" starttime="20191025 23:50:45.034"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${BUCKET}' == 'generated'</arg>
<arg>Create bucket</arg>
</arguments>
<status status="PASS" endtime="20191025 23:50:49.814" starttime="20191025 23:50:49.813"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:49.814" starttime="20191025 23:50:44.325"></status>
</kw>
<kw name="Execute AWSS3APICli and checkrc" library="commonawslib">
<arguments>
<arg>copy-object --bucket dfdfdfdfdfnonexistent --key copyobject/f1 --copy-source ${BUCKET}/copyobject/f1</arg>
<arg>255</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Execute and checkrc" library="commonlib">
<arguments>
<arg>aws s3api --endpoint-url ${ENDPOINT_URL} ${command}</arg>
<arg>${expected_error_code}</arg>
</arguments>
<assign>
<var>${output}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:50:49.820" level="INFO">Running command 'aws s3api --endpoint-url http://s3g:9878 copy-object --bucket dfdfdfdfdfnonexistent --key copyobject/f1 --copy-source bucket-95363/copyobject/f1 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:50:58.142" level="INFO">${rc} = 255</msg>
<msg timestamp="20191025 23:50:58.142" level="INFO">${output} = 
An error occurred (500) when calling the CopyObject operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:50:58.142" starttime="20191025 23:50:49.817"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:50:58.145" level="INFO">
An error occurred (500) when calling the CopyObject operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:50:58.145" starttime="20191025 23:50:58.143"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
</arguments>
<msg timestamp="20191025 23:50:58.146" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:50:58.147" starttime="20191025 23:50:58.145"></status>
</kw>
<msg timestamp="20191025 23:50:58.147" level="INFO">${output} = 
An error occurred (500) when calling the CopyObject operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:50:58.147" starttime="20191025 23:50:49.816"></status>
</kw>
<msg timestamp="20191025 23:50:58.148" level="INFO">${result} = 
An error occurred (500) when calling the CopyObject operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:50:58.148" starttime="20191025 23:50:49.815"></status>
</kw>
<kw name="Should Contain" library="BuiltIn">
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<arguments>
<arg>${result}</arg>
<arg>NoSuchBucket</arg>
</arguments>
<msg timestamp="20191025 23:50:58.150" level="FAIL">'
An error occurred (500) when calling the CopyObject operation (reached max retries: 4): Internal Server Error' does not contain 'NoSuchBucket'</msg>
<status status="FAIL" endtime="20191025 23:50:58.150" starttime="20191025 23:50:58.149"></status>
</kw>
<status status="FAIL" endtime="20191025 23:50:58.151" critical="yes" starttime="20191025 23:50:44.324">'
An error occurred (500) when calling the CopyObject operation (reached max retries: 4): Internal Server Error' does not contain 'NoSuchBucket'</status>
</test>
<test id="s1-s6-t3" name="Copy Object Where both source and dest are same with change to storageclass">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:50:58.159" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:50:58.166" level="INFO">${rc} = 1</msg>
<msg timestamp="20191025 23:50:58.167" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191025 23:50:58.167" starttime="20191025 23:50:58.156"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191025 23:50:58.169" starttime="20191025 23:50:58.168"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:50:58.172" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:50:58.411" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:50:58.411" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.002'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191025 23:50:58.411" starttime="20191025 23:50:58.169"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:50:58.418" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:50:58.927" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:50:58.927" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirrors.xtom.com
 * epel: mirror.prgmr.com
 * extras: mirror.fileplanet.com
 * updates: mirrors.xtom.com
Package ...</msg>
<status status="PASS" endtime="20191025 23:50:58.927" starttime="20191025 23:50:58.415"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:50:58.929" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirrors.xtom.com
 * epel: mirror.prgmr.com
 * extras: mirror.fileplanet.com
 * updates: mirrors.xtom.com
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191025 23:50:58.929" starttime="20191025 23:50:58.928"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:50:58.930" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:50:58.931" starttime="20191025 23:50:58.930"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:58.931" starttime="20191025 23:50:58.414"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:58.932" starttime="20191025 23:50:58.414"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:58.932" starttime="20191025 23:50:58.412"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:58.932" starttime="20191025 23:50:58.155"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:58.932" starttime="20191025 23:50:58.154"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:50:58.940" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:50:58.948" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:50:58.948" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191025 23:50:58.948" starttime="20191025 23:50:58.937"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:50:58.950" level="INFO">s3g</msg>
<status status="PASS" endtime="20191025 23:50:58.950" starttime="20191025 23:50:58.949"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:50:58.951" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:50:58.952" starttime="20191025 23:50:58.951"></status>
</kw>
<msg timestamp="20191025 23:50:58.952" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191025 23:50:58.952" starttime="20191025 23:50:58.936"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191025 23:50:58.954" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:50:58.954" starttime="20191025 23:50:58.953"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:50:58.959" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:50:58.977" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:50:58.977" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:50:58.977" starttime="20191025 23:50:58.957"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:50:58.979" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:50:58.979" starttime="20191025 23:50:58.978"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:50:58.980" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:50:58.980" starttime="20191025 23:50:58.979"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:58.981" starttime="20191025 23:50:58.955"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:58.981" starttime="20191025 23:50:58.954"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:58.981" starttime="20191025 23:50:58.936"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:58.981" starttime="20191025 23:50:58.935"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:50:58.986" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:51:01.642" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:51:01.642" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:51:01.642" starttime="20191025 23:50:58.984"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:51:01.644" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
awsAccessKey=testuser/s3g@EXAMPLE.COM
awsSecret=c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671</msg>
<status status="PASS" endtime="20191025 23:51:01.644" starttime="20191025 23:51:01.643"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:51:01.644" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:51:01.645" starttime="20191025 23:51:01.644"></status>
</kw>
<msg timestamp="20191025 23:51:01.645" level="INFO">${result} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:51:01.645" starttime="20191025 23:50:58.983"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsAccessKey=).*</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:51:01.646" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:51:01.646" starttime="20191025 23:51:01.646"></status>
</kw>
<kw name="Get Variable Value" library="BuiltIn">
<doc>Returns variable value or ``default`` if the variable does not exist.</doc>
<arguments>
<arg>${accessKey}</arg>
<arg>sdsdasaasdasd</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:51:01.647" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:51:01.647" starttime="20191025 23:51:01.647"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsSecret=).*</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:51:01.648" level="INFO">${secret} = [u'c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671']</msg>
<status status="PASS" endtime="20191025 23:51:01.648" starttime="20191025 23:51:01.648"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${accessKey[0]}</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:51:01.649" level="INFO">${accessKey} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:51:01.649" starttime="20191025 23:51:01.648"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${secret[0]}</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:51:01.650" level="INFO">${secret} = c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671</msg>
<status status="PASS" endtime="20191025 23:51:01.650" starttime="20191025 23:51:01.650"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set default.s3.signature_version s3v4</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:51:01.653" level="INFO">Running command 'aws configure set default.s3.signature_version s3v4 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:51:02.134" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:51:02.135" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:51:02.135" starttime="20191025 23:51:01.651"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:51:02.137" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:51:02.137" starttime="20191025 23:51:02.136"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:51:02.138" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:51:02.138" starttime="20191025 23:51:02.137"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:02.139" starttime="20191025 23:51:01.650"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_access_key_id ${accessKey}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:51:02.143" level="INFO">Running command 'aws configure set aws_access_key_id testuser/s3g@EXAMPLE.COM 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:51:02.606" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:51:02.606" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:51:02.606" starttime="20191025 23:51:02.140"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:51:02.608" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:51:02.608" starttime="20191025 23:51:02.607"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:51:02.610" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:51:02.610" starttime="20191025 23:51:02.609"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:02.611" starttime="20191025 23:51:02.139"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_secret_access_key ${secret}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:51:02.615" level="INFO">Running command 'aws configure set aws_secret_access_key c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:51:03.105" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:51:03.105" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:51:03.106" starttime="20191025 23:51:02.612"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:51:03.107" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:51:03.107" starttime="20191025 23:51:03.106"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:51:03.108" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:51:03.108" starttime="20191025 23:51:03.108"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:03.109" starttime="20191025 23:51:02.611"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set region us-west-1</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:51:03.112" level="INFO">Running command 'aws configure set region us-west-1 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:51:03.579" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:51:03.579" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:51:03.580" starttime="20191025 23:51:03.110"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:51:03.582" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:51:03.582" starttime="20191025 23:51:03.580"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:51:03.583" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:51:03.583" starttime="20191025 23:51:03.582"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:03.584" starttime="20191025 23:51:03.109"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:03.584" starttime="20191025 23:50:58.983"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:03.584" starttime="20191025 23:50:58.982"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'false'</arg>
<arg>Setup dummy credentials for S3</arg>
</arguments>
<status status="PASS" endtime="20191025 23:51:03.586" starttime="20191025 23:51:03.585"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:03.586" starttime="20191025 23:50:58.934"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:03.586" starttime="20191025 23:50:58.933"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${BUCKET}' == 'generated'</arg>
<arg>Create bucket</arg>
</arguments>
<status status="PASS" endtime="20191025 23:51:03.587" starttime="20191025 23:51:03.586"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:03.587" starttime="20191025 23:50:58.153"></status>
</kw>
<kw name="Execute AWSS3APICli" library="commonawslib">
<arguments>
<arg>copy-object --storage-class REDUCED_REDUNDANCY --bucket ${DESTBUCKET} --key copyobject/f1 --copy-source ${DESTBUCKET}/copyobject/f1</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws s3api --endpoint-url ${ENDPOINT_URL} ${command}</arg>
</arguments>
<assign>
<var>${output}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:51:03.593" level="INFO">Running command 'aws s3api --endpoint-url http://s3g:9878 copy-object --storage-class REDUCED_REDUNDANCY --bucket generated1 --key copyobject/f1 --copy-source generated1/copyobject/f1 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:51:04.226" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:51:04.226" level="INFO">${output} = {
    "CopyObjectResult": {
        "LastModified": "2019-10-25T23:51:04.129Z", 
        "ETag": "d2d4c755-6437-4d5a-83f6-5deca4a88b5e"
    }
}</msg>
<status status="PASS" endtime="20191025 23:51:04.226" starttime="20191025 23:51:03.590"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:51:04.227" level="INFO">{
    "CopyObjectResult": {
        "LastModified": "2019-10-25T23:51:04.129Z", 
        "ETag": "d2d4c755-6437-4d5a-83f6-5deca4a88b5e"
    }
}</msg>
<status status="PASS" endtime="20191025 23:51:04.228" starttime="20191025 23:51:04.227"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:51:04.228" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:51:04.229" starttime="20191025 23:51:04.228"></status>
</kw>
<msg timestamp="20191025 23:51:04.229" level="INFO">${output} = {
    "CopyObjectResult": {
        "LastModified": "2019-10-25T23:51:04.129Z", 
        "ETag": "d2d4c755-6437-4d5a-83f6-5deca4a88b5e"
    }
}</msg>
<status status="PASS" endtime="20191025 23:51:04.229" starttime="20191025 23:51:03.589"></status>
</kw>
<msg timestamp="20191025 23:51:04.230" level="INFO">${result} = {
    "CopyObjectResult": {
        "LastModified": "2019-10-25T23:51:04.129Z", 
        "ETag": "d2d4c755-6437-4d5a-83f6-5deca4a88b5e"
    }
}</msg>
<status status="PASS" endtime="20191025 23:51:04.230" starttime="20191025 23:51:03.588"></status>
</kw>
<kw name="Should Contain" library="BuiltIn">
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<arguments>
<arg>${result}</arg>
<arg>ETag</arg>
</arguments>
<status status="PASS" endtime="20191025 23:51:04.230" starttime="20191025 23:51:04.230"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:04.231" critical="yes" starttime="20191025 23:50:58.151"></status>
</test>
<test id="s1-s6-t4" name="Copy Object Where Key not available">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:51:04.236" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:51:04.241" level="INFO">${rc} = 1</msg>
<msg timestamp="20191025 23:51:04.242" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191025 23:51:04.242" starttime="20191025 23:51:04.234"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191025 23:51:04.244" starttime="20191025 23:51:04.243"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:51:04.246" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:51:04.433" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:51:04.433" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.002'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191025 23:51:04.434" starttime="20191025 23:51:04.244"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:51:04.440" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:51:04.912" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:51:04.913" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirrors.xtom.com
 * epel: mirror.prgmr.com
 * extras: mirror.fileplanet.com
 * updates: mirrors.xtom.com
Package ...</msg>
<status status="PASS" endtime="20191025 23:51:04.913" starttime="20191025 23:51:04.438"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:51:04.915" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirrors.xtom.com
 * epel: mirror.prgmr.com
 * extras: mirror.fileplanet.com
 * updates: mirrors.xtom.com
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191025 23:51:04.915" starttime="20191025 23:51:04.914"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:51:04.916" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:51:04.916" starttime="20191025 23:51:04.915"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:04.917" starttime="20191025 23:51:04.437"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:04.917" starttime="20191025 23:51:04.436"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:04.918" starttime="20191025 23:51:04.434"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:04.918" starttime="20191025 23:51:04.233"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:04.918" starttime="20191025 23:51:04.233"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:51:04.928" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:51:04.935" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:51:04.935" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191025 23:51:04.935" starttime="20191025 23:51:04.925"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:51:04.937" level="INFO">s3g</msg>
<status status="PASS" endtime="20191025 23:51:04.937" starttime="20191025 23:51:04.936"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:51:04.938" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:51:04.938" starttime="20191025 23:51:04.937"></status>
</kw>
<msg timestamp="20191025 23:51:04.939" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191025 23:51:04.939" starttime="20191025 23:51:04.923"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191025 23:51:04.940" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:51:04.941" starttime="20191025 23:51:04.939"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:51:04.946" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:51:04.962" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:51:04.963" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:51:04.963" starttime="20191025 23:51:04.943"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:51:04.964" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:51:04.965" starttime="20191025 23:51:04.964"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:51:04.965" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:51:04.966" starttime="20191025 23:51:04.965"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:04.966" starttime="20191025 23:51:04.942"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:04.966" starttime="20191025 23:51:04.941"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:04.967" starttime="20191025 23:51:04.922"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:04.967" starttime="20191025 23:51:04.921"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:51:04.972" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:51:07.722" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:51:07.722" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:51:07.722" starttime="20191025 23:51:04.970"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:51:07.724" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
awsAccessKey=testuser/s3g@EXAMPLE.COM
awsSecret=c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671</msg>
<status status="PASS" endtime="20191025 23:51:07.724" starttime="20191025 23:51:07.723"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:51:07.725" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:51:07.725" starttime="20191025 23:51:07.724"></status>
</kw>
<msg timestamp="20191025 23:51:07.725" level="INFO">${result} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:51:07.726" starttime="20191025 23:51:04.969"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsAccessKey=).*</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:51:07.726" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:51:07.727" starttime="20191025 23:51:07.726"></status>
</kw>
<kw name="Get Variable Value" library="BuiltIn">
<doc>Returns variable value or ``default`` if the variable does not exist.</doc>
<arguments>
<arg>${accessKey}</arg>
<arg>sdsdasaasdasd</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:51:07.728" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:51:07.728" starttime="20191025 23:51:07.727"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsSecret=).*</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:51:07.728" level="INFO">${secret} = [u'c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671']</msg>
<status status="PASS" endtime="20191025 23:51:07.729" starttime="20191025 23:51:07.728"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${accessKey[0]}</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:51:07.729" level="INFO">${accessKey} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:51:07.730" starttime="20191025 23:51:07.729"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${secret[0]}</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:51:07.730" level="INFO">${secret} = c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671</msg>
<status status="PASS" endtime="20191025 23:51:07.730" starttime="20191025 23:51:07.730"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set default.s3.signature_version s3v4</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:51:07.733" level="INFO">Running command 'aws configure set default.s3.signature_version s3v4 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:51:08.228" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:51:08.228" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:51:08.228" starttime="20191025 23:51:07.731"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:51:08.230" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:51:08.230" starttime="20191025 23:51:08.229"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:51:08.231" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:51:08.231" starttime="20191025 23:51:08.230"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:08.232" starttime="20191025 23:51:07.731"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_access_key_id ${accessKey}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:51:08.236" level="INFO">Running command 'aws configure set aws_access_key_id testuser/s3g@EXAMPLE.COM 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:51:08.689" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:51:08.689" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:51:08.690" starttime="20191025 23:51:08.233"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:51:08.691" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:51:08.692" starttime="20191025 23:51:08.690"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:51:08.693" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:51:08.693" starttime="20191025 23:51:08.692"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:08.694" starttime="20191025 23:51:08.232"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_secret_access_key ${secret}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:51:08.699" level="INFO">Running command 'aws configure set aws_secret_access_key c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:51:09.159" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:51:09.159" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:51:09.159" starttime="20191025 23:51:08.695"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:51:09.161" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:51:09.161" starttime="20191025 23:51:09.160"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:51:09.162" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:51:09.162" starttime="20191025 23:51:09.161"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:09.163" starttime="20191025 23:51:08.694"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set region us-west-1</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:51:09.166" level="INFO">Running command 'aws configure set region us-west-1 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:51:09.608" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:51:09.608" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:51:09.609" starttime="20191025 23:51:09.164"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:51:09.610" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:51:09.611" starttime="20191025 23:51:09.609"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:51:09.612" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:51:09.612" starttime="20191025 23:51:09.611"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:09.613" starttime="20191025 23:51:09.163"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:09.613" starttime="20191025 23:51:04.968"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:09.613" starttime="20191025 23:51:04.967"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'false'</arg>
<arg>Setup dummy credentials for S3</arg>
</arguments>
<status status="PASS" endtime="20191025 23:51:09.615" starttime="20191025 23:51:09.614"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:09.615" starttime="20191025 23:51:04.920"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:09.615" starttime="20191025 23:51:04.918"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${BUCKET}' == 'generated'</arg>
<arg>Create bucket</arg>
</arguments>
<status status="PASS" endtime="20191025 23:51:09.616" starttime="20191025 23:51:09.615"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:09.616" starttime="20191025 23:51:04.232"></status>
</kw>
<kw name="Execute AWSS3APICli and checkrc" library="commonawslib">
<arguments>
<arg>copy-object --bucket ${DESTBUCKET} --key copyobject/f1 --copy-source ${BUCKET}/nonnonexistentkey</arg>
<arg>255</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Execute and checkrc" library="commonlib">
<arguments>
<arg>aws s3api --endpoint-url ${ENDPOINT_URL} ${command}</arg>
<arg>${expected_error_code}</arg>
</arguments>
<assign>
<var>${output}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:51:09.622" level="INFO">Running command 'aws s3api --endpoint-url http://s3g:9878 copy-object --bucket generated1 --key copyobject/f1 --copy-source bucket-95363/nonnonexistentkey 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:51:18.138" level="INFO">${rc} = 255</msg>
<msg timestamp="20191025 23:51:18.138" level="INFO">${output} = 
An error occurred (500) when calling the CopyObject operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:51:18.138" starttime="20191025 23:51:09.619"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:51:18.140" level="INFO">
An error occurred (500) when calling the CopyObject operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:51:18.140" starttime="20191025 23:51:18.139"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
</arguments>
<msg timestamp="20191025 23:51:18.142" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:51:18.142" starttime="20191025 23:51:18.141"></status>
</kw>
<msg timestamp="20191025 23:51:18.143" level="INFO">${output} = 
An error occurred (500) when calling the CopyObject operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:51:18.143" starttime="20191025 23:51:09.618"></status>
</kw>
<msg timestamp="20191025 23:51:18.143" level="INFO">${result} = 
An error occurred (500) when calling the CopyObject operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:51:18.143" starttime="20191025 23:51:09.617"></status>
</kw>
<kw name="Should Contain" library="BuiltIn">
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<arguments>
<arg>${result}</arg>
<arg>NoSuchKey</arg>
</arguments>
<msg timestamp="20191025 23:51:18.145" level="FAIL">'
An error occurred (500) when calling the CopyObject operation (reached max retries: 4): Internal Server Error' does not contain 'NoSuchKey'</msg>
<status status="FAIL" endtime="20191025 23:51:18.145" starttime="20191025 23:51:18.144"></status>
</kw>
<status status="FAIL" endtime="20191025 23:51:18.146" critical="yes" starttime="20191025 23:51:04.231">'
An error occurred (500) when calling the CopyObject operation (reached max retries: 4): Internal Server Error' does not contain 'NoSuchKey'</status>
</test>
<doc>S3 gateway test with aws cli</doc>
<status status="FAIL" endtime="20191025 23:51:18.148" starttime="20191025 23:50:29.077"></status>
</suite>
<suite source="/opt/hadoop/smoketest/s3/objectdelete.robot" id="s1-s7" name="Objectdelete">
<test id="s1-s7-t1" name="Delete file with s3api">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:51:18.171" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:51:18.178" level="INFO">${rc} = 1</msg>
<msg timestamp="20191025 23:51:18.179" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191025 23:51:18.179" starttime="20191025 23:51:18.168"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191025 23:51:18.181" starttime="20191025 23:51:18.180"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:51:18.183" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:51:18.375" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:51:18.376" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.002'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191025 23:51:18.376" starttime="20191025 23:51:18.181"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:51:18.382" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:51:18.888" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:51:18.888" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirrors.xtom.com
 * epel: mirror.prgmr.com
 * extras: mirror.fileplanet.com
 * updates: mirrors.xtom.com
Package ...</msg>
<status status="PASS" endtime="20191025 23:51:18.889" starttime="20191025 23:51:18.380"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:51:18.891" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirrors.xtom.com
 * epel: mirror.prgmr.com
 * extras: mirror.fileplanet.com
 * updates: mirrors.xtom.com
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191025 23:51:18.891" starttime="20191025 23:51:18.889"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:51:18.892" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:51:18.892" starttime="20191025 23:51:18.891"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:18.893" starttime="20191025 23:51:18.379"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:18.893" starttime="20191025 23:51:18.378"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:18.894" starttime="20191025 23:51:18.377"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:18.894" starttime="20191025 23:51:18.167"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:18.894" starttime="20191025 23:51:18.167"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:51:18.902" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:51:18.909" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:51:18.909" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191025 23:51:18.909" starttime="20191025 23:51:18.899"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:51:18.911" level="INFO">s3g</msg>
<status status="PASS" endtime="20191025 23:51:18.911" starttime="20191025 23:51:18.910"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:51:18.912" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:51:18.912" starttime="20191025 23:51:18.911"></status>
</kw>
<msg timestamp="20191025 23:51:18.913" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191025 23:51:18.913" starttime="20191025 23:51:18.898"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191025 23:51:18.916" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:51:18.916" starttime="20191025 23:51:18.913"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:51:18.921" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:51:18.940" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:51:18.940" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:51:18.940" starttime="20191025 23:51:18.919"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:51:18.942" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:51:18.942" starttime="20191025 23:51:18.941"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:51:18.943" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:51:18.943" starttime="20191025 23:51:18.942"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:18.944" starttime="20191025 23:51:18.917"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:18.944" starttime="20191025 23:51:18.916"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:18.944" starttime="20191025 23:51:18.898"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:18.944" starttime="20191025 23:51:18.897"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:51:18.949" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:51:21.598" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:51:21.598" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:51:21.599" starttime="20191025 23:51:18.947"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:51:21.601" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
awsAccessKey=testuser/s3g@EXAMPLE.COM
awsSecret=c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671</msg>
<status status="PASS" endtime="20191025 23:51:21.601" starttime="20191025 23:51:21.600"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:51:21.603" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:51:21.604" starttime="20191025 23:51:21.602"></status>
</kw>
<msg timestamp="20191025 23:51:21.604" level="INFO">${result} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:51:21.605" starttime="20191025 23:51:18.946"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsAccessKey=).*</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:51:21.606" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:51:21.606" starttime="20191025 23:51:21.605"></status>
</kw>
<kw name="Get Variable Value" library="BuiltIn">
<doc>Returns variable value or ``default`` if the variable does not exist.</doc>
<arguments>
<arg>${accessKey}</arg>
<arg>sdsdasaasdasd</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:51:21.607" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:51:21.608" starttime="20191025 23:51:21.606"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsSecret=).*</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:51:21.609" level="INFO">${secret} = [u'c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671']</msg>
<status status="PASS" endtime="20191025 23:51:21.609" starttime="20191025 23:51:21.608"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${accessKey[0]}</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:51:21.610" level="INFO">${accessKey} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:51:21.610" starttime="20191025 23:51:21.609"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${secret[0]}</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:51:21.612" level="INFO">${secret} = c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671</msg>
<status status="PASS" endtime="20191025 23:51:21.612" starttime="20191025 23:51:21.611"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set default.s3.signature_version s3v4</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:51:21.616" level="INFO">Running command 'aws configure set default.s3.signature_version s3v4 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:51:22.074" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:51:22.074" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:51:22.074" starttime="20191025 23:51:21.613"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:51:22.076" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:51:22.076" starttime="20191025 23:51:22.075"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:51:22.077" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:51:22.078" starttime="20191025 23:51:22.077"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:22.078" starttime="20191025 23:51:21.612"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_access_key_id ${accessKey}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:51:22.082" level="INFO">Running command 'aws configure set aws_access_key_id testuser/s3g@EXAMPLE.COM 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:51:22.548" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:51:22.549" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:51:22.549" starttime="20191025 23:51:22.080"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:51:22.551" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:51:22.552" starttime="20191025 23:51:22.550"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:51:22.553" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:51:22.553" starttime="20191025 23:51:22.552"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:22.554" starttime="20191025 23:51:22.078"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_secret_access_key ${secret}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:51:22.558" level="INFO">Running command 'aws configure set aws_secret_access_key c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:51:22.941" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:51:22.941" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:51:22.941" starttime="20191025 23:51:22.555"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:51:22.943" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:51:22.943" starttime="20191025 23:51:22.942"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:51:22.944" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:51:22.945" starttime="20191025 23:51:22.944"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:22.945" starttime="20191025 23:51:22.554"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set region us-west-1</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:51:22.949" level="INFO">Running command 'aws configure set region us-west-1 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:51:23.421" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:51:23.421" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:51:23.421" starttime="20191025 23:51:22.947"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:51:23.423" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:51:23.423" starttime="20191025 23:51:23.422"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:51:23.424" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:51:23.425" starttime="20191025 23:51:23.424"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:23.425" starttime="20191025 23:51:22.946"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:23.426" starttime="20191025 23:51:18.945"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:23.426" starttime="20191025 23:51:18.945"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'false'</arg>
<arg>Setup dummy credentials for S3</arg>
</arguments>
<status status="PASS" endtime="20191025 23:51:23.427" starttime="20191025 23:51:23.426"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:23.427" starttime="20191025 23:51:18.896"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:23.428" starttime="20191025 23:51:18.895"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${BUCKET}' == 'generated'</arg>
<arg>Create bucket</arg>
</arguments>
<kw name="Create bucket" library="commonawslib">
<kw name="Generate Random String" library="String">
<doc>Generates a string with a desired ``length`` from the given ``chars``.</doc>
<arguments>
<arg>5</arg>
<arg>[NUMBERS]</arg>
</arguments>
<assign>
<var>${postfix}</var>
</assign>
<msg timestamp="20191025 23:51:23.430" level="INFO">${postfix} = 89684</msg>
<status status="PASS" endtime="20191025 23:51:23.431" starttime="20191025 23:51:23.430"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${BUCKET}</arg>
<arg>bucket-${postfix}</arg>
</arguments>
<msg timestamp="20191025 23:51:23.432" level="INFO">${BUCKET} = bucket-89684</msg>
<status status="PASS" endtime="20191025 23:51:23.432" starttime="20191025 23:51:23.431"></status>
</kw>
<kw name="Execute AWSS3APICli" library="commonawslib">
<arguments>
<arg>create-bucket --bucket ${BUCKET}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws s3api --endpoint-url ${ENDPOINT_URL} ${command}</arg>
</arguments>
<assign>
<var>${output}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:51:23.437" level="INFO">Running command 'aws s3api --endpoint-url http://s3g:9878 create-bucket --bucket bucket-89684 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:51:29.681" level="INFO">${rc} = 255</msg>
<msg timestamp="20191025 23:51:29.681" level="INFO">${output} = 
An error occurred (500) when calling the CreateBucket operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:51:29.681" starttime="20191025 23:51:23.434"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:51:29.682" level="INFO">
An error occurred (500) when calling the CreateBucket operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:51:29.683" starttime="20191025 23:51:29.682"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:51:29.684" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191025 23:51:29.684" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191025 23:51:29.684" starttime="20191025 23:51:29.683"></status>
</kw>
<status status="FAIL" endtime="20191025 23:51:29.685" starttime="20191025 23:51:23.433"></status>
</kw>
<status status="FAIL" endtime="20191025 23:51:29.685" starttime="20191025 23:51:23.432"></status>
</kw>
<status status="FAIL" endtime="20191025 23:51:29.685" starttime="20191025 23:51:23.429"></status>
</kw>
<status status="FAIL" endtime="20191025 23:51:29.685" starttime="20191025 23:51:23.428"></status>
</kw>
<status status="FAIL" endtime="20191025 23:51:29.685" starttime="20191025 23:51:18.166"></status>
</kw>
<status status="FAIL" endtime="20191025 23:51:29.686" critical="yes" starttime="20191025 23:51:18.165">Setup failed:
255 != 0</status>
</test>
<test id="s1-s7-t2" name="Delete file with s3api, file doesn't exist">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:51:29.690" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:51:29.697" level="INFO">${rc} = 1</msg>
<msg timestamp="20191025 23:51:29.697" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191025 23:51:29.697" starttime="20191025 23:51:29.688"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191025 23:51:29.700" starttime="20191025 23:51:29.698"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:51:29.702" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:51:29.905" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:51:29.906" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.002'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191025 23:51:29.906" starttime="20191025 23:51:29.700"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:51:29.912" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:51:30.427" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:51:30.427" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirrors.xtom.com
 * epel: mirror.prgmr.com
 * extras: mirror.fileplanet.com
 * updates: mirrors.xtom.com
Package ...</msg>
<status status="PASS" endtime="20191025 23:51:30.427" starttime="20191025 23:51:29.909"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:51:30.429" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirrors.xtom.com
 * epel: mirror.prgmr.com
 * extras: mirror.fileplanet.com
 * updates: mirrors.xtom.com
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191025 23:51:30.429" starttime="20191025 23:51:30.428"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:51:30.430" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:51:30.431" starttime="20191025 23:51:30.430"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:30.431" starttime="20191025 23:51:29.909"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:30.432" starttime="20191025 23:51:29.908"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:30.432" starttime="20191025 23:51:29.907"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:30.432" starttime="20191025 23:51:29.688"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:30.432" starttime="20191025 23:51:29.687"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:51:30.440" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:51:30.448" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:51:30.448" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191025 23:51:30.448" starttime="20191025 23:51:30.437"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:51:30.450" level="INFO">s3g</msg>
<status status="PASS" endtime="20191025 23:51:30.450" starttime="20191025 23:51:30.449"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:51:30.451" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:51:30.451" starttime="20191025 23:51:30.450"></status>
</kw>
<msg timestamp="20191025 23:51:30.452" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191025 23:51:30.452" starttime="20191025 23:51:30.436"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191025 23:51:30.453" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:51:30.454" starttime="20191025 23:51:30.452"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:51:30.460" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:51:30.502" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:51:30.503" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:51:30.503" starttime="20191025 23:51:30.456"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:51:30.504" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:51:30.504" starttime="20191025 23:51:30.503"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:51:30.505" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:51:30.505" starttime="20191025 23:51:30.504"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:30.505" starttime="20191025 23:51:30.455"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:30.506" starttime="20191025 23:51:30.454"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:30.506" starttime="20191025 23:51:30.436"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:30.506" starttime="20191025 23:51:30.435"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:51:30.510" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:51:33.173" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:51:33.173" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:51:33.173" starttime="20191025 23:51:30.508"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:51:33.175" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
awsAccessKey=testuser/s3g@EXAMPLE.COM
awsSecret=c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671</msg>
<status status="PASS" endtime="20191025 23:51:33.175" starttime="20191025 23:51:33.174"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:51:33.176" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:51:33.176" starttime="20191025 23:51:33.176"></status>
</kw>
<msg timestamp="20191025 23:51:33.177" level="INFO">${result} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:51:33.177" starttime="20191025 23:51:30.508"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsAccessKey=).*</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:51:33.178" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:51:33.178" starttime="20191025 23:51:33.177"></status>
</kw>
<kw name="Get Variable Value" library="BuiltIn">
<doc>Returns variable value or ``default`` if the variable does not exist.</doc>
<arguments>
<arg>${accessKey}</arg>
<arg>sdsdasaasdasd</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:51:33.180" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:51:33.180" starttime="20191025 23:51:33.179"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsSecret=).*</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:51:33.181" level="INFO">${secret} = [u'c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671']</msg>
<status status="PASS" endtime="20191025 23:51:33.181" starttime="20191025 23:51:33.180"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${accessKey[0]}</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:51:33.182" level="INFO">${accessKey} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:51:33.182" starttime="20191025 23:51:33.181"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${secret[0]}</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:51:33.183" level="INFO">${secret} = c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671</msg>
<status status="PASS" endtime="20191025 23:51:33.183" starttime="20191025 23:51:33.182"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set default.s3.signature_version s3v4</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:51:33.187" level="INFO">Running command 'aws configure set default.s3.signature_version s3v4 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:51:33.637" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:51:33.638" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:51:33.638" starttime="20191025 23:51:33.184"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:51:33.640" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:51:33.640" starttime="20191025 23:51:33.639"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:51:33.641" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:51:33.642" starttime="20191025 23:51:33.641"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:33.642" starttime="20191025 23:51:33.184"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_access_key_id ${accessKey}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:51:33.646" level="INFO">Running command 'aws configure set aws_access_key_id testuser/s3g@EXAMPLE.COM 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:51:34.099" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:51:34.100" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:51:34.100" starttime="20191025 23:51:33.644"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:51:34.102" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:51:34.102" starttime="20191025 23:51:34.101"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:51:34.103" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:51:34.103" starttime="20191025 23:51:34.102"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:34.104" starttime="20191025 23:51:33.643"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_secret_access_key ${secret}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:51:34.108" level="INFO">Running command 'aws configure set aws_secret_access_key c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:51:34.599" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:51:34.599" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:51:34.599" starttime="20191025 23:51:34.106"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:51:34.601" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:51:34.602" starttime="20191025 23:51:34.600"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:51:34.603" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:51:34.603" starttime="20191025 23:51:34.602"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:34.604" starttime="20191025 23:51:34.104"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set region us-west-1</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:51:34.608" level="INFO">Running command 'aws configure set region us-west-1 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:51:35.148" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:51:35.148" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:51:35.148" starttime="20191025 23:51:34.605"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:51:35.150" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:51:35.150" starttime="20191025 23:51:35.149"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:51:35.151" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:51:35.152" starttime="20191025 23:51:35.150"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:35.153" starttime="20191025 23:51:34.604"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:35.153" starttime="20191025 23:51:30.507"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:35.153" starttime="20191025 23:51:30.506"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'false'</arg>
<arg>Setup dummy credentials for S3</arg>
</arguments>
<status status="PASS" endtime="20191025 23:51:35.154" starttime="20191025 23:51:35.153"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:35.154" starttime="20191025 23:51:30.434"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:35.155" starttime="20191025 23:51:30.433"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${BUCKET}' == 'generated'</arg>
<arg>Create bucket</arg>
</arguments>
<status status="PASS" endtime="20191025 23:51:35.156" starttime="20191025 23:51:35.155"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:35.156" starttime="20191025 23:51:29.687"></status>
</kw>
<kw name="Execute AWSS3Cli" library="commonawslib">
<arguments>
<arg>ls s3://${BUCKET}/</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws s3 --endpoint-url ${ENDPOINT_URL} ${command}</arg>
</arguments>
<assign>
<var>${output}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:51:35.161" level="INFO">Running command 'aws s3 --endpoint-url http://s3g:9878 ls s3://bucket-89684/ 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:51:45.426" level="INFO">${rc} = 255</msg>
<msg timestamp="20191025 23:51:45.426" level="INFO">${output} = 
An error occurred (500) when calling the ListObjects operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:51:45.426" starttime="20191025 23:51:35.158"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:51:45.428" level="INFO">
An error occurred (500) when calling the ListObjects operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:51:45.428" starttime="20191025 23:51:45.427"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:51:45.429" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191025 23:51:45.429" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191025 23:51:45.429" starttime="20191025 23:51:45.428"></status>
</kw>
<status status="FAIL" endtime="20191025 23:51:45.430" starttime="20191025 23:51:35.157"></status>
</kw>
<status status="FAIL" endtime="20191025 23:51:45.430" starttime="20191025 23:51:35.156"></status>
</kw>
<status status="FAIL" endtime="20191025 23:51:45.431" critical="yes" starttime="20191025 23:51:29.686">255 != 0</status>
</test>
<test id="s1-s7-t3" name="Delete dir with s3api">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:51:45.435" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:51:45.443" level="INFO">${rc} = 1</msg>
<msg timestamp="20191025 23:51:45.443" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191025 23:51:45.443" starttime="20191025 23:51:45.434"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191025 23:51:45.445" starttime="20191025 23:51:45.444"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:51:45.447" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:51:45.626" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:51:45.626" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.002'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191025 23:51:45.626" starttime="20191025 23:51:45.445"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:51:45.632" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:51:46.085" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:51:46.085" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirrors.xtom.com
 * epel: mirror.prgmr.com
 * extras: mirror.fileplanet.com
 * updates: mirrors.xtom.com
Package ...</msg>
<status status="PASS" endtime="20191025 23:51:46.085" starttime="20191025 23:51:45.630"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:51:46.087" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirrors.xtom.com
 * epel: mirror.prgmr.com
 * extras: mirror.fileplanet.com
 * updates: mirrors.xtom.com
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191025 23:51:46.087" starttime="20191025 23:51:46.086"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:51:46.088" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:51:46.089" starttime="20191025 23:51:46.088"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:46.089" starttime="20191025 23:51:45.629"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:46.090" starttime="20191025 23:51:45.629"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:46.090" starttime="20191025 23:51:45.627"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:46.090" starttime="20191025 23:51:45.433"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:46.090" starttime="20191025 23:51:45.433"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:51:46.098" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:51:46.104" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:51:46.104" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191025 23:51:46.104" starttime="20191025 23:51:46.095"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:51:46.106" level="INFO">s3g</msg>
<status status="PASS" endtime="20191025 23:51:46.106" starttime="20191025 23:51:46.105"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:51:46.108" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:51:46.108" starttime="20191025 23:51:46.106"></status>
</kw>
<msg timestamp="20191025 23:51:46.109" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191025 23:51:46.109" starttime="20191025 23:51:46.094"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191025 23:51:46.110" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:51:46.110" starttime="20191025 23:51:46.109"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:51:46.115" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:51:46.129" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:51:46.129" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:51:46.129" starttime="20191025 23:51:46.113"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:51:46.130" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:51:46.131" starttime="20191025 23:51:46.130"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:51:46.131" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:51:46.132" starttime="20191025 23:51:46.131"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:46.132" starttime="20191025 23:51:46.111"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:46.132" starttime="20191025 23:51:46.110"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:46.133" starttime="20191025 23:51:46.094"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:46.133" starttime="20191025 23:51:46.093"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:51:46.137" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:51:49.037" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:51:49.037" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:51:49.037" starttime="20191025 23:51:46.135"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:51:49.039" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
awsAccessKey=testuser/s3g@EXAMPLE.COM
awsSecret=c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671</msg>
<status status="PASS" endtime="20191025 23:51:49.039" starttime="20191025 23:51:49.038"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:51:49.040" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:51:49.040" starttime="20191025 23:51:49.039"></status>
</kw>
<msg timestamp="20191025 23:51:49.040" level="INFO">${result} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:51:49.040" starttime="20191025 23:51:46.135"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsAccessKey=).*</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:51:49.041" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:51:49.041" starttime="20191025 23:51:49.041"></status>
</kw>
<kw name="Get Variable Value" library="BuiltIn">
<doc>Returns variable value or ``default`` if the variable does not exist.</doc>
<arguments>
<arg>${accessKey}</arg>
<arg>sdsdasaasdasd</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:51:49.043" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:51:49.043" starttime="20191025 23:51:49.042"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsSecret=).*</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:51:49.043" level="INFO">${secret} = [u'c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671']</msg>
<status status="PASS" endtime="20191025 23:51:49.044" starttime="20191025 23:51:49.043"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${accessKey[0]}</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:51:49.045" level="INFO">${accessKey} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:51:49.045" starttime="20191025 23:51:49.044"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${secret[0]}</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:51:49.046" level="INFO">${secret} = c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671</msg>
<status status="PASS" endtime="20191025 23:51:49.046" starttime="20191025 23:51:49.045"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set default.s3.signature_version s3v4</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:51:49.049" level="INFO">Running command 'aws configure set default.s3.signature_version s3v4 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:51:49.502" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:51:49.502" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:51:49.502" starttime="20191025 23:51:49.047"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:51:49.504" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:51:49.504" starttime="20191025 23:51:49.503"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:51:49.505" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:51:49.505" starttime="20191025 23:51:49.504"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:49.505" starttime="20191025 23:51:49.046"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_access_key_id ${accessKey}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:51:49.508" level="INFO">Running command 'aws configure set aws_access_key_id testuser/s3g@EXAMPLE.COM 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:51:49.988" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:51:49.988" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:51:49.988" starttime="20191025 23:51:49.507"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:51:49.990" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:51:49.990" starttime="20191025 23:51:49.989"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:51:49.991" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:51:49.992" starttime="20191025 23:51:49.991"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:49.992" starttime="20191025 23:51:49.506"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_secret_access_key ${secret}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:51:49.996" level="INFO">Running command 'aws configure set aws_secret_access_key c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:51:50.449" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:51:50.450" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:51:50.450" starttime="20191025 23:51:49.994"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:51:50.452" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:51:50.452" starttime="20191025 23:51:50.451"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:51:50.454" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:51:50.455" starttime="20191025 23:51:50.452"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:50.455" starttime="20191025 23:51:49.993"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set region us-west-1</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:51:50.459" level="INFO">Running command 'aws configure set region us-west-1 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:51:50.990" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:51:50.990" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:51:50.990" starttime="20191025 23:51:50.456"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:51:50.991" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:51:50.992" starttime="20191025 23:51:50.991"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:51:50.992" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:51:50.993" starttime="20191025 23:51:50.992"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:50.993" starttime="20191025 23:51:50.455"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:50.994" starttime="20191025 23:51:46.134"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:50.994" starttime="20191025 23:51:46.133"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'false'</arg>
<arg>Setup dummy credentials for S3</arg>
</arguments>
<status status="PASS" endtime="20191025 23:51:50.995" starttime="20191025 23:51:50.994"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:50.995" starttime="20191025 23:51:46.092"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:50.995" starttime="20191025 23:51:46.091"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${BUCKET}' == 'generated'</arg>
<arg>Create bucket</arg>
</arguments>
<status status="PASS" endtime="20191025 23:51:50.996" starttime="20191025 23:51:50.996"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:50.996" starttime="20191025 23:51:45.432"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>date &gt; /tmp/testfile</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:51:51.000" level="INFO">Running command 'date &gt; /tmp/testfile'.</msg>
<msg timestamp="20191025 23:51:51.009" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:51:51.009" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:51:51.009" starttime="20191025 23:51:50.998"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:51:51.011" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:51:51.011" starttime="20191025 23:51:51.010"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:51:51.012" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:51:51.013" starttime="20191025 23:51:51.012"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:51.013" starttime="20191025 23:51:50.997"></status>
</kw>
<kw name="Execute AWSS3Cli" library="commonawslib">
<arguments>
<arg>cp /tmp/testfile s3://${BUCKET}/deletetestapidir/f1</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws s3 --endpoint-url ${ENDPOINT_URL} ${command}</arg>
</arguments>
<assign>
<var>${output}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:51:51.018" level="INFO">Running command 'aws s3 --endpoint-url http://s3g:9878 cp /tmp/testfile s3://bucket-89684/deletetestapidir/f1 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:51:55.433" level="INFO">${rc} = 1</msg>
<msg timestamp="20191025 23:51:55.434" level="INFO">${output} = Completed 29 Bytes/29 Bytes (7 Bytes/s) with 1 file(s) remainingupload failed: ../../tmp/testfile to s3://bucket-89684/deletetestapidir/f1 An error occurred (500) when calling the PutObject operation...</msg>
<status status="PASS" endtime="20191025 23:51:55.434" starttime="20191025 23:51:51.016"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:51:55.435" level="INFO">Completed 29 Bytes/29 Bytes (7 Bytes/s) with 1 file(s) remainingupload failed: ../../tmp/testfile to s3://bucket-89684/deletetestapidir/f1 An error occurred (500) when calling the PutObject operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:51:55.435" starttime="20191025 23:51:55.434"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:51:55.436" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191025 23:51:55.436" level="FAIL">1 != 0</msg>
<status status="FAIL" endtime="20191025 23:51:55.436" starttime="20191025 23:51:55.435"></status>
</kw>
<status status="FAIL" endtime="20191025 23:51:55.436" starttime="20191025 23:51:51.015"></status>
</kw>
<status status="FAIL" endtime="20191025 23:51:55.437" starttime="20191025 23:51:51.014"></status>
</kw>
<status status="FAIL" endtime="20191025 23:51:55.437" critical="yes" starttime="20191025 23:51:45.431">1 != 0</status>
</test>
<test id="s1-s7-t4" name="Delete file with s3api, file doesn't exist, prefix of a real file">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:51:55.444" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:51:55.448" level="INFO">${rc} = 1</msg>
<msg timestamp="20191025 23:51:55.448" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191025 23:51:55.449" starttime="20191025 23:51:55.441"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191025 23:51:55.450" starttime="20191025 23:51:55.449"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:51:55.452" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:51:55.624" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:51:55.624" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.002'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191025 23:51:55.624" starttime="20191025 23:51:55.450"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:51:55.629" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:51:56.096" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:51:56.097" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirrors.xtom.com
 * epel: mirror.prgmr.com
 * extras: mirror.fileplanet.com
 * updates: mirrors.xtom.com
Package ...</msg>
<status status="PASS" endtime="20191025 23:51:56.097" starttime="20191025 23:51:55.627"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:51:56.099" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirrors.xtom.com
 * epel: mirror.prgmr.com
 * extras: mirror.fileplanet.com
 * updates: mirrors.xtom.com
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191025 23:51:56.099" starttime="20191025 23:51:56.098"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:51:56.100" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:51:56.100" starttime="20191025 23:51:56.099"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:56.101" starttime="20191025 23:51:55.626"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:56.101" starttime="20191025 23:51:55.626"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:56.101" starttime="20191025 23:51:55.625"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:56.101" starttime="20191025 23:51:55.441"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:56.102" starttime="20191025 23:51:55.440"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:51:56.110" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:51:56.115" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:51:56.115" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191025 23:51:56.116" starttime="20191025 23:51:56.107"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:51:56.117" level="INFO">s3g</msg>
<status status="PASS" endtime="20191025 23:51:56.117" starttime="20191025 23:51:56.116"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:51:56.119" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:51:56.119" starttime="20191025 23:51:56.118"></status>
</kw>
<msg timestamp="20191025 23:51:56.119" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191025 23:51:56.120" starttime="20191025 23:51:56.106"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191025 23:51:56.121" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:51:56.121" starttime="20191025 23:51:56.120"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:51:56.126" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:51:56.141" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:51:56.141" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:51:56.141" starttime="20191025 23:51:56.124"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:51:56.143" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:51:56.143" starttime="20191025 23:51:56.142"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:51:56.144" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:51:56.144" starttime="20191025 23:51:56.143"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:56.144" starttime="20191025 23:51:56.123"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:56.145" starttime="20191025 23:51:56.122"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:56.145" starttime="20191025 23:51:56.105"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:56.145" starttime="20191025 23:51:56.104"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:51:56.150" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:51:58.813" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:51:58.813" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:51:58.813" starttime="20191025 23:51:56.148"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:51:58.815" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
awsAccessKey=testuser/s3g@EXAMPLE.COM
awsSecret=c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671</msg>
<status status="PASS" endtime="20191025 23:51:58.815" starttime="20191025 23:51:58.814"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:51:58.816" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:51:58.816" starttime="20191025 23:51:58.815"></status>
</kw>
<msg timestamp="20191025 23:51:58.817" level="INFO">${result} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:51:58.817" starttime="20191025 23:51:56.147"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsAccessKey=).*</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:51:58.818" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:51:58.818" starttime="20191025 23:51:58.817"></status>
</kw>
<kw name="Get Variable Value" library="BuiltIn">
<doc>Returns variable value or ``default`` if the variable does not exist.</doc>
<arguments>
<arg>${accessKey}</arg>
<arg>sdsdasaasdasd</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:51:58.819" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:51:58.819" starttime="20191025 23:51:58.818"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsSecret=).*</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:51:58.820" level="INFO">${secret} = [u'c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671']</msg>
<status status="PASS" endtime="20191025 23:51:58.820" starttime="20191025 23:51:58.820"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${accessKey[0]}</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:51:58.822" level="INFO">${accessKey} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:51:58.822" starttime="20191025 23:51:58.821"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${secret[0]}</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:51:58.823" level="INFO">${secret} = c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671</msg>
<status status="PASS" endtime="20191025 23:51:58.823" starttime="20191025 23:51:58.822"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set default.s3.signature_version s3v4</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:51:58.827" level="INFO">Running command 'aws configure set default.s3.signature_version s3v4 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:51:59.334" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:51:59.335" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:51:59.335" starttime="20191025 23:51:58.824"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:51:59.336" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:51:59.336" starttime="20191025 23:51:59.335"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:51:59.337" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:51:59.337" starttime="20191025 23:51:59.337"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:59.338" starttime="20191025 23:51:58.823"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_access_key_id ${accessKey}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:51:59.341" level="INFO">Running command 'aws configure set aws_access_key_id testuser/s3g@EXAMPLE.COM 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:51:59.801" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:51:59.801" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:51:59.801" starttime="20191025 23:51:59.339"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:51:59.803" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:51:59.803" starttime="20191025 23:51:59.802"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:51:59.804" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:51:59.804" starttime="20191025 23:51:59.803"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:59.805" starttime="20191025 23:51:59.338"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_secret_access_key ${secret}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:51:59.810" level="INFO">Running command 'aws configure set aws_secret_access_key c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:52:00.273" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:52:00.273" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:52:00.273" starttime="20191025 23:51:59.807"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:52:00.275" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:52:00.275" starttime="20191025 23:52:00.274"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:52:00.276" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:52:00.276" starttime="20191025 23:52:00.275"></status>
</kw>
<status status="PASS" endtime="20191025 23:52:00.277" starttime="20191025 23:51:59.805"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set region us-west-1</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:52:00.281" level="INFO">Running command 'aws configure set region us-west-1 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:52:00.774" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:52:00.774" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:52:00.775" starttime="20191025 23:52:00.278"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:52:00.777" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:52:00.777" starttime="20191025 23:52:00.776"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:52:00.778" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:52:00.778" starttime="20191025 23:52:00.777"></status>
</kw>
<status status="PASS" endtime="20191025 23:52:00.779" starttime="20191025 23:52:00.277"></status>
</kw>
<status status="PASS" endtime="20191025 23:52:00.779" starttime="20191025 23:51:56.146"></status>
</kw>
<status status="PASS" endtime="20191025 23:52:00.779" starttime="20191025 23:51:56.146"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'false'</arg>
<arg>Setup dummy credentials for S3</arg>
</arguments>
<status status="PASS" endtime="20191025 23:52:00.781" starttime="20191025 23:52:00.780"></status>
</kw>
<status status="PASS" endtime="20191025 23:52:00.781" starttime="20191025 23:51:56.103"></status>
</kw>
<status status="PASS" endtime="20191025 23:52:00.781" starttime="20191025 23:51:56.102"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${BUCKET}' == 'generated'</arg>
<arg>Create bucket</arg>
</arguments>
<status status="PASS" endtime="20191025 23:52:00.782" starttime="20191025 23:52:00.782"></status>
</kw>
<status status="PASS" endtime="20191025 23:52:00.783" starttime="20191025 23:51:55.439"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>date &gt; /tmp/testfile</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:52:00.787" level="INFO">Running command 'date &gt; /tmp/testfile'.</msg>
<msg timestamp="20191025 23:52:00.794" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:52:00.794" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:52:00.794" starttime="20191025 23:52:00.784"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:52:00.796" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:52:00.796" starttime="20191025 23:52:00.795"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:52:00.797" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:52:00.797" starttime="20191025 23:52:00.796"></status>
</kw>
<status status="PASS" endtime="20191025 23:52:00.798" starttime="20191025 23:52:00.783"></status>
</kw>
<kw name="Execute AWSS3Cli" library="commonawslib">
<arguments>
<arg>cp /tmp/testfile s3://${BUCKET}/deletetestapiprefix/filefile</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws s3 --endpoint-url ${ENDPOINT_URL} ${command}</arg>
</arguments>
<assign>
<var>${output}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:52:00.802" level="INFO">Running command 'aws s3 --endpoint-url http://s3g:9878 cp /tmp/testfile s3://bucket-89684/deletetestapiprefix/filefile 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:52:03.465" level="INFO">${rc} = 1</msg>
<msg timestamp="20191025 23:52:03.465" level="INFO">${output} = Completed 29 Bytes/29 Bytes (13 Bytes/s) with 1 file(s) remainingupload failed: ../../tmp/testfile to s3://bucket-89684/deletetestapiprefix/filefile An error occurred (500) when calling the PutObject...</msg>
<status status="PASS" endtime="20191025 23:52:03.465" starttime="20191025 23:52:00.800"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:52:03.467" level="INFO">Completed 29 Bytes/29 Bytes (13 Bytes/s) with 1 file(s) remainingupload failed: ../../tmp/testfile to s3://bucket-89684/deletetestapiprefix/filefile An error occurred (500) when calling the PutObject operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:52:03.467" starttime="20191025 23:52:03.466"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:52:03.468" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191025 23:52:03.469" level="FAIL">1 != 0</msg>
<status status="FAIL" endtime="20191025 23:52:03.469" starttime="20191025 23:52:03.467"></status>
</kw>
<status status="FAIL" endtime="20191025 23:52:03.469" starttime="20191025 23:52:00.799"></status>
</kw>
<status status="FAIL" endtime="20191025 23:52:03.470" starttime="20191025 23:52:00.798"></status>
</kw>
<status status="FAIL" endtime="20191025 23:52:03.470" critical="yes" starttime="20191025 23:51:55.438">1 != 0</status>
</test>
<test id="s1-s7-t5" name="Delete file with s3api, bucket doesn't exist">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:52:03.476" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:52:03.482" level="INFO">${rc} = 1</msg>
<msg timestamp="20191025 23:52:03.483" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191025 23:52:03.483" starttime="20191025 23:52:03.474"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191025 23:52:03.484" starttime="20191025 23:52:03.483"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:52:03.487" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:52:03.708" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:52:03.708" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.002'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191025 23:52:03.708" starttime="20191025 23:52:03.485"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:52:03.715" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:52:04.210" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:52:04.210" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirrors.xtom.com
 * epel: mirror.prgmr.com
 * extras: mirror.fileplanet.com
 * updates: mirrors.xtom.com
Package ...</msg>
<status status="PASS" endtime="20191025 23:52:04.210" starttime="20191025 23:52:03.713"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:52:04.212" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirrors.xtom.com
 * epel: mirror.prgmr.com
 * extras: mirror.fileplanet.com
 * updates: mirrors.xtom.com
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191025 23:52:04.213" starttime="20191025 23:52:04.211"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:52:04.214" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:52:04.215" starttime="20191025 23:52:04.213"></status>
</kw>
<status status="PASS" endtime="20191025 23:52:04.215" starttime="20191025 23:52:03.712"></status>
</kw>
<status status="PASS" endtime="20191025 23:52:04.215" starttime="20191025 23:52:03.711"></status>
</kw>
<status status="PASS" endtime="20191025 23:52:04.216" starttime="20191025 23:52:03.709"></status>
</kw>
<status status="PASS" endtime="20191025 23:52:04.216" starttime="20191025 23:52:03.473"></status>
</kw>
<status status="PASS" endtime="20191025 23:52:04.216" starttime="20191025 23:52:03.473"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:52:04.223" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:52:04.228" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:52:04.228" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191025 23:52:04.229" starttime="20191025 23:52:04.221"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:52:04.230" level="INFO">s3g</msg>
<status status="PASS" endtime="20191025 23:52:04.231" starttime="20191025 23:52:04.230"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:52:04.232" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:52:04.232" starttime="20191025 23:52:04.231"></status>
</kw>
<msg timestamp="20191025 23:52:04.232" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191025 23:52:04.233" starttime="20191025 23:52:04.220"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191025 23:52:04.234" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:52:04.234" starttime="20191025 23:52:04.233"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:52:04.239" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:52:04.256" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:52:04.256" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:52:04.256" starttime="20191025 23:52:04.237"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:52:04.257" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:52:04.258" starttime="20191025 23:52:04.257"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:52:04.259" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:52:04.259" starttime="20191025 23:52:04.258"></status>
</kw>
<status status="PASS" endtime="20191025 23:52:04.259" starttime="20191025 23:52:04.235"></status>
</kw>
<status status="PASS" endtime="20191025 23:52:04.259" starttime="20191025 23:52:04.235"></status>
</kw>
<status status="PASS" endtime="20191025 23:52:04.260" starttime="20191025 23:52:04.219"></status>
</kw>
<status status="PASS" endtime="20191025 23:52:04.260" starttime="20191025 23:52:04.218"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:52:04.265" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:52:06.846" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:52:06.846" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:52:06.846" starttime="20191025 23:52:04.263"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:52:06.847" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
awsAccessKey=testuser/s3g@EXAMPLE.COM
awsSecret=c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671</msg>
<status status="PASS" endtime="20191025 23:52:06.848" starttime="20191025 23:52:06.847"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:52:06.848" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:52:06.849" starttime="20191025 23:52:06.848"></status>
</kw>
<msg timestamp="20191025 23:52:06.849" level="INFO">${result} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:52:06.849" starttime="20191025 23:52:04.262"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsAccessKey=).*</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:52:06.850" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:52:06.850" starttime="20191025 23:52:06.849"></status>
</kw>
<kw name="Get Variable Value" library="BuiltIn">
<doc>Returns variable value or ``default`` if the variable does not exist.</doc>
<arguments>
<arg>${accessKey}</arg>
<arg>sdsdasaasdasd</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:52:06.851" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:52:06.851" starttime="20191025 23:52:06.850"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsSecret=).*</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:52:06.852" level="INFO">${secret} = [u'c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671']</msg>
<status status="PASS" endtime="20191025 23:52:06.852" starttime="20191025 23:52:06.851"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${accessKey[0]}</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:52:06.853" level="INFO">${accessKey} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:52:06.853" starttime="20191025 23:52:06.852"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${secret[0]}</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:52:06.854" level="INFO">${secret} = c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671</msg>
<status status="PASS" endtime="20191025 23:52:06.854" starttime="20191025 23:52:06.853"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set default.s3.signature_version s3v4</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:52:06.859" level="INFO">Running command 'aws configure set default.s3.signature_version s3v4 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:52:07.406" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:52:07.407" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:52:07.407" starttime="20191025 23:52:06.854"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:52:07.409" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:52:07.409" starttime="20191025 23:52:07.408"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:52:07.410" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:52:07.410" starttime="20191025 23:52:07.409"></status>
</kw>
<status status="PASS" endtime="20191025 23:52:07.411" starttime="20191025 23:52:06.854"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_access_key_id ${accessKey}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:52:07.415" level="INFO">Running command 'aws configure set aws_access_key_id testuser/s3g@EXAMPLE.COM 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:52:07.894" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:52:07.894" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:52:07.894" starttime="20191025 23:52:07.413"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:52:07.896" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:52:07.896" starttime="20191025 23:52:07.895"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:52:07.897" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:52:07.897" starttime="20191025 23:52:07.896"></status>
</kw>
<status status="PASS" endtime="20191025 23:52:07.897" starttime="20191025 23:52:07.411"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_secret_access_key ${secret}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:52:07.900" level="INFO">Running command 'aws configure set aws_secret_access_key c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:52:08.367" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:52:08.367" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:52:08.367" starttime="20191025 23:52:07.898"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:52:08.369" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:52:08.369" starttime="20191025 23:52:08.368"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:52:08.370" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:52:08.370" starttime="20191025 23:52:08.370"></status>
</kw>
<status status="PASS" endtime="20191025 23:52:08.371" starttime="20191025 23:52:07.897"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set region us-west-1</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:52:08.375" level="INFO">Running command 'aws configure set region us-west-1 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:52:08.853" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:52:08.853" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:52:08.854" starttime="20191025 23:52:08.372"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:52:08.856" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:52:08.856" starttime="20191025 23:52:08.855"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:52:08.857" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:52:08.857" starttime="20191025 23:52:08.856"></status>
</kw>
<status status="PASS" endtime="20191025 23:52:08.858" starttime="20191025 23:52:08.371"></status>
</kw>
<status status="PASS" endtime="20191025 23:52:08.858" starttime="20191025 23:52:04.261"></status>
</kw>
<status status="PASS" endtime="20191025 23:52:08.859" starttime="20191025 23:52:04.260"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'false'</arg>
<arg>Setup dummy credentials for S3</arg>
</arguments>
<status status="PASS" endtime="20191025 23:52:08.860" starttime="20191025 23:52:08.859"></status>
</kw>
<status status="PASS" endtime="20191025 23:52:08.861" starttime="20191025 23:52:04.217"></status>
</kw>
<status status="PASS" endtime="20191025 23:52:08.861" starttime="20191025 23:52:04.216"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${BUCKET}' == 'generated'</arg>
<arg>Create bucket</arg>
</arguments>
<status status="PASS" endtime="20191025 23:52:08.862" starttime="20191025 23:52:08.861"></status>
</kw>
<status status="PASS" endtime="20191025 23:52:08.862" starttime="20191025 23:52:03.472"></status>
</kw>
<kw name="Execute AWSS3APICli and checkrc" library="commonawslib">
<arguments>
<arg>delete-object --bucket ${BUCKET}-nosuchbucket --key f1</arg>
<arg>255</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Execute and checkrc" library="commonlib">
<arguments>
<arg>aws s3api --endpoint-url ${ENDPOINT_URL} ${command}</arg>
<arg>${expected_error_code}</arg>
</arguments>
<assign>
<var>${output}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:52:08.868" level="INFO">Running command 'aws s3api --endpoint-url http://s3g:9878 delete-object --bucket bucket-89684-nosuchbucket --key f1 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:52:09.522" level="INFO">${rc} = 255</msg>
<msg timestamp="20191025 23:52:09.522" level="INFO">${output} = 
An error occurred (NoSuchBucket) when calling the DeleteObject operation: The specified bucket does not exist</msg>
<status status="PASS" endtime="20191025 23:52:09.523" starttime="20191025 23:52:08.865"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:52:09.525" level="INFO">
An error occurred (NoSuchBucket) when calling the DeleteObject operation: The specified bucket does not exist</msg>
<status status="PASS" endtime="20191025 23:52:09.526" starttime="20191025 23:52:09.524"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
</arguments>
<msg timestamp="20191025 23:52:09.527" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:52:09.528" starttime="20191025 23:52:09.526"></status>
</kw>
<msg timestamp="20191025 23:52:09.529" level="INFO">${output} = 
An error occurred (NoSuchBucket) when calling the DeleteObject operation: The specified bucket does not exist</msg>
<status status="PASS" endtime="20191025 23:52:09.529" starttime="20191025 23:52:08.864"></status>
</kw>
<msg timestamp="20191025 23:52:09.529" level="INFO">${result} = 
An error occurred (NoSuchBucket) when calling the DeleteObject operation: The specified bucket does not exist</msg>
<status status="PASS" endtime="20191025 23:52:09.529" starttime="20191025 23:52:08.863"></status>
</kw>
<kw name="Should Contain" library="BuiltIn">
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<arguments>
<arg>${result}</arg>
<arg>NoSuchBucket</arg>
</arguments>
<status status="PASS" endtime="20191025 23:52:09.530" starttime="20191025 23:52:09.530"></status>
</kw>
<status status="PASS" endtime="20191025 23:52:09.531" critical="yes" starttime="20191025 23:52:03.471"></status>
</test>
<doc>S3 gateway test with aws cli</doc>
<status status="FAIL" endtime="20191025 23:52:09.533" starttime="20191025 23:51:18.152"></status>
</suite>
<suite source="/opt/hadoop/smoketest/s3/objectmultidelete.robot" id="s1-s8" name="Objectmultidelete">
<test id="s1-s8-t1" name="Delete file with multi delete">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:52:09.571" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:52:09.579" level="INFO">${rc} = 1</msg>
<msg timestamp="20191025 23:52:09.579" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191025 23:52:09.579" starttime="20191025 23:52:09.569"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191025 23:52:09.581" starttime="20191025 23:52:09.580"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:52:09.584" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:52:09.767" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:52:09.767" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.002'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191025 23:52:09.767" starttime="20191025 23:52:09.582"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:52:09.773" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:52:10.271" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:52:10.271" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirrors.xtom.com
 * epel: mirror.prgmr.com
 * extras: mirror.fileplanet.com
 * updates: mirrors.xtom.com
Package ...</msg>
<status status="PASS" endtime="20191025 23:52:10.271" starttime="20191025 23:52:09.771"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:52:10.273" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirrors.xtom.com
 * epel: mirror.prgmr.com
 * extras: mirror.fileplanet.com
 * updates: mirrors.xtom.com
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191025 23:52:10.273" starttime="20191025 23:52:10.272"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:52:10.274" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:52:10.275" starttime="20191025 23:52:10.274"></status>
</kw>
<status status="PASS" endtime="20191025 23:52:10.275" starttime="20191025 23:52:09.770"></status>
</kw>
<status status="PASS" endtime="20191025 23:52:10.276" starttime="20191025 23:52:09.769"></status>
</kw>
<status status="PASS" endtime="20191025 23:52:10.276" starttime="20191025 23:52:09.768"></status>
</kw>
<status status="PASS" endtime="20191025 23:52:10.276" starttime="20191025 23:52:09.569"></status>
</kw>
<status status="PASS" endtime="20191025 23:52:10.277" starttime="20191025 23:52:09.568"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:52:10.285" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:52:10.291" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:52:10.291" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191025 23:52:10.291" starttime="20191025 23:52:10.282"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:52:10.293" level="INFO">s3g</msg>
<status status="PASS" endtime="20191025 23:52:10.293" starttime="20191025 23:52:10.292"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:52:10.294" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:52:10.294" starttime="20191025 23:52:10.293"></status>
</kw>
<msg timestamp="20191025 23:52:10.295" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191025 23:52:10.295" starttime="20191025 23:52:10.281"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191025 23:52:10.298" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:52:10.298" starttime="20191025 23:52:10.295"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:52:10.303" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:52:10.318" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:52:10.319" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:52:10.319" starttime="20191025 23:52:10.301"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:52:10.320" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:52:10.320" starttime="20191025 23:52:10.319"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:52:10.321" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:52:10.321" starttime="20191025 23:52:10.321"></status>
</kw>
<status status="PASS" endtime="20191025 23:52:10.322" starttime="20191025 23:52:10.300"></status>
</kw>
<status status="PASS" endtime="20191025 23:52:10.322" starttime="20191025 23:52:10.299"></status>
</kw>
<status status="PASS" endtime="20191025 23:52:10.322" starttime="20191025 23:52:10.280"></status>
</kw>
<status status="PASS" endtime="20191025 23:52:10.322" starttime="20191025 23:52:10.279"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:52:10.327" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:52:13.213" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:52:13.213" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:52:13.213" starttime="20191025 23:52:10.325"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:52:13.215" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
awsAccessKey=testuser/s3g@EXAMPLE.COM
awsSecret=c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671</msg>
<status status="PASS" endtime="20191025 23:52:13.215" starttime="20191025 23:52:13.214"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:52:13.216" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:52:13.216" starttime="20191025 23:52:13.215"></status>
</kw>
<msg timestamp="20191025 23:52:13.217" level="INFO">${result} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:52:13.217" starttime="20191025 23:52:10.324"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsAccessKey=).*</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:52:13.218" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:52:13.218" starttime="20191025 23:52:13.217"></status>
</kw>
<kw name="Get Variable Value" library="BuiltIn">
<doc>Returns variable value or ``default`` if the variable does not exist.</doc>
<arguments>
<arg>${accessKey}</arg>
<arg>sdsdasaasdasd</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:52:13.220" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:52:13.220" starttime="20191025 23:52:13.219"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsSecret=).*</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:52:13.221" level="INFO">${secret} = [u'c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671']</msg>
<status status="PASS" endtime="20191025 23:52:13.221" starttime="20191025 23:52:13.220"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${accessKey[0]}</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:52:13.222" level="INFO">${accessKey} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:52:13.222" starttime="20191025 23:52:13.221"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${secret[0]}</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:52:13.224" level="INFO">${secret} = c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671</msg>
<status status="PASS" endtime="20191025 23:52:13.224" starttime="20191025 23:52:13.223"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set default.s3.signature_version s3v4</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:52:13.227" level="INFO">Running command 'aws configure set default.s3.signature_version s3v4 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:52:13.715" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:52:13.715" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:52:13.715" starttime="20191025 23:52:13.225"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:52:13.717" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:52:13.717" starttime="20191025 23:52:13.716"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:52:13.718" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:52:13.719" starttime="20191025 23:52:13.718"></status>
</kw>
<status status="PASS" endtime="20191025 23:52:13.719" starttime="20191025 23:52:13.224"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_access_key_id ${accessKey}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:52:13.723" level="INFO">Running command 'aws configure set aws_access_key_id testuser/s3g@EXAMPLE.COM 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:52:14.211" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:52:14.211" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:52:14.212" starttime="20191025 23:52:13.721"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:52:14.213" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:52:14.213" starttime="20191025 23:52:14.212"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:52:14.214" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:52:14.215" starttime="20191025 23:52:14.214"></status>
</kw>
<status status="PASS" endtime="20191025 23:52:14.216" starttime="20191025 23:52:13.720"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_secret_access_key ${secret}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:52:14.219" level="INFO">Running command 'aws configure set aws_secret_access_key c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:52:14.704" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:52:14.704" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:52:14.704" starttime="20191025 23:52:14.217"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:52:14.706" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:52:14.706" starttime="20191025 23:52:14.705"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:52:14.707" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:52:14.708" starttime="20191025 23:52:14.707"></status>
</kw>
<status status="PASS" endtime="20191025 23:52:14.708" starttime="20191025 23:52:14.216"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set region us-west-1</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:52:14.712" level="INFO">Running command 'aws configure set region us-west-1 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:52:15.203" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:52:15.203" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:52:15.204" starttime="20191025 23:52:14.710"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:52:15.205" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:52:15.205" starttime="20191025 23:52:15.204"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:52:15.206" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:52:15.206" starttime="20191025 23:52:15.206"></status>
</kw>
<status status="PASS" endtime="20191025 23:52:15.207" starttime="20191025 23:52:14.709"></status>
</kw>
<status status="PASS" endtime="20191025 23:52:15.207" starttime="20191025 23:52:10.324"></status>
</kw>
<status status="PASS" endtime="20191025 23:52:15.207" starttime="20191025 23:52:10.323"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'false'</arg>
<arg>Setup dummy credentials for S3</arg>
</arguments>
<status status="PASS" endtime="20191025 23:52:15.208" starttime="20191025 23:52:15.208"></status>
</kw>
<status status="PASS" endtime="20191025 23:52:15.208" starttime="20191025 23:52:10.278"></status>
</kw>
<status status="PASS" endtime="20191025 23:52:15.209" starttime="20191025 23:52:10.277"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${BUCKET}' == 'generated'</arg>
<arg>Create bucket</arg>
</arguments>
<kw name="Create bucket" library="commonawslib">
<kw name="Generate Random String" library="String">
<doc>Generates a string with a desired ``length`` from the given ``chars``.</doc>
<arguments>
<arg>5</arg>
<arg>[NUMBERS]</arg>
</arguments>
<assign>
<var>${postfix}</var>
</assign>
<msg timestamp="20191025 23:52:15.211" level="INFO">${postfix} = 63405</msg>
<status status="PASS" endtime="20191025 23:52:15.211" starttime="20191025 23:52:15.210"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${BUCKET}</arg>
<arg>bucket-${postfix}</arg>
</arguments>
<msg timestamp="20191025 23:52:15.212" level="INFO">${BUCKET} = bucket-63405</msg>
<status status="PASS" endtime="20191025 23:52:15.212" starttime="20191025 23:52:15.211"></status>
</kw>
<kw name="Execute AWSS3APICli" library="commonawslib">
<arguments>
<arg>create-bucket --bucket ${BUCKET}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws s3api --endpoint-url ${ENDPOINT_URL} ${command}</arg>
</arguments>
<assign>
<var>${output}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:52:15.216" level="INFO">Running command 'aws s3api --endpoint-url http://s3g:9878 create-bucket --bucket bucket-63405 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:52:24.295" level="INFO">${rc} = 255</msg>
<msg timestamp="20191025 23:52:24.296" level="INFO">${output} = 
An error occurred (500) when calling the CreateBucket operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:52:24.296" starttime="20191025 23:52:15.214"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:52:24.298" level="INFO">
An error occurred (500) when calling the CreateBucket operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:52:24.298" starttime="20191025 23:52:24.297"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:52:24.299" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191025 23:52:24.300" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191025 23:52:24.300" starttime="20191025 23:52:24.299"></status>
</kw>
<status status="FAIL" endtime="20191025 23:52:24.301" starttime="20191025 23:52:15.213"></status>
</kw>
<status status="FAIL" endtime="20191025 23:52:24.301" starttime="20191025 23:52:15.212"></status>
</kw>
<status status="FAIL" endtime="20191025 23:52:24.302" starttime="20191025 23:52:15.210"></status>
</kw>
<status status="FAIL" endtime="20191025 23:52:24.302" starttime="20191025 23:52:15.209"></status>
</kw>
<status status="FAIL" endtime="20191025 23:52:24.302" starttime="20191025 23:52:09.568"></status>
</kw>
<status status="FAIL" endtime="20191025 23:52:24.303" critical="yes" starttime="20191025 23:52:09.567">Setup failed:
255 != 0</status>
</test>
<doc>S3 gateway test with aws cli</doc>
<status status="FAIL" endtime="20191025 23:52:24.304" starttime="20191025 23:52:09.539"></status>
</suite>
<suite source="/opt/hadoop/smoketest/s3/objectputget.robot" id="s1-s9" name="Objectputget">
<test id="s1-s9-t1" name="Put object to s3">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:52:24.323" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:52:24.330" level="INFO">${rc} = 1</msg>
<msg timestamp="20191025 23:52:24.330" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191025 23:52:24.330" starttime="20191025 23:52:24.321"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191025 23:52:24.332" starttime="20191025 23:52:24.331"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:52:24.334" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:52:24.522" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:52:24.522" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.002'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191025 23:52:24.522" starttime="20191025 23:52:24.332"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:52:24.528" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:52:25.059" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:52:25.059" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirrors.xtom.com
 * epel: mirror.prgmr.com
 * extras: mirror.fileplanet.com
 * updates: mirrors.xtom.com
Package ...</msg>
<status status="PASS" endtime="20191025 23:52:25.059" starttime="20191025 23:52:24.526"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:52:25.061" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirrors.xtom.com
 * epel: mirror.prgmr.com
 * extras: mirror.fileplanet.com
 * updates: mirrors.xtom.com
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191025 23:52:25.061" starttime="20191025 23:52:25.060"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:52:25.062" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:52:25.063" starttime="20191025 23:52:25.062"></status>
</kw>
<status status="PASS" endtime="20191025 23:52:25.063" starttime="20191025 23:52:24.525"></status>
</kw>
<status status="PASS" endtime="20191025 23:52:25.063" starttime="20191025 23:52:24.524"></status>
</kw>
<status status="PASS" endtime="20191025 23:52:25.063" starttime="20191025 23:52:24.523"></status>
</kw>
<status status="PASS" endtime="20191025 23:52:25.064" starttime="20191025 23:52:24.320"></status>
</kw>
<status status="PASS" endtime="20191025 23:52:25.064" starttime="20191025 23:52:24.320"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:52:25.070" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:52:25.077" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:52:25.077" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191025 23:52:25.077" starttime="20191025 23:52:25.068"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:52:25.078" level="INFO">s3g</msg>
<status status="PASS" endtime="20191025 23:52:25.078" starttime="20191025 23:52:25.078"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:52:25.079" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:52:25.079" starttime="20191025 23:52:25.078"></status>
</kw>
<msg timestamp="20191025 23:52:25.079" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191025 23:52:25.079" starttime="20191025 23:52:25.067"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191025 23:52:25.081" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:52:25.082" starttime="20191025 23:52:25.080"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:52:25.085" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:52:25.100" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:52:25.100" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:52:25.100" starttime="20191025 23:52:25.083"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:52:25.102" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:52:25.102" starttime="20191025 23:52:25.101"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:52:25.103" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:52:25.103" starttime="20191025 23:52:25.102"></status>
</kw>
<status status="PASS" endtime="20191025 23:52:25.103" starttime="20191025 23:52:25.082"></status>
</kw>
<status status="PASS" endtime="20191025 23:52:25.104" starttime="20191025 23:52:25.082"></status>
</kw>
<status status="PASS" endtime="20191025 23:52:25.104" starttime="20191025 23:52:25.067"></status>
</kw>
<status status="PASS" endtime="20191025 23:52:25.104" starttime="20191025 23:52:25.066"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:52:25.107" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:52:27.659" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:52:27.659" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:52:27.659" starttime="20191025 23:52:25.106"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:52:27.661" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
awsAccessKey=testuser/s3g@EXAMPLE.COM
awsSecret=c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671</msg>
<status status="PASS" endtime="20191025 23:52:27.661" starttime="20191025 23:52:27.660"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:52:27.662" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:52:27.663" starttime="20191025 23:52:27.662"></status>
</kw>
<msg timestamp="20191025 23:52:27.663" level="INFO">${result} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:52:27.663" starttime="20191025 23:52:25.105"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsAccessKey=).*</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:52:27.664" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:52:27.664" starttime="20191025 23:52:27.664"></status>
</kw>
<kw name="Get Variable Value" library="BuiltIn">
<doc>Returns variable value or ``default`` if the variable does not exist.</doc>
<arguments>
<arg>${accessKey}</arg>
<arg>sdsdasaasdasd</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:52:27.665" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:52:27.665" starttime="20191025 23:52:27.665"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsSecret=).*</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:52:27.666" level="INFO">${secret} = [u'c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671']</msg>
<status status="PASS" endtime="20191025 23:52:27.666" starttime="20191025 23:52:27.666"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${accessKey[0]}</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:52:27.667" level="INFO">${accessKey} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:52:27.668" starttime="20191025 23:52:27.667"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${secret[0]}</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:52:27.668" level="INFO">${secret} = c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671</msg>
<status status="PASS" endtime="20191025 23:52:27.669" starttime="20191025 23:52:27.668"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set default.s3.signature_version s3v4</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:52:27.672" level="INFO">Running command 'aws configure set default.s3.signature_version s3v4 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:52:28.168" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:52:28.168" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:52:28.168" starttime="20191025 23:52:27.670"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:52:28.170" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:52:28.170" starttime="20191025 23:52:28.169"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:52:28.171" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:52:28.172" starttime="20191025 23:52:28.171"></status>
</kw>
<status status="PASS" endtime="20191025 23:52:28.172" starttime="20191025 23:52:27.669"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_access_key_id ${accessKey}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:52:28.176" level="INFO">Running command 'aws configure set aws_access_key_id testuser/s3g@EXAMPLE.COM 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:52:28.667" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:52:28.668" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:52:28.668" starttime="20191025 23:52:28.174"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:52:28.670" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:52:28.670" starttime="20191025 23:52:28.669"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:52:28.671" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:52:28.671" starttime="20191025 23:52:28.670"></status>
</kw>
<status status="PASS" endtime="20191025 23:52:28.672" starttime="20191025 23:52:28.173"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_secret_access_key ${secret}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:52:28.676" level="INFO">Running command 'aws configure set aws_secret_access_key c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:52:29.125" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:52:29.125" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:52:29.126" starttime="20191025 23:52:28.674"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:52:29.127" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:52:29.127" starttime="20191025 23:52:29.126"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:52:29.128" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:52:29.129" starttime="20191025 23:52:29.128"></status>
</kw>
<status status="PASS" endtime="20191025 23:52:29.129" starttime="20191025 23:52:28.672"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set region us-west-1</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:52:29.133" level="INFO">Running command 'aws configure set region us-west-1 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:52:29.666" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:52:29.667" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:52:29.667" starttime="20191025 23:52:29.130"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:52:29.669" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:52:29.669" starttime="20191025 23:52:29.668"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:52:29.671" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:52:29.671" starttime="20191025 23:52:29.669"></status>
</kw>
<status status="PASS" endtime="20191025 23:52:29.672" starttime="20191025 23:52:29.129"></status>
</kw>
<status status="PASS" endtime="20191025 23:52:29.672" starttime="20191025 23:52:25.105"></status>
</kw>
<status status="PASS" endtime="20191025 23:52:29.672" starttime="20191025 23:52:25.104"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'false'</arg>
<arg>Setup dummy credentials for S3</arg>
</arguments>
<status status="PASS" endtime="20191025 23:52:29.674" starttime="20191025 23:52:29.673"></status>
</kw>
<status status="PASS" endtime="20191025 23:52:29.674" starttime="20191025 23:52:25.065"></status>
</kw>
<status status="PASS" endtime="20191025 23:52:29.674" starttime="20191025 23:52:25.064"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${BUCKET}' == 'generated'</arg>
<arg>Create bucket</arg>
</arguments>
<kw name="Create bucket" library="commonawslib">
<kw name="Generate Random String" library="String">
<doc>Generates a string with a desired ``length`` from the given ``chars``.</doc>
<arguments>
<arg>5</arg>
<arg>[NUMBERS]</arg>
</arguments>
<assign>
<var>${postfix}</var>
</assign>
<msg timestamp="20191025 23:52:29.677" level="INFO">${postfix} = 98588</msg>
<status status="PASS" endtime="20191025 23:52:29.678" starttime="20191025 23:52:29.677"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${BUCKET}</arg>
<arg>bucket-${postfix}</arg>
</arguments>
<msg timestamp="20191025 23:52:29.679" level="INFO">${BUCKET} = bucket-98588</msg>
<status status="PASS" endtime="20191025 23:52:29.679" starttime="20191025 23:52:29.678"></status>
</kw>
<kw name="Execute AWSS3APICli" library="commonawslib">
<arguments>
<arg>create-bucket --bucket ${BUCKET}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws s3api --endpoint-url ${ENDPOINT_URL} ${command}</arg>
</arguments>
<assign>
<var>${output}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:52:29.684" level="INFO">Running command 'aws s3api --endpoint-url http://s3g:9878 create-bucket --bucket bucket-98588 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:52:41.130" level="INFO">${rc} = 255</msg>
<msg timestamp="20191025 23:52:41.130" level="INFO">${output} = 
An error occurred (500) when calling the CreateBucket operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:52:41.130" starttime="20191025 23:52:29.681"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:52:41.132" level="INFO">
An error occurred (500) when calling the CreateBucket operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:52:41.132" starttime="20191025 23:52:41.131"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:52:41.136" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191025 23:52:41.140" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191025 23:52:41.140" starttime="20191025 23:52:41.133"></status>
</kw>
<status status="FAIL" endtime="20191025 23:52:41.142" starttime="20191025 23:52:29.680"></status>
</kw>
<status status="FAIL" endtime="20191025 23:52:41.143" starttime="20191025 23:52:29.679"></status>
</kw>
<status status="FAIL" endtime="20191025 23:52:41.144" starttime="20191025 23:52:29.676"></status>
</kw>
<status status="FAIL" endtime="20191025 23:52:41.144" starttime="20191025 23:52:29.675"></status>
</kw>
<status status="FAIL" endtime="20191025 23:52:41.145" starttime="20191025 23:52:24.318"></status>
</kw>
<status status="FAIL" endtime="20191025 23:52:41.146" critical="yes" starttime="20191025 23:52:24.318">Setup failed:
255 != 0</status>
</test>
<test id="s1-s9-t2" name="Get object from s3">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:52:41.157" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:52:41.162" level="INFO">${rc} = 1</msg>
<msg timestamp="20191025 23:52:41.163" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191025 23:52:41.163" starttime="20191025 23:52:41.155"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191025 23:52:41.165" starttime="20191025 23:52:41.164"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:52:41.167" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:52:41.367" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:52:41.368" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.002'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191025 23:52:41.368" starttime="20191025 23:52:41.165"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:52:41.375" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:52:41.875" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:52:41.875" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirrors.xtom.com
 * epel: mirror.prgmr.com
 * extras: mirror.fileplanet.com
 * updates: mirrors.xtom.com
Package ...</msg>
<status status="PASS" endtime="20191025 23:52:41.876" starttime="20191025 23:52:41.372"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:52:41.878" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirrors.xtom.com
 * epel: mirror.prgmr.com
 * extras: mirror.fileplanet.com
 * updates: mirrors.xtom.com
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191025 23:52:41.878" starttime="20191025 23:52:41.877"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:52:41.879" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:52:41.879" starttime="20191025 23:52:41.878"></status>
</kw>
<status status="PASS" endtime="20191025 23:52:41.880" starttime="20191025 23:52:41.371"></status>
</kw>
<status status="PASS" endtime="20191025 23:52:41.880" starttime="20191025 23:52:41.370"></status>
</kw>
<status status="PASS" endtime="20191025 23:52:41.881" starttime="20191025 23:52:41.369"></status>
</kw>
<status status="PASS" endtime="20191025 23:52:41.881" starttime="20191025 23:52:41.154"></status>
</kw>
<status status="PASS" endtime="20191025 23:52:41.881" starttime="20191025 23:52:41.153"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:52:41.890" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:52:41.896" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:52:41.896" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191025 23:52:41.896" starttime="20191025 23:52:41.887"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:52:41.898" level="INFO">s3g</msg>
<status status="PASS" endtime="20191025 23:52:41.898" starttime="20191025 23:52:41.897"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:52:41.899" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:52:41.900" starttime="20191025 23:52:41.899"></status>
</kw>
<msg timestamp="20191025 23:52:41.900" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191025 23:52:41.900" starttime="20191025 23:52:41.886"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191025 23:52:41.902" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:52:41.902" starttime="20191025 23:52:41.901"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:52:41.907" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:52:41.924" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:52:41.925" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:52:41.925" starttime="20191025 23:52:41.905"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:52:41.927" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:52:41.927" starttime="20191025 23:52:41.926"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:52:41.928" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:52:41.928" starttime="20191025 23:52:41.927"></status>
</kw>
<status status="PASS" endtime="20191025 23:52:41.929" starttime="20191025 23:52:41.904"></status>
</kw>
<status status="PASS" endtime="20191025 23:52:41.929" starttime="20191025 23:52:41.903"></status>
</kw>
<status status="PASS" endtime="20191025 23:52:41.929" starttime="20191025 23:52:41.885"></status>
</kw>
<status status="PASS" endtime="20191025 23:52:41.929" starttime="20191025 23:52:41.884"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:52:41.935" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:52:44.587" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:52:44.587" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:52:44.587" starttime="20191025 23:52:41.933"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:52:44.589" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
awsAccessKey=testuser/s3g@EXAMPLE.COM
awsSecret=c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671</msg>
<status status="PASS" endtime="20191025 23:52:44.589" starttime="20191025 23:52:44.588"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:52:44.589" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:52:44.589" starttime="20191025 23:52:44.589"></status>
</kw>
<msg timestamp="20191025 23:52:44.590" level="INFO">${result} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:52:44.590" starttime="20191025 23:52:41.932"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsAccessKey=).*</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:52:44.591" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:52:44.591" starttime="20191025 23:52:44.590"></status>
</kw>
<kw name="Get Variable Value" library="BuiltIn">
<doc>Returns variable value or ``default`` if the variable does not exist.</doc>
<arguments>
<arg>${accessKey}</arg>
<arg>sdsdasaasdasd</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:52:44.592" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:52:44.592" starttime="20191025 23:52:44.591"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsSecret=).*</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:52:44.593" level="INFO">${secret} = [u'c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671']</msg>
<status status="PASS" endtime="20191025 23:52:44.593" starttime="20191025 23:52:44.592"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${accessKey[0]}</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:52:44.593" level="INFO">${accessKey} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:52:44.593" starttime="20191025 23:52:44.593"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${secret[0]}</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:52:44.594" level="INFO">${secret} = c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671</msg>
<status status="PASS" endtime="20191025 23:52:44.594" starttime="20191025 23:52:44.594"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set default.s3.signature_version s3v4</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:52:44.597" level="INFO">Running command 'aws configure set default.s3.signature_version s3v4 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:52:45.107" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:52:45.107" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:52:45.108" starttime="20191025 23:52:44.595"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:52:45.109" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:52:45.109" starttime="20191025 23:52:45.108"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:52:45.110" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:52:45.111" starttime="20191025 23:52:45.110"></status>
</kw>
<status status="PASS" endtime="20191025 23:52:45.111" starttime="20191025 23:52:44.594"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_access_key_id ${accessKey}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:52:45.115" level="INFO">Running command 'aws configure set aws_access_key_id testuser/s3g@EXAMPLE.COM 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:52:45.558" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:52:45.558" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:52:45.559" starttime="20191025 23:52:45.112"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:52:45.561" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:52:45.561" starttime="20191025 23:52:45.559"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:52:45.562" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:52:45.562" starttime="20191025 23:52:45.561"></status>
</kw>
<status status="PASS" endtime="20191025 23:52:45.563" starttime="20191025 23:52:45.111"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_secret_access_key ${secret}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:52:45.568" level="INFO">Running command 'aws configure set aws_secret_access_key c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:52:46.103" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:52:46.103" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:52:46.103" starttime="20191025 23:52:45.564"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:52:46.106" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:52:46.106" starttime="20191025 23:52:46.104"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:52:46.107" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:52:46.108" starttime="20191025 23:52:46.107"></status>
</kw>
<status status="PASS" endtime="20191025 23:52:46.108" starttime="20191025 23:52:45.563"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set region us-west-1</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:52:46.113" level="INFO">Running command 'aws configure set region us-west-1 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:52:46.583" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:52:46.583" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:52:46.583" starttime="20191025 23:52:46.110"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:52:46.585" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:52:46.586" starttime="20191025 23:52:46.584"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:52:46.587" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:52:46.587" starttime="20191025 23:52:46.586"></status>
</kw>
<status status="PASS" endtime="20191025 23:52:46.588" starttime="20191025 23:52:46.109"></status>
</kw>
<status status="PASS" endtime="20191025 23:52:46.588" starttime="20191025 23:52:41.931"></status>
</kw>
<status status="PASS" endtime="20191025 23:52:46.588" starttime="20191025 23:52:41.930"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'false'</arg>
<arg>Setup dummy credentials for S3</arg>
</arguments>
<status status="PASS" endtime="20191025 23:52:46.590" starttime="20191025 23:52:46.589"></status>
</kw>
<status status="PASS" endtime="20191025 23:52:46.590" starttime="20191025 23:52:41.883"></status>
</kw>
<status status="PASS" endtime="20191025 23:52:46.590" starttime="20191025 23:52:41.882"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${BUCKET}' == 'generated'</arg>
<arg>Create bucket</arg>
</arguments>
<status status="PASS" endtime="20191025 23:52:46.591" starttime="20191025 23:52:46.590"></status>
</kw>
<status status="PASS" endtime="20191025 23:52:46.591" starttime="20191025 23:52:41.151"></status>
</kw>
<kw name="Execute AWSS3APICli" library="commonawslib">
<arguments>
<arg>get-object --bucket ${BUCKET} --key putobject/f1 /tmp/testfile.result</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws s3api --endpoint-url ${ENDPOINT_URL} ${command}</arg>
</arguments>
<assign>
<var>${output}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:52:46.597" level="INFO">Running command 'aws s3api --endpoint-url http://s3g:9878 get-object --bucket bucket-98588 --key putobject/f1 /tmp/testfile.result 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:52:56.981" level="INFO">${rc} = 255</msg>
<msg timestamp="20191025 23:52:56.981" level="INFO">${output} = 
An error occurred (500) when calling the GetObject operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:52:56.981" starttime="20191025 23:52:46.594"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:52:56.983" level="INFO">
An error occurred (500) when calling the GetObject operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:52:56.983" starttime="20191025 23:52:56.982"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:52:56.984" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191025 23:52:56.985" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191025 23:52:56.985" starttime="20191025 23:52:56.984"></status>
</kw>
<status status="FAIL" endtime="20191025 23:52:56.986" starttime="20191025 23:52:46.593"></status>
</kw>
<status status="FAIL" endtime="20191025 23:52:56.986" starttime="20191025 23:52:46.592"></status>
</kw>
<status status="FAIL" endtime="20191025 23:52:56.987" critical="yes" starttime="20191025 23:52:41.149">255 != 0</status>
</test>
<test id="s1-s9-t3" name="Get Partial object from s3 with both start and endoffset">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:52:56.994" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:52:57.001" level="INFO">${rc} = 1</msg>
<msg timestamp="20191025 23:52:57.001" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191025 23:52:57.001" starttime="20191025 23:52:56.991"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191025 23:52:57.003" starttime="20191025 23:52:57.002"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:52:57.006" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:52:57.194" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:52:57.194" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.002'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191025 23:52:57.194" starttime="20191025 23:52:57.004"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:52:57.200" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:52:57.653" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:52:57.653" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirrors.xtom.com
 * epel: mirror.prgmr.com
 * extras: mirror.fileplanet.com
 * updates: mirrors.xtom.com
Package ...</msg>
<status status="PASS" endtime="20191025 23:52:57.654" starttime="20191025 23:52:57.198"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:52:57.656" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirrors.xtom.com
 * epel: mirror.prgmr.com
 * extras: mirror.fileplanet.com
 * updates: mirrors.xtom.com
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191025 23:52:57.656" starttime="20191025 23:52:57.655"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:52:57.657" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:52:57.657" starttime="20191025 23:52:57.656"></status>
</kw>
<status status="PASS" endtime="20191025 23:52:57.658" starttime="20191025 23:52:57.197"></status>
</kw>
<status status="PASS" endtime="20191025 23:52:57.658" starttime="20191025 23:52:57.197"></status>
</kw>
<status status="PASS" endtime="20191025 23:52:57.658" starttime="20191025 23:52:57.195"></status>
</kw>
<status status="PASS" endtime="20191025 23:52:57.659" starttime="20191025 23:52:56.990"></status>
</kw>
<status status="PASS" endtime="20191025 23:52:57.659" starttime="20191025 23:52:56.990"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:52:57.668" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:52:57.673" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:52:57.673" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191025 23:52:57.673" starttime="20191025 23:52:57.664"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:52:57.675" level="INFO">s3g</msg>
<status status="PASS" endtime="20191025 23:52:57.675" starttime="20191025 23:52:57.674"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:52:57.676" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:52:57.676" starttime="20191025 23:52:57.676"></status>
</kw>
<msg timestamp="20191025 23:52:57.677" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191025 23:52:57.677" starttime="20191025 23:52:57.663"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191025 23:52:57.679" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:52:57.679" starttime="20191025 23:52:57.677"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:52:57.683" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:52:57.698" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:52:57.698" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:52:57.698" starttime="20191025 23:52:57.681"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:52:57.700" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:52:57.700" starttime="20191025 23:52:57.699"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:52:57.700" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:52:57.701" starttime="20191025 23:52:57.700"></status>
</kw>
<status status="PASS" endtime="20191025 23:52:57.701" starttime="20191025 23:52:57.680"></status>
</kw>
<status status="PASS" endtime="20191025 23:52:57.701" starttime="20191025 23:52:57.679"></status>
</kw>
<status status="PASS" endtime="20191025 23:52:57.702" starttime="20191025 23:52:57.663"></status>
</kw>
<status status="PASS" endtime="20191025 23:52:57.702" starttime="20191025 23:52:57.662"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:52:57.706" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:53:00.197" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:53:00.197" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:53:00.197" starttime="20191025 23:52:57.704"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:53:00.199" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
awsAccessKey=testuser/s3g@EXAMPLE.COM
awsSecret=c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671</msg>
<status status="PASS" endtime="20191025 23:53:00.200" starttime="20191025 23:53:00.198"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:53:00.201" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:53:00.201" starttime="20191025 23:53:00.200"></status>
</kw>
<msg timestamp="20191025 23:53:00.202" level="INFO">${result} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:53:00.202" starttime="20191025 23:52:57.704"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsAccessKey=).*</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:53:00.203" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:53:00.203" starttime="20191025 23:53:00.202"></status>
</kw>
<kw name="Get Variable Value" library="BuiltIn">
<doc>Returns variable value or ``default`` if the variable does not exist.</doc>
<arguments>
<arg>${accessKey}</arg>
<arg>sdsdasaasdasd</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:53:00.205" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:53:00.205" starttime="20191025 23:53:00.204"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsSecret=).*</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:53:00.206" level="INFO">${secret} = [u'c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671']</msg>
<status status="PASS" endtime="20191025 23:53:00.206" starttime="20191025 23:53:00.205"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${accessKey[0]}</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:53:00.207" level="INFO">${accessKey} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:53:00.208" starttime="20191025 23:53:00.206"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${secret[0]}</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:53:00.209" level="INFO">${secret} = c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671</msg>
<status status="PASS" endtime="20191025 23:53:00.209" starttime="20191025 23:53:00.208"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set default.s3.signature_version s3v4</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:53:00.213" level="INFO">Running command 'aws configure set default.s3.signature_version s3v4 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:53:00.711" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:53:00.711" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:53:00.711" starttime="20191025 23:53:00.210"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:53:00.713" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:53:00.713" starttime="20191025 23:53:00.712"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:53:00.714" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:53:00.714" starttime="20191025 23:53:00.713"></status>
</kw>
<status status="PASS" endtime="20191025 23:53:00.715" starttime="20191025 23:53:00.209"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_access_key_id ${accessKey}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:53:00.719" level="INFO">Running command 'aws configure set aws_access_key_id testuser/s3g@EXAMPLE.COM 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:53:01.295" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:53:01.295" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:53:01.295" starttime="20191025 23:53:00.716"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:53:01.297" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:53:01.297" starttime="20191025 23:53:01.296"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:53:01.298" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:53:01.298" starttime="20191025 23:53:01.297"></status>
</kw>
<status status="PASS" endtime="20191025 23:53:01.299" starttime="20191025 23:53:00.715"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_secret_access_key ${secret}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:53:01.302" level="INFO">Running command 'aws configure set aws_secret_access_key c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:53:01.779" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:53:01.779" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:53:01.780" starttime="20191025 23:53:01.300"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:53:01.781" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:53:01.781" starttime="20191025 23:53:01.780"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:53:01.782" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:53:01.783" starttime="20191025 23:53:01.782"></status>
</kw>
<status status="PASS" endtime="20191025 23:53:01.783" starttime="20191025 23:53:01.299"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set region us-west-1</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:53:01.787" level="INFO">Running command 'aws configure set region us-west-1 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:53:02.296" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:53:02.297" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:53:02.297" starttime="20191025 23:53:01.784"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:53:02.299" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:53:02.299" starttime="20191025 23:53:02.298"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:53:02.300" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:53:02.300" starttime="20191025 23:53:02.299"></status>
</kw>
<status status="PASS" endtime="20191025 23:53:02.301" starttime="20191025 23:53:01.783"></status>
</kw>
<status status="PASS" endtime="20191025 23:53:02.301" starttime="20191025 23:52:57.703"></status>
</kw>
<status status="PASS" endtime="20191025 23:53:02.302" starttime="20191025 23:52:57.702"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'false'</arg>
<arg>Setup dummy credentials for S3</arg>
</arguments>
<status status="PASS" endtime="20191025 23:53:02.303" starttime="20191025 23:53:02.302"></status>
</kw>
<status status="PASS" endtime="20191025 23:53:02.303" starttime="20191025 23:52:57.661"></status>
</kw>
<status status="PASS" endtime="20191025 23:53:02.304" starttime="20191025 23:52:57.659"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${BUCKET}' == 'generated'</arg>
<arg>Create bucket</arg>
</arguments>
<status status="PASS" endtime="20191025 23:53:02.305" starttime="20191025 23:53:02.304"></status>
</kw>
<status status="PASS" endtime="20191025 23:53:02.305" starttime="20191025 23:52:56.989"></status>
</kw>
<kw name="Execute AWSS3APICli" library="commonawslib">
<arguments>
<arg>get-object --bucket ${BUCKET} --key putobject/f1 --range bytes=0-4 /tmp/testfile1.result</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws s3api --endpoint-url ${ENDPOINT_URL} ${command}</arg>
</arguments>
<assign>
<var>${output}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:53:02.311" level="INFO">Running command 'aws s3api --endpoint-url http://s3g:9878 get-object --bucket bucket-98588 --key putobject/f1 --range bytes=0-4 /tmp/testfile1.result 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:53:14.924" level="INFO">${rc} = 255</msg>
<msg timestamp="20191025 23:53:14.924" level="INFO">${output} = 
An error occurred (500) when calling the GetObject operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:53:14.924" starttime="20191025 23:53:02.308"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:53:14.926" level="INFO">
An error occurred (500) when calling the GetObject operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:53:14.926" starttime="20191025 23:53:14.925"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:53:14.927" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191025 23:53:14.928" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191025 23:53:14.928" starttime="20191025 23:53:14.926"></status>
</kw>
<status status="FAIL" endtime="20191025 23:53:14.928" starttime="20191025 23:53:02.307"></status>
</kw>
<status status="FAIL" endtime="20191025 23:53:14.929" starttime="20191025 23:53:02.306"></status>
</kw>
<status status="FAIL" endtime="20191025 23:53:14.929" critical="yes" starttime="20191025 23:52:56.987">255 != 0</status>
</test>
<test id="s1-s9-t4" name="Get Partial object from s3 with both start and endoffset(start offset and endoffset is greater than file size)">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:53:14.937" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:53:14.944" level="INFO">${rc} = 1</msg>
<msg timestamp="20191025 23:53:14.944" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191025 23:53:14.945" starttime="20191025 23:53:14.934"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191025 23:53:14.947" starttime="20191025 23:53:14.946"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:53:14.950" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:53:15.143" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:53:15.143" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.002'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191025 23:53:15.143" starttime="20191025 23:53:14.947"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:53:15.150" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:53:15.610" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:53:15.610" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirrors.xtom.com
 * epel: mirror.prgmr.com
 * extras: mirror.fileplanet.com
 * updates: mirrors.xtom.com
Package ...</msg>
<status status="PASS" endtime="20191025 23:53:15.610" starttime="20191025 23:53:15.147"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:53:15.612" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirrors.xtom.com
 * epel: mirror.prgmr.com
 * extras: mirror.fileplanet.com
 * updates: mirrors.xtom.com
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191025 23:53:15.612" starttime="20191025 23:53:15.611"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:53:15.613" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:53:15.613" starttime="20191025 23:53:15.612"></status>
</kw>
<status status="PASS" endtime="20191025 23:53:15.614" starttime="20191025 23:53:15.146"></status>
</kw>
<status status="PASS" endtime="20191025 23:53:15.614" starttime="20191025 23:53:15.146"></status>
</kw>
<status status="PASS" endtime="20191025 23:53:15.614" starttime="20191025 23:53:15.144"></status>
</kw>
<status status="PASS" endtime="20191025 23:53:15.615" starttime="20191025 23:53:14.934"></status>
</kw>
<status status="PASS" endtime="20191025 23:53:15.615" starttime="20191025 23:53:14.933"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:53:15.623" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:53:15.630" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:53:15.630" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191025 23:53:15.630" starttime="20191025 23:53:15.620"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:53:15.632" level="INFO">s3g</msg>
<status status="PASS" endtime="20191025 23:53:15.632" starttime="20191025 23:53:15.631"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:53:15.633" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:53:15.634" starttime="20191025 23:53:15.633"></status>
</kw>
<msg timestamp="20191025 23:53:15.634" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191025 23:53:15.634" starttime="20191025 23:53:15.619"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191025 23:53:15.636" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:53:15.636" starttime="20191025 23:53:15.635"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:53:15.641" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:53:15.660" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:53:15.660" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:53:15.660" starttime="20191025 23:53:15.639"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:53:15.661" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:53:15.662" starttime="20191025 23:53:15.661"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:53:15.663" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:53:15.663" starttime="20191025 23:53:15.662"></status>
</kw>
<status status="PASS" endtime="20191025 23:53:15.663" starttime="20191025 23:53:15.637"></status>
</kw>
<status status="PASS" endtime="20191025 23:53:15.664" starttime="20191025 23:53:15.636"></status>
</kw>
<status status="PASS" endtime="20191025 23:53:15.664" starttime="20191025 23:53:15.618"></status>
</kw>
<status status="PASS" endtime="20191025 23:53:15.664" starttime="20191025 23:53:15.617"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:53:15.669" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:53:18.447" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:53:18.448" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:53:18.448" starttime="20191025 23:53:15.667"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:53:18.450" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
awsAccessKey=testuser/s3g@EXAMPLE.COM
awsSecret=c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671</msg>
<status status="PASS" endtime="20191025 23:53:18.450" starttime="20191025 23:53:18.449"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:53:18.451" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:53:18.451" starttime="20191025 23:53:18.450"></status>
</kw>
<msg timestamp="20191025 23:53:18.452" level="INFO">${result} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:53:18.452" starttime="20191025 23:53:15.666"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsAccessKey=).*</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:53:18.454" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:53:18.454" starttime="20191025 23:53:18.453"></status>
</kw>
<kw name="Get Variable Value" library="BuiltIn">
<doc>Returns variable value or ``default`` if the variable does not exist.</doc>
<arguments>
<arg>${accessKey}</arg>
<arg>sdsdasaasdasd</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:53:18.455" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:53:18.455" starttime="20191025 23:53:18.454"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsSecret=).*</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:53:18.456" level="INFO">${secret} = [u'c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671']</msg>
<status status="PASS" endtime="20191025 23:53:18.456" starttime="20191025 23:53:18.455"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${accessKey[0]}</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:53:18.458" level="INFO">${accessKey} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:53:18.458" starttime="20191025 23:53:18.457"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${secret[0]}</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:53:18.459" level="INFO">${secret} = c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671</msg>
<status status="PASS" endtime="20191025 23:53:18.459" starttime="20191025 23:53:18.458"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set default.s3.signature_version s3v4</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:53:18.463" level="INFO">Running command 'aws configure set default.s3.signature_version s3v4 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:53:18.937" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:53:18.937" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:53:18.937" starttime="20191025 23:53:18.460"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:53:18.939" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:53:18.939" starttime="20191025 23:53:18.938"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:53:18.941" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:53:18.941" starttime="20191025 23:53:18.940"></status>
</kw>
<status status="PASS" endtime="20191025 23:53:18.942" starttime="20191025 23:53:18.459"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_access_key_id ${accessKey}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:53:18.948" level="INFO">Running command 'aws configure set aws_access_key_id testuser/s3g@EXAMPLE.COM 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:53:19.465" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:53:19.465" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:53:19.465" starttime="20191025 23:53:18.944"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:53:19.467" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:53:19.467" starttime="20191025 23:53:19.466"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:53:19.468" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:53:19.469" starttime="20191025 23:53:19.467"></status>
</kw>
<status status="PASS" endtime="20191025 23:53:19.469" starttime="20191025 23:53:18.942"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_secret_access_key ${secret}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:53:19.474" level="INFO">Running command 'aws configure set aws_secret_access_key c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:53:19.927" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:53:19.927" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:53:19.928" starttime="20191025 23:53:19.471"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:53:19.929" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:53:19.930" starttime="20191025 23:53:19.928"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:53:19.931" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:53:19.931" starttime="20191025 23:53:19.930"></status>
</kw>
<status status="PASS" endtime="20191025 23:53:19.931" starttime="20191025 23:53:19.470"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set region us-west-1</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:53:19.935" level="INFO">Running command 'aws configure set region us-west-1 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:53:20.374" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:53:20.375" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:53:20.375" starttime="20191025 23:53:19.933"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:53:20.377" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:53:20.377" starttime="20191025 23:53:20.376"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:53:20.378" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:53:20.378" starttime="20191025 23:53:20.377"></status>
</kw>
<status status="PASS" endtime="20191025 23:53:20.379" starttime="20191025 23:53:19.932"></status>
</kw>
<status status="PASS" endtime="20191025 23:53:20.379" starttime="20191025 23:53:15.665"></status>
</kw>
<status status="PASS" endtime="20191025 23:53:20.380" starttime="20191025 23:53:15.664"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'false'</arg>
<arg>Setup dummy credentials for S3</arg>
</arguments>
<status status="PASS" endtime="20191025 23:53:20.381" starttime="20191025 23:53:20.380"></status>
</kw>
<status status="PASS" endtime="20191025 23:53:20.381" starttime="20191025 23:53:15.616"></status>
</kw>
<status status="PASS" endtime="20191025 23:53:20.382" starttime="20191025 23:53:15.615"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${BUCKET}' == 'generated'</arg>
<arg>Create bucket</arg>
</arguments>
<status status="PASS" endtime="20191025 23:53:20.383" starttime="20191025 23:53:20.382"></status>
</kw>
<status status="PASS" endtime="20191025 23:53:20.383" starttime="20191025 23:53:14.932"></status>
</kw>
<kw name="Execute AWSS3APICli and checkrc" library="commonawslib">
<arguments>
<arg>get-object --bucket ${BUCKET} --key putobject/f1 --range bytes=10000-10000 /tmp/testfile2.result</arg>
<arg>255</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Execute and checkrc" library="commonlib">
<arguments>
<arg>aws s3api --endpoint-url ${ENDPOINT_URL} ${command}</arg>
<arg>${expected_error_code}</arg>
</arguments>
<assign>
<var>${output}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:53:20.389" level="INFO">Running command 'aws s3api --endpoint-url http://s3g:9878 get-object --bucket bucket-98588 --key putobject/f1 --range bytes=10000-10000 /tmp/testfile2.result 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:53:29.441" level="INFO">${rc} = 255</msg>
<msg timestamp="20191025 23:53:29.441" level="INFO">${output} = 
An error occurred (500) when calling the GetObject operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:53:29.441" starttime="20191025 23:53:20.386"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:53:29.443" level="INFO">
An error occurred (500) when calling the GetObject operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:53:29.444" starttime="20191025 23:53:29.442"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
</arguments>
<msg timestamp="20191025 23:53:29.445" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:53:29.445" starttime="20191025 23:53:29.444"></status>
</kw>
<msg timestamp="20191025 23:53:29.446" level="INFO">${output} = 
An error occurred (500) when calling the GetObject operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:53:29.446" starttime="20191025 23:53:20.385"></status>
</kw>
<msg timestamp="20191025 23:53:29.447" level="INFO">${result} = 
An error occurred (500) when calling the GetObject operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:53:29.447" starttime="20191025 23:53:20.384"></status>
</kw>
<kw name="Should Contain" library="BuiltIn">
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<arguments>
<arg>${result}</arg>
<arg>InvalidRange</arg>
</arguments>
<msg timestamp="20191025 23:53:29.449" level="FAIL">'
An error occurred (500) when calling the GetObject operation (reached max retries: 4): Internal Server Error' does not contain 'InvalidRange'</msg>
<status status="FAIL" endtime="20191025 23:53:29.449" starttime="20191025 23:53:29.447"></status>
</kw>
<status status="FAIL" endtime="20191025 23:53:29.450" critical="yes" starttime="20191025 23:53:14.930">'
An error occurred (500) when calling the GetObject operation (reached max retries: 4): Internal Server Error' does not contain 'InvalidRange'</status>
</test>
<test id="s1-s9-t5" name="Get Partial object from s3 with both start and endoffset(end offset is greater than file size)">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:53:29.458" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:53:29.464" level="INFO">${rc} = 1</msg>
<msg timestamp="20191025 23:53:29.465" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191025 23:53:29.465" starttime="20191025 23:53:29.455"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191025 23:53:29.467" starttime="20191025 23:53:29.466"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:53:29.469" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:53:29.669" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:53:29.670" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.002'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191025 23:53:29.670" starttime="20191025 23:53:29.467"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:53:29.676" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:53:30.173" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:53:30.173" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirrors.xtom.com
 * epel: mirror.prgmr.com
 * extras: mirror.fileplanet.com
 * updates: mirrors.xtom.com
Package ...</msg>
<status status="PASS" endtime="20191025 23:53:30.173" starttime="20191025 23:53:29.674"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:53:30.175" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirrors.xtom.com
 * epel: mirror.prgmr.com
 * extras: mirror.fileplanet.com
 * updates: mirrors.xtom.com
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191025 23:53:30.176" starttime="20191025 23:53:30.174"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:53:30.177" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:53:30.177" starttime="20191025 23:53:30.176"></status>
</kw>
<status status="PASS" endtime="20191025 23:53:30.177" starttime="20191025 23:53:29.673"></status>
</kw>
<status status="PASS" endtime="20191025 23:53:30.178" starttime="20191025 23:53:29.672"></status>
</kw>
<status status="PASS" endtime="20191025 23:53:30.178" starttime="20191025 23:53:29.671"></status>
</kw>
<status status="PASS" endtime="20191025 23:53:30.178" starttime="20191025 23:53:29.454"></status>
</kw>
<status status="PASS" endtime="20191025 23:53:30.179" starttime="20191025 23:53:29.453"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:53:30.188" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:53:30.194" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:53:30.194" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191025 23:53:30.195" starttime="20191025 23:53:30.185"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:53:30.196" level="INFO">s3g</msg>
<status status="PASS" endtime="20191025 23:53:30.197" starttime="20191025 23:53:30.195"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:53:30.198" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:53:30.198" starttime="20191025 23:53:30.197"></status>
</kw>
<msg timestamp="20191025 23:53:30.199" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191025 23:53:30.199" starttime="20191025 23:53:30.183"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191025 23:53:30.200" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:53:30.200" starttime="20191025 23:53:30.199"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:53:30.205" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:53:30.222" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:53:30.222" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:53:30.222" starttime="20191025 23:53:30.203"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:53:30.224" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:53:30.225" starttime="20191025 23:53:30.223"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:53:30.225" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:53:30.226" starttime="20191025 23:53:30.225"></status>
</kw>
<status status="PASS" endtime="20191025 23:53:30.226" starttime="20191025 23:53:30.202"></status>
</kw>
<status status="PASS" endtime="20191025 23:53:30.226" starttime="20191025 23:53:30.201"></status>
</kw>
<status status="PASS" endtime="20191025 23:53:30.227" starttime="20191025 23:53:30.182"></status>
</kw>
<status status="PASS" endtime="20191025 23:53:30.227" starttime="20191025 23:53:30.181"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:53:30.231" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:53:33.030" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:53:33.030" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:53:33.031" starttime="20191025 23:53:30.229"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:53:33.033" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
awsAccessKey=testuser/s3g@EXAMPLE.COM
awsSecret=c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671</msg>
<status status="PASS" endtime="20191025 23:53:33.033" starttime="20191025 23:53:33.032"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:53:33.034" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:53:33.034" starttime="20191025 23:53:33.033"></status>
</kw>
<msg timestamp="20191025 23:53:33.035" level="INFO">${result} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:53:33.035" starttime="20191025 23:53:30.229"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsAccessKey=).*</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:53:33.036" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:53:33.037" starttime="20191025 23:53:33.035"></status>
</kw>
<kw name="Get Variable Value" library="BuiltIn">
<doc>Returns variable value or ``default`` if the variable does not exist.</doc>
<arguments>
<arg>${accessKey}</arg>
<arg>sdsdasaasdasd</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:53:33.038" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:53:33.038" starttime="20191025 23:53:33.037"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsSecret=).*</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:53:33.039" level="INFO">${secret} = [u'c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671']</msg>
<status status="PASS" endtime="20191025 23:53:33.039" starttime="20191025 23:53:33.038"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${accessKey[0]}</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:53:33.041" level="INFO">${accessKey} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:53:33.041" starttime="20191025 23:53:33.040"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${secret[0]}</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:53:33.042" level="INFO">${secret} = c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671</msg>
<status status="PASS" endtime="20191025 23:53:33.042" starttime="20191025 23:53:33.041"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set default.s3.signature_version s3v4</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:53:33.046" level="INFO">Running command 'aws configure set default.s3.signature_version s3v4 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:53:33.461" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:53:33.461" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:53:33.461" starttime="20191025 23:53:33.043"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:53:33.463" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:53:33.463" starttime="20191025 23:53:33.462"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:53:33.464" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:53:33.465" starttime="20191025 23:53:33.464"></status>
</kw>
<status status="PASS" endtime="20191025 23:53:33.465" starttime="20191025 23:53:33.042"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_access_key_id ${accessKey}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:53:33.469" level="INFO">Running command 'aws configure set aws_access_key_id testuser/s3g@EXAMPLE.COM 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:53:33.955" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:53:33.955" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:53:33.955" starttime="20191025 23:53:33.467"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:53:33.957" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:53:33.957" starttime="20191025 23:53:33.956"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:53:33.958" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:53:33.958" starttime="20191025 23:53:33.957"></status>
</kw>
<status status="PASS" endtime="20191025 23:53:33.958" starttime="20191025 23:53:33.466"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_secret_access_key ${secret}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:53:33.962" level="INFO">Running command 'aws configure set aws_secret_access_key c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:53:34.451" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:53:34.452" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:53:34.452" starttime="20191025 23:53:33.960"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:53:34.454" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:53:34.454" starttime="20191025 23:53:34.453"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:53:34.455" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:53:34.456" starttime="20191025 23:53:34.454"></status>
</kw>
<status status="PASS" endtime="20191025 23:53:34.456" starttime="20191025 23:53:33.959"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set region us-west-1</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:53:34.461" level="INFO">Running command 'aws configure set region us-west-1 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:53:34.924" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:53:34.924" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:53:34.925" starttime="20191025 23:53:34.458"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:53:34.927" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:53:34.927" starttime="20191025 23:53:34.926"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:53:34.928" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:53:34.928" starttime="20191025 23:53:34.927"></status>
</kw>
<status status="PASS" endtime="20191025 23:53:34.929" starttime="20191025 23:53:34.457"></status>
</kw>
<status status="PASS" endtime="20191025 23:53:34.929" starttime="20191025 23:53:30.228"></status>
</kw>
<status status="PASS" endtime="20191025 23:53:34.929" starttime="20191025 23:53:30.227"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'false'</arg>
<arg>Setup dummy credentials for S3</arg>
</arguments>
<status status="PASS" endtime="20191025 23:53:34.931" starttime="20191025 23:53:34.930"></status>
</kw>
<status status="PASS" endtime="20191025 23:53:34.931" starttime="20191025 23:53:30.180"></status>
</kw>
<status status="PASS" endtime="20191025 23:53:34.931" starttime="20191025 23:53:30.179"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${BUCKET}' == 'generated'</arg>
<arg>Create bucket</arg>
</arguments>
<status status="PASS" endtime="20191025 23:53:34.932" starttime="20191025 23:53:34.932"></status>
</kw>
<status status="PASS" endtime="20191025 23:53:34.933" starttime="20191025 23:53:29.452"></status>
</kw>
<kw name="Execute AWSS3APICli" library="commonawslib">
<arguments>
<arg>get-object --bucket ${BUCKET} --key putobject/f1 --range bytes=0-10000 /tmp/testfile2.result</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws s3api --endpoint-url ${ENDPOINT_URL} ${command}</arg>
</arguments>
<assign>
<var>${output}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:53:34.938" level="INFO">Running command 'aws s3api --endpoint-url http://s3g:9878 get-object --bucket bucket-98588 --key putobject/f1 --range bytes=0-10000 /tmp/testfile2.result 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:53:41.052" level="INFO">${rc} = 255</msg>
<msg timestamp="20191025 23:53:41.052" level="INFO">${output} = 
An error occurred (500) when calling the GetObject operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:53:41.052" starttime="20191025 23:53:34.936"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:53:41.054" level="INFO">
An error occurred (500) when calling the GetObject operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:53:41.055" starttime="20191025 23:53:41.053"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:53:41.055" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191025 23:53:41.056" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191025 23:53:41.056" starttime="20191025 23:53:41.055"></status>
</kw>
<status status="FAIL" endtime="20191025 23:53:41.057" starttime="20191025 23:53:34.934"></status>
</kw>
<status status="FAIL" endtime="20191025 23:53:41.057" starttime="20191025 23:53:34.933"></status>
</kw>
<status status="FAIL" endtime="20191025 23:53:41.058" critical="yes" starttime="20191025 23:53:29.451">255 != 0</status>
</test>
<test id="s1-s9-t6" name="Get Partial object from s3 with only start offset">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:53:41.064" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:53:41.072" level="INFO">${rc} = 1</msg>
<msg timestamp="20191025 23:53:41.072" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191025 23:53:41.072" starttime="20191025 23:53:41.062"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191025 23:53:41.075" starttime="20191025 23:53:41.073"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:53:41.077" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:53:41.291" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:53:41.292" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.002'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191025 23:53:41.292" starttime="20191025 23:53:41.075"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:53:41.298" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:53:41.830" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:53:41.830" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirrors.xtom.com
 * epel: mirror.prgmr.com
 * extras: mirror.fileplanet.com
 * updates: mirrors.xtom.com
Package ...</msg>
<status status="PASS" endtime="20191025 23:53:41.831" starttime="20191025 23:53:41.296"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:53:41.833" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirrors.xtom.com
 * epel: mirror.prgmr.com
 * extras: mirror.fileplanet.com
 * updates: mirrors.xtom.com
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191025 23:53:41.833" starttime="20191025 23:53:41.832"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:53:41.834" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:53:41.834" starttime="20191025 23:53:41.833"></status>
</kw>
<status status="PASS" endtime="20191025 23:53:41.835" starttime="20191025 23:53:41.295"></status>
</kw>
<status status="PASS" endtime="20191025 23:53:41.835" starttime="20191025 23:53:41.294"></status>
</kw>
<status status="PASS" endtime="20191025 23:53:41.835" starttime="20191025 23:53:41.293"></status>
</kw>
<status status="PASS" endtime="20191025 23:53:41.836" starttime="20191025 23:53:41.061"></status>
</kw>
<status status="PASS" endtime="20191025 23:53:41.836" starttime="20191025 23:53:41.061"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:53:41.844" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:53:41.849" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:53:41.849" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191025 23:53:41.849" starttime="20191025 23:53:41.842"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:53:41.851" level="INFO">s3g</msg>
<status status="PASS" endtime="20191025 23:53:41.852" starttime="20191025 23:53:41.850"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:53:41.853" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:53:41.853" starttime="20191025 23:53:41.852"></status>
</kw>
<msg timestamp="20191025 23:53:41.853" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191025 23:53:41.854" starttime="20191025 23:53:41.840"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191025 23:53:41.855" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:53:41.855" starttime="20191025 23:53:41.854"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:53:41.860" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:53:41.892" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:53:41.892" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:53:41.892" starttime="20191025 23:53:41.858"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:53:41.894" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:53:41.894" starttime="20191025 23:53:41.893"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:53:41.895" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:53:41.896" starttime="20191025 23:53:41.895"></status>
</kw>
<status status="PASS" endtime="20191025 23:53:41.896" starttime="20191025 23:53:41.857"></status>
</kw>
<status status="PASS" endtime="20191025 23:53:41.897" starttime="20191025 23:53:41.856"></status>
</kw>
<status status="PASS" endtime="20191025 23:53:41.897" starttime="20191025 23:53:41.839"></status>
</kw>
<status status="PASS" endtime="20191025 23:53:41.897" starttime="20191025 23:53:41.838"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:53:41.903" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:53:44.630" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:53:44.631" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:53:44.631" starttime="20191025 23:53:41.900"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:53:44.633" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
awsAccessKey=testuser/s3g@EXAMPLE.COM
awsSecret=c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671</msg>
<status status="PASS" endtime="20191025 23:53:44.633" starttime="20191025 23:53:44.632"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:53:44.634" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:53:44.634" starttime="20191025 23:53:44.633"></status>
</kw>
<msg timestamp="20191025 23:53:44.635" level="INFO">${result} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:53:44.635" starttime="20191025 23:53:41.900"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsAccessKey=).*</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:53:44.636" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:53:44.636" starttime="20191025 23:53:44.635"></status>
</kw>
<kw name="Get Variable Value" library="BuiltIn">
<doc>Returns variable value or ``default`` if the variable does not exist.</doc>
<arguments>
<arg>${accessKey}</arg>
<arg>sdsdasaasdasd</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:53:44.638" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:53:44.638" starttime="20191025 23:53:44.637"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsSecret=).*</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:53:44.639" level="INFO">${secret} = [u'c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671']</msg>
<status status="PASS" endtime="20191025 23:53:44.639" starttime="20191025 23:53:44.638"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${accessKey[0]}</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:53:44.641" level="INFO">${accessKey} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:53:44.641" starttime="20191025 23:53:44.640"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${secret[0]}</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:53:44.642" level="INFO">${secret} = c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671</msg>
<status status="PASS" endtime="20191025 23:53:44.642" starttime="20191025 23:53:44.641"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set default.s3.signature_version s3v4</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:53:44.646" level="INFO">Running command 'aws configure set default.s3.signature_version s3v4 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:53:45.129" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:53:45.129" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:53:45.130" starttime="20191025 23:53:44.643"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:53:45.132" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:53:45.132" starttime="20191025 23:53:45.131"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:53:45.134" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:53:45.134" starttime="20191025 23:53:45.133"></status>
</kw>
<status status="PASS" endtime="20191025 23:53:45.135" starttime="20191025 23:53:44.642"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_access_key_id ${accessKey}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:53:45.140" level="INFO">Running command 'aws configure set aws_access_key_id testuser/s3g@EXAMPLE.COM 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:53:45.607" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:53:45.607" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:53:45.607" starttime="20191025 23:53:45.137"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:53:45.609" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:53:45.610" starttime="20191025 23:53:45.608"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:53:45.611" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:53:45.611" starttime="20191025 23:53:45.610"></status>
</kw>
<status status="PASS" endtime="20191025 23:53:45.612" starttime="20191025 23:53:45.135"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_secret_access_key ${secret}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:53:45.617" level="INFO">Running command 'aws configure set aws_secret_access_key c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:53:46.067" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:53:46.067" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:53:46.067" starttime="20191025 23:53:45.613"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:53:46.069" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:53:46.069" starttime="20191025 23:53:46.068"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:53:46.070" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:53:46.070" starttime="20191025 23:53:46.069"></status>
</kw>
<status status="PASS" endtime="20191025 23:53:46.071" starttime="20191025 23:53:45.612"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set region us-west-1</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:53:46.075" level="INFO">Running command 'aws configure set region us-west-1 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:53:46.548" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:53:46.549" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:53:46.549" starttime="20191025 23:53:46.072"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:53:46.551" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:53:46.551" starttime="20191025 23:53:46.550"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:53:46.552" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:53:46.552" starttime="20191025 23:53:46.551"></status>
</kw>
<status status="PASS" endtime="20191025 23:53:46.553" starttime="20191025 23:53:46.071"></status>
</kw>
<status status="PASS" endtime="20191025 23:53:46.553" starttime="20191025 23:53:41.899"></status>
</kw>
<status status="PASS" endtime="20191025 23:53:46.554" starttime="20191025 23:53:41.898"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'false'</arg>
<arg>Setup dummy credentials for S3</arg>
</arguments>
<status status="PASS" endtime="20191025 23:53:46.555" starttime="20191025 23:53:46.554"></status>
</kw>
<status status="PASS" endtime="20191025 23:53:46.555" starttime="20191025 23:53:41.838"></status>
</kw>
<status status="PASS" endtime="20191025 23:53:46.556" starttime="20191025 23:53:41.836"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${BUCKET}' == 'generated'</arg>
<arg>Create bucket</arg>
</arguments>
<status status="PASS" endtime="20191025 23:53:46.557" starttime="20191025 23:53:46.556"></status>
</kw>
<status status="PASS" endtime="20191025 23:53:46.557" starttime="20191025 23:53:41.060"></status>
</kw>
<kw name="Execute AWSS3APICli" library="commonawslib">
<arguments>
<arg>get-object --bucket ${BUCKET} --key putobject/f1 --range bytes=0- /tmp/testfile3.result</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws s3api --endpoint-url ${ENDPOINT_URL} ${command}</arg>
</arguments>
<assign>
<var>${output}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:53:46.563" level="INFO">Running command 'aws s3api --endpoint-url http://s3g:9878 get-object --bucket bucket-98588 --key putobject/f1 --range bytes=0- /tmp/testfile3.result 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:53:56.580" level="INFO">${rc} = 255</msg>
<msg timestamp="20191025 23:53:56.580" level="INFO">${output} = 
An error occurred (500) when calling the GetObject operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:53:56.580" starttime="20191025 23:53:46.560"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:53:56.582" level="INFO">
An error occurred (500) when calling the GetObject operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:53:56.582" starttime="20191025 23:53:56.581"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:53:56.583" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191025 23:53:56.584" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191025 23:53:56.584" starttime="20191025 23:53:56.582"></status>
</kw>
<status status="FAIL" endtime="20191025 23:53:56.585" starttime="20191025 23:53:46.559"></status>
</kw>
<status status="FAIL" endtime="20191025 23:53:56.585" starttime="20191025 23:53:46.558"></status>
</kw>
<status status="FAIL" endtime="20191025 23:53:56.586" critical="yes" starttime="20191025 23:53:41.059">255 != 0</status>
</test>
<test id="s1-s9-t7" name="Get Partial object from s3 with both start and endoffset which are equal">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:53:56.592" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:53:56.599" level="INFO">${rc} = 1</msg>
<msg timestamp="20191025 23:53:56.599" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191025 23:53:56.600" starttime="20191025 23:53:56.590"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191025 23:53:56.602" starttime="20191025 23:53:56.601"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:53:56.605" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:53:56.793" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:53:56.794" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.002'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191025 23:53:56.794" starttime="20191025 23:53:56.602"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:53:56.801" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:53:57.358" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:53:57.358" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirrors.xtom.com
 * epel: mirror.prgmr.com
 * extras: mirror.fileplanet.com
 * updates: mirrors.xtom.com
Package ...</msg>
<status status="PASS" endtime="20191025 23:53:57.358" starttime="20191025 23:53:56.798"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:53:57.360" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirrors.xtom.com
 * epel: mirror.prgmr.com
 * extras: mirror.fileplanet.com
 * updates: mirrors.xtom.com
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191025 23:53:57.360" starttime="20191025 23:53:57.359"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:53:57.361" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:53:57.362" starttime="20191025 23:53:57.361"></status>
</kw>
<status status="PASS" endtime="20191025 23:53:57.362" starttime="20191025 23:53:56.797"></status>
</kw>
<status status="PASS" endtime="20191025 23:53:57.363" starttime="20191025 23:53:56.796"></status>
</kw>
<status status="PASS" endtime="20191025 23:53:57.363" starttime="20191025 23:53:56.795"></status>
</kw>
<status status="PASS" endtime="20191025 23:53:57.363" starttime="20191025 23:53:56.589"></status>
</kw>
<status status="PASS" endtime="20191025 23:53:57.363" starttime="20191025 23:53:56.588"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:53:57.372" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:53:57.378" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:53:57.378" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191025 23:53:57.378" starttime="20191025 23:53:57.369"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:53:57.380" level="INFO">s3g</msg>
<status status="PASS" endtime="20191025 23:53:57.380" starttime="20191025 23:53:57.379"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:53:57.381" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:53:57.382" starttime="20191025 23:53:57.381"></status>
</kw>
<msg timestamp="20191025 23:53:57.382" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191025 23:53:57.382" starttime="20191025 23:53:57.368"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191025 23:53:57.384" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:53:57.384" starttime="20191025 23:53:57.383"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:53:57.389" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:53:57.406" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:53:57.406" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:53:57.406" starttime="20191025 23:53:57.387"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:53:57.408" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:53:57.408" starttime="20191025 23:53:57.407"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:53:57.409" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:53:57.409" starttime="20191025 23:53:57.408"></status>
</kw>
<status status="PASS" endtime="20191025 23:53:57.410" starttime="20191025 23:53:57.385"></status>
</kw>
<status status="PASS" endtime="20191025 23:53:57.410" starttime="20191025 23:53:57.384"></status>
</kw>
<status status="PASS" endtime="20191025 23:53:57.410" starttime="20191025 23:53:57.367"></status>
</kw>
<status status="PASS" endtime="20191025 23:53:57.410" starttime="20191025 23:53:57.366"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:53:57.415" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:54:00.144" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:54:00.144" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:54:00.144" starttime="20191025 23:53:57.413"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:54:00.146" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
awsAccessKey=testuser/s3g@EXAMPLE.COM
awsSecret=c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671</msg>
<status status="PASS" endtime="20191025 23:54:00.146" starttime="20191025 23:54:00.145"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:54:00.147" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:54:00.148" starttime="20191025 23:54:00.147"></status>
</kw>
<msg timestamp="20191025 23:54:00.148" level="INFO">${result} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:54:00.148" starttime="20191025 23:53:57.412"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsAccessKey=).*</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:54:00.150" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:54:00.150" starttime="20191025 23:54:00.149"></status>
</kw>
<kw name="Get Variable Value" library="BuiltIn">
<doc>Returns variable value or ``default`` if the variable does not exist.</doc>
<arguments>
<arg>${accessKey}</arg>
<arg>sdsdasaasdasd</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:54:00.151" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:54:00.151" starttime="20191025 23:54:00.150"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsSecret=).*</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:54:00.152" level="INFO">${secret} = [u'c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671']</msg>
<status status="PASS" endtime="20191025 23:54:00.152" starttime="20191025 23:54:00.151"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${accessKey[0]}</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:54:00.154" level="INFO">${accessKey} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:54:00.154" starttime="20191025 23:54:00.153"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${secret[0]}</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:54:00.155" level="INFO">${secret} = c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671</msg>
<status status="PASS" endtime="20191025 23:54:00.155" starttime="20191025 23:54:00.154"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set default.s3.signature_version s3v4</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:54:00.159" level="INFO">Running command 'aws configure set default.s3.signature_version s3v4 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:54:00.627" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:54:00.627" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:54:00.627" starttime="20191025 23:54:00.156"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:54:00.629" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:54:00.629" starttime="20191025 23:54:00.628"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:54:00.631" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:54:00.631" starttime="20191025 23:54:00.630"></status>
</kw>
<status status="PASS" endtime="20191025 23:54:00.632" starttime="20191025 23:54:00.155"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_access_key_id ${accessKey}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:54:00.636" level="INFO">Running command 'aws configure set aws_access_key_id testuser/s3g@EXAMPLE.COM 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:54:01.098" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:54:01.099" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:54:01.099" starttime="20191025 23:54:00.633"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:54:01.101" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:54:01.101" starttime="20191025 23:54:01.100"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:54:01.102" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:54:01.102" starttime="20191025 23:54:01.101"></status>
</kw>
<status status="PASS" endtime="20191025 23:54:01.103" starttime="20191025 23:54:00.632"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_secret_access_key ${secret}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:54:01.107" level="INFO">Running command 'aws configure set aws_secret_access_key c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:54:01.542" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:54:01.542" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:54:01.542" starttime="20191025 23:54:01.105"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:54:01.545" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:54:01.546" starttime="20191025 23:54:01.543"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:54:01.547" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:54:01.547" starttime="20191025 23:54:01.546"></status>
</kw>
<status status="PASS" endtime="20191025 23:54:01.548" starttime="20191025 23:54:01.103"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set region us-west-1</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:54:01.551" level="INFO">Running command 'aws configure set region us-west-1 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:54:02.038" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:54:02.038" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:54:02.038" starttime="20191025 23:54:01.549"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:54:02.040" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:54:02.040" starttime="20191025 23:54:02.039"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:54:02.042" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:54:02.042" starttime="20191025 23:54:02.041"></status>
</kw>
<status status="PASS" endtime="20191025 23:54:02.043" starttime="20191025 23:54:01.548"></status>
</kw>
<status status="PASS" endtime="20191025 23:54:02.043" starttime="20191025 23:53:57.411"></status>
</kw>
<status status="PASS" endtime="20191025 23:54:02.043" starttime="20191025 23:53:57.410"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'false'</arg>
<arg>Setup dummy credentials for S3</arg>
</arguments>
<status status="PASS" endtime="20191025 23:54:02.045" starttime="20191025 23:54:02.044"></status>
</kw>
<status status="PASS" endtime="20191025 23:54:02.045" starttime="20191025 23:53:57.365"></status>
</kw>
<status status="PASS" endtime="20191025 23:54:02.045" starttime="20191025 23:53:57.364"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${BUCKET}' == 'generated'</arg>
<arg>Create bucket</arg>
</arguments>
<status status="PASS" endtime="20191025 23:54:02.046" starttime="20191025 23:54:02.046"></status>
</kw>
<status status="PASS" endtime="20191025 23:54:02.047" starttime="20191025 23:53:56.588"></status>
</kw>
<kw name="Execute AWSS3APICli" library="commonawslib">
<arguments>
<arg>get-object --bucket ${BUCKET} --key putobject/f1 --range bytes=0-0 /tmp/testfile4.result</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws s3api --endpoint-url ${ENDPOINT_URL} ${command}</arg>
</arguments>
<assign>
<var>${output}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:54:02.052" level="INFO">Running command 'aws s3api --endpoint-url http://s3g:9878 get-object --bucket bucket-98588 --key putobject/f1 --range bytes=0-0 /tmp/testfile4.result 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:54:11.801" level="INFO">${rc} = 255</msg>
<msg timestamp="20191025 23:54:11.801" level="INFO">${output} = 
An error occurred (500) when calling the GetObject operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:54:11.801" starttime="20191025 23:54:02.050"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:54:11.803" level="INFO">
An error occurred (500) when calling the GetObject operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:54:11.803" starttime="20191025 23:54:11.802"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:54:11.805" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191025 23:54:11.805" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191025 23:54:11.806" starttime="20191025 23:54:11.804"></status>
</kw>
<status status="FAIL" endtime="20191025 23:54:11.806" starttime="20191025 23:54:02.048"></status>
</kw>
<status status="FAIL" endtime="20191025 23:54:11.806" starttime="20191025 23:54:02.047"></status>
</kw>
<status status="FAIL" endtime="20191025 23:54:11.807" critical="yes" starttime="20191025 23:53:56.586">255 != 0</status>
</test>
<test id="s1-s9-t8" name="Get Partial object from s3 to get last n bytes">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:54:11.815" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:54:11.821" level="INFO">${rc} = 1</msg>
<msg timestamp="20191025 23:54:11.821" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191025 23:54:11.821" starttime="20191025 23:54:11.812"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191025 23:54:11.823" starttime="20191025 23:54:11.822"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:54:11.826" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:54:12.036" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:54:12.036" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.002'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191025 23:54:12.036" starttime="20191025 23:54:11.824"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:54:12.042" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:54:12.592" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:54:12.592" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirrors.xtom.com
 * epel: mirror.prgmr.com
 * extras: mirror.fileplanet.com
 * updates: mirrors.xtom.com
Package ...</msg>
<status status="PASS" endtime="20191025 23:54:12.592" starttime="20191025 23:54:12.039"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:54:12.593" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirrors.xtom.com
 * epel: mirror.prgmr.com
 * extras: mirror.fileplanet.com
 * updates: mirrors.xtom.com
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191025 23:54:12.594" starttime="20191025 23:54:12.593"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:54:12.594" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:54:12.594" starttime="20191025 23:54:12.594"></status>
</kw>
<status status="PASS" endtime="20191025 23:54:12.595" starttime="20191025 23:54:12.039"></status>
</kw>
<status status="PASS" endtime="20191025 23:54:12.595" starttime="20191025 23:54:12.038"></status>
</kw>
<status status="PASS" endtime="20191025 23:54:12.595" starttime="20191025 23:54:12.037"></status>
</kw>
<status status="PASS" endtime="20191025 23:54:12.595" starttime="20191025 23:54:11.811"></status>
</kw>
<status status="PASS" endtime="20191025 23:54:12.596" starttime="20191025 23:54:11.811"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:54:12.601" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:54:12.608" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:54:12.608" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191025 23:54:12.608" starttime="20191025 23:54:12.599"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:54:12.611" level="INFO">s3g</msg>
<status status="PASS" endtime="20191025 23:54:12.611" starttime="20191025 23:54:12.609"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:54:12.612" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:54:12.613" starttime="20191025 23:54:12.612"></status>
</kw>
<msg timestamp="20191025 23:54:12.613" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191025 23:54:12.613" starttime="20191025 23:54:12.598"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191025 23:54:12.615" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:54:12.615" starttime="20191025 23:54:12.614"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:54:12.620" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:54:12.638" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:54:12.638" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:54:12.638" starttime="20191025 23:54:12.618"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:54:12.640" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:54:12.640" starttime="20191025 23:54:12.639"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:54:12.641" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:54:12.641" starttime="20191025 23:54:12.640"></status>
</kw>
<status status="PASS" endtime="20191025 23:54:12.642" starttime="20191025 23:54:12.617"></status>
</kw>
<status status="PASS" endtime="20191025 23:54:12.642" starttime="20191025 23:54:12.616"></status>
</kw>
<status status="PASS" endtime="20191025 23:54:12.642" starttime="20191025 23:54:12.598"></status>
</kw>
<status status="PASS" endtime="20191025 23:54:12.642" starttime="20191025 23:54:12.597"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:54:12.647" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:54:15.368" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:54:15.368" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:54:15.369" starttime="20191025 23:54:12.645"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:54:15.370" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
awsAccessKey=testuser/s3g@EXAMPLE.COM
awsSecret=c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671</msg>
<status status="PASS" endtime="20191025 23:54:15.371" starttime="20191025 23:54:15.369"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:54:15.372" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:54:15.372" starttime="20191025 23:54:15.371"></status>
</kw>
<msg timestamp="20191025 23:54:15.373" level="INFO">${result} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:54:15.373" starttime="20191025 23:54:12.644"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsAccessKey=).*</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:54:15.374" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:54:15.374" starttime="20191025 23:54:15.373"></status>
</kw>
<kw name="Get Variable Value" library="BuiltIn">
<doc>Returns variable value or ``default`` if the variable does not exist.</doc>
<arguments>
<arg>${accessKey}</arg>
<arg>sdsdasaasdasd</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:54:15.376" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:54:15.376" starttime="20191025 23:54:15.375"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsSecret=).*</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:54:15.377" level="INFO">${secret} = [u'c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671']</msg>
<status status="PASS" endtime="20191025 23:54:15.377" starttime="20191025 23:54:15.376"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${accessKey[0]}</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:54:15.378" level="INFO">${accessKey} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:54:15.378" starttime="20191025 23:54:15.377"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${secret[0]}</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:54:15.380" level="INFO">${secret} = c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671</msg>
<status status="PASS" endtime="20191025 23:54:15.380" starttime="20191025 23:54:15.379"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set default.s3.signature_version s3v4</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:54:15.384" level="INFO">Running command 'aws configure set default.s3.signature_version s3v4 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:54:15.863" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:54:15.863" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:54:15.864" starttime="20191025 23:54:15.381"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:54:15.866" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:54:15.866" starttime="20191025 23:54:15.865"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:54:15.867" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:54:15.867" starttime="20191025 23:54:15.866"></status>
</kw>
<status status="PASS" endtime="20191025 23:54:15.868" starttime="20191025 23:54:15.380"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_access_key_id ${accessKey}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:54:15.871" level="INFO">Running command 'aws configure set aws_access_key_id testuser/s3g@EXAMPLE.COM 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:54:16.336" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:54:16.336" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:54:16.336" starttime="20191025 23:54:15.869"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:54:16.338" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:54:16.339" starttime="20191025 23:54:16.337"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:54:16.340" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:54:16.340" starttime="20191025 23:54:16.339"></status>
</kw>
<status status="PASS" endtime="20191025 23:54:16.341" starttime="20191025 23:54:15.868"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_secret_access_key ${secret}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:54:16.345" level="INFO">Running command 'aws configure set aws_secret_access_key c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:54:16.818" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:54:16.819" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:54:16.819" starttime="20191025 23:54:16.342"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:54:16.821" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:54:16.821" starttime="20191025 23:54:16.820"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:54:16.823" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:54:16.824" starttime="20191025 23:54:16.821"></status>
</kw>
<status status="PASS" endtime="20191025 23:54:16.824" starttime="20191025 23:54:16.341"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set region us-west-1</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:54:16.828" level="INFO">Running command 'aws configure set region us-west-1 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:54:17.353" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:54:17.353" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:54:17.353" starttime="20191025 23:54:16.826"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:54:17.355" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:54:17.355" starttime="20191025 23:54:17.354"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:54:17.356" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:54:17.356" starttime="20191025 23:54:17.355"></status>
</kw>
<status status="PASS" endtime="20191025 23:54:17.357" starttime="20191025 23:54:16.825"></status>
</kw>
<status status="PASS" endtime="20191025 23:54:17.357" starttime="20191025 23:54:12.644"></status>
</kw>
<status status="PASS" endtime="20191025 23:54:17.357" starttime="20191025 23:54:12.643"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'false'</arg>
<arg>Setup dummy credentials for S3</arg>
</arguments>
<status status="PASS" endtime="20191025 23:54:17.358" starttime="20191025 23:54:17.357"></status>
</kw>
<status status="PASS" endtime="20191025 23:54:17.359" starttime="20191025 23:54:12.597"></status>
</kw>
<status status="PASS" endtime="20191025 23:54:17.359" starttime="20191025 23:54:12.596"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${BUCKET}' == 'generated'</arg>
<arg>Create bucket</arg>
</arguments>
<status status="PASS" endtime="20191025 23:54:17.360" starttime="20191025 23:54:17.359"></status>
</kw>
<status status="PASS" endtime="20191025 23:54:17.360" starttime="20191025 23:54:11.810"></status>
</kw>
<kw name="Execute AWSS3APICli" library="commonawslib">
<arguments>
<arg>get-object --bucket ${BUCKET} --key putobject/f1 --range bytes=-4 /tmp/testfile6.result</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws s3api --endpoint-url ${ENDPOINT_URL} ${command}</arg>
</arguments>
<assign>
<var>${output}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:54:17.365" level="INFO">Running command 'aws s3api --endpoint-url http://s3g:9878 get-object --bucket bucket-98588 --key putobject/f1 --range bytes=-4 /tmp/testfile6.result 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:54:24.880" level="INFO">${rc} = 255</msg>
<msg timestamp="20191025 23:54:24.880" level="INFO">${output} = 
An error occurred (500) when calling the GetObject operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:54:24.881" starttime="20191025 23:54:17.363"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:54:24.883" level="INFO">
An error occurred (500) when calling the GetObject operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:54:24.883" starttime="20191025 23:54:24.881"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:54:24.884" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191025 23:54:24.884" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191025 23:54:24.884" starttime="20191025 23:54:24.883"></status>
</kw>
<status status="FAIL" endtime="20191025 23:54:24.885" starttime="20191025 23:54:17.362"></status>
</kw>
<status status="FAIL" endtime="20191025 23:54:24.885" starttime="20191025 23:54:17.360"></status>
</kw>
<status status="FAIL" endtime="20191025 23:54:24.886" critical="yes" starttime="20191025 23:54:11.808">255 != 0</status>
</test>
<test id="s1-s9-t9" name="Incorrect values for end and start offset">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:54:24.892" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:54:24.899" level="INFO">${rc} = 1</msg>
<msg timestamp="20191025 23:54:24.899" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191025 23:54:24.899" starttime="20191025 23:54:24.889"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191025 23:54:24.901" starttime="20191025 23:54:24.900"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:54:24.904" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:54:25.092" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:54:25.092" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.002'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191025 23:54:25.092" starttime="20191025 23:54:24.902"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:54:25.102" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:54:25.588" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:54:25.589" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirrors.xtom.com
 * epel: mirror.prgmr.com
 * extras: mirror.fileplanet.com
 * updates: mirrors.xtom.com
Package ...</msg>
<status status="PASS" endtime="20191025 23:54:25.589" starttime="20191025 23:54:25.098"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:54:25.591" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirrors.xtom.com
 * epel: mirror.prgmr.com
 * extras: mirror.fileplanet.com
 * updates: mirrors.xtom.com
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191025 23:54:25.591" starttime="20191025 23:54:25.590"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:54:25.592" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:54:25.592" starttime="20191025 23:54:25.591"></status>
</kw>
<status status="PASS" endtime="20191025 23:54:25.593" starttime="20191025 23:54:25.097"></status>
</kw>
<status status="PASS" endtime="20191025 23:54:25.593" starttime="20191025 23:54:25.095"></status>
</kw>
<status status="PASS" endtime="20191025 23:54:25.593" starttime="20191025 23:54:25.093"></status>
</kw>
<status status="PASS" endtime="20191025 23:54:25.594" starttime="20191025 23:54:24.889"></status>
</kw>
<status status="PASS" endtime="20191025 23:54:25.594" starttime="20191025 23:54:24.888"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:54:25.601" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:54:25.608" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:54:25.608" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191025 23:54:25.608" starttime="20191025 23:54:25.599"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:54:25.610" level="INFO">s3g</msg>
<status status="PASS" endtime="20191025 23:54:25.610" starttime="20191025 23:54:25.608"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:54:25.611" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:54:25.611" starttime="20191025 23:54:25.611"></status>
</kw>
<msg timestamp="20191025 23:54:25.612" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191025 23:54:25.612" starttime="20191025 23:54:25.598"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191025 23:54:25.613" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:54:25.613" starttime="20191025 23:54:25.612"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:54:25.617" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:54:25.632" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:54:25.633" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:54:25.633" starttime="20191025 23:54:25.615"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:54:25.634" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:54:25.634" starttime="20191025 23:54:25.633"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:54:25.635" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:54:25.635" starttime="20191025 23:54:25.635"></status>
</kw>
<status status="PASS" endtime="20191025 23:54:25.636" starttime="20191025 23:54:25.615"></status>
</kw>
<status status="PASS" endtime="20191025 23:54:25.636" starttime="20191025 23:54:25.614"></status>
</kw>
<status status="PASS" endtime="20191025 23:54:25.636" starttime="20191025 23:54:25.597"></status>
</kw>
<status status="PASS" endtime="20191025 23:54:25.636" starttime="20191025 23:54:25.596"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:54:25.640" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:54:28.353" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:54:28.354" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:54:28.354" starttime="20191025 23:54:25.639"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:54:28.356" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
awsAccessKey=testuser/s3g@EXAMPLE.COM
awsSecret=c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671</msg>
<status status="PASS" endtime="20191025 23:54:28.356" starttime="20191025 23:54:28.355"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:54:28.357" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:54:28.358" starttime="20191025 23:54:28.357"></status>
</kw>
<msg timestamp="20191025 23:54:28.358" level="INFO">${result} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:54:28.359" starttime="20191025 23:54:25.638"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsAccessKey=).*</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:54:28.360" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:54:28.360" starttime="20191025 23:54:28.359"></status>
</kw>
<kw name="Get Variable Value" library="BuiltIn">
<doc>Returns variable value or ``default`` if the variable does not exist.</doc>
<arguments>
<arg>${accessKey}</arg>
<arg>sdsdasaasdasd</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:54:28.362" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:54:28.362" starttime="20191025 23:54:28.361"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsSecret=).*</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:54:28.363" level="INFO">${secret} = [u'c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671']</msg>
<status status="PASS" endtime="20191025 23:54:28.363" starttime="20191025 23:54:28.362"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${accessKey[0]}</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:54:28.364" level="INFO">${accessKey} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:54:28.365" starttime="20191025 23:54:28.364"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${secret[0]}</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:54:28.366" level="INFO">${secret} = c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671</msg>
<status status="PASS" endtime="20191025 23:54:28.366" starttime="20191025 23:54:28.365"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set default.s3.signature_version s3v4</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:54:28.370" level="INFO">Running command 'aws configure set default.s3.signature_version s3v4 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:54:28.884" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:54:28.884" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:54:28.884" starttime="20191025 23:54:28.367"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:54:28.886" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:54:28.886" starttime="20191025 23:54:28.885"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:54:28.887" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:54:28.888" starttime="20191025 23:54:28.887"></status>
</kw>
<status status="PASS" endtime="20191025 23:54:28.888" starttime="20191025 23:54:28.366"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_access_key_id ${accessKey}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:54:28.892" level="INFO">Running command 'aws configure set aws_access_key_id testuser/s3g@EXAMPLE.COM 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:54:29.398" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:54:29.398" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:54:29.398" starttime="20191025 23:54:28.890"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:54:29.400" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:54:29.400" starttime="20191025 23:54:29.399"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:54:29.402" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:54:29.402" starttime="20191025 23:54:29.401"></status>
</kw>
<status status="PASS" endtime="20191025 23:54:29.403" starttime="20191025 23:54:28.888"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_secret_access_key ${secret}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:54:29.407" level="INFO">Running command 'aws configure set aws_secret_access_key c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:54:29.900" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:54:29.901" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:54:29.901" starttime="20191025 23:54:29.404"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:54:29.903" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:54:29.903" starttime="20191025 23:54:29.902"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:54:29.905" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:54:29.905" starttime="20191025 23:54:29.903"></status>
</kw>
<status status="PASS" endtime="20191025 23:54:29.906" starttime="20191025 23:54:29.403"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set region us-west-1</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:54:29.909" level="INFO">Running command 'aws configure set region us-west-1 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:54:30.362" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:54:30.363" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:54:30.363" starttime="20191025 23:54:29.907"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:54:30.365" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:54:30.365" starttime="20191025 23:54:30.364"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:54:30.366" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:54:30.367" starttime="20191025 23:54:30.366"></status>
</kw>
<status status="PASS" endtime="20191025 23:54:30.367" starttime="20191025 23:54:29.906"></status>
</kw>
<status status="PASS" endtime="20191025 23:54:30.368" starttime="20191025 23:54:25.637"></status>
</kw>
<status status="PASS" endtime="20191025 23:54:30.368" starttime="20191025 23:54:25.637"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'false'</arg>
<arg>Setup dummy credentials for S3</arg>
</arguments>
<status status="PASS" endtime="20191025 23:54:30.369" starttime="20191025 23:54:30.368"></status>
</kw>
<status status="PASS" endtime="20191025 23:54:30.370" starttime="20191025 23:54:25.595"></status>
</kw>
<status status="PASS" endtime="20191025 23:54:30.370" starttime="20191025 23:54:25.594"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${BUCKET}' == 'generated'</arg>
<arg>Create bucket</arg>
</arguments>
<status status="PASS" endtime="20191025 23:54:30.371" starttime="20191025 23:54:30.370"></status>
</kw>
<status status="PASS" endtime="20191025 23:54:30.371" starttime="20191025 23:54:24.887"></status>
</kw>
<kw name="Execute AWSS3APICli" library="commonawslib">
<arguments>
<arg>get-object --bucket ${BUCKET} --key putobject/f1 --range bytes=-11-10000 /tmp/testfile8.result</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws s3api --endpoint-url ${ENDPOINT_URL} ${command}</arg>
</arguments>
<assign>
<var>${output}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:54:30.377" level="INFO">Running command 'aws s3api --endpoint-url http://s3g:9878 get-object --bucket bucket-98588 --key putobject/f1 --range bytes=-11-10000 /tmp/testfile8.result 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:54:35.410" level="INFO">${rc} = 255</msg>
<msg timestamp="20191025 23:54:35.410" level="INFO">${output} = 
An error occurred (500) when calling the GetObject operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:54:35.410" starttime="20191025 23:54:30.374"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:54:35.412" level="INFO">
An error occurred (500) when calling the GetObject operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:54:35.412" starttime="20191025 23:54:35.411"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:54:35.414" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191025 23:54:35.414" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191025 23:54:35.415" starttime="20191025 23:54:35.413"></status>
</kw>
<status status="FAIL" endtime="20191025 23:54:35.415" starttime="20191025 23:54:30.373"></status>
</kw>
<status status="FAIL" endtime="20191025 23:54:35.415" starttime="20191025 23:54:30.372"></status>
</kw>
<status status="FAIL" endtime="20191025 23:54:35.416" critical="yes" starttime="20191025 23:54:24.886">255 != 0</status>
</test>
<test id="s1-s9-t10" name="Zero byte file">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:54:35.423" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:54:35.430" level="INFO">${rc} = 1</msg>
<msg timestamp="20191025 23:54:35.430" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191025 23:54:35.430" starttime="20191025 23:54:35.420"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191025 23:54:35.432" starttime="20191025 23:54:35.431"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:54:35.435" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:54:35.630" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:54:35.630" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.002'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191025 23:54:35.630" starttime="20191025 23:54:35.433"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:54:35.637" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:54:36.134" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:54:36.134" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirrors.xtom.com
 * epel: mirror.prgmr.com
 * extras: mirror.fileplanet.com
 * updates: mirrors.xtom.com
Package ...</msg>
<status status="PASS" endtime="20191025 23:54:36.134" starttime="20191025 23:54:35.634"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:54:36.136" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirrors.xtom.com
 * epel: mirror.prgmr.com
 * extras: mirror.fileplanet.com
 * updates: mirrors.xtom.com
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191025 23:54:36.136" starttime="20191025 23:54:36.135"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:54:36.137" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:54:36.137" starttime="20191025 23:54:36.136"></status>
</kw>
<status status="PASS" endtime="20191025 23:54:36.138" starttime="20191025 23:54:35.633"></status>
</kw>
<status status="PASS" endtime="20191025 23:54:36.138" starttime="20191025 23:54:35.633"></status>
</kw>
<status status="PASS" endtime="20191025 23:54:36.138" starttime="20191025 23:54:35.631"></status>
</kw>
<status status="PASS" endtime="20191025 23:54:36.139" starttime="20191025 23:54:35.419"></status>
</kw>
<status status="PASS" endtime="20191025 23:54:36.139" starttime="20191025 23:54:35.419"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:54:36.146" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:54:36.152" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:54:36.152" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191025 23:54:36.152" starttime="20191025 23:54:36.144"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:54:36.155" level="INFO">s3g</msg>
<status status="PASS" endtime="20191025 23:54:36.155" starttime="20191025 23:54:36.153"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:54:36.156" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:54:36.157" starttime="20191025 23:54:36.156"></status>
</kw>
<msg timestamp="20191025 23:54:36.157" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191025 23:54:36.157" starttime="20191025 23:54:36.143"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191025 23:54:36.158" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:54:36.159" starttime="20191025 23:54:36.157"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:54:36.163" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:54:36.221" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:54:36.221" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:54:36.222" starttime="20191025 23:54:36.161"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:54:36.223" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:54:36.223" starttime="20191025 23:54:36.222"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:54:36.224" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:54:36.225" starttime="20191025 23:54:36.224"></status>
</kw>
<status status="PASS" endtime="20191025 23:54:36.225" starttime="20191025 23:54:36.160"></status>
</kw>
<status status="PASS" endtime="20191025 23:54:36.225" starttime="20191025 23:54:36.159"></status>
</kw>
<status status="PASS" endtime="20191025 23:54:36.226" starttime="20191025 23:54:36.142"></status>
</kw>
<status status="PASS" endtime="20191025 23:54:36.226" starttime="20191025 23:54:36.141"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:54:36.231" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:54:38.921" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:54:38.921" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:54:38.921" starttime="20191025 23:54:36.229"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:54:38.923" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
awsAccessKey=testuser/s3g@EXAMPLE.COM
awsSecret=c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671</msg>
<status status="PASS" endtime="20191025 23:54:38.923" starttime="20191025 23:54:38.922"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:54:38.924" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:54:38.924" starttime="20191025 23:54:38.923"></status>
</kw>
<msg timestamp="20191025 23:54:38.925" level="INFO">${result} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:54:38.925" starttime="20191025 23:54:36.228"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsAccessKey=).*</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:54:38.926" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:54:38.926" starttime="20191025 23:54:38.925"></status>
</kw>
<kw name="Get Variable Value" library="BuiltIn">
<doc>Returns variable value or ``default`` if the variable does not exist.</doc>
<arguments>
<arg>${accessKey}</arg>
<arg>sdsdasaasdasd</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:54:38.927" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:54:38.927" starttime="20191025 23:54:38.926"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsSecret=).*</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:54:38.928" level="INFO">${secret} = [u'c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671']</msg>
<status status="PASS" endtime="20191025 23:54:38.928" starttime="20191025 23:54:38.927"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${accessKey[0]}</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:54:38.929" level="INFO">${accessKey} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:54:38.929" starttime="20191025 23:54:38.928"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${secret[0]}</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:54:38.930" level="INFO">${secret} = c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671</msg>
<status status="PASS" endtime="20191025 23:54:38.931" starttime="20191025 23:54:38.930"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set default.s3.signature_version s3v4</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:54:38.934" level="INFO">Running command 'aws configure set default.s3.signature_version s3v4 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:54:39.384" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:54:39.385" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:54:39.385" starttime="20191025 23:54:38.932"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:54:39.387" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:54:39.387" starttime="20191025 23:54:39.386"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:54:39.388" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:54:39.388" starttime="20191025 23:54:39.387"></status>
</kw>
<status status="PASS" endtime="20191025 23:54:39.389" starttime="20191025 23:54:38.931"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_access_key_id ${accessKey}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:54:39.393" level="INFO">Running command 'aws configure set aws_access_key_id testuser/s3g@EXAMPLE.COM 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:54:39.872" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:54:39.872" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:54:39.872" starttime="20191025 23:54:39.391"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:54:39.873" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:54:39.874" starttime="20191025 23:54:39.873"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:54:39.874" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:54:39.874" starttime="20191025 23:54:39.874"></status>
</kw>
<status status="PASS" endtime="20191025 23:54:39.875" starttime="20191025 23:54:39.389"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_secret_access_key ${secret}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:54:39.877" level="INFO">Running command 'aws configure set aws_secret_access_key c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:54:40.323" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:54:40.323" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:54:40.323" starttime="20191025 23:54:39.876"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:54:40.324" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:54:40.325" starttime="20191025 23:54:40.324"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:54:40.326" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:54:40.326" starttime="20191025 23:54:40.325"></status>
</kw>
<status status="PASS" endtime="20191025 23:54:40.326" starttime="20191025 23:54:39.875"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set region us-west-1</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:54:40.329" level="INFO">Running command 'aws configure set region us-west-1 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:54:40.731" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:54:40.731" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:54:40.731" starttime="20191025 23:54:40.327"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:54:40.733" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:54:40.733" starttime="20191025 23:54:40.732"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:54:40.733" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:54:40.734" starttime="20191025 23:54:40.733"></status>
</kw>
<status status="PASS" endtime="20191025 23:54:40.734" starttime="20191025 23:54:40.327"></status>
</kw>
<status status="PASS" endtime="20191025 23:54:40.734" starttime="20191025 23:54:36.227"></status>
</kw>
<status status="PASS" endtime="20191025 23:54:40.734" starttime="20191025 23:54:36.226"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'false'</arg>
<arg>Setup dummy credentials for S3</arg>
</arguments>
<status status="PASS" endtime="20191025 23:54:40.735" starttime="20191025 23:54:40.735"></status>
</kw>
<status status="PASS" endtime="20191025 23:54:40.736" starttime="20191025 23:54:36.140"></status>
</kw>
<status status="PASS" endtime="20191025 23:54:40.736" starttime="20191025 23:54:36.139"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${BUCKET}' == 'generated'</arg>
<arg>Create bucket</arg>
</arguments>
<status status="PASS" endtime="20191025 23:54:40.736" starttime="20191025 23:54:40.736"></status>
</kw>
<status status="PASS" endtime="20191025 23:54:40.737" starttime="20191025 23:54:35.418"></status>
</kw>
<kw name="Execute AWSS3APICli and checkrc" library="commonawslib">
<arguments>
<arg>get-object --bucket ${BUCKET} --key putobject/zerobyte --range bytes=0-0 /tmp/testfile2.result</arg>
<arg>255</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Execute and checkrc" library="commonlib">
<arguments>
<arg>aws s3api --endpoint-url ${ENDPOINT_URL} ${command}</arg>
<arg>${expected_error_code}</arg>
</arguments>
<assign>
<var>${output}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:54:40.741" level="INFO">Running command 'aws s3api --endpoint-url http://s3g:9878 get-object --bucket bucket-98588 --key putobject/zerobyte --range bytes=0-0 /tmp/testfile2.result 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:54:46.528" level="INFO">${rc} = 255</msg>
<msg timestamp="20191025 23:54:46.528" level="INFO">${output} = 
An error occurred (500) when calling the GetObject operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:54:46.528" starttime="20191025 23:54:40.739"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:54:46.530" level="INFO">
An error occurred (500) when calling the GetObject operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:54:46.531" starttime="20191025 23:54:46.529"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
</arguments>
<msg timestamp="20191025 23:54:46.532" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:54:46.532" starttime="20191025 23:54:46.531"></status>
</kw>
<msg timestamp="20191025 23:54:46.533" level="INFO">${output} = 
An error occurred (500) when calling the GetObject operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:54:46.533" starttime="20191025 23:54:40.738"></status>
</kw>
<msg timestamp="20191025 23:54:46.533" level="INFO">${result} = 
An error occurred (500) when calling the GetObject operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:54:46.534" starttime="20191025 23:54:40.737"></status>
</kw>
<kw name="Should Contain" library="BuiltIn">
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<arguments>
<arg>${result}</arg>
<arg>InvalidRange</arg>
</arguments>
<msg timestamp="20191025 23:54:46.535" level="FAIL">'
An error occurred (500) when calling the GetObject operation (reached max retries: 4): Internal Server Error' does not contain 'InvalidRange'</msg>
<status status="FAIL" endtime="20191025 23:54:46.535" starttime="20191025 23:54:46.534"></status>
</kw>
<status status="FAIL" endtime="20191025 23:54:46.536" critical="yes" starttime="20191025 23:54:35.417">'
An error occurred (500) when calling the GetObject operation (reached max retries: 4): Internal Server Error' does not contain 'InvalidRange'</status>
</test>
<doc>S3 gateway test with aws cli</doc>
<status status="FAIL" endtime="20191025 23:54:46.540" starttime="20191025 23:52:24.307"></status>
</suite>
<suite source="/opt/hadoop/smoketest/s3/webui.robot" id="s1-s10" name="Webui">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:54:46.568" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:54:46.575" level="INFO">${rc} = 1</msg>
<msg timestamp="20191025 23:54:46.575" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191025 23:54:46.576" starttime="20191025 23:54:46.565"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191025 23:54:46.578" starttime="20191025 23:54:46.576"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:54:46.580" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:54:46.770" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:54:46.770" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.002'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191025 23:54:46.770" starttime="20191025 23:54:46.578"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:54:46.777" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:54:47.265" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:54:47.266" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirrors.xtom.com
 * epel: mirror.prgmr.com
 * extras: mirror.fileplanet.com
 * updates: mirrors.xtom.com
Package ...</msg>
<status status="PASS" endtime="20191025 23:54:47.266" starttime="20191025 23:54:46.774"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:54:47.268" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirrors.xtom.com
 * epel: mirror.prgmr.com
 * extras: mirror.fileplanet.com
 * updates: mirrors.xtom.com
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191025 23:54:47.268" starttime="20191025 23:54:47.267"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:54:47.269" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:54:47.269" starttime="20191025 23:54:47.268"></status>
</kw>
<status status="PASS" endtime="20191025 23:54:47.270" starttime="20191025 23:54:46.773"></status>
</kw>
<status status="PASS" endtime="20191025 23:54:47.270" starttime="20191025 23:54:46.773"></status>
</kw>
<status status="PASS" endtime="20191025 23:54:47.270" starttime="20191025 23:54:46.771"></status>
</kw>
<status status="PASS" endtime="20191025 23:54:47.271" starttime="20191025 23:54:46.565"></status>
</kw>
<status status="PASS" endtime="20191025 23:54:47.271" starttime="20191025 23:54:46.564"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:54:47.278" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:54:47.284" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:54:47.284" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191025 23:54:47.284" starttime="20191025 23:54:47.276"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:54:47.286" level="INFO">s3g</msg>
<status status="PASS" endtime="20191025 23:54:47.286" starttime="20191025 23:54:47.285"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:54:47.287" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:54:47.287" starttime="20191025 23:54:47.286"></status>
</kw>
<msg timestamp="20191025 23:54:47.288" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191025 23:54:47.288" starttime="20191025 23:54:47.275"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191025 23:54:47.291" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:54:47.291" starttime="20191025 23:54:47.288"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:54:47.295" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:54:47.326" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:54:47.326" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:54:47.326" starttime="20191025 23:54:47.293"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:54:47.328" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:54:47.328" starttime="20191025 23:54:47.327"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:54:47.329" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:54:47.329" starttime="20191025 23:54:47.328"></status>
</kw>
<status status="PASS" endtime="20191025 23:54:47.330" starttime="20191025 23:54:47.292"></status>
</kw>
<status status="PASS" endtime="20191025 23:54:47.330" starttime="20191025 23:54:47.292"></status>
</kw>
<status status="PASS" endtime="20191025 23:54:47.330" starttime="20191025 23:54:47.274"></status>
</kw>
<status status="PASS" endtime="20191025 23:54:47.331" starttime="20191025 23:54:47.273"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:54:47.336" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:54:50.038" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:54:50.038" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:54:50.038" starttime="20191025 23:54:47.334"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:54:50.040" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
awsAccessKey=testuser/s3g@EXAMPLE.COM
awsSecret=c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671</msg>
<status status="PASS" endtime="20191025 23:54:50.040" starttime="20191025 23:54:50.039"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:54:50.041" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:54:50.041" starttime="20191025 23:54:50.040"></status>
</kw>
<msg timestamp="20191025 23:54:50.041" level="INFO">${result} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:54:50.041" starttime="20191025 23:54:47.333"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsAccessKey=).*</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:54:50.043" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:54:50.043" starttime="20191025 23:54:50.041"></status>
</kw>
<kw name="Get Variable Value" library="BuiltIn">
<doc>Returns variable value or ``default`` if the variable does not exist.</doc>
<arguments>
<arg>${accessKey}</arg>
<arg>sdsdasaasdasd</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:54:50.044" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:54:50.044" starttime="20191025 23:54:50.043"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsSecret=).*</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:54:50.045" level="INFO">${secret} = [u'c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671']</msg>
<status status="PASS" endtime="20191025 23:54:50.045" starttime="20191025 23:54:50.044"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${accessKey[0]}</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:54:50.046" level="INFO">${accessKey} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:54:50.046" starttime="20191025 23:54:50.045"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${secret[0]}</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:54:50.046" level="INFO">${secret} = c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671</msg>
<status status="PASS" endtime="20191025 23:54:50.046" starttime="20191025 23:54:50.046"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set default.s3.signature_version s3v4</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:54:50.049" level="INFO">Running command 'aws configure set default.s3.signature_version s3v4 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:54:50.476" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:54:50.476" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:54:50.476" starttime="20191025 23:54:50.047"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:54:50.478" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:54:50.478" starttime="20191025 23:54:50.477"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:54:50.479" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:54:50.479" starttime="20191025 23:54:50.478"></status>
</kw>
<status status="PASS" endtime="20191025 23:54:50.480" starttime="20191025 23:54:50.047"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_access_key_id ${accessKey}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:54:50.484" level="INFO">Running command 'aws configure set aws_access_key_id testuser/s3g@EXAMPLE.COM 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:54:50.953" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:54:50.953" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:54:50.953" starttime="20191025 23:54:50.481"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:54:50.955" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:54:50.955" starttime="20191025 23:54:50.954"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:54:50.956" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:54:50.956" starttime="20191025 23:54:50.955"></status>
</kw>
<status status="PASS" endtime="20191025 23:54:50.957" starttime="20191025 23:54:50.480"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_secret_access_key ${secret}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:54:50.960" level="INFO">Running command 'aws configure set aws_secret_access_key c635f27f89f411c685eaf4a47f48a48b5088500fb2f15cafe018872d59c64671 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:54:51.469" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:54:51.469" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:54:51.469" starttime="20191025 23:54:50.958"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:54:51.471" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:54:51.471" starttime="20191025 23:54:51.470"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:54:51.472" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:54:51.472" starttime="20191025 23:54:51.471"></status>
</kw>
<status status="PASS" endtime="20191025 23:54:51.472" starttime="20191025 23:54:50.957"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set region us-west-1</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:54:51.476" level="INFO">Running command 'aws configure set region us-west-1 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:54:51.929" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:54:51.929" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:54:51.929" starttime="20191025 23:54:51.473"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:54:51.930" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:54:51.931" starttime="20191025 23:54:51.930"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:54:51.931" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:54:51.932" starttime="20191025 23:54:51.931"></status>
</kw>
<status status="PASS" endtime="20191025 23:54:51.932" starttime="20191025 23:54:51.473"></status>
</kw>
<status status="PASS" endtime="20191025 23:54:51.932" starttime="20191025 23:54:47.332"></status>
</kw>
<status status="PASS" endtime="20191025 23:54:51.933" starttime="20191025 23:54:47.331"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'false'</arg>
<arg>Setup dummy credentials for S3</arg>
</arguments>
<status status="PASS" endtime="20191025 23:54:51.934" starttime="20191025 23:54:51.933"></status>
</kw>
<status status="PASS" endtime="20191025 23:54:51.934" starttime="20191025 23:54:47.273"></status>
</kw>
<status status="PASS" endtime="20191025 23:54:51.934" starttime="20191025 23:54:47.271"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${BUCKET}' == 'generated'</arg>
<arg>Create bucket</arg>
</arguments>
<kw name="Create bucket" library="commonawslib">
<kw name="Generate Random String" library="String">
<doc>Generates a string with a desired ``length`` from the given ``chars``.</doc>
<arguments>
<arg>5</arg>
<arg>[NUMBERS]</arg>
</arguments>
<assign>
<var>${postfix}</var>
</assign>
<msg timestamp="20191025 23:54:51.936" level="INFO">${postfix} = 40126</msg>
<status status="PASS" endtime="20191025 23:54:51.936" starttime="20191025 23:54:51.935"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${BUCKET}</arg>
<arg>bucket-${postfix}</arg>
</arguments>
<msg timestamp="20191025 23:54:51.937" level="INFO">${BUCKET} = bucket-40126</msg>
<status status="PASS" endtime="20191025 23:54:51.937" starttime="20191025 23:54:51.936"></status>
</kw>
<kw name="Execute AWSS3APICli" library="commonawslib">
<arguments>
<arg>create-bucket --bucket ${BUCKET}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws s3api --endpoint-url ${ENDPOINT_URL} ${command}</arg>
</arguments>
<assign>
<var>${output}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:54:51.941" level="INFO">Running command 'aws s3api --endpoint-url http://s3g:9878 create-bucket --bucket bucket-40126 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:55:03.216" level="INFO">${rc} = 255</msg>
<msg timestamp="20191025 23:55:03.216" level="INFO">${output} = 
An error occurred (500) when calling the CreateBucket operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:55:03.216" starttime="20191025 23:54:51.939"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:55:03.218" level="INFO">
An error occurred (500) when calling the CreateBucket operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:55:03.218" starttime="20191025 23:55:03.217"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:55:03.219" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191025 23:55:03.221" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191025 23:55:03.221" starttime="20191025 23:55:03.218"></status>
</kw>
<status status="FAIL" endtime="20191025 23:55:03.221" starttime="20191025 23:54:51.938"></status>
</kw>
<status status="FAIL" endtime="20191025 23:55:03.222" starttime="20191025 23:54:51.937"></status>
</kw>
<status status="FAIL" endtime="20191025 23:55:03.222" starttime="20191025 23:54:51.935"></status>
</kw>
<status status="FAIL" endtime="20191025 23:55:03.222" starttime="20191025 23:54:51.934"></status>
</kw>
<status status="FAIL" endtime="20191025 23:55:03.223" starttime="20191025 23:54:46.564"></status>
</kw>
<test id="s1-s10-t1" name="S3 Gateway Web UI">
<status status="FAIL" endtime="20191025 23:55:03.224" critical="yes" starttime="20191025 23:55:03.223">Parent suite setup failed:
255 != 0</status>
</test>
<doc>S3 gateway web ui test</doc>
<status status="FAIL" endtime="20191025 23:55:03.225" starttime="20191025 23:54:46.549">Suite setup failed:
255 != 0</status>
</suite>
<status status="FAIL" endtime="20191025 23:55:03.236" starttime="20191025 23:46:23.126"></status>
</suite>
<statistics>
<total>
<stat fail="34" pass="3">Critical Tests</stat>
<stat fail="34" pass="3">All Tests</stat>
</total>
<tag>
</tag>
<suite>
<stat fail="34" id="s1" name="ozonesecure-s3" pass="3">ozonesecure-s3</stat>
<stat fail="1" id="s1-s1" name="Awss3" pass="0">ozonesecure-s3.Awss3</stat>
<stat fail="1" id="s1-s2" name="Bucketcreate" pass="0">ozonesecure-s3.Bucketcreate</stat>
<stat fail="1" id="s1-s3" name="Buckethead" pass="0">ozonesecure-s3.Buckethead</stat>
<stat fail="1" id="s1-s4" name="Bucketlist" pass="0">ozonesecure-s3.Bucketlist</stat>
<stat fail="11" id="s1-s5" name="MultipartUpload" pass="1">ozonesecure-s3.MultipartUpload</stat>
<stat fail="3" id="s1-s6" name="Objectcopy" pass="1">ozonesecure-s3.Objectcopy</stat>
<stat fail="4" id="s1-s7" name="Objectdelete" pass="1">ozonesecure-s3.Objectdelete</stat>
<stat fail="1" id="s1-s8" name="Objectmultidelete" pass="0">ozonesecure-s3.Objectmultidelete</stat>
<stat fail="10" id="s1-s9" name="Objectputget" pass="0">ozonesecure-s3.Objectputget</stat>
<stat fail="1" id="s1-s10" name="Webui" pass="0">ozonesecure-s3.Webui</stat>
</suite>
</statistics>
<errors>
</errors>
</robot>
