<?xml version="1.0" encoding="UTF-8"?>
<robot rpa="false" generated="20191112 11:42:42.750" generator="Robot 3.1.2 (Python 2.7.5 on linux2)">
<suite source="/opt/hadoop/smoketest/s3" id="s1" name="ozonesecure-s3">
<suite source="/opt/hadoop/smoketest/s3/awss3.robot" id="s1-s1" name="Awss3">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:42:42.821" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:42:42.829" level="INFO">${rc} = 1</msg>
<msg timestamp="20191112 11:42:42.829" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191112 11:42:42.829" starttime="20191112 11:42:42.820"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191112 11:42:42.831" starttime="20191112 11:42:42.830"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:42:42.834" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:42:43.006" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:42:43.007" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191112 11:42:43.007" starttime="20191112 11:42:42.832"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:42:43.013" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:43:13.982" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:43:13.982" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Determining fastest mirrors
 * base: mirror.fileplanet.com
 * epel: mirrors.sonic.net
 * extras: mirror.keystealth.org
 * updates: mirrors.xtom.com
Resolving Depende...</msg>
<status status="PASS" endtime="20191112 11:43:13.983" starttime="20191112 11:42:43.011"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:43:13.985" level="INFO">Loaded plugins: fastestmirror, ovl
Determining fastest mirrors
 * base: mirror.fileplanet.com
 * epel: mirrors.sonic.net
 * extras: mirror.keystealth.org
 * updates: mirrors.xtom.com
Resolving Dependencies
--&gt; Running transaction check
---&gt; Package awscli.noarch 0:1.14.28-5.el7_5.1 will be installed
--&gt; Processing Dependency: python-s3transfer &gt;= 0.1.9 for package: awscli-1.14.28-5.el7_5.1.noarch
--&gt; Processing Dependency: python-docutils &gt;= 0.10 for package: awscli-1.14.28-5.el7_5.1.noarch
--&gt; Processing Dependency: python-cryptography &gt;= 1.7.2 for package: awscli-1.14.28-5.el7_5.1.noarch
--&gt; Processing Dependency: PyYAML &gt;= 3.10 for package: awscli-1.14.28-5.el7_5.1.noarch
--&gt; Running transaction check
---&gt; Package PyYAML.x86_64 0:3.10-11.el7 will be installed
--&gt; Processing Dependency: libyaml-0.so.2()(64bit) for package: PyYAML-3.10-11.el7.x86_64
---&gt; Package python-docutils.noarch 0:0.11-0.3.20130715svn7687.el7 will be installed
--&gt; Processing Dependency: python-imaging for package: python-docutils-0.11-0.3.20130715svn7687.el7.noarch
---&gt; Package python-s3transfer.noarch 0:0.1.13-1.el7.0.1 will be installed
--&gt; Processing Dependency: python-dateutil &gt;= 1.4 for package: python-s3transfer-0.1.13-1.el7.0.1.noarch
---&gt; Package python2-cryptography.x86_64 0:1.7.2-2.el7 will be installed
--&gt; Processing Dependency: python-six &gt;= 1.4.1 for package: python2-cryptography-1.7.2-2.el7.x86_64
--&gt; Processing Dependency: python-pyasn1 &gt;= 0.1.8 for package: python2-cryptography-1.7.2-2.el7.x86_64
--&gt; Processing Dependency: python-idna &gt;= 2.0 for package: python2-cryptography-1.7.2-2.el7.x86_64
--&gt; Processing Dependency: python-cffi &gt;= 1.4.1 for package: python2-cryptography-1.7.2-2.el7.x86_64
--&gt; Processing Dependency: python-enum34 for package: python2-cryptography-1.7.2-2.el7.x86_64
--&gt; Processing Dependency: openssl for package: python2-cryptography-1.7.2-2.el7.x86_64
--&gt; Running transaction check
---&gt; Package libyaml.x86_64 0:0.1.4-11.el7_0 will be installed
---&gt; Package openssl.x86_64 1:1.0.2k-19.el7 will be installed
--&gt; Processing Dependency: openssl-libs(x86-64) = 1:1.0.2k-19.el7 for package: 1:openssl-1.0.2k-19.el7.x86_64
--&gt; Processing Dependency: make for package: 1:openssl-1.0.2k-19.el7.x86_64
---&gt; Package python-cffi.x86_64 0:1.6.0-5.el7 will be installed
--&gt; Processing Dependency: python-pycparser for package: python-cffi-1.6.0-5.el7.x86_64
---&gt; Package python-dateutil.noarch 0:1.5-7.el7 will be installed
---&gt; Package python-enum34.noarch 0:1.0.4-1.el7 will be installed
---&gt; Package python-idna.noarch 0:2.4-1.el7 will be installed
---&gt; Package python-pillow.x86_64 0:2.0.0-19.gitd1c6db8.el7 will be installed
--&gt; Processing Dependency: libtiff.so.5(LIBTIFF_4.0)(64bit) for package: python-pillow-2.0.0-19.gitd1c6db8.el7.x86_64
--&gt; Processing Dependency: libwebp.so.4()(64bit) for package: python-pillow-2.0.0-19.gitd1c6db8.el7.x86_64
--&gt; Processing Dependency: libtiff.so.5()(64bit) for package: python-pillow-2.0.0-19.gitd1c6db8.el7.x86_64
---&gt; Package python-six.noarch 0:1.9.0-2.el7 will be installed
---&gt; Package python2-pyasn1.noarch 0:0.1.9-7.el7 will be installed
--&gt; Running transaction check
---&gt; Package libtiff.x86_64 0:4.0.3-32.el7 will be installed
--&gt; Processing Dependency: libjbig.so.2.0()(64bit) for package: libtiff-4.0.3-32.el7.x86_64
---&gt; Package libwebp.x86_64 0:0.3.0-7.el7 will be installed
---&gt; Package make.x86_64 1:3.82-24.el7 will be installed
---&gt; Package openssl-libs.x86_64 1:1.0.2k-16.el7 will be updated
---&gt; Package openssl-libs.x86_64 1:1.0.2k-19.el7 will be an update
---&gt; Package python-pycparser.noarch 0:2.14-1.el7 will be installed
--&gt; Processing Dependency: python-ply for package: python-pycparser-2.14-1.el7.noarch
--&gt; Running transaction check
---&gt; Package jbigkit-libs.x86_64 0:2.0-11.el7 will be installed
---&gt; Package python-ply.noarch 0:3.4-11.el7 will be installed
--&gt; Finished Dependency Resolution

Dependencies Resolved

================================================================================
 Package                Arch     Version                           Repository
                                                                           Size
================================================================================
Installing:
 awscli                 noarch   1.14.28-5.el7_5.1                 base   1.0 M
Installing for dependencies:
 PyYAML                 x86_64   3.10-11.el7                       base   153 k
 jbigkit-libs           x86_64   2.0-11.el7                        base    46 k
 libtiff                x86_64   4.0.3-32.el7                      base   171 k
 libwebp                x86_64   0.3.0-7.el7                       base   170 k
 libyaml                x86_64   0.1.4-11.el7_0                    base    55 k
 make                   x86_64   1:3.82-24.el7                     base   421 k
 openssl                x86_64   1:1.0.2k-19.el7                   base   493 k
 python-cffi            x86_64   1.6.0-5.el7                       base   218 k
 python-dateutil        noarch   1.5-7.el7                         base    85 k
 python-docutils        noarch   0.11-0.3.20130715svn7687.el7      base   1.5 M
 python-enum34          noarch   1.0.4-1.el7                       base    52 k
 python-idna            noarch   2.4-1.el7                         base    94 k
 python-pillow          x86_64   2.0.0-19.gitd1c6db8.el7           base   438 k
 python-ply             noarch   3.4-11.el7                        base   123 k
 python-pycparser       noarch   2.14-1.el7                        base   104 k
 python-s3transfer      noarch   0.1.13-1.el7.0.1                  base   2.9 M
 python-six             noarch   1.9.0-2.el7                       base    29 k
 python2-cryptography   x86_64   1.7.2-2.el7                       base   502 k
 python2-pyasn1         noarch   0.1.9-7.el7                       base   100 k
Updating for dependencies:
 openssl-libs           x86_64   1:1.0.2k-19.el7                   base   1.2 M

Transaction Summary
================================================================================
Install  1 Package  (+19 Dependent packages)
Upgrade             (  1 Dependent package)

Total download size: 9.9 M
Downloading packages:
Delta RPMs disabled because /usr/bin/applydeltarpm not installed.
--------------------------------------------------------------------------------
Total                                               33 MB/s | 9.9 MB  00:00     
Running transaction check
Running transaction test
Transaction test succeeded
Running transaction
  Updating   : 1:openssl-libs-1.0.2k-19.el7.x86_64                         1/22 
  Installing : python2-pyasn1-0.1.9-7.el7.noarch                           2/22 
  Installing : libyaml-0.1.4-11.el7_0.x86_64                               3/22 
  Installing : PyYAML-3.10-11.el7.x86_64                                   4/22 
  Installing : jbigkit-libs-2.0-11.el7.x86_64                              5/22 
  Installing : libtiff-4.0.3-32.el7.x86_64                                 6/22 
  Installing : python-ply-3.4-11.el7.noarch                                7/22 
  Installing : python-pycparser-2.14-1.el7.noarch                          8/22 
  Installing : python-cffi-1.6.0-5.el7.x86_64                              9/22 
  Installing : python-idna-2.4-1.el7.noarch                               10/22 
  Installing : python-six-1.9.0-2.el7.noarch                              11/22 
  Installing : 1:make-3.82-24.el7.x86_64                                  12/22 
  Installing : 1:openssl-1.0.2k-19.el7.x86_64                             13/22 
  Installing : python-dateutil-1.5-7.el7.noarch                           14/22 
  Installing : python-enum34-1.0.4-1.el7.noarch                           15/22 
  Installing : python2-cryptography-1.7.2-2.el7.x86_64                    16/22 
  Installing : libwebp-0.3.0-7.el7.x86_64                                 17/22 
  Installing : python-pillow-2.0.0-19.gitd1c6db8.el7.x86_64               18/22 
  Installing : python-docutils-0.11-0.3.20130715svn7687.el7.noarch        19/22 
  Installing : python-s3transfer-0.1.13-1.el7.0.1.noarch                  20/22 
  Installing : awscli-1.14.28-5.el7_5.1.noarch                            21/22 
  Cleanup    : 1:openssl-libs-1.0.2k-16.el7.x86_64                        22/22 
  Verifying  : libwebp-0.3.0-7.el7.x86_64                                  1/22 
  Verifying  : python-enum34-1.0.4-1.el7.noarch                            2/22 
  Verifying  : python-docutils-0.11-0.3.20130715svn7687.el7.noarch         3/22 
  Verifying  : 1:openssl-libs-1.0.2k-19.el7.x86_64                         4/22 
  Verifying  : python-dateutil-1.5-7.el7.noarch                            5/22 
  Verifying  : 1:make-3.82-24.el7.x86_64                                   6/22 
  Verifying  : python-six-1.9.0-2.el7.noarch                               7/22 
  Verifying  : python-s3transfer-0.1.13-1.el7.0.1.noarch                   8/22 
  Verifying  : python-idna-2.4-1.el7.noarch                                9/22 
  Verifying  : python-ply-3.4-11.el7.noarch                               10/22 
  Verifying  : 1:openssl-1.0.2k-19.el7.x86_64                             11/22 
  Verifying  : python-cffi-1.6.0-5.el7.x86_64                             12/22 
  Verifying  : awscli-1.14.28-5.el7_5.1.noarch                            13/22 
  Verifying  : python-pillow-2.0.0-19.gitd1c6db8.el7.x86_64               14/22 
  Verifying  : jbigkit-libs-2.0-11.el7.x86_64                             15/22 
  Verifying  : python-pycparser-2.14-1.el7.noarch                         16/22 
  Verifying  : libyaml-0.1.4-11.el7_0.x86_64                              17/22 
  Verifying  : libtiff-4.0.3-32.el7.x86_64                                18/22 
  Verifying  : python2-pyasn1-0.1.9-7.el7.noarch                          19/22 
  Verifying  : PyYAML-3.10-11.el7.x86_64                                  20/22 
  Verifying  : python2-cryptography-1.7.2-2.el7.x86_64                    21/22 
  Verifying  : 1:openssl-libs-1.0.2k-16.el7.x86_64                        22/22 

Installed:
  awscli.noarch 0:1.14.28-5.el7_5.1                                             

Dependency Installed:
  PyYAML.x86_64 0:3.10-11.el7                                                   
  jbigkit-libs.x86_64 0:2.0-11.el7                                              
  libtiff.x86_64 0:4.0.3-32.el7                                                 
  libwebp.x86_64 0:0.3.0-7.el7                                                  
  libyaml.x86_64 0:0.1.4-11.el7_0                                               
  make.x86_64 1:3.82-24.el7                                                     
  openssl.x86_64 1:1.0.2k-19.el7                                                
  python-cffi.x86_64 0:1.6.0-5.el7                                              
  python-dateutil.noarch 0:1.5-7.el7                                            
  python-docutils.noarch 0:0.11-0.3.20130715svn7687.el7                         
  python-enum34.noarch 0:1.0.4-1.el7                                            
  python-idna.noarch 0:2.4-1.el7                                                
  python-pillow.x86_64 0:2.0.0-19.gitd1c6db8.el7                                
  python-ply.noarch 0:3.4-11.el7                                                
  python-pycparser.noarch 0:2.14-1.el7                                          
  python-s3transfer.noarch 0:0.1.13-1.el7.0.1                                   
  python-six.noarch 0:1.9.0-2.el7                                               
  python2-cryptography.x86_64 0:1.7.2-2.el7                                     
  python2-pyasn1.noarch 0:0.1.9-7.el7                                           

Dependency Updated:
  openssl-libs.x86_64 1:1.0.2k-19.el7                                           

Complete!</msg>
<status status="PASS" endtime="20191112 11:43:13.986" starttime="20191112 11:43:13.983"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:43:13.987" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191112 11:43:13.987" starttime="20191112 11:43:13.986"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:13.988" starttime="20191112 11:42:43.010"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:13.988" starttime="20191112 11:42:43.009"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:13.988" starttime="20191112 11:42:43.008"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:13.988" starttime="20191112 11:42:42.819"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:13.988" starttime="20191112 11:42:42.819"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:43:13.995" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:43:14.002" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:43:14.003" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191112 11:43:14.003" starttime="20191112 11:43:13.993"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:43:14.005" level="INFO">s3g</msg>
<status status="PASS" endtime="20191112 11:43:14.005" starttime="20191112 11:43:14.004"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:43:14.006" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191112 11:43:14.006" starttime="20191112 11:43:14.005"></status>
</kw>
<msg timestamp="20191112 11:43:14.007" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191112 11:43:14.007" starttime="20191112 11:43:13.992"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191112 11:43:14.010" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191112 11:43:14.010" starttime="20191112 11:43:14.007"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:43:14.015" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:43:14.046" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:43:14.046" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191112 11:43:14.046" starttime="20191112 11:43:14.013"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:43:14.048" level="INFO"></msg>
<status status="PASS" endtime="20191112 11:43:14.048" starttime="20191112 11:43:14.047"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:43:14.049" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191112 11:43:14.049" starttime="20191112 11:43:14.048"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:14.050" starttime="20191112 11:43:14.011"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:14.050" starttime="20191112 11:43:14.010"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:14.050" starttime="20191112 11:43:13.991"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:14.050" starttime="20191112 11:43:13.991"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:43:14.056" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:43:16.013" level="INFO">${rc} = 255</msg>
<msg timestamp="20191112 11:43:16.013" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191112 11:43:16.013" starttime="20191112 11:43:14.053"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:43:16.014" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
2019-11-12 11:43:15,968 ERROR client.OzoneClientFactory: Couldn't create RpcClient protocol exception: 
INTERNAL_ERROR org.apache.hadoop.ozone.om.exceptions.OMException: DestHost:destPort scm:9860 , LocalHost:localPort om/172.18.0.7:0. Failed on local exception: java.io.IOException: javax.security.sasl.SaslException: GSS initiate failed [Caused by GSSException: No valid credentials provided (Mechanism level: Failed to find any Kerberos tgt)]
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.handleError(OzoneManagerProtocolClientSideTranslatorPB.java:758)
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.getServiceInfo(OzoneManagerProtocolClientSideTranslatorPB.java:1249)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.hadoop.hdds.tracing.TraceAllMethod.invoke(TraceAllMethod.java:66)
	at com.sun.proxy.$Proxy20.getServiceInfo(Unknown Source)
	at org.apache.hadoop.ozone.client.rpc.RpcClient.&lt;init&gt;(RpcClient.java:156)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:256)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:239)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getRpcClient(OzoneClientFactory.java:203)
	at org.apache.hadoop.ozone.web.ozShell.OzoneAddress.createClient(OzoneAddress.java:117)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:45)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:32)
	at picocli.CommandLine.execute(CommandLine.java:1173)
	at picocli.CommandLine.access$800(CommandLine.java:141)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1367)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1335)
	at picocli.CommandLine$AbstractParseResultHandler.handleParseResult(CommandLine.java:1243)
	at picocli.CommandLine.parseWithHandlers(CommandLine.java:1526)
	at picocli.CommandLine.parseWithHandler(CommandLine.java:1465)
	at org.apache.hadoop.hdds.cli.GenericCli.execute(GenericCli.java:65)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.execute(S3Shell.java:43)
	at org.apache.hadoop.hdds.cli.GenericCli.run(GenericCli.java:56)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.main(S3Shell.java:54)
Couldn't create RpcClient protocol</msg>
<status status="PASS" endtime="20191112 11:43:16.014" starttime="20191112 11:43:16.013"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:43:16.015" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191112 11:43:16.015" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191112 11:43:16.016" starttime="20191112 11:43:16.015"></status>
</kw>
<status status="FAIL" endtime="20191112 11:43:16.016" starttime="20191112 11:43:14.053"></status>
</kw>
<status status="FAIL" endtime="20191112 11:43:16.016" starttime="20191112 11:43:14.052"></status>
</kw>
<status status="FAIL" endtime="20191112 11:43:16.016" starttime="20191112 11:43:14.051"></status>
</kw>
<status status="FAIL" endtime="20191112 11:43:16.016" starttime="20191112 11:43:13.990"></status>
</kw>
<status status="FAIL" endtime="20191112 11:43:16.016" starttime="20191112 11:43:13.989"></status>
</kw>
<status status="FAIL" endtime="20191112 11:43:16.017" starttime="20191112 11:42:42.819"></status>
</kw>
<test id="s1-s1-t1" name="File upload and directory list">
<status status="FAIL" endtime="20191112 11:43:16.018" critical="yes" starttime="20191112 11:43:16.017">Parent suite setup failed:
255 != 0</status>
</test>
<doc>S3 gateway test with aws cli</doc>
<status status="FAIL" endtime="20191112 11:43:16.018" starttime="20191112 11:42:42.811">Suite setup failed:
255 != 0</status>
</suite>
<suite source="/opt/hadoop/smoketest/s3/bucketcreate.robot" id="s1-s2" name="Bucketcreate">
<test id="s1-s2-t1" name="Create bucket which already exists">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:43:16.031" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:43:16.036" level="INFO">${rc} = 1</msg>
<msg timestamp="20191112 11:43:16.036" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191112 11:43:16.036" starttime="20191112 11:43:16.029"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191112 11:43:16.038" starttime="20191112 11:43:16.037"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:43:16.039" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:43:16.209" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:43:16.209" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191112 11:43:16.209" starttime="20191112 11:43:16.038"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:43:16.216" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:43:16.676" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:43:16.677" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.fileplanet.com
 * epel: mirrors.sonic.net
 * extras: mirror.keystealth.org
 * updates: mirrors.xtom.com
Pa...</msg>
<status status="PASS" endtime="20191112 11:43:16.677" starttime="20191112 11:43:16.213"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:43:16.679" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.fileplanet.com
 * epel: mirrors.sonic.net
 * extras: mirror.keystealth.org
 * updates: mirrors.xtom.com
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191112 11:43:16.679" starttime="20191112 11:43:16.678"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:43:16.680" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191112 11:43:16.680" starttime="20191112 11:43:16.680"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:16.681" starttime="20191112 11:43:16.212"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:16.681" starttime="20191112 11:43:16.211"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:16.682" starttime="20191112 11:43:16.210"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:16.682" starttime="20191112 11:43:16.028"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:16.682" starttime="20191112 11:43:16.028"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:43:16.689" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:43:16.696" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:43:16.696" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191112 11:43:16.696" starttime="20191112 11:43:16.687"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:43:16.697" level="INFO">s3g</msg>
<status status="PASS" endtime="20191112 11:43:16.697" starttime="20191112 11:43:16.696"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:43:16.698" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191112 11:43:16.698" starttime="20191112 11:43:16.697"></status>
</kw>
<msg timestamp="20191112 11:43:16.698" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191112 11:43:16.699" starttime="20191112 11:43:16.686"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191112 11:43:16.701" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191112 11:43:16.701" starttime="20191112 11:43:16.699"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:43:16.704" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:43:16.720" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:43:16.721" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191112 11:43:16.721" starttime="20191112 11:43:16.702"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:43:16.722" level="INFO"></msg>
<status status="PASS" endtime="20191112 11:43:16.722" starttime="20191112 11:43:16.721"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:43:16.722" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191112 11:43:16.723" starttime="20191112 11:43:16.722"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:16.723" starttime="20191112 11:43:16.702"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:16.723" starttime="20191112 11:43:16.701"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:16.723" starttime="20191112 11:43:16.685"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:16.723" starttime="20191112 11:43:16.684"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:43:16.727" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:43:19.097" level="INFO">${rc} = 255</msg>
<msg timestamp="20191112 11:43:19.097" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191112 11:43:19.097" starttime="20191112 11:43:16.725"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:43:19.100" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
2019-11-12 11:43:18,707 ERROR client.OzoneClientFactory: Couldn't create RpcClient protocol exception: 
INTERNAL_ERROR org.apache.hadoop.ozone.om.exceptions.OMException: DestHost:destPort scm:9860 , LocalHost:localPort om/172.18.0.7:0. Failed on local exception: java.io.IOException: javax.security.sasl.SaslException: GSS initiate failed [Caused by GSSException: No valid credentials provided (Mechanism level: Failed to find any Kerberos tgt)]
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.handleError(OzoneManagerProtocolClientSideTranslatorPB.java:758)
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.getServiceInfo(OzoneManagerProtocolClientSideTranslatorPB.java:1249)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.hadoop.hdds.tracing.TraceAllMethod.invoke(TraceAllMethod.java:66)
	at com.sun.proxy.$Proxy20.getServiceInfo(Unknown Source)
	at org.apache.hadoop.ozone.client.rpc.RpcClient.&lt;init&gt;(RpcClient.java:156)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:256)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:239)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getRpcClient(OzoneClientFactory.java:203)
	at org.apache.hadoop.ozone.web.ozShell.OzoneAddress.createClient(OzoneAddress.java:117)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:45)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:32)
	at picocli.CommandLine.execute(CommandLine.java:1173)
	at picocli.CommandLine.access$800(CommandLine.java:141)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1367)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1335)
	at picocli.CommandLine$AbstractParseResultHandler.handleParseResult(CommandLine.java:1243)
	at picocli.CommandLine.parseWithHandlers(CommandLine.java:1526)
	at picocli.CommandLine.parseWithHandler(CommandLine.java:1465)
	at org.apache.hadoop.hdds.cli.GenericCli.execute(GenericCli.java:65)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.execute(S3Shell.java:43)
	at org.apache.hadoop.hdds.cli.GenericCli.run(GenericCli.java:56)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.main(S3Shell.java:54)
Couldn't create RpcClient protocol</msg>
<status status="PASS" endtime="20191112 11:43:19.100" starttime="20191112 11:43:19.098"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:43:19.109" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191112 11:43:19.110" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191112 11:43:19.110" starttime="20191112 11:43:19.100"></status>
</kw>
<status status="FAIL" endtime="20191112 11:43:19.111" starttime="20191112 11:43:16.725"></status>
</kw>
<status status="FAIL" endtime="20191112 11:43:19.111" starttime="20191112 11:43:16.724"></status>
</kw>
<status status="FAIL" endtime="20191112 11:43:19.111" starttime="20191112 11:43:16.724"></status>
</kw>
<status status="FAIL" endtime="20191112 11:43:19.112" starttime="20191112 11:43:16.683"></status>
</kw>
<status status="FAIL" endtime="20191112 11:43:19.112" starttime="20191112 11:43:16.682"></status>
</kw>
<status status="FAIL" endtime="20191112 11:43:19.112" starttime="20191112 11:43:16.027"></status>
</kw>
<status status="FAIL" endtime="20191112 11:43:19.113" critical="yes" starttime="20191112 11:43:16.027">Setup failed:
255 != 0</status>
</test>
<doc>S3 gateway test with aws cli</doc>
<status status="FAIL" endtime="20191112 11:43:19.114" starttime="20191112 11:43:16.019"></status>
</suite>
<suite source="/opt/hadoop/smoketest/s3/buckethead.robot" id="s1-s3" name="Buckethead">
<test id="s1-s3-t1" name="Head Bucket not existent">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:43:19.136" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:43:19.143" level="INFO">${rc} = 1</msg>
<msg timestamp="20191112 11:43:19.143" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191112 11:43:19.144" starttime="20191112 11:43:19.134"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191112 11:43:19.146" starttime="20191112 11:43:19.144"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:43:19.148" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:43:19.328" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:43:19.328" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191112 11:43:19.328" starttime="20191112 11:43:19.146"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:43:19.333" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:43:19.826" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:43:19.826" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.fileplanet.com
 * epel: mirrors.sonic.net
 * extras: mirror.keystealth.org
 * updates: mirrors.xtom.com
Pa...</msg>
<status status="PASS" endtime="20191112 11:43:19.826" starttime="20191112 11:43:19.331"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:43:19.828" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.fileplanet.com
 * epel: mirrors.sonic.net
 * extras: mirror.keystealth.org
 * updates: mirrors.xtom.com
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191112 11:43:19.829" starttime="20191112 11:43:19.827"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:43:19.830" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191112 11:43:19.830" starttime="20191112 11:43:19.829"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:19.830" starttime="20191112 11:43:19.330"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:19.831" starttime="20191112 11:43:19.330"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:19.831" starttime="20191112 11:43:19.329"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:19.831" starttime="20191112 11:43:19.133"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:19.831" starttime="20191112 11:43:19.132"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:43:19.839" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:43:19.845" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:43:19.846" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191112 11:43:19.846" starttime="20191112 11:43:19.836"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:43:19.847" level="INFO">s3g</msg>
<status status="PASS" endtime="20191112 11:43:19.848" starttime="20191112 11:43:19.846"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:43:19.848" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191112 11:43:19.849" starttime="20191112 11:43:19.848"></status>
</kw>
<msg timestamp="20191112 11:43:19.849" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191112 11:43:19.850" starttime="20191112 11:43:19.835"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191112 11:43:19.853" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191112 11:43:19.853" starttime="20191112 11:43:19.850"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:43:19.858" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:43:19.874" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:43:19.874" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191112 11:43:19.874" starttime="20191112 11:43:19.855"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:43:19.875" level="INFO"></msg>
<status status="PASS" endtime="20191112 11:43:19.876" starttime="20191112 11:43:19.875"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:43:19.876" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191112 11:43:19.877" starttime="20191112 11:43:19.876"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:19.877" starttime="20191112 11:43:19.854"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:19.877" starttime="20191112 11:43:19.853"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:19.877" starttime="20191112 11:43:19.835"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:19.877" starttime="20191112 11:43:19.834"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:43:19.881" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:43:21.788" level="INFO">${rc} = 255</msg>
<msg timestamp="20191112 11:43:21.788" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191112 11:43:21.788" starttime="20191112 11:43:19.880"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:43:21.790" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
2019-11-12 11:43:21,740 ERROR client.OzoneClientFactory: Couldn't create RpcClient protocol exception: 
INTERNAL_ERROR org.apache.hadoop.ozone.om.exceptions.OMException: DestHost:destPort scm:9860 , LocalHost:localPort om/172.18.0.7:0. Failed on local exception: java.io.IOException: javax.security.sasl.SaslException: GSS initiate failed [Caused by GSSException: No valid credentials provided (Mechanism level: Failed to find any Kerberos tgt)]
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.handleError(OzoneManagerProtocolClientSideTranslatorPB.java:758)
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.getServiceInfo(OzoneManagerProtocolClientSideTranslatorPB.java:1249)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.hadoop.hdds.tracing.TraceAllMethod.invoke(TraceAllMethod.java:66)
	at com.sun.proxy.$Proxy20.getServiceInfo(Unknown Source)
	at org.apache.hadoop.ozone.client.rpc.RpcClient.&lt;init&gt;(RpcClient.java:156)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:256)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:239)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getRpcClient(OzoneClientFactory.java:203)
	at org.apache.hadoop.ozone.web.ozShell.OzoneAddress.createClient(OzoneAddress.java:117)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:45)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:32)
	at picocli.CommandLine.execute(CommandLine.java:1173)
	at picocli.CommandLine.access$800(CommandLine.java:141)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1367)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1335)
	at picocli.CommandLine$AbstractParseResultHandler.handleParseResult(CommandLine.java:1243)
	at picocli.CommandLine.parseWithHandlers(CommandLine.java:1526)
	at picocli.CommandLine.parseWithHandler(CommandLine.java:1465)
	at org.apache.hadoop.hdds.cli.GenericCli.execute(GenericCli.java:65)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.execute(S3Shell.java:43)
	at org.apache.hadoop.hdds.cli.GenericCli.run(GenericCli.java:56)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.main(S3Shell.java:54)
Couldn't create RpcClient protocol</msg>
<status status="PASS" endtime="20191112 11:43:21.791" starttime="20191112 11:43:21.789"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:43:21.791" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191112 11:43:21.792" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191112 11:43:21.792" starttime="20191112 11:43:21.791"></status>
</kw>
<status status="FAIL" endtime="20191112 11:43:21.792" starttime="20191112 11:43:19.879"></status>
</kw>
<status status="FAIL" endtime="20191112 11:43:21.793" starttime="20191112 11:43:19.878"></status>
</kw>
<status status="FAIL" endtime="20191112 11:43:21.793" starttime="20191112 11:43:19.878"></status>
</kw>
<status status="FAIL" endtime="20191112 11:43:21.793" starttime="20191112 11:43:19.833"></status>
</kw>
<status status="FAIL" endtime="20191112 11:43:21.793" starttime="20191112 11:43:19.832"></status>
</kw>
<status status="FAIL" endtime="20191112 11:43:21.794" starttime="20191112 11:43:19.131"></status>
</kw>
<status status="FAIL" endtime="20191112 11:43:21.794" critical="yes" starttime="20191112 11:43:19.130">Setup failed:
255 != 0</status>
</test>
<doc>S3 gateway test with aws cli</doc>
<status status="FAIL" endtime="20191112 11:43:21.795" starttime="20191112 11:43:19.117"></status>
</suite>
<suite source="/opt/hadoop/smoketest/s3/bucketlist.robot" id="s1-s4" name="Bucketlist">
<test id="s1-s4-t1" name="List buckets">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:43:21.811" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:43:21.818" level="INFO">${rc} = 1</msg>
<msg timestamp="20191112 11:43:21.818" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191112 11:43:21.818" starttime="20191112 11:43:21.809"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191112 11:43:21.820" starttime="20191112 11:43:21.819"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:43:21.822" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:43:22.012" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:43:22.012" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191112 11:43:22.012" starttime="20191112 11:43:21.820"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:43:22.018" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:43:22.528" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:43:22.529" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.fileplanet.com
 * epel: mirrors.sonic.net
 * extras: mirror.keystealth.org
 * updates: mirrors.xtom.com
Pa...</msg>
<status status="PASS" endtime="20191112 11:43:22.529" starttime="20191112 11:43:22.016"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:43:22.530" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.fileplanet.com
 * epel: mirrors.sonic.net
 * extras: mirror.keystealth.org
 * updates: mirrors.xtom.com
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191112 11:43:22.530" starttime="20191112 11:43:22.529"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:43:22.531" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191112 11:43:22.531" starttime="20191112 11:43:22.530"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:22.531" starttime="20191112 11:43:22.015"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:22.531" starttime="20191112 11:43:22.014"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:22.531" starttime="20191112 11:43:22.013"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:22.531" starttime="20191112 11:43:21.808"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:22.532" starttime="20191112 11:43:21.808"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:43:22.536" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:43:22.543" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:43:22.543" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191112 11:43:22.543" starttime="20191112 11:43:22.534"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:43:22.544" level="INFO">s3g</msg>
<status status="PASS" endtime="20191112 11:43:22.544" starttime="20191112 11:43:22.544"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:43:22.545" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191112 11:43:22.545" starttime="20191112 11:43:22.545"></status>
</kw>
<msg timestamp="20191112 11:43:22.545" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191112 11:43:22.546" starttime="20191112 11:43:22.534"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191112 11:43:22.547" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191112 11:43:22.548" starttime="20191112 11:43:22.546"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:43:22.551" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:43:22.567" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:43:22.567" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191112 11:43:22.567" starttime="20191112 11:43:22.549"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:43:22.568" level="INFO"></msg>
<status status="PASS" endtime="20191112 11:43:22.568" starttime="20191112 11:43:22.567"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:43:22.569" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191112 11:43:22.569" starttime="20191112 11:43:22.568"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:22.569" starttime="20191112 11:43:22.548"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:22.569" starttime="20191112 11:43:22.548"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:22.569" starttime="20191112 11:43:22.533"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:22.570" starttime="20191112 11:43:22.533"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:43:22.573" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:43:24.476" level="INFO">${rc} = 255</msg>
<msg timestamp="20191112 11:43:24.476" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191112 11:43:24.476" starttime="20191112 11:43:22.571"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:43:24.478" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
2019-11-12 11:43:24,431 ERROR client.OzoneClientFactory: Couldn't create RpcClient protocol exception: 
INTERNAL_ERROR org.apache.hadoop.ozone.om.exceptions.OMException: DestHost:destPort scm:9860 , LocalHost:localPort om/172.18.0.7:0. Failed on local exception: java.io.IOException: javax.security.sasl.SaslException: GSS initiate failed [Caused by GSSException: No valid credentials provided (Mechanism level: Failed to find any Kerberos tgt)]
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.handleError(OzoneManagerProtocolClientSideTranslatorPB.java:758)
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.getServiceInfo(OzoneManagerProtocolClientSideTranslatorPB.java:1249)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.hadoop.hdds.tracing.TraceAllMethod.invoke(TraceAllMethod.java:66)
	at com.sun.proxy.$Proxy20.getServiceInfo(Unknown Source)
	at org.apache.hadoop.ozone.client.rpc.RpcClient.&lt;init&gt;(RpcClient.java:156)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:256)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:239)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getRpcClient(OzoneClientFactory.java:203)
	at org.apache.hadoop.ozone.web.ozShell.OzoneAddress.createClient(OzoneAddress.java:117)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:45)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:32)
	at picocli.CommandLine.execute(CommandLine.java:1173)
	at picocli.CommandLine.access$800(CommandLine.java:141)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1367)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1335)
	at picocli.CommandLine$AbstractParseResultHandler.handleParseResult(CommandLine.java:1243)
	at picocli.CommandLine.parseWithHandlers(CommandLine.java:1526)
	at picocli.CommandLine.parseWithHandler(CommandLine.java:1465)
	at org.apache.hadoop.hdds.cli.GenericCli.execute(GenericCli.java:65)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.execute(S3Shell.java:43)
	at org.apache.hadoop.hdds.cli.GenericCli.run(GenericCli.java:56)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.main(S3Shell.java:54)
Couldn't create RpcClient protocol</msg>
<status status="PASS" endtime="20191112 11:43:24.478" starttime="20191112 11:43:24.477"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:43:24.478" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191112 11:43:24.479" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191112 11:43:24.479" starttime="20191112 11:43:24.478"></status>
</kw>
<status status="FAIL" endtime="20191112 11:43:24.479" starttime="20191112 11:43:22.571"></status>
</kw>
<status status="FAIL" endtime="20191112 11:43:24.479" starttime="20191112 11:43:22.570"></status>
</kw>
<status status="FAIL" endtime="20191112 11:43:24.479" starttime="20191112 11:43:22.570"></status>
</kw>
<status status="FAIL" endtime="20191112 11:43:24.480" starttime="20191112 11:43:22.532"></status>
</kw>
<status status="FAIL" endtime="20191112 11:43:24.480" starttime="20191112 11:43:22.532"></status>
</kw>
<status status="FAIL" endtime="20191112 11:43:24.480" starttime="20191112 11:43:21.807"></status>
</kw>
<status status="FAIL" endtime="20191112 11:43:24.480" critical="yes" starttime="20191112 11:43:21.806">Setup failed:
255 != 0</status>
</test>
<doc>S3 gateway test with aws cli</doc>
<status status="FAIL" endtime="20191112 11:43:24.481" starttime="20191112 11:43:21.797"></status>
</suite>
<suite source="/opt/hadoop/smoketest/s3/MultipartUpload.robot" id="s1-s5" name="MultipartUpload">
<test id="s1-s5-t1" name="Test Multipart Upload">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:43:24.492" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:43:24.497" level="INFO">${rc} = 1</msg>
<msg timestamp="20191112 11:43:24.497" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191112 11:43:24.497" starttime="20191112 11:43:24.491"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191112 11:43:24.498" starttime="20191112 11:43:24.497"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:43:24.500" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:43:24.662" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:43:24.662" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191112 11:43:24.662" starttime="20191112 11:43:24.498"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:43:24.668" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:43:25.083" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:43:25.084" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.fileplanet.com
 * epel: mirrors.sonic.net
 * extras: mirror.keystealth.org
 * updates: mirrors.xtom.com
Pa...</msg>
<status status="PASS" endtime="20191112 11:43:25.084" starttime="20191112 11:43:24.666"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:43:25.086" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.fileplanet.com
 * epel: mirrors.sonic.net
 * extras: mirror.keystealth.org
 * updates: mirrors.xtom.com
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191112 11:43:25.087" starttime="20191112 11:43:25.085"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:43:25.088" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191112 11:43:25.088" starttime="20191112 11:43:25.087"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:25.089" starttime="20191112 11:43:24.665"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:25.089" starttime="20191112 11:43:24.664"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:25.089" starttime="20191112 11:43:24.663"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:25.090" starttime="20191112 11:43:24.490"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:25.090" starttime="20191112 11:43:24.490"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:43:25.099" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:43:25.106" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:43:25.107" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191112 11:43:25.107" starttime="20191112 11:43:25.096"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:43:25.108" level="INFO">s3g</msg>
<status status="PASS" endtime="20191112 11:43:25.109" starttime="20191112 11:43:25.108"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:43:25.110" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191112 11:43:25.110" starttime="20191112 11:43:25.109"></status>
</kw>
<msg timestamp="20191112 11:43:25.110" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191112 11:43:25.111" starttime="20191112 11:43:25.095"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191112 11:43:25.113" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191112 11:43:25.113" starttime="20191112 11:43:25.111"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:43:25.118" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:43:26.344" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:43:26.344" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191112 11:43:26.345" starttime="20191112 11:43:25.116"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:43:26.346" level="INFO"></msg>
<status status="PASS" endtime="20191112 11:43:26.347" starttime="20191112 11:43:26.345"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:43:26.348" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191112 11:43:26.348" starttime="20191112 11:43:26.347"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:26.348" starttime="20191112 11:43:25.115"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:26.349" starttime="20191112 11:43:25.114"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:26.349" starttime="20191112 11:43:25.094"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:26.349" starttime="20191112 11:43:25.093"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:43:26.354" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:43:28.351" level="INFO">${rc} = 255</msg>
<msg timestamp="20191112 11:43:28.352" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191112 11:43:28.352" starttime="20191112 11:43:26.352"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:43:28.355" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
2019-11-12 11:43:28,299 ERROR client.OzoneClientFactory: Couldn't create RpcClient protocol exception: 
INTERNAL_ERROR org.apache.hadoop.ozone.om.exceptions.OMException: DestHost:destPort scm:9860 , LocalHost:localPort om/172.18.0.7:0. Failed on local exception: java.io.IOException: javax.security.sasl.SaslException: GSS initiate failed [Caused by GSSException: No valid credentials provided (Mechanism level: Failed to find any Kerberos tgt)]
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.handleError(OzoneManagerProtocolClientSideTranslatorPB.java:758)
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.getServiceInfo(OzoneManagerProtocolClientSideTranslatorPB.java:1249)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.hadoop.hdds.tracing.TraceAllMethod.invoke(TraceAllMethod.java:66)
	at com.sun.proxy.$Proxy20.getServiceInfo(Unknown Source)
	at org.apache.hadoop.ozone.client.rpc.RpcClient.&lt;init&gt;(RpcClient.java:156)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:256)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:239)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getRpcClient(OzoneClientFactory.java:203)
	at org.apache.hadoop.ozone.web.ozShell.OzoneAddress.createClient(OzoneAddress.java:117)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:45)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:32)
	at picocli.CommandLine.execute(CommandLine.java:1173)
	at picocli.CommandLine.access$800(CommandLine.java:141)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1367)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1335)
	at picocli.CommandLine$AbstractParseResultHandler.handleParseResult(CommandLine.java:1243)
	at picocli.CommandLine.parseWithHandlers(CommandLine.java:1526)
	at picocli.CommandLine.parseWithHandler(CommandLine.java:1465)
	at org.apache.hadoop.hdds.cli.GenericCli.execute(GenericCli.java:65)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.execute(S3Shell.java:43)
	at org.apache.hadoop.hdds.cli.GenericCli.run(GenericCli.java:56)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.main(S3Shell.java:54)
Couldn't create RpcClient protocol</msg>
<status status="PASS" endtime="20191112 11:43:28.355" starttime="20191112 11:43:28.352"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:43:28.356" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191112 11:43:28.356" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191112 11:43:28.356" starttime="20191112 11:43:28.355"></status>
</kw>
<status status="FAIL" endtime="20191112 11:43:28.357" starttime="20191112 11:43:26.351"></status>
</kw>
<status status="FAIL" endtime="20191112 11:43:28.357" starttime="20191112 11:43:26.350"></status>
</kw>
<status status="FAIL" endtime="20191112 11:43:28.357" starttime="20191112 11:43:26.349"></status>
</kw>
<status status="FAIL" endtime="20191112 11:43:28.357" starttime="20191112 11:43:25.092"></status>
</kw>
<status status="FAIL" endtime="20191112 11:43:28.357" starttime="20191112 11:43:25.090"></status>
</kw>
<status status="FAIL" endtime="20191112 11:43:28.358" starttime="20191112 11:43:24.490"></status>
</kw>
<status status="FAIL" endtime="20191112 11:43:28.358" critical="yes" starttime="20191112 11:43:24.489">Setup failed:
255 != 0</status>
</test>
<test id="s1-s5-t2" name="Test Multipart Upload Complete">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:43:28.362" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:43:28.369" level="INFO">${rc} = 1</msg>
<msg timestamp="20191112 11:43:28.369" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191112 11:43:28.370" starttime="20191112 11:43:28.360"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191112 11:43:28.372" starttime="20191112 11:43:28.370"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:43:28.374" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:43:28.577" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:43:28.577" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191112 11:43:28.577" starttime="20191112 11:43:28.372"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:43:28.584" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:43:29.143" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:43:29.144" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.fileplanet.com
 * epel: mirrors.sonic.net
 * extras: mirror.keystealth.org
 * updates: mirrors.xtom.com
Pa...</msg>
<status status="PASS" endtime="20191112 11:43:29.144" starttime="20191112 11:43:28.581"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:43:29.146" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.fileplanet.com
 * epel: mirrors.sonic.net
 * extras: mirror.keystealth.org
 * updates: mirrors.xtom.com
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191112 11:43:29.146" starttime="20191112 11:43:29.145"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:43:29.147" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191112 11:43:29.147" starttime="20191112 11:43:29.146"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:29.148" starttime="20191112 11:43:28.580"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:29.148" starttime="20191112 11:43:28.580"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:29.148" starttime="20191112 11:43:28.578"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:29.148" starttime="20191112 11:43:28.360"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:29.149" starttime="20191112 11:43:28.360"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:43:29.156" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:43:29.162" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:43:29.162" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191112 11:43:29.162" starttime="20191112 11:43:29.154"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:43:29.164" level="INFO">s3g</msg>
<status status="PASS" endtime="20191112 11:43:29.164" starttime="20191112 11:43:29.163"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:43:29.165" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191112 11:43:29.165" starttime="20191112 11:43:29.164"></status>
</kw>
<msg timestamp="20191112 11:43:29.166" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191112 11:43:29.166" starttime="20191112 11:43:29.153"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191112 11:43:29.167" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191112 11:43:29.168" starttime="20191112 11:43:29.166"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:43:29.172" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:43:29.206" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:43:29.207" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191112 11:43:29.207" starttime="20191112 11:43:29.170"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:43:29.208" level="INFO"></msg>
<status status="PASS" endtime="20191112 11:43:29.208" starttime="20191112 11:43:29.207"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:43:29.209" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191112 11:43:29.209" starttime="20191112 11:43:29.208"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:29.210" starttime="20191112 11:43:29.169"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:29.210" starttime="20191112 11:43:29.168"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:29.210" starttime="20191112 11:43:29.152"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:29.210" starttime="20191112 11:43:29.151"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:43:29.215" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:43:31.240" level="INFO">${rc} = 255</msg>
<msg timestamp="20191112 11:43:31.240" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191112 11:43:31.240" starttime="20191112 11:43:29.213"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:43:31.241" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
2019-11-12 11:43:31,200 ERROR client.OzoneClientFactory: Couldn't create RpcClient protocol exception: 
INTERNAL_ERROR org.apache.hadoop.ozone.om.exceptions.OMException: DestHost:destPort scm:9860 , LocalHost:localPort om/172.18.0.7:0. Failed on local exception: java.io.IOException: javax.security.sasl.SaslException: GSS initiate failed [Caused by GSSException: No valid credentials provided (Mechanism level: Failed to find any Kerberos tgt)]
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.handleError(OzoneManagerProtocolClientSideTranslatorPB.java:758)
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.getServiceInfo(OzoneManagerProtocolClientSideTranslatorPB.java:1249)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.hadoop.hdds.tracing.TraceAllMethod.invoke(TraceAllMethod.java:66)
	at com.sun.proxy.$Proxy20.getServiceInfo(Unknown Source)
	at org.apache.hadoop.ozone.client.rpc.RpcClient.&lt;init&gt;(RpcClient.java:156)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:256)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:239)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getRpcClient(OzoneClientFactory.java:203)
	at org.apache.hadoop.ozone.web.ozShell.OzoneAddress.createClient(OzoneAddress.java:117)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:45)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:32)
	at picocli.CommandLine.execute(CommandLine.java:1173)
	at picocli.CommandLine.access$800(CommandLine.java:141)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1367)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1335)
	at picocli.CommandLine$AbstractParseResultHandler.handleParseResult(CommandLine.java:1243)
	at picocli.CommandLine.parseWithHandlers(CommandLine.java:1526)
	at picocli.CommandLine.parseWithHandler(CommandLine.java:1465)
	at org.apache.hadoop.hdds.cli.GenericCli.execute(GenericCli.java:65)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.execute(S3Shell.java:43)
	at org.apache.hadoop.hdds.cli.GenericCli.run(GenericCli.java:56)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.main(S3Shell.java:54)
Couldn't create RpcClient protocol</msg>
<status status="PASS" endtime="20191112 11:43:31.242" starttime="20191112 11:43:31.241"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:43:31.242" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191112 11:43:31.243" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191112 11:43:31.243" starttime="20191112 11:43:31.242"></status>
</kw>
<status status="FAIL" endtime="20191112 11:43:31.243" starttime="20191112 11:43:29.212"></status>
</kw>
<status status="FAIL" endtime="20191112 11:43:31.243" starttime="20191112 11:43:29.211"></status>
</kw>
<status status="FAIL" endtime="20191112 11:43:31.243" starttime="20191112 11:43:29.210"></status>
</kw>
<status status="FAIL" endtime="20191112 11:43:31.244" starttime="20191112 11:43:29.150"></status>
</kw>
<status status="FAIL" endtime="20191112 11:43:31.244" starttime="20191112 11:43:29.149"></status>
</kw>
<status status="FAIL" endtime="20191112 11:43:31.244" starttime="20191112 11:43:28.359"></status>
</kw>
<status status="FAIL" endtime="20191112 11:43:31.244" critical="yes" starttime="20191112 11:43:28.358">Setup failed:
255 != 0</status>
</test>
<test id="s1-s5-t3" name="Test Multipart Upload Complete Entity too small">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:43:31.248" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:43:31.255" level="INFO">${rc} = 1</msg>
<msg timestamp="20191112 11:43:31.255" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191112 11:43:31.255" starttime="20191112 11:43:31.246"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191112 11:43:31.257" starttime="20191112 11:43:31.256"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:43:31.260" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:43:31.406" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:43:31.406" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191112 11:43:31.407" starttime="20191112 11:43:31.258"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:43:31.413" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:43:31.905" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:43:31.906" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.fileplanet.com
 * epel: mirrors.sonic.net
 * extras: mirror.keystealth.org
 * updates: mirrors.xtom.com
Pa...</msg>
<status status="PASS" endtime="20191112 11:43:31.906" starttime="20191112 11:43:31.411"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:43:31.908" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.fileplanet.com
 * epel: mirrors.sonic.net
 * extras: mirror.keystealth.org
 * updates: mirrors.xtom.com
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191112 11:43:31.908" starttime="20191112 11:43:31.907"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:43:31.909" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191112 11:43:31.909" starttime="20191112 11:43:31.908"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:31.910" starttime="20191112 11:43:31.410"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:31.910" starttime="20191112 11:43:31.409"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:31.911" starttime="20191112 11:43:31.408"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:31.911" starttime="20191112 11:43:31.246"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:31.911" starttime="20191112 11:43:31.246"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:43:31.919" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:43:31.926" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:43:31.926" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191112 11:43:31.926" starttime="20191112 11:43:31.916"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:43:31.928" level="INFO">s3g</msg>
<status status="PASS" endtime="20191112 11:43:31.928" starttime="20191112 11:43:31.927"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:43:31.929" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191112 11:43:31.929" starttime="20191112 11:43:31.928"></status>
</kw>
<msg timestamp="20191112 11:43:31.930" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191112 11:43:31.930" starttime="20191112 11:43:31.915"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191112 11:43:31.931" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191112 11:43:31.931" starttime="20191112 11:43:31.930"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:43:31.937" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:43:31.954" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:43:31.954" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191112 11:43:31.954" starttime="20191112 11:43:31.935"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:43:31.956" level="INFO"></msg>
<status status="PASS" endtime="20191112 11:43:31.956" starttime="20191112 11:43:31.955"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:43:31.957" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191112 11:43:31.957" starttime="20191112 11:43:31.956"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:31.957" starttime="20191112 11:43:31.933"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:31.958" starttime="20191112 11:43:31.932"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:31.958" starttime="20191112 11:43:31.915"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:31.958" starttime="20191112 11:43:31.914"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:43:31.963" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:43:34.016" level="INFO">${rc} = 255</msg>
<msg timestamp="20191112 11:43:34.017" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191112 11:43:34.017" starttime="20191112 11:43:31.961"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:43:34.018" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
2019-11-12 11:43:33,966 ERROR client.OzoneClientFactory: Couldn't create RpcClient protocol exception: 
INTERNAL_ERROR org.apache.hadoop.ozone.om.exceptions.OMException: DestHost:destPort scm:9860 , LocalHost:localPort om/172.18.0.7:0. Failed on local exception: java.io.IOException: javax.security.sasl.SaslException: GSS initiate failed [Caused by GSSException: No valid credentials provided (Mechanism level: Failed to find any Kerberos tgt)]
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.handleError(OzoneManagerProtocolClientSideTranslatorPB.java:758)
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.getServiceInfo(OzoneManagerProtocolClientSideTranslatorPB.java:1249)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.hadoop.hdds.tracing.TraceAllMethod.invoke(TraceAllMethod.java:66)
	at com.sun.proxy.$Proxy20.getServiceInfo(Unknown Source)
	at org.apache.hadoop.ozone.client.rpc.RpcClient.&lt;init&gt;(RpcClient.java:156)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:256)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:239)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getRpcClient(OzoneClientFactory.java:203)
	at org.apache.hadoop.ozone.web.ozShell.OzoneAddress.createClient(OzoneAddress.java:117)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:45)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:32)
	at picocli.CommandLine.execute(CommandLine.java:1173)
	at picocli.CommandLine.access$800(CommandLine.java:141)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1367)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1335)
	at picocli.CommandLine$AbstractParseResultHandler.handleParseResult(CommandLine.java:1243)
	at picocli.CommandLine.parseWithHandlers(CommandLine.java:1526)
	at picocli.CommandLine.parseWithHandler(CommandLine.java:1465)
	at org.apache.hadoop.hdds.cli.GenericCli.execute(GenericCli.java:65)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.execute(S3Shell.java:43)
	at org.apache.hadoop.hdds.cli.GenericCli.run(GenericCli.java:56)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.main(S3Shell.java:54)
Couldn't create RpcClient protocol</msg>
<status status="PASS" endtime="20191112 11:43:34.019" starttime="20191112 11:43:34.017"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:43:34.019" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191112 11:43:34.020" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191112 11:43:34.020" starttime="20191112 11:43:34.019"></status>
</kw>
<status status="FAIL" endtime="20191112 11:43:34.020" starttime="20191112 11:43:31.960"></status>
</kw>
<status status="FAIL" endtime="20191112 11:43:34.021" starttime="20191112 11:43:31.959"></status>
</kw>
<status status="FAIL" endtime="20191112 11:43:34.021" starttime="20191112 11:43:31.958"></status>
</kw>
<status status="FAIL" endtime="20191112 11:43:34.021" starttime="20191112 11:43:31.913"></status>
</kw>
<status status="FAIL" endtime="20191112 11:43:34.021" starttime="20191112 11:43:31.911"></status>
</kw>
<status status="FAIL" endtime="20191112 11:43:34.021" starttime="20191112 11:43:31.245"></status>
</kw>
<status status="FAIL" endtime="20191112 11:43:34.022" critical="yes" starttime="20191112 11:43:31.245">Setup failed:
255 != 0</status>
</test>
<test id="s1-s5-t4" name="Test Multipart Upload Complete Invalid part">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:43:34.027" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:43:34.033" level="INFO">${rc} = 1</msg>
<msg timestamp="20191112 11:43:34.033" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191112 11:43:34.033" starttime="20191112 11:43:34.025"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191112 11:43:34.035" starttime="20191112 11:43:34.034"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:43:34.037" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:43:34.231" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:43:34.232" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191112 11:43:34.232" starttime="20191112 11:43:34.035"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:43:34.238" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:43:34.736" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:43:34.736" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.fileplanet.com
 * epel: mirrors.sonic.net
 * extras: mirror.keystealth.org
 * updates: mirrors.xtom.com
Pa...</msg>
<status status="PASS" endtime="20191112 11:43:34.736" starttime="20191112 11:43:34.236"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:43:34.738" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.fileplanet.com
 * epel: mirrors.sonic.net
 * extras: mirror.keystealth.org
 * updates: mirrors.xtom.com
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191112 11:43:34.738" starttime="20191112 11:43:34.737"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:43:34.739" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191112 11:43:34.739" starttime="20191112 11:43:34.739"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:34.740" starttime="20191112 11:43:34.235"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:34.740" starttime="20191112 11:43:34.234"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:34.740" starttime="20191112 11:43:34.233"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:34.740" starttime="20191112 11:43:34.025"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:34.741" starttime="20191112 11:43:34.024"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:43:34.747" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:43:34.753" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:43:34.753" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191112 11:43:34.753" starttime="20191112 11:43:34.745"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:43:34.754" level="INFO">s3g</msg>
<status status="PASS" endtime="20191112 11:43:34.755" starttime="20191112 11:43:34.754"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:43:34.755" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191112 11:43:34.756" starttime="20191112 11:43:34.755"></status>
</kw>
<msg timestamp="20191112 11:43:34.756" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191112 11:43:34.756" starttime="20191112 11:43:34.744"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191112 11:43:34.758" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191112 11:43:34.758" starttime="20191112 11:43:34.757"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:43:34.762" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:43:34.776" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:43:34.776" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191112 11:43:34.776" starttime="20191112 11:43:34.761"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:43:34.777" level="INFO"></msg>
<status status="PASS" endtime="20191112 11:43:34.778" starttime="20191112 11:43:34.777"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:43:34.779" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191112 11:43:34.779" starttime="20191112 11:43:34.778"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:34.779" starttime="20191112 11:43:34.760"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:34.780" starttime="20191112 11:43:34.758"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:34.780" starttime="20191112 11:43:34.743"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:34.780" starttime="20191112 11:43:34.743"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:43:34.785" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:43:36.808" level="INFO">${rc} = 255</msg>
<msg timestamp="20191112 11:43:36.808" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191112 11:43:36.808" starttime="20191112 11:43:34.783"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:43:36.809" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
2019-11-12 11:43:36,683 ERROR client.OzoneClientFactory: Couldn't create RpcClient protocol exception: 
INTERNAL_ERROR org.apache.hadoop.ozone.om.exceptions.OMException: DestHost:destPort scm:9860 , LocalHost:localPort om/172.18.0.7:0. Failed on local exception: java.io.IOException: javax.security.sasl.SaslException: GSS initiate failed [Caused by GSSException: No valid credentials provided (Mechanism level: Failed to find any Kerberos tgt)]
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.handleError(OzoneManagerProtocolClientSideTranslatorPB.java:758)
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.getServiceInfo(OzoneManagerProtocolClientSideTranslatorPB.java:1249)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.hadoop.hdds.tracing.TraceAllMethod.invoke(TraceAllMethod.java:66)
	at com.sun.proxy.$Proxy20.getServiceInfo(Unknown Source)
	at org.apache.hadoop.ozone.client.rpc.RpcClient.&lt;init&gt;(RpcClient.java:156)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:256)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:239)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getRpcClient(OzoneClientFactory.java:203)
	at org.apache.hadoop.ozone.web.ozShell.OzoneAddress.createClient(OzoneAddress.java:117)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:45)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:32)
	at picocli.CommandLine.execute(CommandLine.java:1173)
	at picocli.CommandLine.access$800(CommandLine.java:141)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1367)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1335)
	at picocli.CommandLine$AbstractParseResultHandler.handleParseResult(CommandLine.java:1243)
	at picocli.CommandLine.parseWithHandlers(CommandLine.java:1526)
	at picocli.CommandLine.parseWithHandler(CommandLine.java:1465)
	at org.apache.hadoop.hdds.cli.GenericCli.execute(GenericCli.java:65)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.execute(S3Shell.java:43)
	at org.apache.hadoop.hdds.cli.GenericCli.run(GenericCli.java:56)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.main(S3Shell.java:54)
Couldn't create RpcClient protocol</msg>
<status status="PASS" endtime="20191112 11:43:36.810" starttime="20191112 11:43:36.809"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:43:36.810" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191112 11:43:36.811" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191112 11:43:36.811" starttime="20191112 11:43:36.810"></status>
</kw>
<status status="FAIL" endtime="20191112 11:43:36.811" starttime="20191112 11:43:34.782"></status>
</kw>
<status status="FAIL" endtime="20191112 11:43:36.811" starttime="20191112 11:43:34.781"></status>
</kw>
<status status="FAIL" endtime="20191112 11:43:36.811" starttime="20191112 11:43:34.780"></status>
</kw>
<status status="FAIL" endtime="20191112 11:43:36.812" starttime="20191112 11:43:34.742"></status>
</kw>
<status status="FAIL" endtime="20191112 11:43:36.812" starttime="20191112 11:43:34.741"></status>
</kw>
<status status="FAIL" endtime="20191112 11:43:36.812" starttime="20191112 11:43:34.024"></status>
</kw>
<status status="FAIL" endtime="20191112 11:43:36.812" critical="yes" starttime="20191112 11:43:34.023">Setup failed:
255 != 0</status>
</test>
<test id="s1-s5-t5" name="Test abort Multipart upload">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:43:36.816" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:43:36.823" level="INFO">${rc} = 1</msg>
<msg timestamp="20191112 11:43:36.823" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191112 11:43:36.823" starttime="20191112 11:43:36.815"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191112 11:43:36.825" starttime="20191112 11:43:36.824"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:43:36.827" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:43:37.047" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:43:37.047" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191112 11:43:37.047" starttime="20191112 11:43:36.825"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:43:37.054" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:43:37.549" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:43:37.549" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.fileplanet.com
 * epel: mirrors.sonic.net
 * extras: mirror.keystealth.org
 * updates: mirrors.xtom.com
Pa...</msg>
<status status="PASS" endtime="20191112 11:43:37.549" starttime="20191112 11:43:37.051"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:43:37.551" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.fileplanet.com
 * epel: mirrors.sonic.net
 * extras: mirror.keystealth.org
 * updates: mirrors.xtom.com
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191112 11:43:37.551" starttime="20191112 11:43:37.550"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:43:37.552" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191112 11:43:37.552" starttime="20191112 11:43:37.551"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:37.553" starttime="20191112 11:43:37.050"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:37.553" starttime="20191112 11:43:37.050"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:37.553" starttime="20191112 11:43:37.048"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:37.554" starttime="20191112 11:43:36.814"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:37.554" starttime="20191112 11:43:36.814"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:43:37.560" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:43:37.567" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:43:37.567" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191112 11:43:37.567" starttime="20191112 11:43:37.558"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:43:37.569" level="INFO">s3g</msg>
<status status="PASS" endtime="20191112 11:43:37.569" starttime="20191112 11:43:37.568"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:43:37.570" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191112 11:43:37.571" starttime="20191112 11:43:37.570"></status>
</kw>
<msg timestamp="20191112 11:43:37.571" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191112 11:43:37.572" starttime="20191112 11:43:37.557"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191112 11:43:37.573" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191112 11:43:37.573" starttime="20191112 11:43:37.572"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:43:37.579" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:43:37.595" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:43:37.595" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191112 11:43:37.596" starttime="20191112 11:43:37.577"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:43:37.597" level="INFO"></msg>
<status status="PASS" endtime="20191112 11:43:37.597" starttime="20191112 11:43:37.596"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:43:37.598" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191112 11:43:37.599" starttime="20191112 11:43:37.598"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:37.599" starttime="20191112 11:43:37.576"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:37.599" starttime="20191112 11:43:37.574"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:37.600" starttime="20191112 11:43:37.557"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:37.600" starttime="20191112 11:43:37.556"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:43:37.605" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:43:39.520" level="INFO">${rc} = 255</msg>
<msg timestamp="20191112 11:43:39.521" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191112 11:43:39.521" starttime="20191112 11:43:37.603"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:43:39.523" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
2019-11-12 11:43:39,466 ERROR client.OzoneClientFactory: Couldn't create RpcClient protocol exception: 
INTERNAL_ERROR org.apache.hadoop.ozone.om.exceptions.OMException: DestHost:destPort scm:9860 , LocalHost:localPort om/172.18.0.7:0. Failed on local exception: java.io.IOException: javax.security.sasl.SaslException: GSS initiate failed [Caused by GSSException: No valid credentials provided (Mechanism level: Failed to find any Kerberos tgt)]
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.handleError(OzoneManagerProtocolClientSideTranslatorPB.java:758)
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.getServiceInfo(OzoneManagerProtocolClientSideTranslatorPB.java:1249)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.hadoop.hdds.tracing.TraceAllMethod.invoke(TraceAllMethod.java:66)
	at com.sun.proxy.$Proxy20.getServiceInfo(Unknown Source)
	at org.apache.hadoop.ozone.client.rpc.RpcClient.&lt;init&gt;(RpcClient.java:156)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:256)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:239)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getRpcClient(OzoneClientFactory.java:203)
	at org.apache.hadoop.ozone.web.ozShell.OzoneAddress.createClient(OzoneAddress.java:117)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:45)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:32)
	at picocli.CommandLine.execute(CommandLine.java:1173)
	at picocli.CommandLine.access$800(CommandLine.java:141)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1367)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1335)
	at picocli.CommandLine$AbstractParseResultHandler.handleParseResult(CommandLine.java:1243)
	at picocli.CommandLine.parseWithHandlers(CommandLine.java:1526)
	at picocli.CommandLine.parseWithHandler(CommandLine.java:1465)
	at org.apache.hadoop.hdds.cli.GenericCli.execute(GenericCli.java:65)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.execute(S3Shell.java:43)
	at org.apache.hadoop.hdds.cli.GenericCli.run(GenericCli.java:56)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.main(S3Shell.java:54)
Couldn't create RpcClient protocol</msg>
<status status="PASS" endtime="20191112 11:43:39.523" starttime="20191112 11:43:39.522"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:43:39.524" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191112 11:43:39.525" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191112 11:43:39.525" starttime="20191112 11:43:39.524"></status>
</kw>
<status status="FAIL" endtime="20191112 11:43:39.526" starttime="20191112 11:43:37.602"></status>
</kw>
<status status="FAIL" endtime="20191112 11:43:39.526" starttime="20191112 11:43:37.601"></status>
</kw>
<status status="FAIL" endtime="20191112 11:43:39.526" starttime="20191112 11:43:37.600"></status>
</kw>
<status status="FAIL" endtime="20191112 11:43:39.527" starttime="20191112 11:43:37.555"></status>
</kw>
<status status="FAIL" endtime="20191112 11:43:39.527" starttime="20191112 11:43:37.554"></status>
</kw>
<status status="FAIL" endtime="20191112 11:43:39.527" starttime="20191112 11:43:36.813"></status>
</kw>
<status status="FAIL" endtime="20191112 11:43:39.527" critical="yes" starttime="20191112 11:43:36.813">Setup failed:
255 != 0</status>
</test>
<test id="s1-s5-t6" name="Test abort Multipart upload with invalid uploadId">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:43:39.534" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:43:39.540" level="INFO">${rc} = 1</msg>
<msg timestamp="20191112 11:43:39.540" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191112 11:43:39.540" starttime="20191112 11:43:39.531"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191112 11:43:39.542" starttime="20191112 11:43:39.541"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:43:39.544" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:43:39.727" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:43:39.727" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191112 11:43:39.728" starttime="20191112 11:43:39.542"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:43:39.734" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:43:40.278" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:43:40.279" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.fileplanet.com
 * epel: mirrors.sonic.net
 * extras: mirror.keystealth.org
 * updates: mirrors.xtom.com
Pa...</msg>
<status status="PASS" endtime="20191112 11:43:40.279" starttime="20191112 11:43:39.732"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:43:40.281" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.fileplanet.com
 * epel: mirrors.sonic.net
 * extras: mirror.keystealth.org
 * updates: mirrors.xtom.com
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191112 11:43:40.281" starttime="20191112 11:43:40.280"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:43:40.282" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191112 11:43:40.282" starttime="20191112 11:43:40.281"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:40.283" starttime="20191112 11:43:39.731"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:40.283" starttime="20191112 11:43:39.730"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:40.283" starttime="20191112 11:43:39.728"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:40.283" starttime="20191112 11:43:39.531"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:40.284" starttime="20191112 11:43:39.530"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:43:40.290" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:43:40.297" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:43:40.298" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191112 11:43:40.298" starttime="20191112 11:43:40.288"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:43:40.300" level="INFO">s3g</msg>
<status status="PASS" endtime="20191112 11:43:40.300" starttime="20191112 11:43:40.299"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:43:40.302" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191112 11:43:40.302" starttime="20191112 11:43:40.300"></status>
</kw>
<msg timestamp="20191112 11:43:40.303" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191112 11:43:40.303" starttime="20191112 11:43:40.287"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191112 11:43:40.304" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191112 11:43:40.304" starttime="20191112 11:43:40.303"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:43:40.309" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:43:40.325" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:43:40.325" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191112 11:43:40.325" starttime="20191112 11:43:40.307"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:43:40.326" level="INFO"></msg>
<status status="PASS" endtime="20191112 11:43:40.327" starttime="20191112 11:43:40.326"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:43:40.327" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191112 11:43:40.328" starttime="20191112 11:43:40.327"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:40.328" starttime="20191112 11:43:40.306"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:40.328" starttime="20191112 11:43:40.305"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:40.328" starttime="20191112 11:43:40.287"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:40.329" starttime="20191112 11:43:40.286"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:43:40.333" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:43:42.323" level="INFO">${rc} = 255</msg>
<msg timestamp="20191112 11:43:42.324" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191112 11:43:42.324" starttime="20191112 11:43:40.331"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:43:42.329" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
2019-11-12 11:43:42,276 ERROR client.OzoneClientFactory: Couldn't create RpcClient protocol exception: 
INTERNAL_ERROR org.apache.hadoop.ozone.om.exceptions.OMException: DestHost:destPort scm:9860 , LocalHost:localPort om/172.18.0.7:0. Failed on local exception: java.io.IOException: javax.security.sasl.SaslException: GSS initiate failed [Caused by GSSException: No valid credentials provided (Mechanism level: Failed to find any Kerberos tgt)]
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.handleError(OzoneManagerProtocolClientSideTranslatorPB.java:758)
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.getServiceInfo(OzoneManagerProtocolClientSideTranslatorPB.java:1249)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.hadoop.hdds.tracing.TraceAllMethod.invoke(TraceAllMethod.java:66)
	at com.sun.proxy.$Proxy20.getServiceInfo(Unknown Source)
	at org.apache.hadoop.ozone.client.rpc.RpcClient.&lt;init&gt;(RpcClient.java:156)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:256)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:239)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getRpcClient(OzoneClientFactory.java:203)
	at org.apache.hadoop.ozone.web.ozShell.OzoneAddress.createClient(OzoneAddress.java:117)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:45)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:32)
	at picocli.CommandLine.execute(CommandLine.java:1173)
	at picocli.CommandLine.access$800(CommandLine.java:141)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1367)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1335)
	at picocli.CommandLine$AbstractParseResultHandler.handleParseResult(CommandLine.java:1243)
	at picocli.CommandLine.parseWithHandlers(CommandLine.java:1526)
	at picocli.CommandLine.parseWithHandler(CommandLine.java:1465)
	at org.apache.hadoop.hdds.cli.GenericCli.execute(GenericCli.java:65)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.execute(S3Shell.java:43)
	at org.apache.hadoop.hdds.cli.GenericCli.run(GenericCli.java:56)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.main(S3Shell.java:54)
Couldn't create RpcClient protocol</msg>
<status status="PASS" endtime="20191112 11:43:42.329" starttime="20191112 11:43:42.327"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:43:42.331" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191112 11:43:42.332" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191112 11:43:42.332" starttime="20191112 11:43:42.330"></status>
</kw>
<status status="FAIL" endtime="20191112 11:43:42.333" starttime="20191112 11:43:40.330"></status>
</kw>
<status status="FAIL" endtime="20191112 11:43:42.333" starttime="20191112 11:43:40.330"></status>
</kw>
<status status="FAIL" endtime="20191112 11:43:42.333" starttime="20191112 11:43:40.329"></status>
</kw>
<status status="FAIL" endtime="20191112 11:43:42.334" starttime="20191112 11:43:40.285"></status>
</kw>
<status status="FAIL" endtime="20191112 11:43:42.334" starttime="20191112 11:43:40.284"></status>
</kw>
<status status="FAIL" endtime="20191112 11:43:42.334" starttime="20191112 11:43:39.529"></status>
</kw>
<status status="FAIL" endtime="20191112 11:43:42.335" critical="yes" starttime="20191112 11:43:39.528">Setup failed:
255 != 0</status>
</test>
<test id="s1-s5-t7" name="Upload part with Incorrect uploadID">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:43:42.341" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:43:42.345" level="INFO">${rc} = 1</msg>
<msg timestamp="20191112 11:43:42.345" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191112 11:43:42.345" starttime="20191112 11:43:42.339"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191112 11:43:42.346" starttime="20191112 11:43:42.346"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:43:42.348" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:43:42.481" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:43:42.481" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191112 11:43:42.482" starttime="20191112 11:43:42.347"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:43:42.488" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:43:43.041" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:43:43.042" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.fileplanet.com
 * epel: mirrors.sonic.net
 * extras: mirror.keystealth.org
 * updates: mirrors.xtom.com
Pa...</msg>
<status status="PASS" endtime="20191112 11:43:43.042" starttime="20191112 11:43:42.486"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:43:43.044" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.fileplanet.com
 * epel: mirrors.sonic.net
 * extras: mirror.keystealth.org
 * updates: mirrors.xtom.com
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191112 11:43:43.044" starttime="20191112 11:43:43.043"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:43:43.045" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191112 11:43:43.045" starttime="20191112 11:43:43.044"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:43.046" starttime="20191112 11:43:42.485"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:43.046" starttime="20191112 11:43:42.484"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:43.046" starttime="20191112 11:43:42.482"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:43.047" starttime="20191112 11:43:42.338"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:43.047" starttime="20191112 11:43:42.338"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:43:43.055" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:43:43.063" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:43:43.063" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191112 11:43:43.063" starttime="20191112 11:43:43.052"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:43:43.065" level="INFO">s3g</msg>
<status status="PASS" endtime="20191112 11:43:43.065" starttime="20191112 11:43:43.064"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:43:43.066" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191112 11:43:43.067" starttime="20191112 11:43:43.066"></status>
</kw>
<msg timestamp="20191112 11:43:43.067" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191112 11:43:43.067" starttime="20191112 11:43:43.051"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191112 11:43:43.069" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191112 11:43:43.069" starttime="20191112 11:43:43.068"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:43:43.074" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:43:43.091" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:43:43.091" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191112 11:43:43.091" starttime="20191112 11:43:43.072"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:43:43.093" level="INFO"></msg>
<status status="PASS" endtime="20191112 11:43:43.093" starttime="20191112 11:43:43.092"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:43:43.094" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191112 11:43:43.094" starttime="20191112 11:43:43.093"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:43.095" starttime="20191112 11:43:43.070"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:43.095" starttime="20191112 11:43:43.069"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:43.095" starttime="20191112 11:43:43.050"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:43.095" starttime="20191112 11:43:43.049"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:43:43.101" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:43:45.202" level="INFO">${rc} = 255</msg>
<msg timestamp="20191112 11:43:45.202" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191112 11:43:45.202" starttime="20191112 11:43:43.098"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:43:45.204" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
2019-11-12 11:43:45,043 ERROR client.OzoneClientFactory: Couldn't create RpcClient protocol exception: 
INTERNAL_ERROR org.apache.hadoop.ozone.om.exceptions.OMException: DestHost:destPort scm:9860 , LocalHost:localPort om/172.18.0.7:0. Failed on local exception: java.io.IOException: javax.security.sasl.SaslException: GSS initiate failed [Caused by GSSException: No valid credentials provided (Mechanism level: Failed to find any Kerberos tgt)]
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.handleError(OzoneManagerProtocolClientSideTranslatorPB.java:758)
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.getServiceInfo(OzoneManagerProtocolClientSideTranslatorPB.java:1249)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.hadoop.hdds.tracing.TraceAllMethod.invoke(TraceAllMethod.java:66)
	at com.sun.proxy.$Proxy20.getServiceInfo(Unknown Source)
	at org.apache.hadoop.ozone.client.rpc.RpcClient.&lt;init&gt;(RpcClient.java:156)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:256)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:239)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getRpcClient(OzoneClientFactory.java:203)
	at org.apache.hadoop.ozone.web.ozShell.OzoneAddress.createClient(OzoneAddress.java:117)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:45)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:32)
	at picocli.CommandLine.execute(CommandLine.java:1173)
	at picocli.CommandLine.access$800(CommandLine.java:141)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1367)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1335)
	at picocli.CommandLine$AbstractParseResultHandler.handleParseResult(CommandLine.java:1243)
	at picocli.CommandLine.parseWithHandlers(CommandLine.java:1526)
	at picocli.CommandLine.parseWithHandler(CommandLine.java:1465)
	at org.apache.hadoop.hdds.cli.GenericCli.execute(GenericCli.java:65)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.execute(S3Shell.java:43)
	at org.apache.hadoop.hdds.cli.GenericCli.run(GenericCli.java:56)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.main(S3Shell.java:54)
Couldn't create RpcClient protocol</msg>
<status status="PASS" endtime="20191112 11:43:45.204" starttime="20191112 11:43:45.203"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:43:45.205" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191112 11:43:45.205" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191112 11:43:45.205" starttime="20191112 11:43:45.204"></status>
</kw>
<status status="FAIL" endtime="20191112 11:43:45.205" starttime="20191112 11:43:43.097"></status>
</kw>
<status status="FAIL" endtime="20191112 11:43:45.206" starttime="20191112 11:43:43.097"></status>
</kw>
<status status="FAIL" endtime="20191112 11:43:45.206" starttime="20191112 11:43:43.096"></status>
</kw>
<status status="FAIL" endtime="20191112 11:43:45.206" starttime="20191112 11:43:43.048"></status>
</kw>
<status status="FAIL" endtime="20191112 11:43:45.206" starttime="20191112 11:43:43.047"></status>
</kw>
<status status="FAIL" endtime="20191112 11:43:45.206" starttime="20191112 11:43:42.337"></status>
</kw>
<status status="FAIL" endtime="20191112 11:43:45.207" critical="yes" starttime="20191112 11:43:42.336">Setup failed:
255 != 0</status>
</test>
<test id="s1-s5-t8" name="Test list parts">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:43:45.211" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:43:45.217" level="INFO">${rc} = 1</msg>
<msg timestamp="20191112 11:43:45.217" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191112 11:43:45.217" starttime="20191112 11:43:45.209"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191112 11:43:45.219" starttime="20191112 11:43:45.218"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:43:45.221" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:43:45.417" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:43:45.418" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191112 11:43:45.418" starttime="20191112 11:43:45.219"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:43:45.424" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:43:45.882" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:43:45.882" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.fileplanet.com
 * epel: mirrors.sonic.net
 * extras: mirror.keystealth.org
 * updates: mirrors.xtom.com
Pa...</msg>
<status status="PASS" endtime="20191112 11:43:45.883" starttime="20191112 11:43:45.422"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:43:45.884" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.fileplanet.com
 * epel: mirrors.sonic.net
 * extras: mirror.keystealth.org
 * updates: mirrors.xtom.com
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191112 11:43:45.884" starttime="20191112 11:43:45.883"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:43:45.884" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191112 11:43:45.884" starttime="20191112 11:43:45.884"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:45.885" starttime="20191112 11:43:45.421"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:45.885" starttime="20191112 11:43:45.420"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:45.885" starttime="20191112 11:43:45.419"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:45.885" starttime="20191112 11:43:45.209"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:45.885" starttime="20191112 11:43:45.208"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:43:45.890" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:43:45.897" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:43:45.898" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191112 11:43:45.898" starttime="20191112 11:43:45.888"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:43:45.899" level="INFO">s3g</msg>
<status status="PASS" endtime="20191112 11:43:45.900" starttime="20191112 11:43:45.899"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:43:45.901" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191112 11:43:45.901" starttime="20191112 11:43:45.900"></status>
</kw>
<msg timestamp="20191112 11:43:45.901" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191112 11:43:45.902" starttime="20191112 11:43:45.887"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191112 11:43:45.903" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191112 11:43:45.903" starttime="20191112 11:43:45.902"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:43:45.908" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:43:45.921" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:43:45.921" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191112 11:43:45.921" starttime="20191112 11:43:45.906"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:43:45.922" level="INFO"></msg>
<status status="PASS" endtime="20191112 11:43:45.923" starttime="20191112 11:43:45.922"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:43:45.923" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191112 11:43:45.924" starttime="20191112 11:43:45.923"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:45.924" starttime="20191112 11:43:45.904"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:45.924" starttime="20191112 11:43:45.904"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:45.924" starttime="20191112 11:43:45.887"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:45.925" starttime="20191112 11:43:45.887"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:43:45.929" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:43:48.102" level="INFO">${rc} = 255</msg>
<msg timestamp="20191112 11:43:48.102" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191112 11:43:48.102" starttime="20191112 11:43:45.927"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:43:48.104" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
2019-11-12 11:43:47,969 ERROR client.OzoneClientFactory: Couldn't create RpcClient protocol exception: 
INTERNAL_ERROR org.apache.hadoop.ozone.om.exceptions.OMException: DestHost:destPort scm:9860 , LocalHost:localPort om/172.18.0.7:0. Failed on local exception: java.io.IOException: javax.security.sasl.SaslException: GSS initiate failed [Caused by GSSException: No valid credentials provided (Mechanism level: Failed to find any Kerberos tgt)]
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.handleError(OzoneManagerProtocolClientSideTranslatorPB.java:758)
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.getServiceInfo(OzoneManagerProtocolClientSideTranslatorPB.java:1249)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.hadoop.hdds.tracing.TraceAllMethod.invoke(TraceAllMethod.java:66)
	at com.sun.proxy.$Proxy20.getServiceInfo(Unknown Source)
	at org.apache.hadoop.ozone.client.rpc.RpcClient.&lt;init&gt;(RpcClient.java:156)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:256)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:239)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getRpcClient(OzoneClientFactory.java:203)
	at org.apache.hadoop.ozone.web.ozShell.OzoneAddress.createClient(OzoneAddress.java:117)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:45)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:32)
	at picocli.CommandLine.execute(CommandLine.java:1173)
	at picocli.CommandLine.access$800(CommandLine.java:141)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1367)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1335)
	at picocli.CommandLine$AbstractParseResultHandler.handleParseResult(CommandLine.java:1243)
	at picocli.CommandLine.parseWithHandlers(CommandLine.java:1526)
	at picocli.CommandLine.parseWithHandler(CommandLine.java:1465)
	at org.apache.hadoop.hdds.cli.GenericCli.execute(GenericCli.java:65)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.execute(S3Shell.java:43)
	at org.apache.hadoop.hdds.cli.GenericCli.run(GenericCli.java:56)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.main(S3Shell.java:54)
Couldn't create RpcClient protocol</msg>
<status status="PASS" endtime="20191112 11:43:48.105" starttime="20191112 11:43:48.103"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:43:48.106" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191112 11:43:48.107" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191112 11:43:48.107" starttime="20191112 11:43:48.105"></status>
</kw>
<status status="FAIL" endtime="20191112 11:43:48.108" starttime="20191112 11:43:45.926"></status>
</kw>
<status status="FAIL" endtime="20191112 11:43:48.108" starttime="20191112 11:43:45.926"></status>
</kw>
<status status="FAIL" endtime="20191112 11:43:48.108" starttime="20191112 11:43:45.925"></status>
</kw>
<status status="FAIL" endtime="20191112 11:43:48.109" starttime="20191112 11:43:45.886"></status>
</kw>
<status status="FAIL" endtime="20191112 11:43:48.109" starttime="20191112 11:43:45.886"></status>
</kw>
<status status="FAIL" endtime="20191112 11:43:48.109" starttime="20191112 11:43:45.208"></status>
</kw>
<status status="FAIL" endtime="20191112 11:43:48.110" critical="yes" starttime="20191112 11:43:45.207">Setup failed:
255 != 0</status>
</test>
<test id="s1-s5-t9" name="Test Multipart Upload with the simplified aws s3 cp API">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:43:48.117" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:43:48.124" level="INFO">${rc} = 1</msg>
<msg timestamp="20191112 11:43:48.124" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191112 11:43:48.124" starttime="20191112 11:43:48.114"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191112 11:43:48.126" starttime="20191112 11:43:48.125"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:43:48.128" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:43:48.329" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:43:48.329" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191112 11:43:48.329" starttime="20191112 11:43:48.126"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:43:48.335" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:43:48.858" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:43:48.858" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.fileplanet.com
 * epel: mirrors.sonic.net
 * extras: mirror.keystealth.org
 * updates: mirrors.xtom.com
Pa...</msg>
<status status="PASS" endtime="20191112 11:43:48.858" starttime="20191112 11:43:48.333"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:43:48.860" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.fileplanet.com
 * epel: mirrors.sonic.net
 * extras: mirror.keystealth.org
 * updates: mirrors.xtom.com
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191112 11:43:48.860" starttime="20191112 11:43:48.859"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:43:48.861" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191112 11:43:48.861" starttime="20191112 11:43:48.860"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:48.862" starttime="20191112 11:43:48.332"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:48.862" starttime="20191112 11:43:48.332"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:48.862" starttime="20191112 11:43:48.330"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:48.863" starttime="20191112 11:43:48.113"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:48.863" starttime="20191112 11:43:48.113"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:43:48.870" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:43:48.877" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:43:48.878" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191112 11:43:48.878" starttime="20191112 11:43:48.868"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:43:48.879" level="INFO">s3g</msg>
<status status="PASS" endtime="20191112 11:43:48.880" starttime="20191112 11:43:48.878"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:43:48.881" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191112 11:43:48.881" starttime="20191112 11:43:48.880"></status>
</kw>
<msg timestamp="20191112 11:43:48.882" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191112 11:43:48.882" starttime="20191112 11:43:48.867"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191112 11:43:48.883" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191112 11:43:48.883" starttime="20191112 11:43:48.882"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:43:48.888" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:43:48.905" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:43:48.905" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191112 11:43:48.905" starttime="20191112 11:43:48.886"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:43:48.906" level="INFO"></msg>
<status status="PASS" endtime="20191112 11:43:48.907" starttime="20191112 11:43:48.906"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:43:48.908" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191112 11:43:48.908" starttime="20191112 11:43:48.907"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:48.908" starttime="20191112 11:43:48.884"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:48.908" starttime="20191112 11:43:48.884"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:48.909" starttime="20191112 11:43:48.866"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:48.909" starttime="20191112 11:43:48.865"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:43:48.914" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:43:50.883" level="INFO">${rc} = 255</msg>
<msg timestamp="20191112 11:43:50.883" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191112 11:43:50.883" starttime="20191112 11:43:48.912"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:43:50.885" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
2019-11-12 11:43:50,838 ERROR client.OzoneClientFactory: Couldn't create RpcClient protocol exception: 
INTERNAL_ERROR org.apache.hadoop.ozone.om.exceptions.OMException: DestHost:destPort scm:9860 , LocalHost:localPort om/172.18.0.7:0. Failed on local exception: java.io.IOException: javax.security.sasl.SaslException: GSS initiate failed [Caused by GSSException: No valid credentials provided (Mechanism level: Failed to find any Kerberos tgt)]
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.handleError(OzoneManagerProtocolClientSideTranslatorPB.java:758)
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.getServiceInfo(OzoneManagerProtocolClientSideTranslatorPB.java:1249)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.hadoop.hdds.tracing.TraceAllMethod.invoke(TraceAllMethod.java:66)
	at com.sun.proxy.$Proxy20.getServiceInfo(Unknown Source)
	at org.apache.hadoop.ozone.client.rpc.RpcClient.&lt;init&gt;(RpcClient.java:156)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:256)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:239)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getRpcClient(OzoneClientFactory.java:203)
	at org.apache.hadoop.ozone.web.ozShell.OzoneAddress.createClient(OzoneAddress.java:117)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:45)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:32)
	at picocli.CommandLine.execute(CommandLine.java:1173)
	at picocli.CommandLine.access$800(CommandLine.java:141)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1367)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1335)
	at picocli.CommandLine$AbstractParseResultHandler.handleParseResult(CommandLine.java:1243)
	at picocli.CommandLine.parseWithHandlers(CommandLine.java:1526)
	at picocli.CommandLine.parseWithHandler(CommandLine.java:1465)
	at org.apache.hadoop.hdds.cli.GenericCli.execute(GenericCli.java:65)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.execute(S3Shell.java:43)
	at org.apache.hadoop.hdds.cli.GenericCli.run(GenericCli.java:56)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.main(S3Shell.java:54)
Couldn't create RpcClient protocol</msg>
<status status="PASS" endtime="20191112 11:43:50.886" starttime="20191112 11:43:50.884"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:43:50.887" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191112 11:43:50.887" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191112 11:43:50.888" starttime="20191112 11:43:50.886"></status>
</kw>
<status status="FAIL" endtime="20191112 11:43:50.888" starttime="20191112 11:43:48.911"></status>
</kw>
<status status="FAIL" endtime="20191112 11:43:50.889" starttime="20191112 11:43:48.910"></status>
</kw>
<status status="FAIL" endtime="20191112 11:43:50.889" starttime="20191112 11:43:48.909"></status>
</kw>
<status status="FAIL" endtime="20191112 11:43:50.889" starttime="20191112 11:43:48.864"></status>
</kw>
<status status="FAIL" endtime="20191112 11:43:50.889" starttime="20191112 11:43:48.863"></status>
</kw>
<status status="FAIL" endtime="20191112 11:43:50.890" starttime="20191112 11:43:48.112"></status>
</kw>
<status status="FAIL" endtime="20191112 11:43:50.890" critical="yes" starttime="20191112 11:43:48.111">Setup failed:
255 != 0</status>
</test>
<test id="s1-s5-t10" name="Test Multipart Upload Put With Copy">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:43:50.898" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:43:50.904" level="INFO">${rc} = 1</msg>
<msg timestamp="20191112 11:43:50.905" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191112 11:43:50.905" starttime="20191112 11:43:50.895"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191112 11:43:50.907" starttime="20191112 11:43:50.906"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:43:50.909" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:43:51.093" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:43:51.094" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191112 11:43:51.094" starttime="20191112 11:43:50.907"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:43:51.098" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:43:51.597" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:43:51.597" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.fileplanet.com
 * epel: mirrors.sonic.net
 * extras: mirror.keystealth.org
 * updates: mirrors.xtom.com
Pa...</msg>
<status status="PASS" endtime="20191112 11:43:51.597" starttime="20191112 11:43:51.096"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:43:51.599" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.fileplanet.com
 * epel: mirrors.sonic.net
 * extras: mirror.keystealth.org
 * updates: mirrors.xtom.com
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191112 11:43:51.599" starttime="20191112 11:43:51.598"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:43:51.600" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191112 11:43:51.601" starttime="20191112 11:43:51.599"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:51.602" starttime="20191112 11:43:51.096"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:51.602" starttime="20191112 11:43:51.095"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:51.602" starttime="20191112 11:43:51.094"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:51.603" starttime="20191112 11:43:50.894"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:51.603" starttime="20191112 11:43:50.894"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:43:51.610" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:43:51.617" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:43:51.617" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191112 11:43:51.617" starttime="20191112 11:43:51.608"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:43:51.619" level="INFO">s3g</msg>
<status status="PASS" endtime="20191112 11:43:51.619" starttime="20191112 11:43:51.618"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:43:51.620" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191112 11:43:51.621" starttime="20191112 11:43:51.620"></status>
</kw>
<msg timestamp="20191112 11:43:51.621" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191112 11:43:51.621" starttime="20191112 11:43:51.607"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191112 11:43:51.623" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191112 11:43:51.623" starttime="20191112 11:43:51.622"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:43:51.628" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:43:51.646" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:43:51.646" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191112 11:43:51.646" starttime="20191112 11:43:51.626"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:43:51.648" level="INFO"></msg>
<status status="PASS" endtime="20191112 11:43:51.648" starttime="20191112 11:43:51.647"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:43:51.649" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191112 11:43:51.649" starttime="20191112 11:43:51.648"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:51.650" starttime="20191112 11:43:51.625"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:51.650" starttime="20191112 11:43:51.624"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:51.650" starttime="20191112 11:43:51.606"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:51.651" starttime="20191112 11:43:51.605"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:43:51.656" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:43:53.762" level="INFO">${rc} = 255</msg>
<msg timestamp="20191112 11:43:53.762" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191112 11:43:53.762" starttime="20191112 11:43:51.654"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:43:53.764" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
2019-11-12 11:43:53,671 ERROR client.OzoneClientFactory: Couldn't create RpcClient protocol exception: 
INTERNAL_ERROR org.apache.hadoop.ozone.om.exceptions.OMException: DestHost:destPort scm:9860 , LocalHost:localPort om/172.18.0.7:0. Failed on local exception: java.io.IOException: javax.security.sasl.SaslException: GSS initiate failed [Caused by GSSException: No valid credentials provided (Mechanism level: Failed to find any Kerberos tgt)]
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.handleError(OzoneManagerProtocolClientSideTranslatorPB.java:758)
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.getServiceInfo(OzoneManagerProtocolClientSideTranslatorPB.java:1249)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.hadoop.hdds.tracing.TraceAllMethod.invoke(TraceAllMethod.java:66)
	at com.sun.proxy.$Proxy20.getServiceInfo(Unknown Source)
	at org.apache.hadoop.ozone.client.rpc.RpcClient.&lt;init&gt;(RpcClient.java:156)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:256)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:239)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getRpcClient(OzoneClientFactory.java:203)
	at org.apache.hadoop.ozone.web.ozShell.OzoneAddress.createClient(OzoneAddress.java:117)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:45)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:32)
	at picocli.CommandLine.execute(CommandLine.java:1173)
	at picocli.CommandLine.access$800(CommandLine.java:141)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1367)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1335)
	at picocli.CommandLine$AbstractParseResultHandler.handleParseResult(CommandLine.java:1243)
	at picocli.CommandLine.parseWithHandlers(CommandLine.java:1526)
	at picocli.CommandLine.parseWithHandler(CommandLine.java:1465)
	at org.apache.hadoop.hdds.cli.GenericCli.execute(GenericCli.java:65)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.execute(S3Shell.java:43)
	at org.apache.hadoop.hdds.cli.GenericCli.run(GenericCli.java:56)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.main(S3Shell.java:54)
Couldn't create RpcClient protocol</msg>
<status status="PASS" endtime="20191112 11:43:53.764" starttime="20191112 11:43:53.763"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:43:53.765" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191112 11:43:53.765" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191112 11:43:53.766" starttime="20191112 11:43:53.764"></status>
</kw>
<status status="FAIL" endtime="20191112 11:43:53.766" starttime="20191112 11:43:51.653"></status>
</kw>
<status status="FAIL" endtime="20191112 11:43:53.766" starttime="20191112 11:43:51.652"></status>
</kw>
<status status="FAIL" endtime="20191112 11:43:53.766" starttime="20191112 11:43:51.651"></status>
</kw>
<status status="FAIL" endtime="20191112 11:43:53.767" starttime="20191112 11:43:51.604"></status>
</kw>
<status status="FAIL" endtime="20191112 11:43:53.767" starttime="20191112 11:43:51.603"></status>
</kw>
<status status="FAIL" endtime="20191112 11:43:53.767" starttime="20191112 11:43:50.893"></status>
</kw>
<status status="FAIL" endtime="20191112 11:43:53.767" critical="yes" starttime="20191112 11:43:50.891">Setup failed:
255 != 0</status>
</test>
<test id="s1-s5-t11" name="Test Multipart Upload Put With Copy and range">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:43:53.773" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:43:53.779" level="INFO">${rc} = 1</msg>
<msg timestamp="20191112 11:43:53.779" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191112 11:43:53.779" starttime="20191112 11:43:53.770"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191112 11:43:53.782" starttime="20191112 11:43:53.780"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:43:53.784" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:43:53.956" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:43:53.956" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191112 11:43:53.956" starttime="20191112 11:43:53.782"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:43:53.964" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:43:54.481" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:43:54.482" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.fileplanet.com
 * epel: mirrors.sonic.net
 * extras: mirror.keystealth.org
 * updates: mirrors.xtom.com
Pa...</msg>
<status status="PASS" endtime="20191112 11:43:54.482" starttime="20191112 11:43:53.961"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:43:54.483" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.fileplanet.com
 * epel: mirrors.sonic.net
 * extras: mirror.keystealth.org
 * updates: mirrors.xtom.com
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191112 11:43:54.483" starttime="20191112 11:43:54.482"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:43:54.484" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191112 11:43:54.484" starttime="20191112 11:43:54.484"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:54.485" starttime="20191112 11:43:53.960"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:54.485" starttime="20191112 11:43:53.959"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:54.485" starttime="20191112 11:43:53.957"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:54.485" starttime="20191112 11:43:53.770"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:54.485" starttime="20191112 11:43:53.770"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:43:54.491" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:43:54.496" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:43:54.496" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191112 11:43:54.496" starttime="20191112 11:43:54.489"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:43:54.497" level="INFO">s3g</msg>
<status status="PASS" endtime="20191112 11:43:54.497" starttime="20191112 11:43:54.497"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:43:54.498" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191112 11:43:54.498" starttime="20191112 11:43:54.497"></status>
</kw>
<msg timestamp="20191112 11:43:54.498" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191112 11:43:54.498" starttime="20191112 11:43:54.488"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191112 11:43:54.499" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191112 11:43:54.500" starttime="20191112 11:43:54.499"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:43:54.503" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:43:54.515" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:43:54.515" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191112 11:43:54.515" starttime="20191112 11:43:54.501"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:43:54.516" level="INFO"></msg>
<status status="PASS" endtime="20191112 11:43:54.516" starttime="20191112 11:43:54.516"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:43:54.517" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191112 11:43:54.517" starttime="20191112 11:43:54.517"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:54.518" starttime="20191112 11:43:54.500"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:54.518" starttime="20191112 11:43:54.500"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:54.518" starttime="20191112 11:43:54.488"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:54.518" starttime="20191112 11:43:54.487"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:43:54.521" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:43:56.505" level="INFO">${rc} = 255</msg>
<msg timestamp="20191112 11:43:56.505" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191112 11:43:56.505" starttime="20191112 11:43:54.520"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:43:56.507" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
2019-11-12 11:43:56,452 ERROR client.OzoneClientFactory: Couldn't create RpcClient protocol exception: 
INTERNAL_ERROR org.apache.hadoop.ozone.om.exceptions.OMException: DestHost:destPort scm:9860 , LocalHost:localPort om/172.18.0.7:0. Failed on local exception: java.io.IOException: javax.security.sasl.SaslException: GSS initiate failed [Caused by GSSException: No valid credentials provided (Mechanism level: Failed to find any Kerberos tgt)]
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.handleError(OzoneManagerProtocolClientSideTranslatorPB.java:758)
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.getServiceInfo(OzoneManagerProtocolClientSideTranslatorPB.java:1249)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.hadoop.hdds.tracing.TraceAllMethod.invoke(TraceAllMethod.java:66)
	at com.sun.proxy.$Proxy20.getServiceInfo(Unknown Source)
	at org.apache.hadoop.ozone.client.rpc.RpcClient.&lt;init&gt;(RpcClient.java:156)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:256)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:239)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getRpcClient(OzoneClientFactory.java:203)
	at org.apache.hadoop.ozone.web.ozShell.OzoneAddress.createClient(OzoneAddress.java:117)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:45)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:32)
	at picocli.CommandLine.execute(CommandLine.java:1173)
	at picocli.CommandLine.access$800(CommandLine.java:141)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1367)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1335)
	at picocli.CommandLine$AbstractParseResultHandler.handleParseResult(CommandLine.java:1243)
	at picocli.CommandLine.parseWithHandlers(CommandLine.java:1526)
	at picocli.CommandLine.parseWithHandler(CommandLine.java:1465)
	at org.apache.hadoop.hdds.cli.GenericCli.execute(GenericCli.java:65)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.execute(S3Shell.java:43)
	at org.apache.hadoop.hdds.cli.GenericCli.run(GenericCli.java:56)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.main(S3Shell.java:54)
Couldn't create RpcClient protocol</msg>
<status status="PASS" endtime="20191112 11:43:56.508" starttime="20191112 11:43:56.506"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:43:56.509" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191112 11:43:56.510" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191112 11:43:56.510" starttime="20191112 11:43:56.508"></status>
</kw>
<status status="FAIL" endtime="20191112 11:43:56.510" starttime="20191112 11:43:54.519"></status>
</kw>
<status status="FAIL" endtime="20191112 11:43:56.511" starttime="20191112 11:43:54.519"></status>
</kw>
<status status="FAIL" endtime="20191112 11:43:56.511" starttime="20191112 11:43:54.518"></status>
</kw>
<status status="FAIL" endtime="20191112 11:43:56.512" starttime="20191112 11:43:54.487"></status>
</kw>
<status status="FAIL" endtime="20191112 11:43:56.512" starttime="20191112 11:43:54.486"></status>
</kw>
<status status="FAIL" endtime="20191112 11:43:56.512" starttime="20191112 11:43:53.769"></status>
</kw>
<status status="FAIL" endtime="20191112 11:43:56.513" critical="yes" starttime="20191112 11:43:53.768">Setup failed:
255 != 0</status>
</test>
<test id="s1-s5-t12" name="Test Multipart Upload list">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:43:56.520" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:43:56.527" level="INFO">${rc} = 1</msg>
<msg timestamp="20191112 11:43:56.527" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191112 11:43:56.527" starttime="20191112 11:43:56.517"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191112 11:43:56.529" starttime="20191112 11:43:56.528"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:43:56.533" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:43:56.729" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:43:56.730" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191112 11:43:56.730" starttime="20191112 11:43:56.530"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:43:56.736" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:43:57.261" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:43:57.261" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.fileplanet.com
 * epel: mirrors.sonic.net
 * extras: mirror.keystealth.org
 * updates: mirrors.xtom.com
Pa...</msg>
<status status="PASS" endtime="20191112 11:43:57.261" starttime="20191112 11:43:56.734"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:43:57.262" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.fileplanet.com
 * epel: mirrors.sonic.net
 * extras: mirror.keystealth.org
 * updates: mirrors.xtom.com
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191112 11:43:57.263" starttime="20191112 11:43:57.262"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:43:57.263" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191112 11:43:57.263" starttime="20191112 11:43:57.263"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:57.264" starttime="20191112 11:43:56.733"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:57.264" starttime="20191112 11:43:56.732"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:57.264" starttime="20191112 11:43:56.731"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:57.264" starttime="20191112 11:43:56.516"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:57.264" starttime="20191112 11:43:56.516"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:43:57.269" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:43:57.276" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:43:57.276" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191112 11:43:57.277" starttime="20191112 11:43:57.267"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:43:57.278" level="INFO">s3g</msg>
<status status="PASS" endtime="20191112 11:43:57.279" starttime="20191112 11:43:57.277"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:43:57.280" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191112 11:43:57.280" starttime="20191112 11:43:57.279"></status>
</kw>
<msg timestamp="20191112 11:43:57.280" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191112 11:43:57.281" starttime="20191112 11:43:57.267"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191112 11:43:57.282" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191112 11:43:57.282" starttime="20191112 11:43:57.281"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:43:57.287" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:43:57.301" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:43:57.301" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191112 11:43:57.301" starttime="20191112 11:43:57.285"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:43:57.303" level="INFO"></msg>
<status status="PASS" endtime="20191112 11:43:57.303" starttime="20191112 11:43:57.302"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:43:57.304" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191112 11:43:57.304" starttime="20191112 11:43:57.303"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:57.304" starttime="20191112 11:43:57.284"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:57.305" starttime="20191112 11:43:57.283"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:57.305" starttime="20191112 11:43:57.266"></status>
</kw>
<status status="PASS" endtime="20191112 11:43:57.305" starttime="20191112 11:43:57.266"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:43:57.310" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:43:59.275" level="INFO">${rc} = 255</msg>
<msg timestamp="20191112 11:43:59.275" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191112 11:43:59.276" starttime="20191112 11:43:57.308"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:43:59.278" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
2019-11-12 11:43:59,207 ERROR client.OzoneClientFactory: Couldn't create RpcClient protocol exception: 
INTERNAL_ERROR org.apache.hadoop.ozone.om.exceptions.OMException: DestHost:destPort scm:9860 , LocalHost:localPort om/172.18.0.7:0. Failed on local exception: java.io.IOException: javax.security.sasl.SaslException: GSS initiate failed [Caused by GSSException: No valid credentials provided (Mechanism level: Failed to find any Kerberos tgt)]
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.handleError(OzoneManagerProtocolClientSideTranslatorPB.java:758)
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.getServiceInfo(OzoneManagerProtocolClientSideTranslatorPB.java:1249)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.hadoop.hdds.tracing.TraceAllMethod.invoke(TraceAllMethod.java:66)
	at com.sun.proxy.$Proxy20.getServiceInfo(Unknown Source)
	at org.apache.hadoop.ozone.client.rpc.RpcClient.&lt;init&gt;(RpcClient.java:156)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:256)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:239)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getRpcClient(OzoneClientFactory.java:203)
	at org.apache.hadoop.ozone.web.ozShell.OzoneAddress.createClient(OzoneAddress.java:117)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:45)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:32)
	at picocli.CommandLine.execute(CommandLine.java:1173)
	at picocli.CommandLine.access$800(CommandLine.java:141)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1367)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1335)
	at picocli.CommandLine$AbstractParseResultHandler.handleParseResult(CommandLine.java:1243)
	at picocli.CommandLine.parseWithHandlers(CommandLine.java:1526)
	at picocli.CommandLine.parseWithHandler(CommandLine.java:1465)
	at org.apache.hadoop.hdds.cli.GenericCli.execute(GenericCli.java:65)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.execute(S3Shell.java:43)
	at org.apache.hadoop.hdds.cli.GenericCli.run(GenericCli.java:56)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.main(S3Shell.java:54)
Couldn't create RpcClient protocol</msg>
<status status="PASS" endtime="20191112 11:43:59.278" starttime="20191112 11:43:59.277"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:43:59.279" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191112 11:43:59.280" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191112 11:43:59.280" starttime="20191112 11:43:59.278"></status>
</kw>
<status status="FAIL" endtime="20191112 11:43:59.281" starttime="20191112 11:43:57.307"></status>
</kw>
<status status="FAIL" endtime="20191112 11:43:59.281" starttime="20191112 11:43:57.306"></status>
</kw>
<status status="FAIL" endtime="20191112 11:43:59.281" starttime="20191112 11:43:57.306"></status>
</kw>
<status status="FAIL" endtime="20191112 11:43:59.282" starttime="20191112 11:43:57.265"></status>
</kw>
<status status="FAIL" endtime="20191112 11:43:59.282" starttime="20191112 11:43:57.264"></status>
</kw>
<status status="FAIL" endtime="20191112 11:43:59.282" starttime="20191112 11:43:56.515"></status>
</kw>
<status status="FAIL" endtime="20191112 11:43:59.283" critical="yes" starttime="20191112 11:43:56.513">Setup failed:
255 != 0</status>
</test>
<doc>S3 gateway test with aws cli</doc>
<status status="FAIL" endtime="20191112 11:43:59.287" starttime="20191112 11:43:24.482"></status>
</suite>
<suite source="/opt/hadoop/smoketest/s3/objectcopy.robot" id="s1-s6" name="Objectcopy">
<test id="s1-s6-t1" name="Copy Object Happy Scenario">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:43:59.319" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:43:59.326" level="INFO">${rc} = 1</msg>
<msg timestamp="20191112 11:43:59.326" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191112 11:43:59.326" starttime="20191112 11:43:59.317"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191112 11:43:59.328" starttime="20191112 11:43:59.327"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:43:59.329" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:43:59.550" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:43:59.551" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191112 11:43:59.551" starttime="20191112 11:43:59.328"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:43:59.557" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:00.099" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:44:00.099" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.fileplanet.com
 * epel: mirrors.sonic.net
 * extras: mirror.keystealth.org
 * updates: mirrors.xtom.com
Pa...</msg>
<status status="PASS" endtime="20191112 11:44:00.099" starttime="20191112 11:43:59.555"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:44:00.101" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.fileplanet.com
 * epel: mirrors.sonic.net
 * extras: mirror.keystealth.org
 * updates: mirrors.xtom.com
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191112 11:44:00.102" starttime="20191112 11:44:00.100"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:44:00.103" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191112 11:44:00.103" starttime="20191112 11:44:00.102"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:00.104" starttime="20191112 11:43:59.554"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:00.104" starttime="20191112 11:43:59.553"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:00.104" starttime="20191112 11:43:59.552"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:00.104" starttime="20191112 11:43:59.317"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:00.105" starttime="20191112 11:43:59.316"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:00.113" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:00.118" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:44:00.118" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191112 11:44:00.118" starttime="20191112 11:44:00.110"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:44:00.120" level="INFO">s3g</msg>
<status status="PASS" endtime="20191112 11:44:00.120" starttime="20191112 11:44:00.119"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:44:00.121" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191112 11:44:00.121" starttime="20191112 11:44:00.120"></status>
</kw>
<msg timestamp="20191112 11:44:00.122" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191112 11:44:00.122" starttime="20191112 11:44:00.109"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191112 11:44:00.125" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191112 11:44:00.125" starttime="20191112 11:44:00.122"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:00.130" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:00.147" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:44:00.147" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191112 11:44:00.147" starttime="20191112 11:44:00.128"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:44:00.148" level="INFO"></msg>
<status status="PASS" endtime="20191112 11:44:00.149" starttime="20191112 11:44:00.148"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:44:00.149" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191112 11:44:00.150" starttime="20191112 11:44:00.149"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:00.150" starttime="20191112 11:44:00.126"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:00.150" starttime="20191112 11:44:00.126"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:00.151" starttime="20191112 11:44:00.108"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:00.151" starttime="20191112 11:44:00.107"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:00.155" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:02.122" level="INFO">${rc} = 255</msg>
<msg timestamp="20191112 11:44:02.122" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191112 11:44:02.123" starttime="20191112 11:44:00.153"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:44:02.124" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
2019-11-12 11:44:02,062 ERROR client.OzoneClientFactory: Couldn't create RpcClient protocol exception: 
INTERNAL_ERROR org.apache.hadoop.ozone.om.exceptions.OMException: DestHost:destPort scm:9860 , LocalHost:localPort om/172.18.0.7:0. Failed on local exception: java.io.IOException: javax.security.sasl.SaslException: GSS initiate failed [Caused by GSSException: No valid credentials provided (Mechanism level: Failed to find any Kerberos tgt)]
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.handleError(OzoneManagerProtocolClientSideTranslatorPB.java:758)
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.getServiceInfo(OzoneManagerProtocolClientSideTranslatorPB.java:1249)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.hadoop.hdds.tracing.TraceAllMethod.invoke(TraceAllMethod.java:66)
	at com.sun.proxy.$Proxy20.getServiceInfo(Unknown Source)
	at org.apache.hadoop.ozone.client.rpc.RpcClient.&lt;init&gt;(RpcClient.java:156)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:256)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:239)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getRpcClient(OzoneClientFactory.java:203)
	at org.apache.hadoop.ozone.web.ozShell.OzoneAddress.createClient(OzoneAddress.java:117)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:45)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:32)
	at picocli.CommandLine.execute(CommandLine.java:1173)
	at picocli.CommandLine.access$800(CommandLine.java:141)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1367)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1335)
	at picocli.CommandLine$AbstractParseResultHandler.handleParseResult(CommandLine.java:1243)
	at picocli.CommandLine.parseWithHandlers(CommandLine.java:1526)
	at picocli.CommandLine.parseWithHandler(CommandLine.java:1465)
	at org.apache.hadoop.hdds.cli.GenericCli.execute(GenericCli.java:65)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.execute(S3Shell.java:43)
	at org.apache.hadoop.hdds.cli.GenericCli.run(GenericCli.java:56)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.main(S3Shell.java:54)
Couldn't create RpcClient protocol</msg>
<status status="PASS" endtime="20191112 11:44:02.125" starttime="20191112 11:44:02.123"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:44:02.125" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191112 11:44:02.126" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191112 11:44:02.126" starttime="20191112 11:44:02.125"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:02.127" starttime="20191112 11:44:00.153"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:02.127" starttime="20191112 11:44:00.152"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:02.127" starttime="20191112 11:44:00.151"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:02.127" starttime="20191112 11:44:00.106"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:02.128" starttime="20191112 11:44:00.105"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:02.128" starttime="20191112 11:43:59.316"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:02.128" critical="yes" starttime="20191112 11:43:59.315">Setup failed:
255 != 0</status>
</test>
<test id="s1-s6-t2" name="Copy Object Where Bucket is not available">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:02.134" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:02.139" level="INFO">${rc} = 1</msg>
<msg timestamp="20191112 11:44:02.139" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191112 11:44:02.139" starttime="20191112 11:44:02.132"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191112 11:44:02.141" starttime="20191112 11:44:02.140"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:02.143" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:02.347" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:44:02.347" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191112 11:44:02.347" starttime="20191112 11:44:02.141"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:02.353" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:02.868" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:44:02.868" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.fileplanet.com
 * epel: mirrors.sonic.net
 * extras: mirror.keystealth.org
 * updates: mirrors.xtom.com
Pa...</msg>
<status status="PASS" endtime="20191112 11:44:02.868" starttime="20191112 11:44:02.350"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:44:02.870" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.fileplanet.com
 * epel: mirrors.sonic.net
 * extras: mirror.keystealth.org
 * updates: mirrors.xtom.com
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191112 11:44:02.871" starttime="20191112 11:44:02.869"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:44:02.872" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191112 11:44:02.872" starttime="20191112 11:44:02.871"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:02.873" starttime="20191112 11:44:02.350"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:02.873" starttime="20191112 11:44:02.349"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:02.873" starttime="20191112 11:44:02.348"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:02.874" starttime="20191112 11:44:02.131"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:02.874" starttime="20191112 11:44:02.131"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:02.882" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:02.888" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:44:02.888" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191112 11:44:02.888" starttime="20191112 11:44:02.880"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:44:02.890" level="INFO">s3g</msg>
<status status="PASS" endtime="20191112 11:44:02.890" starttime="20191112 11:44:02.889"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:44:02.891" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191112 11:44:02.891" starttime="20191112 11:44:02.890"></status>
</kw>
<msg timestamp="20191112 11:44:02.892" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191112 11:44:02.892" starttime="20191112 11:44:02.878"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191112 11:44:02.893" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191112 11:44:02.893" starttime="20191112 11:44:02.892"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:02.898" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:02.914" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:44:02.915" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191112 11:44:02.915" starttime="20191112 11:44:02.896"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:44:02.916" level="INFO"></msg>
<status status="PASS" endtime="20191112 11:44:02.916" starttime="20191112 11:44:02.915"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:44:02.917" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191112 11:44:02.918" starttime="20191112 11:44:02.917"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:02.918" starttime="20191112 11:44:02.895"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:02.918" starttime="20191112 11:44:02.894"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:02.919" starttime="20191112 11:44:02.877"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:02.919" starttime="20191112 11:44:02.876"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:02.924" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:05.003" level="INFO">${rc} = 255</msg>
<msg timestamp="20191112 11:44:05.003" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191112 11:44:05.003" starttime="20191112 11:44:02.922"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:44:05.005" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
2019-11-12 11:44:04,949 ERROR client.OzoneClientFactory: Couldn't create RpcClient protocol exception: 
INTERNAL_ERROR org.apache.hadoop.ozone.om.exceptions.OMException: DestHost:destPort scm:9860 , LocalHost:localPort om/172.18.0.7:0. Failed on local exception: java.io.IOException: javax.security.sasl.SaslException: GSS initiate failed [Caused by GSSException: No valid credentials provided (Mechanism level: Failed to find any Kerberos tgt)]
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.handleError(OzoneManagerProtocolClientSideTranslatorPB.java:758)
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.getServiceInfo(OzoneManagerProtocolClientSideTranslatorPB.java:1249)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.hadoop.hdds.tracing.TraceAllMethod.invoke(TraceAllMethod.java:66)
	at com.sun.proxy.$Proxy20.getServiceInfo(Unknown Source)
	at org.apache.hadoop.ozone.client.rpc.RpcClient.&lt;init&gt;(RpcClient.java:156)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:256)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:239)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getRpcClient(OzoneClientFactory.java:203)
	at org.apache.hadoop.ozone.web.ozShell.OzoneAddress.createClient(OzoneAddress.java:117)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:45)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:32)
	at picocli.CommandLine.execute(CommandLine.java:1173)
	at picocli.CommandLine.access$800(CommandLine.java:141)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1367)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1335)
	at picocli.CommandLine$AbstractParseResultHandler.handleParseResult(CommandLine.java:1243)
	at picocli.CommandLine.parseWithHandlers(CommandLine.java:1526)
	at picocli.CommandLine.parseWithHandler(CommandLine.java:1465)
	at org.apache.hadoop.hdds.cli.GenericCli.execute(GenericCli.java:65)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.execute(S3Shell.java:43)
	at org.apache.hadoop.hdds.cli.GenericCli.run(GenericCli.java:56)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.main(S3Shell.java:54)
Couldn't create RpcClient protocol</msg>
<status status="PASS" endtime="20191112 11:44:05.005" starttime="20191112 11:44:05.004"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:44:05.006" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191112 11:44:05.006" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191112 11:44:05.007" starttime="20191112 11:44:05.005"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:05.007" starttime="20191112 11:44:02.921"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:05.007" starttime="20191112 11:44:02.920"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:05.007" starttime="20191112 11:44:02.919"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:05.008" starttime="20191112 11:44:02.875"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:05.008" starttime="20191112 11:44:02.874"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:05.008" starttime="20191112 11:44:02.130"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:05.008" critical="yes" starttime="20191112 11:44:02.129">Setup failed:
255 != 0</status>
</test>
<test id="s1-s6-t3" name="Copy Object Where both source and dest are same with change to storageclass">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:05.014" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:05.019" level="INFO">${rc} = 1</msg>
<msg timestamp="20191112 11:44:05.020" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191112 11:44:05.020" starttime="20191112 11:44:05.012"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191112 11:44:05.021" starttime="20191112 11:44:05.021"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:05.024" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:05.217" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:44:05.217" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191112 11:44:05.217" starttime="20191112 11:44:05.022"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:05.223" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:05.718" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:44:05.718" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.fileplanet.com
 * epel: mirrors.sonic.net
 * extras: mirror.keystealth.org
 * updates: mirrors.xtom.com
Pa...</msg>
<status status="PASS" endtime="20191112 11:44:05.718" starttime="20191112 11:44:05.221"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:44:05.719" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.fileplanet.com
 * epel: mirrors.sonic.net
 * extras: mirror.keystealth.org
 * updates: mirrors.xtom.com
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191112 11:44:05.719" starttime="20191112 11:44:05.718"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:44:05.720" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191112 11:44:05.720" starttime="20191112 11:44:05.719"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:05.720" starttime="20191112 11:44:05.220"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:05.720" starttime="20191112 11:44:05.219"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:05.721" starttime="20191112 11:44:05.218"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:05.721" starttime="20191112 11:44:05.011"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:05.721" starttime="20191112 11:44:05.010"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:05.726" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:05.734" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:44:05.734" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191112 11:44:05.734" starttime="20191112 11:44:05.724"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:44:05.736" level="INFO">s3g</msg>
<status status="PASS" endtime="20191112 11:44:05.736" starttime="20191112 11:44:05.735"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:44:05.737" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191112 11:44:05.738" starttime="20191112 11:44:05.737"></status>
</kw>
<msg timestamp="20191112 11:44:05.738" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191112 11:44:05.738" starttime="20191112 11:44:05.724"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191112 11:44:05.740" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191112 11:44:05.740" starttime="20191112 11:44:05.739"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:05.745" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:05.760" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:44:05.761" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191112 11:44:05.761" starttime="20191112 11:44:05.743"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:44:05.763" level="INFO"></msg>
<status status="PASS" endtime="20191112 11:44:05.763" starttime="20191112 11:44:05.762"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:44:05.764" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191112 11:44:05.764" starttime="20191112 11:44:05.763"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:05.765" starttime="20191112 11:44:05.741"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:05.765" starttime="20191112 11:44:05.740"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:05.766" starttime="20191112 11:44:05.723"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:05.766" starttime="20191112 11:44:05.722"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:05.771" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:07.717" level="INFO">${rc} = 255</msg>
<msg timestamp="20191112 11:44:07.717" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191112 11:44:07.717" starttime="20191112 11:44:05.769"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:44:07.719" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
2019-11-12 11:44:07,667 ERROR client.OzoneClientFactory: Couldn't create RpcClient protocol exception: 
INTERNAL_ERROR org.apache.hadoop.ozone.om.exceptions.OMException: DestHost:destPort scm:9860 , LocalHost:localPort om/172.18.0.7:0. Failed on local exception: java.io.IOException: javax.security.sasl.SaslException: GSS initiate failed [Caused by GSSException: No valid credentials provided (Mechanism level: Failed to find any Kerberos tgt)]
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.handleError(OzoneManagerProtocolClientSideTranslatorPB.java:758)
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.getServiceInfo(OzoneManagerProtocolClientSideTranslatorPB.java:1249)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.hadoop.hdds.tracing.TraceAllMethod.invoke(TraceAllMethod.java:66)
	at com.sun.proxy.$Proxy20.getServiceInfo(Unknown Source)
	at org.apache.hadoop.ozone.client.rpc.RpcClient.&lt;init&gt;(RpcClient.java:156)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:256)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:239)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getRpcClient(OzoneClientFactory.java:203)
	at org.apache.hadoop.ozone.web.ozShell.OzoneAddress.createClient(OzoneAddress.java:117)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:45)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:32)
	at picocli.CommandLine.execute(CommandLine.java:1173)
	at picocli.CommandLine.access$800(CommandLine.java:141)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1367)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1335)
	at picocli.CommandLine$AbstractParseResultHandler.handleParseResult(CommandLine.java:1243)
	at picocli.CommandLine.parseWithHandlers(CommandLine.java:1526)
	at picocli.CommandLine.parseWithHandler(CommandLine.java:1465)
	at org.apache.hadoop.hdds.cli.GenericCli.execute(GenericCli.java:65)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.execute(S3Shell.java:43)
	at org.apache.hadoop.hdds.cli.GenericCli.run(GenericCli.java:56)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.main(S3Shell.java:54)
Couldn't create RpcClient protocol</msg>
<status status="PASS" endtime="20191112 11:44:07.719" starttime="20191112 11:44:07.718"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:44:07.720" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191112 11:44:07.721" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191112 11:44:07.721" starttime="20191112 11:44:07.720"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:07.721" starttime="20191112 11:44:05.768"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:07.722" starttime="20191112 11:44:05.767"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:07.722" starttime="20191112 11:44:05.766"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:07.722" starttime="20191112 11:44:05.722"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:07.722" starttime="20191112 11:44:05.721"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:07.723" starttime="20191112 11:44:05.010"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:07.723" critical="yes" starttime="20191112 11:44:05.009">Setup failed:
255 != 0</status>
</test>
<test id="s1-s6-t4" name="Copy Object Where Key not available">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:07.729" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:07.735" level="INFO">${rc} = 1</msg>
<msg timestamp="20191112 11:44:07.735" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191112 11:44:07.736" starttime="20191112 11:44:07.727"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191112 11:44:07.738" starttime="20191112 11:44:07.736"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:07.740" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:07.915" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:44:07.915" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191112 11:44:07.915" starttime="20191112 11:44:07.738"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:07.921" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:08.388" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:44:08.388" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.fileplanet.com
 * epel: mirrors.sonic.net
 * extras: mirror.keystealth.org
 * updates: mirrors.xtom.com
Pa...</msg>
<status status="PASS" endtime="20191112 11:44:08.388" starttime="20191112 11:44:07.919"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:44:08.390" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.fileplanet.com
 * epel: mirrors.sonic.net
 * extras: mirror.keystealth.org
 * updates: mirrors.xtom.com
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191112 11:44:08.390" starttime="20191112 11:44:08.389"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:44:08.391" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191112 11:44:08.391" starttime="20191112 11:44:08.390"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:08.392" starttime="20191112 11:44:07.918"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:08.392" starttime="20191112 11:44:07.917"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:08.392" starttime="20191112 11:44:07.916"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:08.393" starttime="20191112 11:44:07.726"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:08.393" starttime="20191112 11:44:07.726"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:08.401" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:08.407" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:44:08.407" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191112 11:44:08.407" starttime="20191112 11:44:08.398"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:44:08.409" level="INFO">s3g</msg>
<status status="PASS" endtime="20191112 11:44:08.409" starttime="20191112 11:44:08.408"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:44:08.410" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191112 11:44:08.410" starttime="20191112 11:44:08.409"></status>
</kw>
<msg timestamp="20191112 11:44:08.411" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191112 11:44:08.411" starttime="20191112 11:44:08.398"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191112 11:44:08.412" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191112 11:44:08.412" starttime="20191112 11:44:08.411"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:08.417" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:08.433" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:44:08.433" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191112 11:44:08.433" starttime="20191112 11:44:08.415"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:44:08.435" level="INFO"></msg>
<status status="PASS" endtime="20191112 11:44:08.435" starttime="20191112 11:44:08.434"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:44:08.436" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191112 11:44:08.436" starttime="20191112 11:44:08.436"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:08.437" starttime="20191112 11:44:08.414"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:08.437" starttime="20191112 11:44:08.413"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:08.438" starttime="20191112 11:44:08.397"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:08.438" starttime="20191112 11:44:08.395"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:08.443" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:10.584" level="INFO">${rc} = 255</msg>
<msg timestamp="20191112 11:44:10.584" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191112 11:44:10.584" starttime="20191112 11:44:08.441"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:44:10.586" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
2019-11-12 11:44:10,426 ERROR client.OzoneClientFactory: Couldn't create RpcClient protocol exception: 
INTERNAL_ERROR org.apache.hadoop.ozone.om.exceptions.OMException: DestHost:destPort scm:9860 , LocalHost:localPort om/172.18.0.7:0. Failed on local exception: java.io.IOException: javax.security.sasl.SaslException: GSS initiate failed [Caused by GSSException: No valid credentials provided (Mechanism level: Failed to find any Kerberos tgt)]
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.handleError(OzoneManagerProtocolClientSideTranslatorPB.java:758)
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.getServiceInfo(OzoneManagerProtocolClientSideTranslatorPB.java:1249)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.hadoop.hdds.tracing.TraceAllMethod.invoke(TraceAllMethod.java:66)
	at com.sun.proxy.$Proxy20.getServiceInfo(Unknown Source)
	at org.apache.hadoop.ozone.client.rpc.RpcClient.&lt;init&gt;(RpcClient.java:156)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:256)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:239)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getRpcClient(OzoneClientFactory.java:203)
	at org.apache.hadoop.ozone.web.ozShell.OzoneAddress.createClient(OzoneAddress.java:117)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:45)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:32)
	at picocli.CommandLine.execute(CommandLine.java:1173)
	at picocli.CommandLine.access$800(CommandLine.java:141)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1367)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1335)
	at picocli.CommandLine$AbstractParseResultHandler.handleParseResult(CommandLine.java:1243)
	at picocli.CommandLine.parseWithHandlers(CommandLine.java:1526)
	at picocli.CommandLine.parseWithHandler(CommandLine.java:1465)
	at org.apache.hadoop.hdds.cli.GenericCli.execute(GenericCli.java:65)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.execute(S3Shell.java:43)
	at org.apache.hadoop.hdds.cli.GenericCli.run(GenericCli.java:56)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.main(S3Shell.java:54)
Couldn't create RpcClient protocol</msg>
<status status="PASS" endtime="20191112 11:44:10.586" starttime="20191112 11:44:10.585"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:44:10.588" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191112 11:44:10.588" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191112 11:44:10.588" starttime="20191112 11:44:10.587"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:10.589" starttime="20191112 11:44:08.440"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:10.589" starttime="20191112 11:44:08.439"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:10.590" starttime="20191112 11:44:08.438"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:10.590" starttime="20191112 11:44:08.394"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:10.590" starttime="20191112 11:44:08.393"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:10.591" starttime="20191112 11:44:07.725"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:10.591" critical="yes" starttime="20191112 11:44:07.724">Setup failed:
255 != 0</status>
</test>
<doc>S3 gateway test with aws cli</doc>
<status status="FAIL" endtime="20191112 11:44:10.593" starttime="20191112 11:43:59.298"></status>
</suite>
<suite source="/opt/hadoop/smoketest/s3/objectdelete.robot" id="s1-s7" name="Objectdelete">
<test id="s1-s7-t1" name="Delete file with s3api">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:10.616" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:10.622" level="INFO">${rc} = 1</msg>
<msg timestamp="20191112 11:44:10.622" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191112 11:44:10.622" starttime="20191112 11:44:10.614"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191112 11:44:10.624" starttime="20191112 11:44:10.623"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:10.626" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:10.805" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:44:10.806" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191112 11:44:10.806" starttime="20191112 11:44:10.624"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:10.813" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:11.317" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:44:11.317" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.fileplanet.com
 * epel: mirrors.sonic.net
 * extras: mirror.keystealth.org
 * updates: mirrors.xtom.com
Pa...</msg>
<status status="PASS" endtime="20191112 11:44:11.318" starttime="20191112 11:44:10.810"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:44:11.319" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.fileplanet.com
 * epel: mirrors.sonic.net
 * extras: mirror.keystealth.org
 * updates: mirrors.xtom.com
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191112 11:44:11.320" starttime="20191112 11:44:11.318"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:44:11.320" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191112 11:44:11.321" starttime="20191112 11:44:11.320"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:11.321" starttime="20191112 11:44:10.809"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:11.322" starttime="20191112 11:44:10.808"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:11.322" starttime="20191112 11:44:10.807"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:11.322" starttime="20191112 11:44:10.613"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:11.322" starttime="20191112 11:44:10.612"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:11.329" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:11.335" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:44:11.335" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191112 11:44:11.336" starttime="20191112 11:44:11.327"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:44:11.337" level="INFO">s3g</msg>
<status status="PASS" endtime="20191112 11:44:11.337" starttime="20191112 11:44:11.336"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:44:11.338" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191112 11:44:11.338" starttime="20191112 11:44:11.337"></status>
</kw>
<msg timestamp="20191112 11:44:11.339" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191112 11:44:11.339" starttime="20191112 11:44:11.326"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191112 11:44:11.341" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191112 11:44:11.341" starttime="20191112 11:44:11.339"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:11.345" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:11.361" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:44:11.362" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191112 11:44:11.362" starttime="20191112 11:44:11.343"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:44:11.363" level="INFO"></msg>
<status status="PASS" endtime="20191112 11:44:11.363" starttime="20191112 11:44:11.362"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:44:11.363" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191112 11:44:11.364" starttime="20191112 11:44:11.363"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:11.364" starttime="20191112 11:44:11.342"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:11.364" starttime="20191112 11:44:11.342"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:11.364" starttime="20191112 11:44:11.325"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:11.364" starttime="20191112 11:44:11.324"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:11.368" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:13.383" level="INFO">${rc} = 255</msg>
<msg timestamp="20191112 11:44:13.383" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191112 11:44:13.383" starttime="20191112 11:44:11.367"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:44:13.385" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
2019-11-12 11:44:13,327 ERROR client.OzoneClientFactory: Couldn't create RpcClient protocol exception: 
INTERNAL_ERROR org.apache.hadoop.ozone.om.exceptions.OMException: DestHost:destPort scm:9860 , LocalHost:localPort om/172.18.0.7:0. Failed on local exception: java.io.IOException: javax.security.sasl.SaslException: GSS initiate failed [Caused by GSSException: No valid credentials provided (Mechanism level: Failed to find any Kerberos tgt)]
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.handleError(OzoneManagerProtocolClientSideTranslatorPB.java:758)
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.getServiceInfo(OzoneManagerProtocolClientSideTranslatorPB.java:1249)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.hadoop.hdds.tracing.TraceAllMethod.invoke(TraceAllMethod.java:66)
	at com.sun.proxy.$Proxy20.getServiceInfo(Unknown Source)
	at org.apache.hadoop.ozone.client.rpc.RpcClient.&lt;init&gt;(RpcClient.java:156)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:256)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:239)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getRpcClient(OzoneClientFactory.java:203)
	at org.apache.hadoop.ozone.web.ozShell.OzoneAddress.createClient(OzoneAddress.java:117)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:45)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:32)
	at picocli.CommandLine.execute(CommandLine.java:1173)
	at picocli.CommandLine.access$800(CommandLine.java:141)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1367)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1335)
	at picocli.CommandLine$AbstractParseResultHandler.handleParseResult(CommandLine.java:1243)
	at picocli.CommandLine.parseWithHandlers(CommandLine.java:1526)
	at picocli.CommandLine.parseWithHandler(CommandLine.java:1465)
	at org.apache.hadoop.hdds.cli.GenericCli.execute(GenericCli.java:65)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.execute(S3Shell.java:43)
	at org.apache.hadoop.hdds.cli.GenericCli.run(GenericCli.java:56)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.main(S3Shell.java:54)
Couldn't create RpcClient protocol</msg>
<status status="PASS" endtime="20191112 11:44:13.386" starttime="20191112 11:44:13.384"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:44:13.387" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191112 11:44:13.387" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191112 11:44:13.387" starttime="20191112 11:44:13.386"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:13.388" starttime="20191112 11:44:11.366"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:13.388" starttime="20191112 11:44:11.365"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:13.388" starttime="20191112 11:44:11.365"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:13.389" starttime="20191112 11:44:11.324"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:13.389" starttime="20191112 11:44:11.323"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:13.389" starttime="20191112 11:44:10.611"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:13.390" critical="yes" starttime="20191112 11:44:10.610">Setup failed:
255 != 0</status>
</test>
<test id="s1-s7-t2" name="Delete file with s3api, file doesn't exist">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:13.397" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:13.403" level="INFO">${rc} = 1</msg>
<msg timestamp="20191112 11:44:13.403" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191112 11:44:13.403" starttime="20191112 11:44:13.395"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191112 11:44:13.405" starttime="20191112 11:44:13.404"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:13.408" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:13.603" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:44:13.603" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191112 11:44:13.603" starttime="20191112 11:44:13.406"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:13.609" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:14.142" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:44:14.142" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.fileplanet.com
 * epel: mirrors.sonic.net
 * extras: mirror.keystealth.org
 * updates: mirrors.xtom.com
Pa...</msg>
<status status="PASS" endtime="20191112 11:44:14.143" starttime="20191112 11:44:13.607"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:44:14.144" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.fileplanet.com
 * epel: mirrors.sonic.net
 * extras: mirror.keystealth.org
 * updates: mirrors.xtom.com
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191112 11:44:14.144" starttime="20191112 11:44:14.143"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:44:14.145" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191112 11:44:14.146" starttime="20191112 11:44:14.145"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:14.146" starttime="20191112 11:44:13.606"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:14.146" starttime="20191112 11:44:13.605"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:14.146" starttime="20191112 11:44:13.604"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:14.147" starttime="20191112 11:44:13.394"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:14.147" starttime="20191112 11:44:13.393"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:14.153" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:14.159" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:44:14.159" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191112 11:44:14.159" starttime="20191112 11:44:14.151"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:44:14.161" level="INFO">s3g</msg>
<status status="PASS" endtime="20191112 11:44:14.161" starttime="20191112 11:44:14.160"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:44:14.162" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191112 11:44:14.162" starttime="20191112 11:44:14.161"></status>
</kw>
<msg timestamp="20191112 11:44:14.163" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191112 11:44:14.163" starttime="20191112 11:44:14.150"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191112 11:44:14.164" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191112 11:44:14.164" starttime="20191112 11:44:14.163"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:14.169" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:14.184" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:44:14.184" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191112 11:44:14.184" starttime="20191112 11:44:14.167"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:44:14.185" level="INFO"></msg>
<status status="PASS" endtime="20191112 11:44:14.185" starttime="20191112 11:44:14.184"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:44:14.186" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191112 11:44:14.186" starttime="20191112 11:44:14.185"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:14.187" starttime="20191112 11:44:14.166"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:14.187" starttime="20191112 11:44:14.165"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:14.187" starttime="20191112 11:44:14.149"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:14.187" starttime="20191112 11:44:14.149"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:14.192" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:16.143" level="INFO">${rc} = 255</msg>
<msg timestamp="20191112 11:44:16.143" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191112 11:44:16.143" starttime="20191112 11:44:14.190"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:44:16.145" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
2019-11-12 11:44:16,085 ERROR client.OzoneClientFactory: Couldn't create RpcClient protocol exception: 
INTERNAL_ERROR org.apache.hadoop.ozone.om.exceptions.OMException: DestHost:destPort scm:9860 , LocalHost:localPort om/172.18.0.7:0. Failed on local exception: java.io.IOException: javax.security.sasl.SaslException: GSS initiate failed [Caused by GSSException: No valid credentials provided (Mechanism level: Failed to find any Kerberos tgt)]
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.handleError(OzoneManagerProtocolClientSideTranslatorPB.java:758)
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.getServiceInfo(OzoneManagerProtocolClientSideTranslatorPB.java:1249)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.hadoop.hdds.tracing.TraceAllMethod.invoke(TraceAllMethod.java:66)
	at com.sun.proxy.$Proxy20.getServiceInfo(Unknown Source)
	at org.apache.hadoop.ozone.client.rpc.RpcClient.&lt;init&gt;(RpcClient.java:156)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:256)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:239)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getRpcClient(OzoneClientFactory.java:203)
	at org.apache.hadoop.ozone.web.ozShell.OzoneAddress.createClient(OzoneAddress.java:117)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:45)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:32)
	at picocli.CommandLine.execute(CommandLine.java:1173)
	at picocli.CommandLine.access$800(CommandLine.java:141)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1367)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1335)
	at picocli.CommandLine$AbstractParseResultHandler.handleParseResult(CommandLine.java:1243)
	at picocli.CommandLine.parseWithHandlers(CommandLine.java:1526)
	at picocli.CommandLine.parseWithHandler(CommandLine.java:1465)
	at org.apache.hadoop.hdds.cli.GenericCli.execute(GenericCli.java:65)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.execute(S3Shell.java:43)
	at org.apache.hadoop.hdds.cli.GenericCli.run(GenericCli.java:56)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.main(S3Shell.java:54)
Couldn't create RpcClient protocol</msg>
<status status="PASS" endtime="20191112 11:44:16.146" starttime="20191112 11:44:16.144"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:44:16.147" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191112 11:44:16.147" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191112 11:44:16.147" starttime="20191112 11:44:16.146"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:16.148" starttime="20191112 11:44:14.189"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:16.148" starttime="20191112 11:44:14.188"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:16.148" starttime="20191112 11:44:14.187"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:16.149" starttime="20191112 11:44:14.148"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:16.149" starttime="20191112 11:44:14.147"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:16.149" starttime="20191112 11:44:13.392"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:16.150" critical="yes" starttime="20191112 11:44:13.391">Setup failed:
255 != 0</status>
</test>
<test id="s1-s7-t3" name="Delete dir with s3api">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:16.157" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:16.162" level="INFO">${rc} = 1</msg>
<msg timestamp="20191112 11:44:16.162" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191112 11:44:16.163" starttime="20191112 11:44:16.154"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191112 11:44:16.164" starttime="20191112 11:44:16.163"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:16.167" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:16.351" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:44:16.351" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191112 11:44:16.352" starttime="20191112 11:44:16.165"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:16.358" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:16.837" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:44:16.837" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.fileplanet.com
 * epel: mirrors.sonic.net
 * extras: mirror.keystealth.org
 * updates: mirrors.xtom.com
Pa...</msg>
<status status="PASS" endtime="20191112 11:44:16.837" starttime="20191112 11:44:16.356"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:44:16.839" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.fileplanet.com
 * epel: mirrors.sonic.net
 * extras: mirror.keystealth.org
 * updates: mirrors.xtom.com
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191112 11:44:16.839" starttime="20191112 11:44:16.838"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:44:16.840" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191112 11:44:16.841" starttime="20191112 11:44:16.840"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:16.841" starttime="20191112 11:44:16.355"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:16.841" starttime="20191112 11:44:16.354"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:16.842" starttime="20191112 11:44:16.352"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:16.842" starttime="20191112 11:44:16.153"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:16.842" starttime="20191112 11:44:16.153"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:16.849" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:16.854" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:44:16.854" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191112 11:44:16.854" starttime="20191112 11:44:16.847"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:44:16.855" level="INFO">s3g</msg>
<status status="PASS" endtime="20191112 11:44:16.855" starttime="20191112 11:44:16.855"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:44:16.856" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191112 11:44:16.856" starttime="20191112 11:44:16.855"></status>
</kw>
<msg timestamp="20191112 11:44:16.856" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191112 11:44:16.857" starttime="20191112 11:44:16.846"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191112 11:44:16.857" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191112 11:44:16.858" starttime="20191112 11:44:16.857"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:16.861" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:16.877" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:44:16.877" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191112 11:44:16.877" starttime="20191112 11:44:16.860"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:44:16.878" level="INFO"></msg>
<status status="PASS" endtime="20191112 11:44:16.878" starttime="20191112 11:44:16.878"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:44:16.879" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191112 11:44:16.879" starttime="20191112 11:44:16.879"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:16.880" starttime="20191112 11:44:16.858"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:16.880" starttime="20191112 11:44:16.858"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:16.880" starttime="20191112 11:44:16.845"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:16.880" starttime="20191112 11:44:16.844"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:16.883" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:18.858" level="INFO">${rc} = 255</msg>
<msg timestamp="20191112 11:44:18.858" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191112 11:44:18.858" starttime="20191112 11:44:16.882"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:44:18.859" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
2019-11-12 11:44:18,809 ERROR client.OzoneClientFactory: Couldn't create RpcClient protocol exception: 
INTERNAL_ERROR org.apache.hadoop.ozone.om.exceptions.OMException: DestHost:destPort scm:9860 , LocalHost:localPort om/172.18.0.7:0. Failed on local exception: java.io.IOException: javax.security.sasl.SaslException: GSS initiate failed [Caused by GSSException: No valid credentials provided (Mechanism level: Failed to find any Kerberos tgt)]
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.handleError(OzoneManagerProtocolClientSideTranslatorPB.java:758)
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.getServiceInfo(OzoneManagerProtocolClientSideTranslatorPB.java:1249)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.hadoop.hdds.tracing.TraceAllMethod.invoke(TraceAllMethod.java:66)
	at com.sun.proxy.$Proxy20.getServiceInfo(Unknown Source)
	at org.apache.hadoop.ozone.client.rpc.RpcClient.&lt;init&gt;(RpcClient.java:156)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:256)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:239)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getRpcClient(OzoneClientFactory.java:203)
	at org.apache.hadoop.ozone.web.ozShell.OzoneAddress.createClient(OzoneAddress.java:117)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:45)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:32)
	at picocli.CommandLine.execute(CommandLine.java:1173)
	at picocli.CommandLine.access$800(CommandLine.java:141)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1367)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1335)
	at picocli.CommandLine$AbstractParseResultHandler.handleParseResult(CommandLine.java:1243)
	at picocli.CommandLine.parseWithHandlers(CommandLine.java:1526)
	at picocli.CommandLine.parseWithHandler(CommandLine.java:1465)
	at org.apache.hadoop.hdds.cli.GenericCli.execute(GenericCli.java:65)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.execute(S3Shell.java:43)
	at org.apache.hadoop.hdds.cli.GenericCli.run(GenericCli.java:56)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.main(S3Shell.java:54)
Couldn't create RpcClient protocol</msg>
<status status="PASS" endtime="20191112 11:44:18.860" starttime="20191112 11:44:18.859"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:44:18.861" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191112 11:44:18.861" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191112 11:44:18.861" starttime="20191112 11:44:18.860"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:18.862" starttime="20191112 11:44:16.881"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:18.862" starttime="20191112 11:44:16.881"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:18.862" starttime="20191112 11:44:16.880"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:18.863" starttime="20191112 11:44:16.843"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:18.863" starttime="20191112 11:44:16.842"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:18.863" starttime="20191112 11:44:16.152"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:18.863" critical="yes" starttime="20191112 11:44:16.151">Setup failed:
255 != 0</status>
</test>
<test id="s1-s7-t4" name="Delete file with s3api, file doesn't exist, prefix of a real file">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:18.870" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:18.875" level="INFO">${rc} = 1</msg>
<msg timestamp="20191112 11:44:18.875" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191112 11:44:18.875" starttime="20191112 11:44:18.868"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191112 11:44:18.877" starttime="20191112 11:44:18.876"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:18.878" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:19.065" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:44:19.066" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191112 11:44:19.066" starttime="20191112 11:44:18.877"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:19.072" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:19.577" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:44:19.578" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.fileplanet.com
 * epel: mirrors.sonic.net
 * extras: mirror.keystealth.org
 * updates: mirrors.xtom.com
Pa...</msg>
<status status="PASS" endtime="20191112 11:44:19.578" starttime="20191112 11:44:19.070"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:44:19.580" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.fileplanet.com
 * epel: mirrors.sonic.net
 * extras: mirror.keystealth.org
 * updates: mirrors.xtom.com
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191112 11:44:19.580" starttime="20191112 11:44:19.579"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:44:19.581" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191112 11:44:19.581" starttime="20191112 11:44:19.580"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:19.582" starttime="20191112 11:44:19.069"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:19.582" starttime="20191112 11:44:19.068"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:19.582" starttime="20191112 11:44:19.067"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:19.582" starttime="20191112 11:44:18.867"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:19.583" starttime="20191112 11:44:18.867"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:19.590" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:19.596" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:44:19.596" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191112 11:44:19.597" starttime="20191112 11:44:19.588"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:44:19.598" level="INFO">s3g</msg>
<status status="PASS" endtime="20191112 11:44:19.598" starttime="20191112 11:44:19.597"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:44:19.599" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191112 11:44:19.599" starttime="20191112 11:44:19.598"></status>
</kw>
<msg timestamp="20191112 11:44:19.600" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191112 11:44:19.600" starttime="20191112 11:44:19.587"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191112 11:44:19.601" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191112 11:44:19.602" starttime="20191112 11:44:19.600"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:19.607" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:19.623" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:44:19.623" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191112 11:44:19.623" starttime="20191112 11:44:19.605"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:44:19.625" level="INFO"></msg>
<status status="PASS" endtime="20191112 11:44:19.625" starttime="20191112 11:44:19.624"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:44:19.626" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191112 11:44:19.626" starttime="20191112 11:44:19.625"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:19.627" starttime="20191112 11:44:19.604"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:19.627" starttime="20191112 11:44:19.602"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:19.627" starttime="20191112 11:44:19.586"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:19.627" starttime="20191112 11:44:19.585"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:19.631" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:21.618" level="INFO">${rc} = 255</msg>
<msg timestamp="20191112 11:44:21.618" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191112 11:44:21.619" starttime="20191112 11:44:19.629"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:44:21.621" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
2019-11-12 11:44:21,557 ERROR client.OzoneClientFactory: Couldn't create RpcClient protocol exception: 
INTERNAL_ERROR org.apache.hadoop.ozone.om.exceptions.OMException: DestHost:destPort scm:9860 , LocalHost:localPort om/172.18.0.7:0. Failed on local exception: java.io.IOException: javax.security.sasl.SaslException: GSS initiate failed [Caused by GSSException: No valid credentials provided (Mechanism level: Failed to find any Kerberos tgt)]
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.handleError(OzoneManagerProtocolClientSideTranslatorPB.java:758)
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.getServiceInfo(OzoneManagerProtocolClientSideTranslatorPB.java:1249)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.hadoop.hdds.tracing.TraceAllMethod.invoke(TraceAllMethod.java:66)
	at com.sun.proxy.$Proxy20.getServiceInfo(Unknown Source)
	at org.apache.hadoop.ozone.client.rpc.RpcClient.&lt;init&gt;(RpcClient.java:156)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:256)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:239)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getRpcClient(OzoneClientFactory.java:203)
	at org.apache.hadoop.ozone.web.ozShell.OzoneAddress.createClient(OzoneAddress.java:117)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:45)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:32)
	at picocli.CommandLine.execute(CommandLine.java:1173)
	at picocli.CommandLine.access$800(CommandLine.java:141)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1367)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1335)
	at picocli.CommandLine$AbstractParseResultHandler.handleParseResult(CommandLine.java:1243)
	at picocli.CommandLine.parseWithHandlers(CommandLine.java:1526)
	at picocli.CommandLine.parseWithHandler(CommandLine.java:1465)
	at org.apache.hadoop.hdds.cli.GenericCli.execute(GenericCli.java:65)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.execute(S3Shell.java:43)
	at org.apache.hadoop.hdds.cli.GenericCli.run(GenericCli.java:56)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.main(S3Shell.java:54)
Couldn't create RpcClient protocol</msg>
<status status="PASS" endtime="20191112 11:44:21.621" starttime="20191112 11:44:21.620"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:44:21.622" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191112 11:44:21.623" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191112 11:44:21.623" starttime="20191112 11:44:21.622"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:21.624" starttime="20191112 11:44:19.629"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:21.624" starttime="20191112 11:44:19.628"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:21.624" starttime="20191112 11:44:19.627"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:21.625" starttime="20191112 11:44:19.584"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:21.625" starttime="20191112 11:44:19.583"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:21.626" starttime="20191112 11:44:18.866"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:21.626" critical="yes" starttime="20191112 11:44:18.864">Setup failed:
255 != 0</status>
</test>
<test id="s1-s7-t5" name="Delete file with s3api, bucket doesn't exist">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:21.634" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:21.641" level="INFO">${rc} = 1</msg>
<msg timestamp="20191112 11:44:21.641" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191112 11:44:21.641" starttime="20191112 11:44:21.631"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191112 11:44:21.643" starttime="20191112 11:44:21.642"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:21.646" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:21.838" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:44:21.839" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191112 11:44:21.839" starttime="20191112 11:44:21.643"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:21.845" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:22.370" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:44:22.370" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.fileplanet.com
 * epel: mirrors.sonic.net
 * extras: mirror.keystealth.org
 * updates: mirrors.xtom.com
Pa...</msg>
<status status="PASS" endtime="20191112 11:44:22.370" starttime="20191112 11:44:21.842"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:44:22.372" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.fileplanet.com
 * epel: mirrors.sonic.net
 * extras: mirror.keystealth.org
 * updates: mirrors.xtom.com
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191112 11:44:22.372" starttime="20191112 11:44:22.371"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:44:22.374" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191112 11:44:22.374" starttime="20191112 11:44:22.373"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:22.374" starttime="20191112 11:44:21.842"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:22.375" starttime="20191112 11:44:21.841"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:22.375" starttime="20191112 11:44:21.840"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:22.375" starttime="20191112 11:44:21.631"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:22.375" starttime="20191112 11:44:21.630"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:22.383" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:22.390" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:44:22.390" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191112 11:44:22.390" starttime="20191112 11:44:22.380"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:44:22.392" level="INFO">s3g</msg>
<status status="PASS" endtime="20191112 11:44:22.392" starttime="20191112 11:44:22.391"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:44:22.393" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191112 11:44:22.393" starttime="20191112 11:44:22.392"></status>
</kw>
<msg timestamp="20191112 11:44:22.394" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191112 11:44:22.394" starttime="20191112 11:44:22.380"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191112 11:44:22.396" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191112 11:44:22.396" starttime="20191112 11:44:22.394"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:22.402" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:22.417" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:44:22.417" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191112 11:44:22.417" starttime="20191112 11:44:22.399"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:44:22.418" level="INFO"></msg>
<status status="PASS" endtime="20191112 11:44:22.419" starttime="20191112 11:44:22.418"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:44:22.419" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191112 11:44:22.420" starttime="20191112 11:44:22.419"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:22.420" starttime="20191112 11:44:22.398"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:22.420" starttime="20191112 11:44:22.396"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:22.421" starttime="20191112 11:44:22.379"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:22.421" starttime="20191112 11:44:22.378"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:22.426" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:24.440" level="INFO">${rc} = 255</msg>
<msg timestamp="20191112 11:44:24.440" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191112 11:44:24.441" starttime="20191112 11:44:22.424"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:44:24.442" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
2019-11-12 11:44:24,387 ERROR client.OzoneClientFactory: Couldn't create RpcClient protocol exception: 
INTERNAL_ERROR org.apache.hadoop.ozone.om.exceptions.OMException: DestHost:destPort scm:9860 , LocalHost:localPort om/172.18.0.7:0. Failed on local exception: java.io.IOException: javax.security.sasl.SaslException: GSS initiate failed [Caused by GSSException: No valid credentials provided (Mechanism level: Failed to find any Kerberos tgt)]
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.handleError(OzoneManagerProtocolClientSideTranslatorPB.java:758)
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.getServiceInfo(OzoneManagerProtocolClientSideTranslatorPB.java:1249)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.hadoop.hdds.tracing.TraceAllMethod.invoke(TraceAllMethod.java:66)
	at com.sun.proxy.$Proxy20.getServiceInfo(Unknown Source)
	at org.apache.hadoop.ozone.client.rpc.RpcClient.&lt;init&gt;(RpcClient.java:156)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:256)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:239)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getRpcClient(OzoneClientFactory.java:203)
	at org.apache.hadoop.ozone.web.ozShell.OzoneAddress.createClient(OzoneAddress.java:117)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:45)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:32)
	at picocli.CommandLine.execute(CommandLine.java:1173)
	at picocli.CommandLine.access$800(CommandLine.java:141)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1367)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1335)
	at picocli.CommandLine$AbstractParseResultHandler.handleParseResult(CommandLine.java:1243)
	at picocli.CommandLine.parseWithHandlers(CommandLine.java:1526)
	at picocli.CommandLine.parseWithHandler(CommandLine.java:1465)
	at org.apache.hadoop.hdds.cli.GenericCli.execute(GenericCli.java:65)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.execute(S3Shell.java:43)
	at org.apache.hadoop.hdds.cli.GenericCli.run(GenericCli.java:56)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.main(S3Shell.java:54)
Couldn't create RpcClient protocol</msg>
<status status="PASS" endtime="20191112 11:44:24.442" starttime="20191112 11:44:24.441"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:44:24.443" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191112 11:44:24.443" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191112 11:44:24.443" starttime="20191112 11:44:24.442"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:24.443" starttime="20191112 11:44:22.423"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:24.444" starttime="20191112 11:44:22.422"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:24.444" starttime="20191112 11:44:22.421"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:24.444" starttime="20191112 11:44:22.377"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:24.444" starttime="20191112 11:44:22.376"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:24.444" starttime="20191112 11:44:21.629"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:24.445" critical="yes" starttime="20191112 11:44:21.627">Setup failed:
255 != 0</status>
</test>
<doc>S3 gateway test with aws cli</doc>
<status status="FAIL" endtime="20191112 11:44:24.446" starttime="20191112 11:44:10.598"></status>
</suite>
<suite source="/opt/hadoop/smoketest/s3/objectmultidelete.robot" id="s1-s8" name="Objectmultidelete">
<test id="s1-s8-t1" name="Delete file with multi delete">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:24.461" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:24.465" level="INFO">${rc} = 1</msg>
<msg timestamp="20191112 11:44:24.465" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191112 11:44:24.465" starttime="20191112 11:44:24.459"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191112 11:44:24.467" starttime="20191112 11:44:24.466"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:24.469" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:24.660" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:44:24.660" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191112 11:44:24.660" starttime="20191112 11:44:24.468"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:24.667" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:25.192" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:44:25.192" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.fileplanet.com
 * epel: mirrors.sonic.net
 * extras: mirror.keystealth.org
 * updates: mirrors.xtom.com
Pa...</msg>
<status status="PASS" endtime="20191112 11:44:25.192" starttime="20191112 11:44:24.665"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:44:25.194" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.fileplanet.com
 * epel: mirrors.sonic.net
 * extras: mirror.keystealth.org
 * updates: mirrors.xtom.com
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191112 11:44:25.195" starttime="20191112 11:44:25.193"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:44:25.196" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191112 11:44:25.196" starttime="20191112 11:44:25.195"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:25.197" starttime="20191112 11:44:24.664"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:25.197" starttime="20191112 11:44:24.663"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:25.197" starttime="20191112 11:44:24.661"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:25.198" starttime="20191112 11:44:24.458"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:25.198" starttime="20191112 11:44:24.458"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:25.205" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:25.212" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:44:25.212" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191112 11:44:25.212" starttime="20191112 11:44:25.203"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:44:25.213" level="INFO">s3g</msg>
<status status="PASS" endtime="20191112 11:44:25.214" starttime="20191112 11:44:25.213"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:44:25.215" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191112 11:44:25.215" starttime="20191112 11:44:25.214"></status>
</kw>
<msg timestamp="20191112 11:44:25.215" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191112 11:44:25.216" starttime="20191112 11:44:25.202"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191112 11:44:25.219" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191112 11:44:25.219" starttime="20191112 11:44:25.216"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:25.224" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:25.240" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:44:25.241" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191112 11:44:25.241" starttime="20191112 11:44:25.221"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:44:25.242" level="INFO"></msg>
<status status="PASS" endtime="20191112 11:44:25.243" starttime="20191112 11:44:25.242"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:44:25.243" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191112 11:44:25.244" starttime="20191112 11:44:25.243"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:25.244" starttime="20191112 11:44:25.220"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:25.244" starttime="20191112 11:44:25.219"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:25.245" starttime="20191112 11:44:25.201"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:25.245" starttime="20191112 11:44:25.200"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:25.250" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:27.088" level="INFO">${rc} = 255</msg>
<msg timestamp="20191112 11:44:27.088" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191112 11:44:27.088" starttime="20191112 11:44:25.248"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:44:27.090" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
2019-11-12 11:44:27,035 ERROR client.OzoneClientFactory: Couldn't create RpcClient protocol exception: 
INTERNAL_ERROR org.apache.hadoop.ozone.om.exceptions.OMException: DestHost:destPort scm:9860 , LocalHost:localPort om/172.18.0.7:0. Failed on local exception: java.io.IOException: javax.security.sasl.SaslException: GSS initiate failed [Caused by GSSException: No valid credentials provided (Mechanism level: Failed to find any Kerberos tgt)]
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.handleError(OzoneManagerProtocolClientSideTranslatorPB.java:758)
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.getServiceInfo(OzoneManagerProtocolClientSideTranslatorPB.java:1249)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.hadoop.hdds.tracing.TraceAllMethod.invoke(TraceAllMethod.java:66)
	at com.sun.proxy.$Proxy20.getServiceInfo(Unknown Source)
	at org.apache.hadoop.ozone.client.rpc.RpcClient.&lt;init&gt;(RpcClient.java:156)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:256)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:239)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getRpcClient(OzoneClientFactory.java:203)
	at org.apache.hadoop.ozone.web.ozShell.OzoneAddress.createClient(OzoneAddress.java:117)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:45)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:32)
	at picocli.CommandLine.execute(CommandLine.java:1173)
	at picocli.CommandLine.access$800(CommandLine.java:141)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1367)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1335)
	at picocli.CommandLine$AbstractParseResultHandler.handleParseResult(CommandLine.java:1243)
	at picocli.CommandLine.parseWithHandlers(CommandLine.java:1526)
	at picocli.CommandLine.parseWithHandler(CommandLine.java:1465)
	at org.apache.hadoop.hdds.cli.GenericCli.execute(GenericCli.java:65)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.execute(S3Shell.java:43)
	at org.apache.hadoop.hdds.cli.GenericCli.run(GenericCli.java:56)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.main(S3Shell.java:54)
Couldn't create RpcClient protocol</msg>
<status status="PASS" endtime="20191112 11:44:27.090" starttime="20191112 11:44:27.089"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:44:27.094" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191112 11:44:27.095" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191112 11:44:27.095" starttime="20191112 11:44:27.091"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:27.095" starttime="20191112 11:44:25.247"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:27.096" starttime="20191112 11:44:25.246"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:27.096" starttime="20191112 11:44:25.245"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:27.096" starttime="20191112 11:44:25.199"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:27.096" starttime="20191112 11:44:25.198"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:27.097" starttime="20191112 11:44:24.457"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:27.097" critical="yes" starttime="20191112 11:44:24.457">Setup failed:
255 != 0</status>
</test>
<doc>S3 gateway test with aws cli</doc>
<status status="FAIL" endtime="20191112 11:44:27.098" starttime="20191112 11:44:24.449"></status>
</suite>
<suite source="/opt/hadoop/smoketest/s3/objectputget.robot" id="s1-s9" name="Objectputget">
<test id="s1-s9-t1" name="Put object to s3">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:27.119" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:27.125" level="INFO">${rc} = 1</msg>
<msg timestamp="20191112 11:44:27.126" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191112 11:44:27.126" starttime="20191112 11:44:27.116"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191112 11:44:27.127" starttime="20191112 11:44:27.126"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:27.129" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:27.293" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:44:27.293" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191112 11:44:27.293" starttime="20191112 11:44:27.128"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:27.297" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:27.792" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:44:27.792" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.fileplanet.com
 * epel: mirrors.sonic.net
 * extras: mirror.keystealth.org
 * updates: mirrors.xtom.com
Pa...</msg>
<status status="PASS" endtime="20191112 11:44:27.792" starttime="20191112 11:44:27.296"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:44:27.794" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.fileplanet.com
 * epel: mirrors.sonic.net
 * extras: mirror.keystealth.org
 * updates: mirrors.xtom.com
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191112 11:44:27.794" starttime="20191112 11:44:27.793"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:44:27.795" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191112 11:44:27.795" starttime="20191112 11:44:27.794"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:27.795" starttime="20191112 11:44:27.295"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:27.796" starttime="20191112 11:44:27.295"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:27.796" starttime="20191112 11:44:27.294"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:27.796" starttime="20191112 11:44:27.115"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:27.796" starttime="20191112 11:44:27.115"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:27.802" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:27.810" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:44:27.810" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191112 11:44:27.810" starttime="20191112 11:44:27.800"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:44:27.812" level="INFO">s3g</msg>
<status status="PASS" endtime="20191112 11:44:27.812" starttime="20191112 11:44:27.811"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:44:27.813" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191112 11:44:27.813" starttime="20191112 11:44:27.812"></status>
</kw>
<msg timestamp="20191112 11:44:27.814" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191112 11:44:27.814" starttime="20191112 11:44:27.799"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191112 11:44:27.817" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191112 11:44:27.817" starttime="20191112 11:44:27.815"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:27.822" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:27.852" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:44:27.852" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191112 11:44:27.853" starttime="20191112 11:44:27.820"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:44:27.855" level="INFO"></msg>
<status status="PASS" endtime="20191112 11:44:27.855" starttime="20191112 11:44:27.854"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:44:27.856" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191112 11:44:27.856" starttime="20191112 11:44:27.855"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:27.856" starttime="20191112 11:44:27.819"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:27.857" starttime="20191112 11:44:27.818"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:27.857" starttime="20191112 11:44:27.799"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:27.857" starttime="20191112 11:44:27.798"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:27.862" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:29.826" level="INFO">${rc} = 255</msg>
<msg timestamp="20191112 11:44:29.826" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191112 11:44:29.826" starttime="20191112 11:44:27.860"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:44:29.828" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
2019-11-12 11:44:29,714 ERROR client.OzoneClientFactory: Couldn't create RpcClient protocol exception: 
INTERNAL_ERROR org.apache.hadoop.ozone.om.exceptions.OMException: DestHost:destPort scm:9860 , LocalHost:localPort om/172.18.0.7:0. Failed on local exception: java.io.IOException: javax.security.sasl.SaslException: GSS initiate failed [Caused by GSSException: No valid credentials provided (Mechanism level: Failed to find any Kerberos tgt)]
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.handleError(OzoneManagerProtocolClientSideTranslatorPB.java:758)
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.getServiceInfo(OzoneManagerProtocolClientSideTranslatorPB.java:1249)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.hadoop.hdds.tracing.TraceAllMethod.invoke(TraceAllMethod.java:66)
	at com.sun.proxy.$Proxy20.getServiceInfo(Unknown Source)
	at org.apache.hadoop.ozone.client.rpc.RpcClient.&lt;init&gt;(RpcClient.java:156)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:256)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:239)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getRpcClient(OzoneClientFactory.java:203)
	at org.apache.hadoop.ozone.web.ozShell.OzoneAddress.createClient(OzoneAddress.java:117)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:45)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:32)
	at picocli.CommandLine.execute(CommandLine.java:1173)
	at picocli.CommandLine.access$800(CommandLine.java:141)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1367)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1335)
	at picocli.CommandLine$AbstractParseResultHandler.handleParseResult(CommandLine.java:1243)
	at picocli.CommandLine.parseWithHandlers(CommandLine.java:1526)
	at picocli.CommandLine.parseWithHandler(CommandLine.java:1465)
	at org.apache.hadoop.hdds.cli.GenericCli.execute(GenericCli.java:65)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.execute(S3Shell.java:43)
	at org.apache.hadoop.hdds.cli.GenericCli.run(GenericCli.java:56)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.main(S3Shell.java:54)
Couldn't create RpcClient protocol</msg>
<status status="PASS" endtime="20191112 11:44:29.828" starttime="20191112 11:44:29.827"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:44:29.830" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191112 11:44:29.831" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191112 11:44:29.831" starttime="20191112 11:44:29.829"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:29.832" starttime="20191112 11:44:27.859"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:29.832" starttime="20191112 11:44:27.858"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:29.832" starttime="20191112 11:44:27.857"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:29.832" starttime="20191112 11:44:27.797"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:29.833" starttime="20191112 11:44:27.796"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:29.833" starttime="20191112 11:44:27.114"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:29.834" critical="yes" starttime="20191112 11:44:27.113">Setup failed:
255 != 0</status>
</test>
<test id="s1-s9-t2" name="Get object from s3">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:29.840" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:29.845" level="INFO">${rc} = 1</msg>
<msg timestamp="20191112 11:44:29.846" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191112 11:44:29.846" starttime="20191112 11:44:29.838"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191112 11:44:29.847" starttime="20191112 11:44:29.846"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:29.849" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:30.026" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:44:30.026" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191112 11:44:30.026" starttime="20191112 11:44:29.848"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:30.033" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:30.530" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:44:30.530" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.fileplanet.com
 * epel: mirrors.sonic.net
 * extras: mirror.keystealth.org
 * updates: mirrors.xtom.com
Pa...</msg>
<status status="PASS" endtime="20191112 11:44:30.530" starttime="20191112 11:44:30.030"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:44:30.532" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.fileplanet.com
 * epel: mirrors.sonic.net
 * extras: mirror.keystealth.org
 * updates: mirrors.xtom.com
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191112 11:44:30.532" starttime="20191112 11:44:30.531"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:44:30.533" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191112 11:44:30.534" starttime="20191112 11:44:30.533"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:30.534" starttime="20191112 11:44:30.029"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:30.535" starttime="20191112 11:44:30.028"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:30.535" starttime="20191112 11:44:30.027"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:30.535" starttime="20191112 11:44:29.837"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:30.535" starttime="20191112 11:44:29.837"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:30.542" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:30.549" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:44:30.549" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191112 11:44:30.549" starttime="20191112 11:44:30.540"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:44:30.551" level="INFO">s3g</msg>
<status status="PASS" endtime="20191112 11:44:30.551" starttime="20191112 11:44:30.550"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:44:30.552" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191112 11:44:30.553" starttime="20191112 11:44:30.552"></status>
</kw>
<msg timestamp="20191112 11:44:30.553" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191112 11:44:30.553" starttime="20191112 11:44:30.539"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191112 11:44:30.555" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191112 11:44:30.555" starttime="20191112 11:44:30.554"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:30.560" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:30.577" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:44:30.577" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191112 11:44:30.578" starttime="20191112 11:44:30.558"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:44:30.579" level="INFO"></msg>
<status status="PASS" endtime="20191112 11:44:30.579" starttime="20191112 11:44:30.578"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:44:30.580" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191112 11:44:30.580" starttime="20191112 11:44:30.579"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:30.581" starttime="20191112 11:44:30.557"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:30.581" starttime="20191112 11:44:30.555"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:30.581" starttime="20191112 11:44:30.538"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:30.582" starttime="20191112 11:44:30.537"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:30.586" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:32.583" level="INFO">${rc} = 255</msg>
<msg timestamp="20191112 11:44:32.583" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191112 11:44:32.583" starttime="20191112 11:44:30.584"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:44:32.585" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
2019-11-12 11:44:32,519 ERROR client.OzoneClientFactory: Couldn't create RpcClient protocol exception: 
INTERNAL_ERROR org.apache.hadoop.ozone.om.exceptions.OMException: DestHost:destPort scm:9860 , LocalHost:localPort om/172.18.0.7:0. Failed on local exception: java.io.IOException: javax.security.sasl.SaslException: GSS initiate failed [Caused by GSSException: No valid credentials provided (Mechanism level: Failed to find any Kerberos tgt)]
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.handleError(OzoneManagerProtocolClientSideTranslatorPB.java:758)
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.getServiceInfo(OzoneManagerProtocolClientSideTranslatorPB.java:1249)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.hadoop.hdds.tracing.TraceAllMethod.invoke(TraceAllMethod.java:66)
	at com.sun.proxy.$Proxy20.getServiceInfo(Unknown Source)
	at org.apache.hadoop.ozone.client.rpc.RpcClient.&lt;init&gt;(RpcClient.java:156)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:256)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:239)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getRpcClient(OzoneClientFactory.java:203)
	at org.apache.hadoop.ozone.web.ozShell.OzoneAddress.createClient(OzoneAddress.java:117)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:45)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:32)
	at picocli.CommandLine.execute(CommandLine.java:1173)
	at picocli.CommandLine.access$800(CommandLine.java:141)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1367)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1335)
	at picocli.CommandLine$AbstractParseResultHandler.handleParseResult(CommandLine.java:1243)
	at picocli.CommandLine.parseWithHandlers(CommandLine.java:1526)
	at picocli.CommandLine.parseWithHandler(CommandLine.java:1465)
	at org.apache.hadoop.hdds.cli.GenericCli.execute(GenericCli.java:65)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.execute(S3Shell.java:43)
	at org.apache.hadoop.hdds.cli.GenericCli.run(GenericCli.java:56)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.main(S3Shell.java:54)
Couldn't create RpcClient protocol</msg>
<status status="PASS" endtime="20191112 11:44:32.586" starttime="20191112 11:44:32.584"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:44:32.587" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191112 11:44:32.587" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191112 11:44:32.587" starttime="20191112 11:44:32.586"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:32.588" starttime="20191112 11:44:30.583"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:32.588" starttime="20191112 11:44:30.583"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:32.589" starttime="20191112 11:44:30.582"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:32.589" starttime="20191112 11:44:30.537"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:32.589" starttime="20191112 11:44:30.536"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:32.590" starttime="20191112 11:44:29.836"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:32.590" critical="yes" starttime="20191112 11:44:29.834">Setup failed:
255 != 0</status>
</test>
<test id="s1-s9-t3" name="Get Partial object from s3 with both start and endoffset">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:32.597" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:32.604" level="INFO">${rc} = 1</msg>
<msg timestamp="20191112 11:44:32.604" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191112 11:44:32.604" starttime="20191112 11:44:32.594"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191112 11:44:32.606" starttime="20191112 11:44:32.605"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:32.609" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:32.811" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:44:32.811" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191112 11:44:32.811" starttime="20191112 11:44:32.607"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:32.818" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:33.375" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:44:33.375" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.fileplanet.com
 * epel: mirrors.sonic.net
 * extras: mirror.keystealth.org
 * updates: mirrors.xtom.com
Pa...</msg>
<status status="PASS" endtime="20191112 11:44:33.375" starttime="20191112 11:44:32.815"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:44:33.377" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.fileplanet.com
 * epel: mirrors.sonic.net
 * extras: mirror.keystealth.org
 * updates: mirrors.xtom.com
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191112 11:44:33.378" starttime="20191112 11:44:33.376"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:44:33.379" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191112 11:44:33.379" starttime="20191112 11:44:33.378"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:33.379" starttime="20191112 11:44:32.814"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:33.380" starttime="20191112 11:44:32.814"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:33.380" starttime="20191112 11:44:32.812"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:33.380" starttime="20191112 11:44:32.593"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:33.380" starttime="20191112 11:44:32.593"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:33.388" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:33.395" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:44:33.395" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191112 11:44:33.395" starttime="20191112 11:44:33.385"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:44:33.397" level="INFO">s3g</msg>
<status status="PASS" endtime="20191112 11:44:33.397" starttime="20191112 11:44:33.396"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:44:33.398" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191112 11:44:33.398" starttime="20191112 11:44:33.397"></status>
</kw>
<msg timestamp="20191112 11:44:33.399" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191112 11:44:33.399" starttime="20191112 11:44:33.385"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191112 11:44:33.400" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191112 11:44:33.400" starttime="20191112 11:44:33.399"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:33.405" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:33.422" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:44:33.422" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191112 11:44:33.422" starttime="20191112 11:44:33.403"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:44:33.423" level="INFO"></msg>
<status status="PASS" endtime="20191112 11:44:33.424" starttime="20191112 11:44:33.423"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:44:33.424" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191112 11:44:33.425" starttime="20191112 11:44:33.424"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:33.425" starttime="20191112 11:44:33.401"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:33.425" starttime="20191112 11:44:33.401"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:33.425" starttime="20191112 11:44:33.384"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:33.426" starttime="20191112 11:44:33.383"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:33.430" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:35.455" level="INFO">${rc} = 255</msg>
<msg timestamp="20191112 11:44:35.455" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191112 11:44:35.455" starttime="20191112 11:44:33.428"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:44:35.457" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
2019-11-12 11:44:35,385 ERROR client.OzoneClientFactory: Couldn't create RpcClient protocol exception: 
INTERNAL_ERROR org.apache.hadoop.ozone.om.exceptions.OMException: DestHost:destPort scm:9860 , LocalHost:localPort om/172.18.0.7:0. Failed on local exception: java.io.IOException: javax.security.sasl.SaslException: GSS initiate failed [Caused by GSSException: No valid credentials provided (Mechanism level: Failed to find any Kerberos tgt)]
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.handleError(OzoneManagerProtocolClientSideTranslatorPB.java:758)
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.getServiceInfo(OzoneManagerProtocolClientSideTranslatorPB.java:1249)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.hadoop.hdds.tracing.TraceAllMethod.invoke(TraceAllMethod.java:66)
	at com.sun.proxy.$Proxy20.getServiceInfo(Unknown Source)
	at org.apache.hadoop.ozone.client.rpc.RpcClient.&lt;init&gt;(RpcClient.java:156)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:256)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:239)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getRpcClient(OzoneClientFactory.java:203)
	at org.apache.hadoop.ozone.web.ozShell.OzoneAddress.createClient(OzoneAddress.java:117)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:45)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:32)
	at picocli.CommandLine.execute(CommandLine.java:1173)
	at picocli.CommandLine.access$800(CommandLine.java:141)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1367)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1335)
	at picocli.CommandLine$AbstractParseResultHandler.handleParseResult(CommandLine.java:1243)
	at picocli.CommandLine.parseWithHandlers(CommandLine.java:1526)
	at picocli.CommandLine.parseWithHandler(CommandLine.java:1465)
	at org.apache.hadoop.hdds.cli.GenericCli.execute(GenericCli.java:65)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.execute(S3Shell.java:43)
	at org.apache.hadoop.hdds.cli.GenericCli.run(GenericCli.java:56)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.main(S3Shell.java:54)
Couldn't create RpcClient protocol</msg>
<status status="PASS" endtime="20191112 11:44:35.457" starttime="20191112 11:44:35.456"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:44:35.458" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191112 11:44:35.459" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191112 11:44:35.459" starttime="20191112 11:44:35.458"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:35.460" starttime="20191112 11:44:33.427"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:35.460" starttime="20191112 11:44:33.427"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:35.460" starttime="20191112 11:44:33.426"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:35.461" starttime="20191112 11:44:33.382"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:35.461" starttime="20191112 11:44:33.381"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:35.461" starttime="20191112 11:44:32.592"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:35.462" critical="yes" starttime="20191112 11:44:32.591">Setup failed:
255 != 0</status>
</test>
<test id="s1-s9-t4" name="Get Partial object from s3 with both start and endoffset(start offset and endoffset is greater than file size)">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:35.469" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:35.475" level="INFO">${rc} = 1</msg>
<msg timestamp="20191112 11:44:35.476" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191112 11:44:35.476" starttime="20191112 11:44:35.466"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191112 11:44:35.478" starttime="20191112 11:44:35.477"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:35.480" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:35.675" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:44:35.675" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191112 11:44:35.676" starttime="20191112 11:44:35.478"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:35.682" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:36.240" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:44:36.240" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.fileplanet.com
 * epel: mirrors.sonic.net
 * extras: mirror.keystealth.org
 * updates: mirrors.xtom.com
Pa...</msg>
<status status="PASS" endtime="20191112 11:44:36.241" starttime="20191112 11:44:35.680"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:44:36.242" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.fileplanet.com
 * epel: mirrors.sonic.net
 * extras: mirror.keystealth.org
 * updates: mirrors.xtom.com
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191112 11:44:36.242" starttime="20191112 11:44:36.241"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:44:36.243" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191112 11:44:36.243" starttime="20191112 11:44:36.242"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:36.243" starttime="20191112 11:44:35.679"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:36.244" starttime="20191112 11:44:35.678"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:36.244" starttime="20191112 11:44:35.677"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:36.244" starttime="20191112 11:44:35.465"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:36.244" starttime="20191112 11:44:35.465"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:36.249" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:36.257" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:44:36.257" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191112 11:44:36.257" starttime="20191112 11:44:36.247"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:44:36.259" level="INFO">s3g</msg>
<status status="PASS" endtime="20191112 11:44:36.259" starttime="20191112 11:44:36.258"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:44:36.260" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191112 11:44:36.260" starttime="20191112 11:44:36.259"></status>
</kw>
<msg timestamp="20191112 11:44:36.261" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191112 11:44:36.261" starttime="20191112 11:44:36.247"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191112 11:44:36.262" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191112 11:44:36.262" starttime="20191112 11:44:36.261"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:36.268" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:36.284" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:44:36.284" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191112 11:44:36.284" starttime="20191112 11:44:36.266"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:44:36.285" level="INFO"></msg>
<status status="PASS" endtime="20191112 11:44:36.286" starttime="20191112 11:44:36.285"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:44:36.286" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191112 11:44:36.287" starttime="20191112 11:44:36.286"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:36.287" starttime="20191112 11:44:36.265"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:36.287" starttime="20191112 11:44:36.263"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:36.288" starttime="20191112 11:44:36.246"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:36.288" starttime="20191112 11:44:36.246"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:36.293" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:38.358" level="INFO">${rc} = 255</msg>
<msg timestamp="20191112 11:44:38.358" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191112 11:44:38.359" starttime="20191112 11:44:36.291"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:44:38.360" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
2019-11-12 11:44:38,250 ERROR client.OzoneClientFactory: Couldn't create RpcClient protocol exception: 
INTERNAL_ERROR org.apache.hadoop.ozone.om.exceptions.OMException: DestHost:destPort scm:9860 , LocalHost:localPort om/172.18.0.7:0. Failed on local exception: java.io.IOException: javax.security.sasl.SaslException: GSS initiate failed [Caused by GSSException: No valid credentials provided (Mechanism level: Failed to find any Kerberos tgt)]
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.handleError(OzoneManagerProtocolClientSideTranslatorPB.java:758)
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.getServiceInfo(OzoneManagerProtocolClientSideTranslatorPB.java:1249)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.hadoop.hdds.tracing.TraceAllMethod.invoke(TraceAllMethod.java:66)
	at com.sun.proxy.$Proxy20.getServiceInfo(Unknown Source)
	at org.apache.hadoop.ozone.client.rpc.RpcClient.&lt;init&gt;(RpcClient.java:156)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:256)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:239)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getRpcClient(OzoneClientFactory.java:203)
	at org.apache.hadoop.ozone.web.ozShell.OzoneAddress.createClient(OzoneAddress.java:117)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:45)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:32)
	at picocli.CommandLine.execute(CommandLine.java:1173)
	at picocli.CommandLine.access$800(CommandLine.java:141)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1367)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1335)
	at picocli.CommandLine$AbstractParseResultHandler.handleParseResult(CommandLine.java:1243)
	at picocli.CommandLine.parseWithHandlers(CommandLine.java:1526)
	at picocli.CommandLine.parseWithHandler(CommandLine.java:1465)
	at org.apache.hadoop.hdds.cli.GenericCli.execute(GenericCli.java:65)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.execute(S3Shell.java:43)
	at org.apache.hadoop.hdds.cli.GenericCli.run(GenericCli.java:56)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.main(S3Shell.java:54)
Couldn't create RpcClient protocol</msg>
<status status="PASS" endtime="20191112 11:44:38.360" starttime="20191112 11:44:38.359"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:44:38.361" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191112 11:44:38.361" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191112 11:44:38.361" starttime="20191112 11:44:38.360"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:38.361" starttime="20191112 11:44:36.290"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:38.362" starttime="20191112 11:44:36.289"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:38.362" starttime="20191112 11:44:36.288"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:38.362" starttime="20191112 11:44:36.245"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:38.362" starttime="20191112 11:44:36.244"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:38.362" starttime="20191112 11:44:35.464"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:38.363" critical="yes" starttime="20191112 11:44:35.462">Setup failed:
255 != 0</status>
</test>
<test id="s1-s9-t5" name="Get Partial object from s3 with both start and endoffset(end offset is greater than file size)">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:38.367" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:38.371" level="INFO">${rc} = 1</msg>
<msg timestamp="20191112 11:44:38.371" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191112 11:44:38.371" starttime="20191112 11:44:38.365"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191112 11:44:38.373" starttime="20191112 11:44:38.372"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:38.374" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:38.558" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:44:38.558" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191112 11:44:38.558" starttime="20191112 11:44:38.373"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:38.565" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:39.105" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:44:39.105" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.fileplanet.com
 * epel: mirrors.sonic.net
 * extras: mirror.keystealth.org
 * updates: mirrors.xtom.com
Pa...</msg>
<status status="PASS" endtime="20191112 11:44:39.106" starttime="20191112 11:44:38.563"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:44:39.107" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.fileplanet.com
 * epel: mirrors.sonic.net
 * extras: mirror.keystealth.org
 * updates: mirrors.xtom.com
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191112 11:44:39.108" starttime="20191112 11:44:39.106"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:44:39.109" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191112 11:44:39.109" starttime="20191112 11:44:39.108"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:39.110" starttime="20191112 11:44:38.562"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:39.110" starttime="20191112 11:44:38.561"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:39.110" starttime="20191112 11:44:38.559"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:39.110" starttime="20191112 11:44:38.365"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:39.111" starttime="20191112 11:44:38.364"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:39.118" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:39.125" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:44:39.125" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191112 11:44:39.125" starttime="20191112 11:44:39.115"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:44:39.127" level="INFO">s3g</msg>
<status status="PASS" endtime="20191112 11:44:39.127" starttime="20191112 11:44:39.126"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:44:39.128" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191112 11:44:39.128" starttime="20191112 11:44:39.127"></status>
</kw>
<msg timestamp="20191112 11:44:39.129" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191112 11:44:39.129" starttime="20191112 11:44:39.115"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191112 11:44:39.130" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191112 11:44:39.130" starttime="20191112 11:44:39.129"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:39.136" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:39.151" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:44:39.152" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191112 11:44:39.152" starttime="20191112 11:44:39.134"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:44:39.153" level="INFO"></msg>
<status status="PASS" endtime="20191112 11:44:39.153" starttime="20191112 11:44:39.152"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:44:39.154" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191112 11:44:39.154" starttime="20191112 11:44:39.154"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:39.155" starttime="20191112 11:44:39.133"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:39.155" starttime="20191112 11:44:39.131"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:39.155" starttime="20191112 11:44:39.114"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:39.156" starttime="20191112 11:44:39.113"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:39.160" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:41.074" level="INFO">${rc} = 255</msg>
<msg timestamp="20191112 11:44:41.074" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191112 11:44:41.075" starttime="20191112 11:44:39.158"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:44:41.076" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
2019-11-12 11:44:41,010 ERROR client.OzoneClientFactory: Couldn't create RpcClient protocol exception: 
INTERNAL_ERROR org.apache.hadoop.ozone.om.exceptions.OMException: DestHost:destPort scm:9860 , LocalHost:localPort om/172.18.0.7:0. Failed on local exception: java.io.IOException: javax.security.sasl.SaslException: GSS initiate failed [Caused by GSSException: No valid credentials provided (Mechanism level: Failed to find any Kerberos tgt)]
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.handleError(OzoneManagerProtocolClientSideTranslatorPB.java:758)
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.getServiceInfo(OzoneManagerProtocolClientSideTranslatorPB.java:1249)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.hadoop.hdds.tracing.TraceAllMethod.invoke(TraceAllMethod.java:66)
	at com.sun.proxy.$Proxy20.getServiceInfo(Unknown Source)
	at org.apache.hadoop.ozone.client.rpc.RpcClient.&lt;init&gt;(RpcClient.java:156)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:256)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:239)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getRpcClient(OzoneClientFactory.java:203)
	at org.apache.hadoop.ozone.web.ozShell.OzoneAddress.createClient(OzoneAddress.java:117)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:45)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:32)
	at picocli.CommandLine.execute(CommandLine.java:1173)
	at picocli.CommandLine.access$800(CommandLine.java:141)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1367)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1335)
	at picocli.CommandLine$AbstractParseResultHandler.handleParseResult(CommandLine.java:1243)
	at picocli.CommandLine.parseWithHandlers(CommandLine.java:1526)
	at picocli.CommandLine.parseWithHandler(CommandLine.java:1465)
	at org.apache.hadoop.hdds.cli.GenericCli.execute(GenericCli.java:65)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.execute(S3Shell.java:43)
	at org.apache.hadoop.hdds.cli.GenericCli.run(GenericCli.java:56)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.main(S3Shell.java:54)
Couldn't create RpcClient protocol</msg>
<status status="PASS" endtime="20191112 11:44:41.077" starttime="20191112 11:44:41.075"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:44:41.078" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191112 11:44:41.078" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191112 11:44:41.078" starttime="20191112 11:44:41.077"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:41.079" starttime="20191112 11:44:39.158"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:41.079" starttime="20191112 11:44:39.157"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:41.079" starttime="20191112 11:44:39.156"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:41.080" starttime="20191112 11:44:39.112"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:41.080" starttime="20191112 11:44:39.111"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:41.080" starttime="20191112 11:44:38.364"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:41.081" critical="yes" starttime="20191112 11:44:38.363">Setup failed:
255 != 0</status>
</test>
<test id="s1-s9-t6" name="Get Partial object from s3 with only start offset">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:41.087" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:41.093" level="INFO">${rc} = 1</msg>
<msg timestamp="20191112 11:44:41.093" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191112 11:44:41.093" starttime="20191112 11:44:41.085"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191112 11:44:41.095" starttime="20191112 11:44:41.094"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:41.097" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:41.284" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:44:41.284" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191112 11:44:41.284" starttime="20191112 11:44:41.095"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:41.289" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:41.766" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:44:41.766" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.fileplanet.com
 * epel: mirrors.sonic.net
 * extras: mirror.keystealth.org
 * updates: mirrors.xtom.com
Pa...</msg>
<status status="PASS" endtime="20191112 11:44:41.766" starttime="20191112 11:44:41.287"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:44:41.768" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.fileplanet.com
 * epel: mirrors.sonic.net
 * extras: mirror.keystealth.org
 * updates: mirrors.xtom.com
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191112 11:44:41.769" starttime="20191112 11:44:41.767"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:44:41.770" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191112 11:44:41.770" starttime="20191112 11:44:41.769"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:41.771" starttime="20191112 11:44:41.287"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:41.771" starttime="20191112 11:44:41.286"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:41.771" starttime="20191112 11:44:41.285"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:41.772" starttime="20191112 11:44:41.084"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:41.772" starttime="20191112 11:44:41.084"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:41.780" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:41.786" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:44:41.786" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191112 11:44:41.787" starttime="20191112 11:44:41.778"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:44:41.788" level="INFO">s3g</msg>
<status status="PASS" endtime="20191112 11:44:41.788" starttime="20191112 11:44:41.787"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:44:41.790" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191112 11:44:41.791" starttime="20191112 11:44:41.789"></status>
</kw>
<msg timestamp="20191112 11:44:41.791" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191112 11:44:41.791" starttime="20191112 11:44:41.777"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191112 11:44:41.793" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191112 11:44:41.793" starttime="20191112 11:44:41.792"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:41.797" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:41.815" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:44:41.815" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191112 11:44:41.815" starttime="20191112 11:44:41.795"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:44:41.816" level="INFO"></msg>
<status status="PASS" endtime="20191112 11:44:41.817" starttime="20191112 11:44:41.816"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:44:41.818" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191112 11:44:41.818" starttime="20191112 11:44:41.817"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:41.818" starttime="20191112 11:44:41.794"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:41.818" starttime="20191112 11:44:41.793"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:41.819" starttime="20191112 11:44:41.776"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:41.819" starttime="20191112 11:44:41.774"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:41.824" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:43.834" level="INFO">${rc} = 255</msg>
<msg timestamp="20191112 11:44:43.834" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191112 11:44:43.834" starttime="20191112 11:44:41.821"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:44:43.836" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
2019-11-12 11:44:43,777 ERROR client.OzoneClientFactory: Couldn't create RpcClient protocol exception: 
INTERNAL_ERROR org.apache.hadoop.ozone.om.exceptions.OMException: DestHost:destPort scm:9860 , LocalHost:localPort om/172.18.0.7:0. Failed on local exception: java.io.IOException: javax.security.sasl.SaslException: GSS initiate failed [Caused by GSSException: No valid credentials provided (Mechanism level: Failed to find any Kerberos tgt)]
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.handleError(OzoneManagerProtocolClientSideTranslatorPB.java:758)
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.getServiceInfo(OzoneManagerProtocolClientSideTranslatorPB.java:1249)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.hadoop.hdds.tracing.TraceAllMethod.invoke(TraceAllMethod.java:66)
	at com.sun.proxy.$Proxy20.getServiceInfo(Unknown Source)
	at org.apache.hadoop.ozone.client.rpc.RpcClient.&lt;init&gt;(RpcClient.java:156)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:256)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:239)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getRpcClient(OzoneClientFactory.java:203)
	at org.apache.hadoop.ozone.web.ozShell.OzoneAddress.createClient(OzoneAddress.java:117)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:45)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:32)
	at picocli.CommandLine.execute(CommandLine.java:1173)
	at picocli.CommandLine.access$800(CommandLine.java:141)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1367)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1335)
	at picocli.CommandLine$AbstractParseResultHandler.handleParseResult(CommandLine.java:1243)
	at picocli.CommandLine.parseWithHandlers(CommandLine.java:1526)
	at picocli.CommandLine.parseWithHandler(CommandLine.java:1465)
	at org.apache.hadoop.hdds.cli.GenericCli.execute(GenericCli.java:65)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.execute(S3Shell.java:43)
	at org.apache.hadoop.hdds.cli.GenericCli.run(GenericCli.java:56)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.main(S3Shell.java:54)
Couldn't create RpcClient protocol</msg>
<status status="PASS" endtime="20191112 11:44:43.836" starttime="20191112 11:44:43.835"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:44:43.837" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191112 11:44:43.838" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191112 11:44:43.838" starttime="20191112 11:44:43.837"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:43.839" starttime="20191112 11:44:41.821"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:43.839" starttime="20191112 11:44:41.820"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:43.839" starttime="20191112 11:44:41.819"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:43.839" starttime="20191112 11:44:41.773"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:43.839" starttime="20191112 11:44:41.772"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:43.840" starttime="20191112 11:44:41.083"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:43.840" critical="yes" starttime="20191112 11:44:41.082">Setup failed:
255 != 0</status>
</test>
<test id="s1-s9-t7" name="Get Partial object from s3 with both start and endoffset which are equal">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:43.846" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:43.852" level="INFO">${rc} = 1</msg>
<msg timestamp="20191112 11:44:43.853" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191112 11:44:43.853" starttime="20191112 11:44:43.844"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191112 11:44:43.854" starttime="20191112 11:44:43.853"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:43.857" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:44.028" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:44:44.029" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191112 11:44:44.029" starttime="20191112 11:44:43.855"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:44.036" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:44.523" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:44:44.523" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.fileplanet.com
 * epel: mirrors.sonic.net
 * extras: mirror.keystealth.org
 * updates: mirrors.xtom.com
Pa...</msg>
<status status="PASS" endtime="20191112 11:44:44.523" starttime="20191112 11:44:44.033"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:44:44.524" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.fileplanet.com
 * epel: mirrors.sonic.net
 * extras: mirror.keystealth.org
 * updates: mirrors.xtom.com
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191112 11:44:44.525" starttime="20191112 11:44:44.524"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:44:44.525" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191112 11:44:44.526" starttime="20191112 11:44:44.525"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:44.526" starttime="20191112 11:44:44.032"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:44.526" starttime="20191112 11:44:44.032"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:44.526" starttime="20191112 11:44:44.030"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:44.527" starttime="20191112 11:44:43.843"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:44.527" starttime="20191112 11:44:43.843"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:44.533" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:44.538" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:44:44.538" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191112 11:44:44.538" starttime="20191112 11:44:44.531"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:44:44.540" level="INFO">s3g</msg>
<status status="PASS" endtime="20191112 11:44:44.540" starttime="20191112 11:44:44.539"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:44:44.541" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191112 11:44:44.541" starttime="20191112 11:44:44.540"></status>
</kw>
<msg timestamp="20191112 11:44:44.541" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191112 11:44:44.541" starttime="20191112 11:44:44.530"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191112 11:44:44.543" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191112 11:44:44.543" starttime="20191112 11:44:44.542"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:44.547" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:44.558" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:44:44.558" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191112 11:44:44.558" starttime="20191112 11:44:44.545"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:44:44.559" level="INFO"></msg>
<status status="PASS" endtime="20191112 11:44:44.559" starttime="20191112 11:44:44.558"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:44:44.560" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191112 11:44:44.560" starttime="20191112 11:44:44.559"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:44.561" starttime="20191112 11:44:44.544"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:44.561" starttime="20191112 11:44:44.543"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:44.561" starttime="20191112 11:44:44.529"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:44.561" starttime="20191112 11:44:44.529"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:44.565" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:46.594" level="INFO">${rc} = 255</msg>
<msg timestamp="20191112 11:44:46.595" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191112 11:44:46.595" starttime="20191112 11:44:44.563"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:44:46.597" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
2019-11-12 11:44:46,547 ERROR client.OzoneClientFactory: Couldn't create RpcClient protocol exception: 
INTERNAL_ERROR org.apache.hadoop.ozone.om.exceptions.OMException: DestHost:destPort scm:9860 , LocalHost:localPort om/172.18.0.7:0. Failed on local exception: java.io.IOException: javax.security.sasl.SaslException: GSS initiate failed [Caused by GSSException: No valid credentials provided (Mechanism level: Failed to find any Kerberos tgt)]
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.handleError(OzoneManagerProtocolClientSideTranslatorPB.java:758)
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.getServiceInfo(OzoneManagerProtocolClientSideTranslatorPB.java:1249)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.hadoop.hdds.tracing.TraceAllMethod.invoke(TraceAllMethod.java:66)
	at com.sun.proxy.$Proxy20.getServiceInfo(Unknown Source)
	at org.apache.hadoop.ozone.client.rpc.RpcClient.&lt;init&gt;(RpcClient.java:156)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:256)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:239)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getRpcClient(OzoneClientFactory.java:203)
	at org.apache.hadoop.ozone.web.ozShell.OzoneAddress.createClient(OzoneAddress.java:117)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:45)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:32)
	at picocli.CommandLine.execute(CommandLine.java:1173)
	at picocli.CommandLine.access$800(CommandLine.java:141)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1367)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1335)
	at picocli.CommandLine$AbstractParseResultHandler.handleParseResult(CommandLine.java:1243)
	at picocli.CommandLine.parseWithHandlers(CommandLine.java:1526)
	at picocli.CommandLine.parseWithHandler(CommandLine.java:1465)
	at org.apache.hadoop.hdds.cli.GenericCli.execute(GenericCli.java:65)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.execute(S3Shell.java:43)
	at org.apache.hadoop.hdds.cli.GenericCli.run(GenericCli.java:56)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.main(S3Shell.java:54)
Couldn't create RpcClient protocol</msg>
<status status="PASS" endtime="20191112 11:44:46.597" starttime="20191112 11:44:46.596"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:44:46.598" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191112 11:44:46.599" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191112 11:44:46.599" starttime="20191112 11:44:46.597"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:46.600" starttime="20191112 11:44:44.563"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:46.600" starttime="20191112 11:44:44.562"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:46.600" starttime="20191112 11:44:44.561"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:46.601" starttime="20191112 11:44:44.528"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:46.601" starttime="20191112 11:44:44.527"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:46.601" starttime="20191112 11:44:43.842"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:46.602" critical="yes" starttime="20191112 11:44:43.841">Setup failed:
255 != 0</status>
</test>
<test id="s1-s9-t8" name="Get Partial object from s3 to get last n bytes">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:46.608" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:46.614" level="INFO">${rc} = 1</msg>
<msg timestamp="20191112 11:44:46.615" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191112 11:44:46.615" starttime="20191112 11:44:46.606"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191112 11:44:46.616" starttime="20191112 11:44:46.615"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:46.619" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:46.817" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:44:46.817" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191112 11:44:46.817" starttime="20191112 11:44:46.617"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:46.824" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:47.320" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:44:47.320" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.fileplanet.com
 * epel: mirrors.sonic.net
 * extras: mirror.keystealth.org
 * updates: mirrors.xtom.com
Pa...</msg>
<status status="PASS" endtime="20191112 11:44:47.320" starttime="20191112 11:44:46.821"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:44:47.322" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.fileplanet.com
 * epel: mirrors.sonic.net
 * extras: mirror.keystealth.org
 * updates: mirrors.xtom.com
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191112 11:44:47.322" starttime="20191112 11:44:47.321"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:44:47.323" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191112 11:44:47.323" starttime="20191112 11:44:47.322"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:47.324" starttime="20191112 11:44:46.820"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:47.324" starttime="20191112 11:44:46.820"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:47.324" starttime="20191112 11:44:46.818"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:47.325" starttime="20191112 11:44:46.605"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:47.325" starttime="20191112 11:44:46.604"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:47.333" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:47.338" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:44:47.338" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191112 11:44:47.339" starttime="20191112 11:44:47.331"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:44:47.340" level="INFO">s3g</msg>
<status status="PASS" endtime="20191112 11:44:47.340" starttime="20191112 11:44:47.339"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:44:47.341" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191112 11:44:47.342" starttime="20191112 11:44:47.341"></status>
</kw>
<msg timestamp="20191112 11:44:47.342" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191112 11:44:47.342" starttime="20191112 11:44:47.329"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191112 11:44:47.344" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191112 11:44:47.344" starttime="20191112 11:44:47.342"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:47.348" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:47.361" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:44:47.361" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191112 11:44:47.361" starttime="20191112 11:44:47.346"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:44:47.362" level="INFO"></msg>
<status status="PASS" endtime="20191112 11:44:47.363" starttime="20191112 11:44:47.362"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:44:47.363" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191112 11:44:47.364" starttime="20191112 11:44:47.363"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:47.364" starttime="20191112 11:44:47.345"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:47.364" starttime="20191112 11:44:47.344"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:47.364" starttime="20191112 11:44:47.328"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:47.365" starttime="20191112 11:44:47.327"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:47.369" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:49.423" level="INFO">${rc} = 255</msg>
<msg timestamp="20191112 11:44:49.423" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191112 11:44:49.423" starttime="20191112 11:44:47.367"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:44:49.425" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
2019-11-12 11:44:49,377 ERROR client.OzoneClientFactory: Couldn't create RpcClient protocol exception: 
INTERNAL_ERROR org.apache.hadoop.ozone.om.exceptions.OMException: DestHost:destPort scm:9860 , LocalHost:localPort om/172.18.0.7:0. Failed on local exception: java.io.IOException: javax.security.sasl.SaslException: GSS initiate failed [Caused by GSSException: No valid credentials provided (Mechanism level: Failed to find any Kerberos tgt)]
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.handleError(OzoneManagerProtocolClientSideTranslatorPB.java:758)
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.getServiceInfo(OzoneManagerProtocolClientSideTranslatorPB.java:1249)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.hadoop.hdds.tracing.TraceAllMethod.invoke(TraceAllMethod.java:66)
	at com.sun.proxy.$Proxy20.getServiceInfo(Unknown Source)
	at org.apache.hadoop.ozone.client.rpc.RpcClient.&lt;init&gt;(RpcClient.java:156)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:256)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:239)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getRpcClient(OzoneClientFactory.java:203)
	at org.apache.hadoop.ozone.web.ozShell.OzoneAddress.createClient(OzoneAddress.java:117)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:45)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:32)
	at picocli.CommandLine.execute(CommandLine.java:1173)
	at picocli.CommandLine.access$800(CommandLine.java:141)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1367)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1335)
	at picocli.CommandLine$AbstractParseResultHandler.handleParseResult(CommandLine.java:1243)
	at picocli.CommandLine.parseWithHandlers(CommandLine.java:1526)
	at picocli.CommandLine.parseWithHandler(CommandLine.java:1465)
	at org.apache.hadoop.hdds.cli.GenericCli.execute(GenericCli.java:65)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.execute(S3Shell.java:43)
	at org.apache.hadoop.hdds.cli.GenericCli.run(GenericCli.java:56)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.main(S3Shell.java:54)
Couldn't create RpcClient protocol</msg>
<status status="PASS" endtime="20191112 11:44:49.425" starttime="20191112 11:44:49.424"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:44:49.426" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191112 11:44:49.426" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191112 11:44:49.427" starttime="20191112 11:44:49.425"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:49.427" starttime="20191112 11:44:47.366"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:49.427" starttime="20191112 11:44:47.366"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:49.427" starttime="20191112 11:44:47.365"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:49.428" starttime="20191112 11:44:47.326"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:49.428" starttime="20191112 11:44:47.325"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:49.428" starttime="20191112 11:44:46.604"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:49.429" critical="yes" starttime="20191112 11:44:46.602">Setup failed:
255 != 0</status>
</test>
<test id="s1-s9-t9" name="Incorrect values for end and start offset">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:49.434" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:49.441" level="INFO">${rc} = 1</msg>
<msg timestamp="20191112 11:44:49.442" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191112 11:44:49.442" starttime="20191112 11:44:49.432"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191112 11:44:49.444" starttime="20191112 11:44:49.443"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:49.446" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:49.661" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:44:49.661" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191112 11:44:49.661" starttime="20191112 11:44:49.444"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:49.667" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:50.203" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:44:50.203" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.fileplanet.com
 * epel: mirrors.sonic.net
 * extras: mirror.keystealth.org
 * updates: mirrors.xtom.com
Pa...</msg>
<status status="PASS" endtime="20191112 11:44:50.203" starttime="20191112 11:44:49.665"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:44:50.205" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.fileplanet.com
 * epel: mirrors.sonic.net
 * extras: mirror.keystealth.org
 * updates: mirrors.xtom.com
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191112 11:44:50.205" starttime="20191112 11:44:50.204"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:44:50.205" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191112 11:44:50.205" starttime="20191112 11:44:50.205"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:50.206" starttime="20191112 11:44:49.664"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:50.206" starttime="20191112 11:44:49.663"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:50.206" starttime="20191112 11:44:49.662"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:50.206" starttime="20191112 11:44:49.432"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:50.206" starttime="20191112 11:44:49.431"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:50.212" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:50.219" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:44:50.219" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191112 11:44:50.219" starttime="20191112 11:44:50.210"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:44:50.221" level="INFO">s3g</msg>
<status status="PASS" endtime="20191112 11:44:50.221" starttime="20191112 11:44:50.220"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:44:50.222" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191112 11:44:50.223" starttime="20191112 11:44:50.222"></status>
</kw>
<msg timestamp="20191112 11:44:50.223" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191112 11:44:50.223" starttime="20191112 11:44:50.209"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191112 11:44:50.225" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191112 11:44:50.225" starttime="20191112 11:44:50.224"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:50.230" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:50.245" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:44:50.245" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191112 11:44:50.246" starttime="20191112 11:44:50.228"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:44:50.247" level="INFO"></msg>
<status status="PASS" endtime="20191112 11:44:50.248" starttime="20191112 11:44:50.246"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:44:50.249" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191112 11:44:50.249" starttime="20191112 11:44:50.248"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:50.249" starttime="20191112 11:44:50.227"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:50.250" starttime="20191112 11:44:50.226"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:50.250" starttime="20191112 11:44:50.208"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:50.250" starttime="20191112 11:44:50.208"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:50.255" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:52.333" level="INFO">${rc} = 255</msg>
<msg timestamp="20191112 11:44:52.333" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191112 11:44:52.334" starttime="20191112 11:44:50.253"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:44:52.336" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
2019-11-12 11:44:52,245 ERROR client.OzoneClientFactory: Couldn't create RpcClient protocol exception: 
INTERNAL_ERROR org.apache.hadoop.ozone.om.exceptions.OMException: DestHost:destPort scm:9860 , LocalHost:localPort om/172.18.0.7:0. Failed on local exception: java.io.IOException: javax.security.sasl.SaslException: GSS initiate failed [Caused by GSSException: No valid credentials provided (Mechanism level: Failed to find any Kerberos tgt)]
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.handleError(OzoneManagerProtocolClientSideTranslatorPB.java:758)
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.getServiceInfo(OzoneManagerProtocolClientSideTranslatorPB.java:1249)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.hadoop.hdds.tracing.TraceAllMethod.invoke(TraceAllMethod.java:66)
	at com.sun.proxy.$Proxy20.getServiceInfo(Unknown Source)
	at org.apache.hadoop.ozone.client.rpc.RpcClient.&lt;init&gt;(RpcClient.java:156)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:256)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:239)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getRpcClient(OzoneClientFactory.java:203)
	at org.apache.hadoop.ozone.web.ozShell.OzoneAddress.createClient(OzoneAddress.java:117)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:45)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:32)
	at picocli.CommandLine.execute(CommandLine.java:1173)
	at picocli.CommandLine.access$800(CommandLine.java:141)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1367)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1335)
	at picocli.CommandLine$AbstractParseResultHandler.handleParseResult(CommandLine.java:1243)
	at picocli.CommandLine.parseWithHandlers(CommandLine.java:1526)
	at picocli.CommandLine.parseWithHandler(CommandLine.java:1465)
	at org.apache.hadoop.hdds.cli.GenericCli.execute(GenericCli.java:65)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.execute(S3Shell.java:43)
	at org.apache.hadoop.hdds.cli.GenericCli.run(GenericCli.java:56)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.main(S3Shell.java:54)
Couldn't create RpcClient protocol</msg>
<status status="PASS" endtime="20191112 11:44:52.337" starttime="20191112 11:44:52.335"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:44:52.338" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191112 11:44:52.339" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191112 11:44:52.339" starttime="20191112 11:44:52.337"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:52.340" starttime="20191112 11:44:50.252"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:52.341" starttime="20191112 11:44:50.252"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:52.341" starttime="20191112 11:44:50.251"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:52.341" starttime="20191112 11:44:50.207"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:52.341" starttime="20191112 11:44:50.207"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:52.342" starttime="20191112 11:44:49.430"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:52.343" critical="yes" starttime="20191112 11:44:49.429">Setup failed:
255 != 0</status>
</test>
<test id="s1-s9-t10" name="Zero byte file">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:52.350" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:52.355" level="INFO">${rc} = 1</msg>
<msg timestamp="20191112 11:44:52.355" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191112 11:44:52.355" starttime="20191112 11:44:52.347"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191112 11:44:52.357" starttime="20191112 11:44:52.356"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:52.358" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:52.536" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:44:52.537" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191112 11:44:52.537" starttime="20191112 11:44:52.357"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:52.543" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:53.100" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:44:53.100" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.fileplanet.com
 * epel: mirrors.sonic.net
 * extras: mirror.keystealth.org
 * updates: mirrors.xtom.com
Pa...</msg>
<status status="PASS" endtime="20191112 11:44:53.100" starttime="20191112 11:44:52.541"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:44:53.102" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.fileplanet.com
 * epel: mirrors.sonic.net
 * extras: mirror.keystealth.org
 * updates: mirrors.xtom.com
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191112 11:44:53.102" starttime="20191112 11:44:53.101"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:44:53.103" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191112 11:44:53.103" starttime="20191112 11:44:53.102"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:53.104" starttime="20191112 11:44:52.540"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:53.104" starttime="20191112 11:44:52.539"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:53.104" starttime="20191112 11:44:52.538"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:53.105" starttime="20191112 11:44:52.347"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:53.105" starttime="20191112 11:44:52.346"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:53.113" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:53.120" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:44:53.120" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191112 11:44:53.120" starttime="20191112 11:44:53.110"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:44:53.122" level="INFO">s3g</msg>
<status status="PASS" endtime="20191112 11:44:53.122" starttime="20191112 11:44:53.121"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:44:53.123" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191112 11:44:53.123" starttime="20191112 11:44:53.122"></status>
</kw>
<msg timestamp="20191112 11:44:53.124" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191112 11:44:53.124" starttime="20191112 11:44:53.110"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191112 11:44:53.125" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191112 11:44:53.126" starttime="20191112 11:44:53.124"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:53.130" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:53.147" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:44:53.147" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191112 11:44:53.147" starttime="20191112 11:44:53.128"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:44:53.149" level="INFO"></msg>
<status status="PASS" endtime="20191112 11:44:53.149" starttime="20191112 11:44:53.148"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:44:53.150" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191112 11:44:53.150" starttime="20191112 11:44:53.149"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:53.151" starttime="20191112 11:44:53.127"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:53.151" starttime="20191112 11:44:53.126"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:53.151" starttime="20191112 11:44:53.108"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:53.151" starttime="20191112 11:44:53.107"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:53.156" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:55.099" level="INFO">${rc} = 255</msg>
<msg timestamp="20191112 11:44:55.100" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191112 11:44:55.100" starttime="20191112 11:44:53.154"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:44:55.102" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
2019-11-12 11:44:55,049 ERROR client.OzoneClientFactory: Couldn't create RpcClient protocol exception: 
INTERNAL_ERROR org.apache.hadoop.ozone.om.exceptions.OMException: DestHost:destPort scm:9860 , LocalHost:localPort om/172.18.0.7:0. Failed on local exception: java.io.IOException: javax.security.sasl.SaslException: GSS initiate failed [Caused by GSSException: No valid credentials provided (Mechanism level: Failed to find any Kerberos tgt)]
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.handleError(OzoneManagerProtocolClientSideTranslatorPB.java:758)
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.getServiceInfo(OzoneManagerProtocolClientSideTranslatorPB.java:1249)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.hadoop.hdds.tracing.TraceAllMethod.invoke(TraceAllMethod.java:66)
	at com.sun.proxy.$Proxy20.getServiceInfo(Unknown Source)
	at org.apache.hadoop.ozone.client.rpc.RpcClient.&lt;init&gt;(RpcClient.java:156)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:256)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:239)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getRpcClient(OzoneClientFactory.java:203)
	at org.apache.hadoop.ozone.web.ozShell.OzoneAddress.createClient(OzoneAddress.java:117)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:45)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:32)
	at picocli.CommandLine.execute(CommandLine.java:1173)
	at picocli.CommandLine.access$800(CommandLine.java:141)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1367)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1335)
	at picocli.CommandLine$AbstractParseResultHandler.handleParseResult(CommandLine.java:1243)
	at picocli.CommandLine.parseWithHandlers(CommandLine.java:1526)
	at picocli.CommandLine.parseWithHandler(CommandLine.java:1465)
	at org.apache.hadoop.hdds.cli.GenericCli.execute(GenericCli.java:65)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.execute(S3Shell.java:43)
	at org.apache.hadoop.hdds.cli.GenericCli.run(GenericCli.java:56)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.main(S3Shell.java:54)
Couldn't create RpcClient protocol</msg>
<status status="PASS" endtime="20191112 11:44:55.102" starttime="20191112 11:44:55.101"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:44:55.103" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191112 11:44:55.104" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191112 11:44:55.104" starttime="20191112 11:44:55.102"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:55.104" starttime="20191112 11:44:53.153"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:55.105" starttime="20191112 11:44:53.153"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:55.105" starttime="20191112 11:44:53.152"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:55.105" starttime="20191112 11:44:53.106"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:55.105" starttime="20191112 11:44:53.105"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:55.106" starttime="20191112 11:44:52.345"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:55.106" critical="yes" starttime="20191112 11:44:52.344">Setup failed:
255 != 0</status>
</test>
<doc>S3 gateway test with aws cli</doc>
<status status="FAIL" endtime="20191112 11:44:55.109" starttime="20191112 11:44:27.101"></status>
</suite>
<suite source="/opt/hadoop/smoketest/s3/webui.robot" id="s1-s10" name="Webui">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:55.131" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:55.137" level="INFO">${rc} = 1</msg>
<msg timestamp="20191112 11:44:55.137" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191112 11:44:55.137" starttime="20191112 11:44:55.129"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191112 11:44:55.139" starttime="20191112 11:44:55.138"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:55.140" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:55.323" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:44:55.324" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191112 11:44:55.324" starttime="20191112 11:44:55.139"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:55.330" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:55.897" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:44:55.897" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.fileplanet.com
 * epel: mirrors.sonic.net
 * extras: mirror.keystealth.org
 * updates: mirrors.xtom.com
Pa...</msg>
<status status="PASS" endtime="20191112 11:44:55.897" starttime="20191112 11:44:55.327"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:44:55.898" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.fileplanet.com
 * epel: mirrors.sonic.net
 * extras: mirror.keystealth.org
 * updates: mirrors.xtom.com
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191112 11:44:55.899" starttime="20191112 11:44:55.898"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:44:55.900" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191112 11:44:55.900" starttime="20191112 11:44:55.899"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:55.900" starttime="20191112 11:44:55.327"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:55.900" starttime="20191112 11:44:55.326"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:55.901" starttime="20191112 11:44:55.325"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:55.901" starttime="20191112 11:44:55.129"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:55.901" starttime="20191112 11:44:55.127"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:55.907" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:55.914" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:44:55.914" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191112 11:44:55.914" starttime="20191112 11:44:55.905"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:44:55.916" level="INFO">s3g</msg>
<status status="PASS" endtime="20191112 11:44:55.916" starttime="20191112 11:44:55.915"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:44:55.917" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191112 11:44:55.917" starttime="20191112 11:44:55.916"></status>
</kw>
<msg timestamp="20191112 11:44:55.918" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191112 11:44:55.918" starttime="20191112 11:44:55.904"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191112 11:44:55.921" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191112 11:44:55.921" starttime="20191112 11:44:55.918"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:55.926" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:55.952" level="INFO">${rc} = 0</msg>
<msg timestamp="20191112 11:44:55.953" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191112 11:44:55.953" starttime="20191112 11:44:55.924"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:44:55.954" level="INFO"></msg>
<status status="PASS" endtime="20191112 11:44:55.955" starttime="20191112 11:44:55.954"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:44:55.956" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191112 11:44:55.956" starttime="20191112 11:44:55.955"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:55.957" starttime="20191112 11:44:55.923"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:55.957" starttime="20191112 11:44:55.922"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:55.957" starttime="20191112 11:44:55.904"></status>
</kw>
<status status="PASS" endtime="20191112 11:44:55.957" starttime="20191112 11:44:55.903"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191112 11:44:55.963" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191112 11:44:57.890" level="INFO">${rc} = 255</msg>
<msg timestamp="20191112 11:44:57.890" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191112 11:44:57.890" starttime="20191112 11:44:55.961"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191112 11:44:57.891" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
2019-11-12 11:44:57,779 ERROR client.OzoneClientFactory: Couldn't create RpcClient protocol exception: 
INTERNAL_ERROR org.apache.hadoop.ozone.om.exceptions.OMException: DestHost:destPort scm:9860 , LocalHost:localPort om/172.18.0.7:0. Failed on local exception: java.io.IOException: javax.security.sasl.SaslException: GSS initiate failed [Caused by GSSException: No valid credentials provided (Mechanism level: Failed to find any Kerberos tgt)]
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.handleError(OzoneManagerProtocolClientSideTranslatorPB.java:758)
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.getServiceInfo(OzoneManagerProtocolClientSideTranslatorPB.java:1249)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.hadoop.hdds.tracing.TraceAllMethod.invoke(TraceAllMethod.java:66)
	at com.sun.proxy.$Proxy20.getServiceInfo(Unknown Source)
	at org.apache.hadoop.ozone.client.rpc.RpcClient.&lt;init&gt;(RpcClient.java:156)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:256)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:239)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getRpcClient(OzoneClientFactory.java:203)
	at org.apache.hadoop.ozone.web.ozShell.OzoneAddress.createClient(OzoneAddress.java:117)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:45)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:32)
	at picocli.CommandLine.execute(CommandLine.java:1173)
	at picocli.CommandLine.access$800(CommandLine.java:141)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1367)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1335)
	at picocli.CommandLine$AbstractParseResultHandler.handleParseResult(CommandLine.java:1243)
	at picocli.CommandLine.parseWithHandlers(CommandLine.java:1526)
	at picocli.CommandLine.parseWithHandler(CommandLine.java:1465)
	at org.apache.hadoop.hdds.cli.GenericCli.execute(GenericCli.java:65)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.execute(S3Shell.java:43)
	at org.apache.hadoop.hdds.cli.GenericCli.run(GenericCli.java:56)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.main(S3Shell.java:54)
Couldn't create RpcClient protocol</msg>
<status status="PASS" endtime="20191112 11:44:57.892" starttime="20191112 11:44:57.890"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191112 11:44:57.892" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191112 11:44:57.893" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191112 11:44:57.893" starttime="20191112 11:44:57.892"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:57.893" starttime="20191112 11:44:55.959"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:57.893" starttime="20191112 11:44:55.959"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:57.893" starttime="20191112 11:44:55.958"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:57.894" starttime="20191112 11:44:55.902"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:57.894" starttime="20191112 11:44:55.901"></status>
</kw>
<status status="FAIL" endtime="20191112 11:44:57.894" starttime="20191112 11:44:55.127"></status>
</kw>
<test id="s1-s10-t1" name="S3 Gateway Web UI">
<status status="FAIL" endtime="20191112 11:44:57.895" critical="yes" starttime="20191112 11:44:57.894">Parent suite setup failed:
255 != 0</status>
</test>
<doc>S3 gateway web ui test</doc>
<status status="FAIL" endtime="20191112 11:44:57.896" starttime="20191112 11:44:55.117">Suite setup failed:
255 != 0</status>
</suite>
<status status="FAIL" endtime="20191112 11:44:57.903" starttime="20191112 11:42:42.751"></status>
</suite>
<statistics>
<total>
<stat fail="37" pass="0">Critical Tests</stat>
<stat fail="37" pass="0">All Tests</stat>
</total>
<tag>
</tag>
<suite>
<stat fail="37" id="s1" name="ozonesecure-s3" pass="0">ozonesecure-s3</stat>
<stat fail="1" id="s1-s1" name="Awss3" pass="0">ozonesecure-s3.Awss3</stat>
<stat fail="1" id="s1-s2" name="Bucketcreate" pass="0">ozonesecure-s3.Bucketcreate</stat>
<stat fail="1" id="s1-s3" name="Buckethead" pass="0">ozonesecure-s3.Buckethead</stat>
<stat fail="1" id="s1-s4" name="Bucketlist" pass="0">ozonesecure-s3.Bucketlist</stat>
<stat fail="12" id="s1-s5" name="MultipartUpload" pass="0">ozonesecure-s3.MultipartUpload</stat>
<stat fail="4" id="s1-s6" name="Objectcopy" pass="0">ozonesecure-s3.Objectcopy</stat>
<stat fail="5" id="s1-s7" name="Objectdelete" pass="0">ozonesecure-s3.Objectdelete</stat>
<stat fail="1" id="s1-s8" name="Objectmultidelete" pass="0">ozonesecure-s3.Objectmultidelete</stat>
<stat fail="10" id="s1-s9" name="Objectputget" pass="0">ozonesecure-s3.Objectputget</stat>
<stat fail="1" id="s1-s10" name="Webui" pass="0">ozonesecure-s3.Webui</stat>
</suite>
</statistics>
<errors>
</errors>
</robot>
