<?xml version="1.0" encoding="UTF-8"?>
<robot rpa="false" generated="20191106 17:06:51.720" generator="Robot 3.1.2 (Python 2.7.5 on linux2)">
<suite source="/opt/hadoop/smoketest/s3" id="s1" name="ozonesecure-s3">
<suite source="/opt/hadoop/smoketest/s3/awss3.robot" id="s1-s1" name="Awss3">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:06:51.825" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:06:51.832" level="INFO">${rc} = 1</msg>
<msg timestamp="20191106 17:06:51.832" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191106 17:06:51.832" starttime="20191106 17:06:51.823"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191106 17:06:51.833" starttime="20191106 17:06:51.833"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:06:51.836" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:06:52.049" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:06:52.049" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191106 17:06:52.049" starttime="20191106 17:06:51.834"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:06:52.056" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:07:25.006" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:07:25.006" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Determining fastest mirrors
 * base: mirror.keystealth.org
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: sjc.edge.kernel.org
 * updates: mirror.keystealth.org
Res...</msg>
<status status="PASS" endtime="20191106 17:07:25.007" starttime="20191106 17:06:52.053"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:07:25.009" level="INFO">Loaded plugins: fastestmirror, ovl
Determining fastest mirrors
 * base: mirror.keystealth.org
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: sjc.edge.kernel.org
 * updates: mirror.keystealth.org
Resolving Dependencies
--&gt; Running transaction check
---&gt; Package awscli.noarch 0:1.14.28-5.el7_5.1 will be installed
--&gt; Processing Dependency: python-s3transfer &gt;= 0.1.9 for package: awscli-1.14.28-5.el7_5.1.noarch
--&gt; Processing Dependency: python-docutils &gt;= 0.10 for package: awscli-1.14.28-5.el7_5.1.noarch
--&gt; Processing Dependency: python-cryptography &gt;= 1.7.2 for package: awscli-1.14.28-5.el7_5.1.noarch
--&gt; Processing Dependency: PyYAML &gt;= 3.10 for package: awscli-1.14.28-5.el7_5.1.noarch
--&gt; Running transaction check
---&gt; Package PyYAML.x86_64 0:3.10-11.el7 will be installed
--&gt; Processing Dependency: libyaml-0.so.2()(64bit) for package: PyYAML-3.10-11.el7.x86_64
---&gt; Package python-docutils.noarch 0:0.11-0.3.20130715svn7687.el7 will be installed
--&gt; Processing Dependency: python-imaging for package: python-docutils-0.11-0.3.20130715svn7687.el7.noarch
---&gt; Package python-s3transfer.noarch 0:0.1.13-1.el7.0.1 will be installed
--&gt; Processing Dependency: python-dateutil &gt;= 1.4 for package: python-s3transfer-0.1.13-1.el7.0.1.noarch
---&gt; Package python2-cryptography.x86_64 0:1.7.2-2.el7 will be installed
--&gt; Processing Dependency: python-six &gt;= 1.4.1 for package: python2-cryptography-1.7.2-2.el7.x86_64
--&gt; Processing Dependency: python-pyasn1 &gt;= 0.1.8 for package: python2-cryptography-1.7.2-2.el7.x86_64
--&gt; Processing Dependency: python-idna &gt;= 2.0 for package: python2-cryptography-1.7.2-2.el7.x86_64
--&gt; Processing Dependency: python-cffi &gt;= 1.4.1 for package: python2-cryptography-1.7.2-2.el7.x86_64
--&gt; Processing Dependency: python-enum34 for package: python2-cryptography-1.7.2-2.el7.x86_64
--&gt; Processing Dependency: openssl for package: python2-cryptography-1.7.2-2.el7.x86_64
--&gt; Running transaction check
---&gt; Package libyaml.x86_64 0:0.1.4-11.el7_0 will be installed
---&gt; Package openssl.x86_64 1:1.0.2k-19.el7 will be installed
--&gt; Processing Dependency: openssl-libs(x86-64) = 1:1.0.2k-19.el7 for package: 1:openssl-1.0.2k-19.el7.x86_64
--&gt; Processing Dependency: make for package: 1:openssl-1.0.2k-19.el7.x86_64
---&gt; Package python-cffi.x86_64 0:1.6.0-5.el7 will be installed
--&gt; Processing Dependency: python-pycparser for package: python-cffi-1.6.0-5.el7.x86_64
---&gt; Package python-dateutil.noarch 0:1.5-7.el7 will be installed
---&gt; Package python-enum34.noarch 0:1.0.4-1.el7 will be installed
---&gt; Package python-idna.noarch 0:2.4-1.el7 will be installed
---&gt; Package python-pillow.x86_64 0:2.0.0-19.gitd1c6db8.el7 will be installed
--&gt; Processing Dependency: libtiff.so.5(LIBTIFF_4.0)(64bit) for package: python-pillow-2.0.0-19.gitd1c6db8.el7.x86_64
--&gt; Processing Dependency: libwebp.so.4()(64bit) for package: python-pillow-2.0.0-19.gitd1c6db8.el7.x86_64
--&gt; Processing Dependency: libtiff.so.5()(64bit) for package: python-pillow-2.0.0-19.gitd1c6db8.el7.x86_64
---&gt; Package python-six.noarch 0:1.9.0-2.el7 will be installed
---&gt; Package python2-pyasn1.noarch 0:0.1.9-7.el7 will be installed
--&gt; Running transaction check
---&gt; Package libtiff.x86_64 0:4.0.3-32.el7 will be installed
--&gt; Processing Dependency: libjbig.so.2.0()(64bit) for package: libtiff-4.0.3-32.el7.x86_64
---&gt; Package libwebp.x86_64 0:0.3.0-7.el7 will be installed
---&gt; Package make.x86_64 1:3.82-24.el7 will be installed
---&gt; Package openssl-libs.x86_64 1:1.0.2k-16.el7 will be updated
---&gt; Package openssl-libs.x86_64 1:1.0.2k-19.el7 will be an update
---&gt; Package python-pycparser.noarch 0:2.14-1.el7 will be installed
--&gt; Processing Dependency: python-ply for package: python-pycparser-2.14-1.el7.noarch
--&gt; Running transaction check
---&gt; Package jbigkit-libs.x86_64 0:2.0-11.el7 will be installed
---&gt; Package python-ply.noarch 0:3.4-11.el7 will be installed
--&gt; Finished Dependency Resolution

Dependencies Resolved

================================================================================
 Package                Arch     Version                           Repository
                                                                           Size
================================================================================
Installing:
 awscli                 noarch   1.14.28-5.el7_5.1                 base   1.0 M
Installing for dependencies:
 PyYAML                 x86_64   3.10-11.el7                       base   153 k
 jbigkit-libs           x86_64   2.0-11.el7                        base    46 k
 libtiff                x86_64   4.0.3-32.el7                      base   171 k
 libwebp                x86_64   0.3.0-7.el7                       base   170 k
 libyaml                x86_64   0.1.4-11.el7_0                    base    55 k
 make                   x86_64   1:3.82-24.el7                     base   421 k
 openssl                x86_64   1:1.0.2k-19.el7                   base   493 k
 python-cffi            x86_64   1.6.0-5.el7                       base   218 k
 python-dateutil        noarch   1.5-7.el7                         base    85 k
 python-docutils        noarch   0.11-0.3.20130715svn7687.el7      base   1.5 M
 python-enum34          noarch   1.0.4-1.el7                       base    52 k
 python-idna            noarch   2.4-1.el7                         base    94 k
 python-pillow          x86_64   2.0.0-19.gitd1c6db8.el7           base   438 k
 python-ply             noarch   3.4-11.el7                        base   123 k
 python-pycparser       noarch   2.14-1.el7                        base   104 k
 python-s3transfer      noarch   0.1.13-1.el7.0.1                  base   2.9 M
 python-six             noarch   1.9.0-2.el7                       base    29 k
 python2-cryptography   x86_64   1.7.2-2.el7                       base   502 k
 python2-pyasn1         noarch   0.1.9-7.el7                       base   100 k
Updating for dependencies:
 openssl-libs           x86_64   1:1.0.2k-19.el7                   base   1.2 M

Transaction Summary
================================================================================
Install  1 Package  (+19 Dependent packages)
Upgrade             (  1 Dependent package)

Total download size: 9.9 M
Downloading packages:
Delta RPMs disabled because /usr/bin/applydeltarpm not installed.
--------------------------------------------------------------------------------
Total                                               28 MB/s | 9.9 MB  00:00     
Running transaction check
Running transaction test
Transaction test succeeded
Running transaction
  Updating   : 1:openssl-libs-1.0.2k-19.el7.x86_64                         1/22 
  Installing : python2-pyasn1-0.1.9-7.el7.noarch                           2/22 
  Installing : libyaml-0.1.4-11.el7_0.x86_64                               3/22 
  Installing : PyYAML-3.10-11.el7.x86_64                                   4/22 
  Installing : jbigkit-libs-2.0-11.el7.x86_64                              5/22 
  Installing : libtiff-4.0.3-32.el7.x86_64                                 6/22 
  Installing : python-ply-3.4-11.el7.noarch                                7/22 
  Installing : python-pycparser-2.14-1.el7.noarch                          8/22 
  Installing : python-cffi-1.6.0-5.el7.x86_64                              9/22 
  Installing : python-idna-2.4-1.el7.noarch                               10/22 
  Installing : python-six-1.9.0-2.el7.noarch                              11/22 
  Installing : 1:make-3.82-24.el7.x86_64                                  12/22 
  Installing : 1:openssl-1.0.2k-19.el7.x86_64                             13/22 
  Installing : python-dateutil-1.5-7.el7.noarch                           14/22 
  Installing : python-enum34-1.0.4-1.el7.noarch                           15/22 
  Installing : python2-cryptography-1.7.2-2.el7.x86_64                    16/22 
  Installing : libwebp-0.3.0-7.el7.x86_64                                 17/22 
  Installing : python-pillow-2.0.0-19.gitd1c6db8.el7.x86_64               18/22 
  Installing : python-docutils-0.11-0.3.20130715svn7687.el7.noarch        19/22 
  Installing : python-s3transfer-0.1.13-1.el7.0.1.noarch                  20/22 
  Installing : awscli-1.14.28-5.el7_5.1.noarch                            21/22 
  Cleanup    : 1:openssl-libs-1.0.2k-16.el7.x86_64                        22/22 
  Verifying  : libwebp-0.3.0-7.el7.x86_64                                  1/22 
  Verifying  : python-enum34-1.0.4-1.el7.noarch                            2/22 
  Verifying  : python-docutils-0.11-0.3.20130715svn7687.el7.noarch         3/22 
  Verifying  : 1:openssl-libs-1.0.2k-19.el7.x86_64                         4/22 
  Verifying  : python-dateutil-1.5-7.el7.noarch                            5/22 
  Verifying  : 1:make-3.82-24.el7.x86_64                                   6/22 
  Verifying  : python-six-1.9.0-2.el7.noarch                               7/22 
  Verifying  : python-s3transfer-0.1.13-1.el7.0.1.noarch                   8/22 
  Verifying  : python-idna-2.4-1.el7.noarch                                9/22 
  Verifying  : python-ply-3.4-11.el7.noarch                               10/22 
  Verifying  : 1:openssl-1.0.2k-19.el7.x86_64                             11/22 
  Verifying  : python-cffi-1.6.0-5.el7.x86_64                             12/22 
  Verifying  : awscli-1.14.28-5.el7_5.1.noarch                            13/22 
  Verifying  : python-pillow-2.0.0-19.gitd1c6db8.el7.x86_64               14/22 
  Verifying  : jbigkit-libs-2.0-11.el7.x86_64                             15/22 
  Verifying  : python-pycparser-2.14-1.el7.noarch                         16/22 
  Verifying  : libyaml-0.1.4-11.el7_0.x86_64                              17/22 
  Verifying  : libtiff-4.0.3-32.el7.x86_64                                18/22 
  Verifying  : python2-pyasn1-0.1.9-7.el7.noarch                          19/22 
  Verifying  : PyYAML-3.10-11.el7.x86_64                                  20/22 
  Verifying  : python2-cryptography-1.7.2-2.el7.x86_64                    21/22 
  Verifying  : 1:openssl-libs-1.0.2k-16.el7.x86_64                        22/22 

Installed:
  awscli.noarch 0:1.14.28-5.el7_5.1                                             

Dependency Installed:
  PyYAML.x86_64 0:3.10-11.el7                                                   
  jbigkit-libs.x86_64 0:2.0-11.el7                                              
  libtiff.x86_64 0:4.0.3-32.el7                                                 
  libwebp.x86_64 0:0.3.0-7.el7                                                  
  libyaml.x86_64 0:0.1.4-11.el7_0                                               
  make.x86_64 1:3.82-24.el7                                                     
  openssl.x86_64 1:1.0.2k-19.el7                                                
  python-cffi.x86_64 0:1.6.0-5.el7                                              
  python-dateutil.noarch 0:1.5-7.el7                                            
  python-docutils.noarch 0:0.11-0.3.20130715svn7687.el7                         
  python-enum34.noarch 0:1.0.4-1.el7                                            
  python-idna.noarch 0:2.4-1.el7                                                
  python-pillow.x86_64 0:2.0.0-19.gitd1c6db8.el7                                
  python-ply.noarch 0:3.4-11.el7                                                
  python-pycparser.noarch 0:2.14-1.el7                                          
  python-s3transfer.noarch 0:0.1.13-1.el7.0.1                                   
  python-six.noarch 0:1.9.0-2.el7                                               
  python2-cryptography.x86_64 0:1.7.2-2.el7                                     
  python2-pyasn1.noarch 0:0.1.9-7.el7                                           

Dependency Updated:
  openssl-libs.x86_64 1:1.0.2k-19.el7                                           

Complete!</msg>
<status status="PASS" endtime="20191106 17:07:25.009" starttime="20191106 17:07:25.007"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:07:25.010" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191106 17:07:25.011" starttime="20191106 17:07:25.010"></status>
</kw>
<status status="PASS" endtime="20191106 17:07:25.011" starttime="20191106 17:06:52.052"></status>
</kw>
<status status="PASS" endtime="20191106 17:07:25.011" starttime="20191106 17:06:52.052"></status>
</kw>
<status status="PASS" endtime="20191106 17:07:25.012" starttime="20191106 17:06:52.050"></status>
</kw>
<status status="PASS" endtime="20191106 17:07:25.012" starttime="20191106 17:06:51.822"></status>
</kw>
<status status="PASS" endtime="20191106 17:07:25.012" starttime="20191106 17:06:51.822"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:07:25.019" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:07:25.027" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:07:25.027" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191106 17:07:25.027" starttime="20191106 17:07:25.017"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:07:25.029" level="INFO">s3g</msg>
<status status="PASS" endtime="20191106 17:07:25.029" starttime="20191106 17:07:25.028"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:07:25.030" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191106 17:07:25.030" starttime="20191106 17:07:25.029"></status>
</kw>
<msg timestamp="20191106 17:07:25.030" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191106 17:07:25.031" starttime="20191106 17:07:25.016"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191106 17:07:25.033" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191106 17:07:25.034" starttime="20191106 17:07:25.031"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:07:25.038" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:07:25.079" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:07:25.079" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191106 17:07:25.079" starttime="20191106 17:07:25.036"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:07:25.080" level="INFO"></msg>
<status status="PASS" endtime="20191106 17:07:25.081" starttime="20191106 17:07:25.080"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:07:25.081" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191106 17:07:25.082" starttime="20191106 17:07:25.081"></status>
</kw>
<status status="PASS" endtime="20191106 17:07:25.082" starttime="20191106 17:07:25.035"></status>
</kw>
<status status="PASS" endtime="20191106 17:07:25.082" starttime="20191106 17:07:25.034"></status>
</kw>
<status status="PASS" endtime="20191106 17:07:25.082" starttime="20191106 17:07:25.015"></status>
</kw>
<status status="PASS" endtime="20191106 17:07:25.083" starttime="20191106 17:07:25.014"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:07:25.087" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:07:27.012" level="INFO">${rc} = 255</msg>
<msg timestamp="20191106 17:07:27.012" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191106 17:07:27.012" starttime="20191106 17:07:25.085"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:07:27.014" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
2019-11-06 17:07:26,908 ERROR client.OzoneClientFactory: Couldn't create RpcClient protocol exception: 
INTERNAL_ERROR org.apache.hadoop.ozone.om.exceptions.OMException: DestHost:destPort scm:9860 , LocalHost:localPort om/172.19.0.6:0. Failed on local exception: java.io.IOException: javax.security.sasl.SaslException: GSS initiate failed [Caused by GSSException: No valid credentials provided (Mechanism level: Failed to find any Kerberos tgt)]
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.handleError(OzoneManagerProtocolClientSideTranslatorPB.java:758)
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.getServiceInfo(OzoneManagerProtocolClientSideTranslatorPB.java:1249)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.hadoop.hdds.tracing.TraceAllMethod.invoke(TraceAllMethod.java:66)
	at com.sun.proxy.$Proxy20.getServiceInfo(Unknown Source)
	at org.apache.hadoop.ozone.client.rpc.RpcClient.&lt;init&gt;(RpcClient.java:156)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:256)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:239)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getRpcClient(OzoneClientFactory.java:203)
	at org.apache.hadoop.ozone.web.ozShell.OzoneAddress.createClient(OzoneAddress.java:117)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:45)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:32)
	at picocli.CommandLine.execute(CommandLine.java:1173)
	at picocli.CommandLine.access$800(CommandLine.java:141)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1367)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1335)
	at picocli.CommandLine$AbstractParseResultHandler.handleParseResult(CommandLine.java:1243)
	at picocli.CommandLine.parseWithHandlers(CommandLine.java:1526)
	at picocli.CommandLine.parseWithHandler(CommandLine.java:1465)
	at org.apache.hadoop.hdds.cli.GenericCli.execute(GenericCli.java:65)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.execute(S3Shell.java:43)
	at org.apache.hadoop.hdds.cli.GenericCli.run(GenericCli.java:56)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.main(S3Shell.java:54)
Couldn't create RpcClient protocol</msg>
<status status="PASS" endtime="20191106 17:07:27.014" starttime="20191106 17:07:27.013"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:07:27.015" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191106 17:07:27.015" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191106 17:07:27.015" starttime="20191106 17:07:27.014"></status>
</kw>
<status status="FAIL" endtime="20191106 17:07:27.016" starttime="20191106 17:07:25.084"></status>
</kw>
<status status="FAIL" endtime="20191106 17:07:27.016" starttime="20191106 17:07:25.084"></status>
</kw>
<status status="FAIL" endtime="20191106 17:07:27.016" starttime="20191106 17:07:25.083"></status>
</kw>
<status status="FAIL" endtime="20191106 17:07:27.016" starttime="20191106 17:07:25.014"></status>
</kw>
<status status="FAIL" endtime="20191106 17:07:27.017" starttime="20191106 17:07:25.012"></status>
</kw>
<status status="FAIL" endtime="20191106 17:07:27.017" starttime="20191106 17:06:51.821"></status>
</kw>
<test id="s1-s1-t1" name="File upload and directory list">
<status status="FAIL" endtime="20191106 17:07:27.018" critical="yes" starttime="20191106 17:07:27.017">Parent suite setup failed:
255 != 0</status>
</test>
<doc>S3 gateway test with aws cli</doc>
<status status="FAIL" endtime="20191106 17:07:27.019" starttime="20191106 17:06:51.809">Suite setup failed:
255 != 0</status>
</suite>
<suite source="/opt/hadoop/smoketest/s3/bucketcreate.robot" id="s1-s2" name="Bucketcreate">
<test id="s1-s2-t1" name="Create bucket which already exists">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:07:27.033" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:07:27.041" level="INFO">${rc} = 1</msg>
<msg timestamp="20191106 17:07:27.041" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191106 17:07:27.041" starttime="20191106 17:07:27.031"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191106 17:07:27.043" starttime="20191106 17:07:27.042"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:07:27.046" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:07:27.240" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:07:27.241" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191106 17:07:27.241" starttime="20191106 17:07:27.044"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:07:27.247" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:07:27.795" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:07:27.796" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.keystealth.org
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: sjc.edge.kernel.org
 * updates: mirror.key...</msg>
<status status="PASS" endtime="20191106 17:07:27.796" starttime="20191106 17:07:27.245"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:07:27.798" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.keystealth.org
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: sjc.edge.kernel.org
 * updates: mirror.keystealth.org
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191106 17:07:27.798" starttime="20191106 17:07:27.797"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:07:27.799" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191106 17:07:27.799" starttime="20191106 17:07:27.798"></status>
</kw>
<status status="PASS" endtime="20191106 17:07:27.800" starttime="20191106 17:07:27.244"></status>
</kw>
<status status="PASS" endtime="20191106 17:07:27.800" starttime="20191106 17:07:27.243"></status>
</kw>
<status status="PASS" endtime="20191106 17:07:27.800" starttime="20191106 17:07:27.242"></status>
</kw>
<status status="PASS" endtime="20191106 17:07:27.801" starttime="20191106 17:07:27.030"></status>
</kw>
<status status="PASS" endtime="20191106 17:07:27.801" starttime="20191106 17:07:27.030"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:07:27.808" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:07:27.817" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:07:27.817" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191106 17:07:27.817" starttime="20191106 17:07:27.806"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:07:27.818" level="INFO">s3g</msg>
<status status="PASS" endtime="20191106 17:07:27.819" starttime="20191106 17:07:27.818"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:07:27.819" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191106 17:07:27.820" starttime="20191106 17:07:27.819"></status>
</kw>
<msg timestamp="20191106 17:07:27.820" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191106 17:07:27.820" starttime="20191106 17:07:27.805"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191106 17:07:27.822" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191106 17:07:27.822" starttime="20191106 17:07:27.820"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:07:27.825" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:07:27.842" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:07:27.842" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191106 17:07:27.842" starttime="20191106 17:07:27.824"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:07:27.843" level="INFO"></msg>
<status status="PASS" endtime="20191106 17:07:27.844" starttime="20191106 17:07:27.843"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:07:27.844" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191106 17:07:27.844" starttime="20191106 17:07:27.844"></status>
</kw>
<status status="PASS" endtime="20191106 17:07:27.845" starttime="20191106 17:07:27.823"></status>
</kw>
<status status="PASS" endtime="20191106 17:07:27.845" starttime="20191106 17:07:27.822"></status>
</kw>
<status status="PASS" endtime="20191106 17:07:27.845" starttime="20191106 17:07:27.804"></status>
</kw>
<status status="PASS" endtime="20191106 17:07:27.845" starttime="20191106 17:07:27.803"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:07:27.849" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:07:29.802" level="INFO">${rc} = 255</msg>
<msg timestamp="20191106 17:07:29.802" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191106 17:07:29.802" starttime="20191106 17:07:27.847"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:07:29.803" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
2019-11-06 17:07:29,745 ERROR client.OzoneClientFactory: Couldn't create RpcClient protocol exception: 
INTERNAL_ERROR org.apache.hadoop.ozone.om.exceptions.OMException: DestHost:destPort scm:9860 , LocalHost:localPort om/172.19.0.6:0. Failed on local exception: java.io.IOException: javax.security.sasl.SaslException: GSS initiate failed [Caused by GSSException: No valid credentials provided (Mechanism level: Failed to find any Kerberos tgt)]
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.handleError(OzoneManagerProtocolClientSideTranslatorPB.java:758)
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.getServiceInfo(OzoneManagerProtocolClientSideTranslatorPB.java:1249)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.hadoop.hdds.tracing.TraceAllMethod.invoke(TraceAllMethod.java:66)
	at com.sun.proxy.$Proxy20.getServiceInfo(Unknown Source)
	at org.apache.hadoop.ozone.client.rpc.RpcClient.&lt;init&gt;(RpcClient.java:156)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:256)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:239)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getRpcClient(OzoneClientFactory.java:203)
	at org.apache.hadoop.ozone.web.ozShell.OzoneAddress.createClient(OzoneAddress.java:117)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:45)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:32)
	at picocli.CommandLine.execute(CommandLine.java:1173)
	at picocli.CommandLine.access$800(CommandLine.java:141)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1367)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1335)
	at picocli.CommandLine$AbstractParseResultHandler.handleParseResult(CommandLine.java:1243)
	at picocli.CommandLine.parseWithHandlers(CommandLine.java:1526)
	at picocli.CommandLine.parseWithHandler(CommandLine.java:1465)
	at org.apache.hadoop.hdds.cli.GenericCli.execute(GenericCli.java:65)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.execute(S3Shell.java:43)
	at org.apache.hadoop.hdds.cli.GenericCli.run(GenericCli.java:56)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.main(S3Shell.java:54)
Couldn't create RpcClient protocol</msg>
<status status="PASS" endtime="20191106 17:07:29.804" starttime="20191106 17:07:29.803"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:07:29.804" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191106 17:07:29.805" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191106 17:07:29.805" starttime="20191106 17:07:29.804"></status>
</kw>
<status status="FAIL" endtime="20191106 17:07:29.806" starttime="20191106 17:07:27.846"></status>
</kw>
<status status="FAIL" endtime="20191106 17:07:29.806" starttime="20191106 17:07:27.846"></status>
</kw>
<status status="FAIL" endtime="20191106 17:07:29.806" starttime="20191106 17:07:27.845"></status>
</kw>
<status status="FAIL" endtime="20191106 17:07:29.806" starttime="20191106 17:07:27.802"></status>
</kw>
<status status="FAIL" endtime="20191106 17:07:29.806" starttime="20191106 17:07:27.801"></status>
</kw>
<status status="FAIL" endtime="20191106 17:07:29.807" starttime="20191106 17:07:27.029"></status>
</kw>
<status status="FAIL" endtime="20191106 17:07:29.807" critical="yes" starttime="20191106 17:07:27.029">Setup failed:
255 != 0</status>
</test>
<doc>S3 gateway test with aws cli</doc>
<status status="FAIL" endtime="20191106 17:07:29.808" starttime="20191106 17:07:27.020"></status>
</suite>
<suite source="/opt/hadoop/smoketest/s3/buckethead.robot" id="s1-s3" name="Buckethead">
<test id="s1-s3-t1" name="Head Bucket not existent">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:07:29.823" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:07:29.830" level="INFO">${rc} = 1</msg>
<msg timestamp="20191106 17:07:29.830" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191106 17:07:29.831" starttime="20191106 17:07:29.822"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191106 17:07:29.832" starttime="20191106 17:07:29.831"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:07:29.834" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:07:30.005" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:07:30.005" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191106 17:07:30.005" starttime="20191106 17:07:29.832"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:07:30.009" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:07:30.519" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:07:30.519" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.keystealth.org
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: sjc.edge.kernel.org
 * updates: mirror.key...</msg>
<status status="PASS" endtime="20191106 17:07:30.519" starttime="20191106 17:07:30.008"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:07:30.521" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.keystealth.org
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: sjc.edge.kernel.org
 * updates: mirror.keystealth.org
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191106 17:07:30.521" starttime="20191106 17:07:30.520"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:07:30.522" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191106 17:07:30.523" starttime="20191106 17:07:30.522"></status>
</kw>
<status status="PASS" endtime="20191106 17:07:30.523" starttime="20191106 17:07:30.007"></status>
</kw>
<status status="PASS" endtime="20191106 17:07:30.524" starttime="20191106 17:07:30.007"></status>
</kw>
<status status="PASS" endtime="20191106 17:07:30.524" starttime="20191106 17:07:30.006"></status>
</kw>
<status status="PASS" endtime="20191106 17:07:30.524" starttime="20191106 17:07:29.821"></status>
</kw>
<status status="PASS" endtime="20191106 17:07:30.524" starttime="20191106 17:07:29.820"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:07:30.532" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:07:30.539" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:07:30.539" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191106 17:07:30.539" starttime="20191106 17:07:30.530"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:07:30.541" level="INFO">s3g</msg>
<status status="PASS" endtime="20191106 17:07:30.541" starttime="20191106 17:07:30.540"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:07:30.542" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191106 17:07:30.542" starttime="20191106 17:07:30.541"></status>
</kw>
<msg timestamp="20191106 17:07:30.543" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191106 17:07:30.543" starttime="20191106 17:07:30.529"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191106 17:07:30.546" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191106 17:07:30.546" starttime="20191106 17:07:30.543"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:07:30.551" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:07:30.581" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:07:30.581" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191106 17:07:30.581" starttime="20191106 17:07:30.549"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:07:30.582" level="INFO"></msg>
<status status="PASS" endtime="20191106 17:07:30.582" starttime="20191106 17:07:30.581"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:07:30.583" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191106 17:07:30.583" starttime="20191106 17:07:30.583"></status>
</kw>
<status status="PASS" endtime="20191106 17:07:30.584" starttime="20191106 17:07:30.548"></status>
</kw>
<status status="PASS" endtime="20191106 17:07:30.584" starttime="20191106 17:07:30.547"></status>
</kw>
<status status="PASS" endtime="20191106 17:07:30.584" starttime="20191106 17:07:30.528"></status>
</kw>
<status status="PASS" endtime="20191106 17:07:30.585" starttime="20191106 17:07:30.527"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:07:30.589" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:07:32.609" level="INFO">${rc} = 255</msg>
<msg timestamp="20191106 17:07:32.610" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191106 17:07:32.610" starttime="20191106 17:07:30.587"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:07:32.612" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
2019-11-06 17:07:32,550 ERROR client.OzoneClientFactory: Couldn't create RpcClient protocol exception: 
INTERNAL_ERROR org.apache.hadoop.ozone.om.exceptions.OMException: DestHost:destPort scm:9860 , LocalHost:localPort om/172.19.0.6:0. Failed on local exception: java.io.IOException: javax.security.sasl.SaslException: GSS initiate failed [Caused by GSSException: No valid credentials provided (Mechanism level: Failed to find any Kerberos tgt)]
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.handleError(OzoneManagerProtocolClientSideTranslatorPB.java:758)
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.getServiceInfo(OzoneManagerProtocolClientSideTranslatorPB.java:1249)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.hadoop.hdds.tracing.TraceAllMethod.invoke(TraceAllMethod.java:66)
	at com.sun.proxy.$Proxy20.getServiceInfo(Unknown Source)
	at org.apache.hadoop.ozone.client.rpc.RpcClient.&lt;init&gt;(RpcClient.java:156)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:256)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:239)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getRpcClient(OzoneClientFactory.java:203)
	at org.apache.hadoop.ozone.web.ozShell.OzoneAddress.createClient(OzoneAddress.java:117)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:45)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:32)
	at picocli.CommandLine.execute(CommandLine.java:1173)
	at picocli.CommandLine.access$800(CommandLine.java:141)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1367)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1335)
	at picocli.CommandLine$AbstractParseResultHandler.handleParseResult(CommandLine.java:1243)
	at picocli.CommandLine.parseWithHandlers(CommandLine.java:1526)
	at picocli.CommandLine.parseWithHandler(CommandLine.java:1465)
	at org.apache.hadoop.hdds.cli.GenericCli.execute(GenericCli.java:65)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.execute(S3Shell.java:43)
	at org.apache.hadoop.hdds.cli.GenericCli.run(GenericCli.java:56)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.main(S3Shell.java:54)
Couldn't create RpcClient protocol</msg>
<status status="PASS" endtime="20191106 17:07:32.613" starttime="20191106 17:07:32.611"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:07:32.614" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191106 17:07:32.614" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191106 17:07:32.615" starttime="20191106 17:07:32.613"></status>
</kw>
<status status="FAIL" endtime="20191106 17:07:32.615" starttime="20191106 17:07:30.586"></status>
</kw>
<status status="FAIL" endtime="20191106 17:07:32.616" starttime="20191106 17:07:30.586"></status>
</kw>
<status status="FAIL" endtime="20191106 17:07:32.616" starttime="20191106 17:07:30.585"></status>
</kw>
<status status="FAIL" endtime="20191106 17:07:32.616" starttime="20191106 17:07:30.526"></status>
</kw>
<status status="FAIL" endtime="20191106 17:07:32.616" starttime="20191106 17:07:30.525"></status>
</kw>
<status status="FAIL" endtime="20191106 17:07:32.617" starttime="20191106 17:07:29.820"></status>
</kw>
<status status="FAIL" endtime="20191106 17:07:32.617" critical="yes" starttime="20191106 17:07:29.819">Setup failed:
255 != 0</status>
</test>
<doc>S3 gateway test with aws cli</doc>
<status status="FAIL" endtime="20191106 17:07:32.618" starttime="20191106 17:07:29.810"></status>
</suite>
<suite source="/opt/hadoop/smoketest/s3/bucketlist.robot" id="s1-s4" name="Bucketlist">
<test id="s1-s4-t1" name="List buckets">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:07:32.640" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:07:32.646" level="INFO">${rc} = 1</msg>
<msg timestamp="20191106 17:07:32.646" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191106 17:07:32.647" starttime="20191106 17:07:32.637"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191106 17:07:32.648" starttime="20191106 17:07:32.647"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:07:32.650" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:07:32.830" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:07:32.830" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191106 17:07:32.830" starttime="20191106 17:07:32.649"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:07:32.834" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:07:33.314" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:07:33.314" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.keystealth.org
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: sjc.edge.kernel.org
 * updates: mirror.key...</msg>
<status status="PASS" endtime="20191106 17:07:33.314" starttime="20191106 17:07:32.832"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:07:33.316" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.keystealth.org
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: sjc.edge.kernel.org
 * updates: mirror.keystealth.org
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191106 17:07:33.316" starttime="20191106 17:07:33.315"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:07:33.316" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191106 17:07:33.316" starttime="20191106 17:07:33.316"></status>
</kw>
<status status="PASS" endtime="20191106 17:07:33.317" starttime="20191106 17:07:32.832"></status>
</kw>
<status status="PASS" endtime="20191106 17:07:33.317" starttime="20191106 17:07:32.831"></status>
</kw>
<status status="PASS" endtime="20191106 17:07:33.317" starttime="20191106 17:07:32.830"></status>
</kw>
<status status="PASS" endtime="20191106 17:07:33.317" starttime="20191106 17:07:32.636"></status>
</kw>
<status status="PASS" endtime="20191106 17:07:33.317" starttime="20191106 17:07:32.636"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:07:33.321" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:07:33.328" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:07:33.329" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191106 17:07:33.329" starttime="20191106 17:07:33.320"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:07:33.330" level="INFO">s3g</msg>
<status status="PASS" endtime="20191106 17:07:33.331" starttime="20191106 17:07:33.330"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:07:33.332" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191106 17:07:33.332" starttime="20191106 17:07:33.331"></status>
</kw>
<msg timestamp="20191106 17:07:33.332" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191106 17:07:33.332" starttime="20191106 17:07:33.320"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191106 17:07:33.336" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191106 17:07:33.336" starttime="20191106 17:07:33.333"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:07:33.340" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:07:33.355" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:07:33.356" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191106 17:07:33.356" starttime="20191106 17:07:33.338"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:07:33.357" level="INFO"></msg>
<status status="PASS" endtime="20191106 17:07:33.357" starttime="20191106 17:07:33.356"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:07:33.357" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191106 17:07:33.358" starttime="20191106 17:07:33.357"></status>
</kw>
<status status="PASS" endtime="20191106 17:07:33.358" starttime="20191106 17:07:33.337"></status>
</kw>
<status status="PASS" endtime="20191106 17:07:33.358" starttime="20191106 17:07:33.336"></status>
</kw>
<status status="PASS" endtime="20191106 17:07:33.358" starttime="20191106 17:07:33.319"></status>
</kw>
<status status="PASS" endtime="20191106 17:07:33.358" starttime="20191106 17:07:33.319"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:07:33.361" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:07:35.205" level="INFO">${rc} = 255</msg>
<msg timestamp="20191106 17:07:35.205" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191106 17:07:35.205" starttime="20191106 17:07:33.360"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:07:35.207" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
2019-11-06 17:07:35,149 ERROR client.OzoneClientFactory: Couldn't create RpcClient protocol exception: 
INTERNAL_ERROR org.apache.hadoop.ozone.om.exceptions.OMException: DestHost:destPort scm:9860 , LocalHost:localPort om/172.19.0.6:0. Failed on local exception: java.io.IOException: javax.security.sasl.SaslException: GSS initiate failed [Caused by GSSException: No valid credentials provided (Mechanism level: Failed to find any Kerberos tgt)]
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.handleError(OzoneManagerProtocolClientSideTranslatorPB.java:758)
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.getServiceInfo(OzoneManagerProtocolClientSideTranslatorPB.java:1249)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.hadoop.hdds.tracing.TraceAllMethod.invoke(TraceAllMethod.java:66)
	at com.sun.proxy.$Proxy20.getServiceInfo(Unknown Source)
	at org.apache.hadoop.ozone.client.rpc.RpcClient.&lt;init&gt;(RpcClient.java:156)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:256)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:239)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getRpcClient(OzoneClientFactory.java:203)
	at org.apache.hadoop.ozone.web.ozShell.OzoneAddress.createClient(OzoneAddress.java:117)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:45)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:32)
	at picocli.CommandLine.execute(CommandLine.java:1173)
	at picocli.CommandLine.access$800(CommandLine.java:141)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1367)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1335)
	at picocli.CommandLine$AbstractParseResultHandler.handleParseResult(CommandLine.java:1243)
	at picocli.CommandLine.parseWithHandlers(CommandLine.java:1526)
	at picocli.CommandLine.parseWithHandler(CommandLine.java:1465)
	at org.apache.hadoop.hdds.cli.GenericCli.execute(GenericCli.java:65)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.execute(S3Shell.java:43)
	at org.apache.hadoop.hdds.cli.GenericCli.run(GenericCli.java:56)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.main(S3Shell.java:54)
Couldn't create RpcClient protocol</msg>
<status status="PASS" endtime="20191106 17:07:35.207" starttime="20191106 17:07:35.206"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:07:35.208" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191106 17:07:35.208" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191106 17:07:35.209" starttime="20191106 17:07:35.208"></status>
</kw>
<status status="FAIL" endtime="20191106 17:07:35.209" starttime="20191106 17:07:33.360"></status>
</kw>
<status status="FAIL" endtime="20191106 17:07:35.209" starttime="20191106 17:07:33.359"></status>
</kw>
<status status="FAIL" endtime="20191106 17:07:35.209" starttime="20191106 17:07:33.359"></status>
</kw>
<status status="FAIL" endtime="20191106 17:07:35.210" starttime="20191106 17:07:33.318"></status>
</kw>
<status status="FAIL" endtime="20191106 17:07:35.210" starttime="20191106 17:07:33.318"></status>
</kw>
<status status="FAIL" endtime="20191106 17:07:35.210" starttime="20191106 17:07:32.635"></status>
</kw>
<status status="FAIL" endtime="20191106 17:07:35.210" critical="yes" starttime="20191106 17:07:32.634">Setup failed:
255 != 0</status>
</test>
<doc>S3 gateway test with aws cli</doc>
<status status="FAIL" endtime="20191106 17:07:35.211" starttime="20191106 17:07:32.621"></status>
</suite>
<suite source="/opt/hadoop/smoketest/s3/MultipartUpload.robot" id="s1-s5" name="MultipartUpload">
<test id="s1-s5-t1" name="Test Multipart Upload">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:07:35.226" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:07:35.233" level="INFO">${rc} = 1</msg>
<msg timestamp="20191106 17:07:35.233" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191106 17:07:35.233" starttime="20191106 17:07:35.224"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191106 17:07:35.235" starttime="20191106 17:07:35.234"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:07:35.238" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:07:35.408" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:07:35.408" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191106 17:07:35.408" starttime="20191106 17:07:35.236"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:07:35.415" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:07:35.913" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:07:35.913" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.keystealth.org
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: sjc.edge.kernel.org
 * updates: mirror.key...</msg>
<status status="PASS" endtime="20191106 17:07:35.914" starttime="20191106 17:07:35.412"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:07:35.916" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.keystealth.org
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: sjc.edge.kernel.org
 * updates: mirror.keystealth.org
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191106 17:07:35.916" starttime="20191106 17:07:35.915"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:07:35.917" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191106 17:07:35.917" starttime="20191106 17:07:35.916"></status>
</kw>
<status status="PASS" endtime="20191106 17:07:35.918" starttime="20191106 17:07:35.411"></status>
</kw>
<status status="PASS" endtime="20191106 17:07:35.918" starttime="20191106 17:07:35.410"></status>
</kw>
<status status="PASS" endtime="20191106 17:07:35.918" starttime="20191106 17:07:35.409"></status>
</kw>
<status status="PASS" endtime="20191106 17:07:35.919" starttime="20191106 17:07:35.224"></status>
</kw>
<status status="PASS" endtime="20191106 17:07:35.919" starttime="20191106 17:07:35.223"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:07:35.927" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:07:35.933" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:07:35.933" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191106 17:07:35.933" starttime="20191106 17:07:35.924"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:07:35.936" level="INFO">s3g</msg>
<status status="PASS" endtime="20191106 17:07:35.936" starttime="20191106 17:07:35.934"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:07:35.938" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191106 17:07:35.938" starttime="20191106 17:07:35.937"></status>
</kw>
<msg timestamp="20191106 17:07:35.939" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191106 17:07:35.939" starttime="20191106 17:07:35.923"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191106 17:07:35.944" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191106 17:07:35.944" starttime="20191106 17:07:35.940"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:07:35.951" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:07:35.970" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:07:35.970" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191106 17:07:35.970" starttime="20191106 17:07:35.948"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:07:35.972" level="INFO"></msg>
<status status="PASS" endtime="20191106 17:07:35.972" starttime="20191106 17:07:35.971"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:07:35.973" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191106 17:07:35.973" starttime="20191106 17:07:35.972"></status>
</kw>
<status status="PASS" endtime="20191106 17:07:35.973" starttime="20191106 17:07:35.946"></status>
</kw>
<status status="PASS" endtime="20191106 17:07:35.973" starttime="20191106 17:07:35.945"></status>
</kw>
<status status="PASS" endtime="20191106 17:07:35.974" starttime="20191106 17:07:35.922"></status>
</kw>
<status status="PASS" endtime="20191106 17:07:35.974" starttime="20191106 17:07:35.921"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:07:35.978" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:07:37.996" level="INFO">${rc} = 255</msg>
<msg timestamp="20191106 17:07:37.997" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191106 17:07:37.997" starttime="20191106 17:07:35.976"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:07:38.002" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
2019-11-06 17:07:37,908 ERROR client.OzoneClientFactory: Couldn't create RpcClient protocol exception: 
INTERNAL_ERROR org.apache.hadoop.ozone.om.exceptions.OMException: DestHost:destPort scm:9860 , LocalHost:localPort om/172.19.0.6:0. Failed on local exception: java.io.IOException: javax.security.sasl.SaslException: GSS initiate failed [Caused by GSSException: No valid credentials provided (Mechanism level: Failed to find any Kerberos tgt)]
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.handleError(OzoneManagerProtocolClientSideTranslatorPB.java:758)
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.getServiceInfo(OzoneManagerProtocolClientSideTranslatorPB.java:1249)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.hadoop.hdds.tracing.TraceAllMethod.invoke(TraceAllMethod.java:66)
	at com.sun.proxy.$Proxy20.getServiceInfo(Unknown Source)
	at org.apache.hadoop.ozone.client.rpc.RpcClient.&lt;init&gt;(RpcClient.java:156)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:256)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:239)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getRpcClient(OzoneClientFactory.java:203)
	at org.apache.hadoop.ozone.web.ozShell.OzoneAddress.createClient(OzoneAddress.java:117)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:45)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:32)
	at picocli.CommandLine.execute(CommandLine.java:1173)
	at picocli.CommandLine.access$800(CommandLine.java:141)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1367)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1335)
	at picocli.CommandLine$AbstractParseResultHandler.handleParseResult(CommandLine.java:1243)
	at picocli.CommandLine.parseWithHandlers(CommandLine.java:1526)
	at picocli.CommandLine.parseWithHandler(CommandLine.java:1465)
	at org.apache.hadoop.hdds.cli.GenericCli.execute(GenericCli.java:65)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.execute(S3Shell.java:43)
	at org.apache.hadoop.hdds.cli.GenericCli.run(GenericCli.java:56)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.main(S3Shell.java:54)
Couldn't create RpcClient protocol</msg>
<status status="PASS" endtime="20191106 17:07:38.002" starttime="20191106 17:07:37.998"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:07:38.003" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191106 17:07:38.004" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191106 17:07:38.004" starttime="20191106 17:07:38.003"></status>
</kw>
<status status="FAIL" endtime="20191106 17:07:38.005" starttime="20191106 17:07:35.975"></status>
</kw>
<status status="FAIL" endtime="20191106 17:07:38.005" starttime="20191106 17:07:35.975"></status>
</kw>
<status status="FAIL" endtime="20191106 17:07:38.006" starttime="20191106 17:07:35.974"></status>
</kw>
<status status="FAIL" endtime="20191106 17:07:38.006" starttime="20191106 17:07:35.920"></status>
</kw>
<status status="FAIL" endtime="20191106 17:07:38.006" starttime="20191106 17:07:35.919"></status>
</kw>
<status status="FAIL" endtime="20191106 17:07:38.007" starttime="20191106 17:07:35.223"></status>
</kw>
<status status="FAIL" endtime="20191106 17:07:38.007" critical="yes" starttime="20191106 17:07:35.222">Setup failed:
255 != 0</status>
</test>
<test id="s1-s5-t2" name="Test Multipart Upload Complete">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:07:38.014" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:07:38.020" level="INFO">${rc} = 1</msg>
<msg timestamp="20191106 17:07:38.021" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191106 17:07:38.021" starttime="20191106 17:07:38.012"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191106 17:07:38.023" starttime="20191106 17:07:38.022"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:07:38.026" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:07:38.221" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:07:38.221" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191106 17:07:38.221" starttime="20191106 17:07:38.023"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:07:38.228" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:07:38.765" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:07:38.765" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.keystealth.org
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: sjc.edge.kernel.org
 * updates: mirror.key...</msg>
<status status="PASS" endtime="20191106 17:07:38.765" starttime="20191106 17:07:38.225"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:07:38.767" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.keystealth.org
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: sjc.edge.kernel.org
 * updates: mirror.keystealth.org
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191106 17:07:38.767" starttime="20191106 17:07:38.766"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:07:38.768" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191106 17:07:38.768" starttime="20191106 17:07:38.768"></status>
</kw>
<status status="PASS" endtime="20191106 17:07:38.769" starttime="20191106 17:07:38.224"></status>
</kw>
<status status="PASS" endtime="20191106 17:07:38.769" starttime="20191106 17:07:38.223"></status>
</kw>
<status status="PASS" endtime="20191106 17:07:38.770" starttime="20191106 17:07:38.222"></status>
</kw>
<status status="PASS" endtime="20191106 17:07:38.770" starttime="20191106 17:07:38.011"></status>
</kw>
<status status="PASS" endtime="20191106 17:07:38.770" starttime="20191106 17:07:38.010"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:07:38.778" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:07:38.783" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:07:38.783" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191106 17:07:38.784" starttime="20191106 17:07:38.775"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:07:38.785" level="INFO">s3g</msg>
<status status="PASS" endtime="20191106 17:07:38.785" starttime="20191106 17:07:38.784"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:07:38.786" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191106 17:07:38.787" starttime="20191106 17:07:38.786"></status>
</kw>
<msg timestamp="20191106 17:07:38.787" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191106 17:07:38.787" starttime="20191106 17:07:38.774"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191106 17:07:38.789" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191106 17:07:38.789" starttime="20191106 17:07:38.788"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:07:38.793" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:07:38.812" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:07:38.812" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191106 17:07:38.812" starttime="20191106 17:07:38.791"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:07:38.814" level="INFO"></msg>
<status status="PASS" endtime="20191106 17:07:38.814" starttime="20191106 17:07:38.813"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:07:38.815" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191106 17:07:38.815" starttime="20191106 17:07:38.814"></status>
</kw>
<status status="PASS" endtime="20191106 17:07:38.815" starttime="20191106 17:07:38.790"></status>
</kw>
<status status="PASS" endtime="20191106 17:07:38.816" starttime="20191106 17:07:38.789"></status>
</kw>
<status status="PASS" endtime="20191106 17:07:38.816" starttime="20191106 17:07:38.773"></status>
</kw>
<status status="PASS" endtime="20191106 17:07:38.816" starttime="20191106 17:07:38.772"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:07:38.821" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:07:40.853" level="INFO">${rc} = 255</msg>
<msg timestamp="20191106 17:07:40.853" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191106 17:07:40.853" starttime="20191106 17:07:38.818"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:07:40.855" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
2019-11-06 17:07:40,811 ERROR client.OzoneClientFactory: Couldn't create RpcClient protocol exception: 
INTERNAL_ERROR org.apache.hadoop.ozone.om.exceptions.OMException: DestHost:destPort scm:9860 , LocalHost:localPort om/172.19.0.6:0. Failed on local exception: java.io.IOException: javax.security.sasl.SaslException: GSS initiate failed [Caused by GSSException: No valid credentials provided (Mechanism level: Failed to find any Kerberos tgt)]
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.handleError(OzoneManagerProtocolClientSideTranslatorPB.java:758)
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.getServiceInfo(OzoneManagerProtocolClientSideTranslatorPB.java:1249)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.hadoop.hdds.tracing.TraceAllMethod.invoke(TraceAllMethod.java:66)
	at com.sun.proxy.$Proxy20.getServiceInfo(Unknown Source)
	at org.apache.hadoop.ozone.client.rpc.RpcClient.&lt;init&gt;(RpcClient.java:156)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:256)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:239)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getRpcClient(OzoneClientFactory.java:203)
	at org.apache.hadoop.ozone.web.ozShell.OzoneAddress.createClient(OzoneAddress.java:117)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:45)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:32)
	at picocli.CommandLine.execute(CommandLine.java:1173)
	at picocli.CommandLine.access$800(CommandLine.java:141)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1367)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1335)
	at picocli.CommandLine$AbstractParseResultHandler.handleParseResult(CommandLine.java:1243)
	at picocli.CommandLine.parseWithHandlers(CommandLine.java:1526)
	at picocli.CommandLine.parseWithHandler(CommandLine.java:1465)
	at org.apache.hadoop.hdds.cli.GenericCli.execute(GenericCli.java:65)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.execute(S3Shell.java:43)
	at org.apache.hadoop.hdds.cli.GenericCli.run(GenericCli.java:56)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.main(S3Shell.java:54)
Couldn't create RpcClient protocol</msg>
<status status="PASS" endtime="20191106 17:07:40.855" starttime="20191106 17:07:40.854"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:07:40.856" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191106 17:07:40.857" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191106 17:07:40.857" starttime="20191106 17:07:40.856"></status>
</kw>
<status status="FAIL" endtime="20191106 17:07:40.857" starttime="20191106 17:07:38.818"></status>
</kw>
<status status="FAIL" endtime="20191106 17:07:40.857" starttime="20191106 17:07:38.817"></status>
</kw>
<status status="FAIL" endtime="20191106 17:07:40.858" starttime="20191106 17:07:38.816"></status>
</kw>
<status status="FAIL" endtime="20191106 17:07:40.858" starttime="20191106 17:07:38.772"></status>
</kw>
<status status="FAIL" endtime="20191106 17:07:40.858" starttime="20191106 17:07:38.770"></status>
</kw>
<status status="FAIL" endtime="20191106 17:07:40.858" starttime="20191106 17:07:38.009"></status>
</kw>
<status status="FAIL" endtime="20191106 17:07:40.859" critical="yes" starttime="20191106 17:07:38.008">Setup failed:
255 != 0</status>
</test>
<test id="s1-s5-t3" name="Test Multipart Upload Complete Entity too small">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:07:40.864" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:07:40.871" level="INFO">${rc} = 1</msg>
<msg timestamp="20191106 17:07:40.871" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191106 17:07:40.871" starttime="20191106 17:07:40.862"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191106 17:07:40.873" starttime="20191106 17:07:40.872"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:07:40.876" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:07:41.086" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:07:41.086" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191106 17:07:41.087" starttime="20191106 17:07:40.874"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:07:41.093" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:07:41.562" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:07:41.563" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.keystealth.org
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: sjc.edge.kernel.org
 * updates: mirror.key...</msg>
<status status="PASS" endtime="20191106 17:07:41.563" starttime="20191106 17:07:41.090"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:07:41.565" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.keystealth.org
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: sjc.edge.kernel.org
 * updates: mirror.keystealth.org
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191106 17:07:41.565" starttime="20191106 17:07:41.564"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:07:41.566" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191106 17:07:41.567" starttime="20191106 17:07:41.566"></status>
</kw>
<status status="PASS" endtime="20191106 17:07:41.567" starttime="20191106 17:07:41.090"></status>
</kw>
<status status="PASS" endtime="20191106 17:07:41.567" starttime="20191106 17:07:41.089"></status>
</kw>
<status status="PASS" endtime="20191106 17:07:41.568" starttime="20191106 17:07:41.088"></status>
</kw>
<status status="PASS" endtime="20191106 17:07:41.568" starttime="20191106 17:07:40.861"></status>
</kw>
<status status="PASS" endtime="20191106 17:07:41.568" starttime="20191106 17:07:40.861"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:07:41.575" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:07:41.581" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:07:41.582" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191106 17:07:41.582" starttime="20191106 17:07:41.573"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:07:41.583" level="INFO">s3g</msg>
<status status="PASS" endtime="20191106 17:07:41.583" starttime="20191106 17:07:41.582"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:07:41.584" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191106 17:07:41.584" starttime="20191106 17:07:41.584"></status>
</kw>
<msg timestamp="20191106 17:07:41.585" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191106 17:07:41.585" starttime="20191106 17:07:41.572"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191106 17:07:41.586" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191106 17:07:41.586" starttime="20191106 17:07:41.585"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:07:41.591" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:07:41.606" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:07:41.607" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191106 17:07:41.607" starttime="20191106 17:07:41.589"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:07:41.609" level="INFO"></msg>
<status status="PASS" endtime="20191106 17:07:41.609" starttime="20191106 17:07:41.608"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:07:41.610" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191106 17:07:41.610" starttime="20191106 17:07:41.609"></status>
</kw>
<status status="PASS" endtime="20191106 17:07:41.611" starttime="20191106 17:07:41.588"></status>
</kw>
<status status="PASS" endtime="20191106 17:07:41.611" starttime="20191106 17:07:41.587"></status>
</kw>
<status status="PASS" endtime="20191106 17:07:41.612" starttime="20191106 17:07:41.571"></status>
</kw>
<status status="PASS" endtime="20191106 17:07:41.612" starttime="20191106 17:07:41.570"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:07:41.617" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:07:43.659" level="INFO">${rc} = 255</msg>
<msg timestamp="20191106 17:07:43.659" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191106 17:07:43.659" starttime="20191106 17:07:41.615"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:07:43.661" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
2019-11-06 17:07:43,601 ERROR client.OzoneClientFactory: Couldn't create RpcClient protocol exception: 
INTERNAL_ERROR org.apache.hadoop.ozone.om.exceptions.OMException: DestHost:destPort scm:9860 , LocalHost:localPort om/172.19.0.6:0. Failed on local exception: java.io.IOException: javax.security.sasl.SaslException: GSS initiate failed [Caused by GSSException: No valid credentials provided (Mechanism level: Failed to find any Kerberos tgt)]
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.handleError(OzoneManagerProtocolClientSideTranslatorPB.java:758)
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.getServiceInfo(OzoneManagerProtocolClientSideTranslatorPB.java:1249)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.hadoop.hdds.tracing.TraceAllMethod.invoke(TraceAllMethod.java:66)
	at com.sun.proxy.$Proxy20.getServiceInfo(Unknown Source)
	at org.apache.hadoop.ozone.client.rpc.RpcClient.&lt;init&gt;(RpcClient.java:156)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:256)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:239)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getRpcClient(OzoneClientFactory.java:203)
	at org.apache.hadoop.ozone.web.ozShell.OzoneAddress.createClient(OzoneAddress.java:117)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:45)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:32)
	at picocli.CommandLine.execute(CommandLine.java:1173)
	at picocli.CommandLine.access$800(CommandLine.java:141)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1367)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1335)
	at picocli.CommandLine$AbstractParseResultHandler.handleParseResult(CommandLine.java:1243)
	at picocli.CommandLine.parseWithHandlers(CommandLine.java:1526)
	at picocli.CommandLine.parseWithHandler(CommandLine.java:1465)
	at org.apache.hadoop.hdds.cli.GenericCli.execute(GenericCli.java:65)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.execute(S3Shell.java:43)
	at org.apache.hadoop.hdds.cli.GenericCli.run(GenericCli.java:56)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.main(S3Shell.java:54)
Couldn't create RpcClient protocol</msg>
<status status="PASS" endtime="20191106 17:07:43.662" starttime="20191106 17:07:43.660"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:07:43.663" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191106 17:07:43.663" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191106 17:07:43.663" starttime="20191106 17:07:43.662"></status>
</kw>
<status status="FAIL" endtime="20191106 17:07:43.664" starttime="20191106 17:07:41.614"></status>
</kw>
<status status="FAIL" endtime="20191106 17:07:43.664" starttime="20191106 17:07:41.613"></status>
</kw>
<status status="FAIL" endtime="20191106 17:07:43.664" starttime="20191106 17:07:41.612"></status>
</kw>
<status status="FAIL" endtime="20191106 17:07:43.665" starttime="20191106 17:07:41.570"></status>
</kw>
<status status="FAIL" endtime="20191106 17:07:43.665" starttime="20191106 17:07:41.569"></status>
</kw>
<status status="FAIL" endtime="20191106 17:07:43.665" starttime="20191106 17:07:40.860"></status>
</kw>
<status status="FAIL" endtime="20191106 17:07:43.666" critical="yes" starttime="20191106 17:07:40.859">Setup failed:
255 != 0</status>
</test>
<test id="s1-s5-t4" name="Test Multipart Upload Complete Invalid part">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:07:43.672" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:07:43.678" level="INFO">${rc} = 1</msg>
<msg timestamp="20191106 17:07:43.679" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191106 17:07:43.679" starttime="20191106 17:07:43.670"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191106 17:07:43.681" starttime="20191106 17:07:43.680"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:07:43.683" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:07:43.880" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:07:43.880" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191106 17:07:43.880" starttime="20191106 17:07:43.681"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:07:43.885" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:07:44.397" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:07:44.397" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.keystealth.org
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: sjc.edge.kernel.org
 * updates: mirror.key...</msg>
<status status="PASS" endtime="20191106 17:07:44.398" starttime="20191106 17:07:43.883"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:07:44.399" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.keystealth.org
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: sjc.edge.kernel.org
 * updates: mirror.keystealth.org
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191106 17:07:44.399" starttime="20191106 17:07:44.398"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:07:44.400" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191106 17:07:44.401" starttime="20191106 17:07:44.400"></status>
</kw>
<status status="PASS" endtime="20191106 17:07:44.401" starttime="20191106 17:07:43.883"></status>
</kw>
<status status="PASS" endtime="20191106 17:07:44.401" starttime="20191106 17:07:43.882"></status>
</kw>
<status status="PASS" endtime="20191106 17:07:44.402" starttime="20191106 17:07:43.881"></status>
</kw>
<status status="PASS" endtime="20191106 17:07:44.402" starttime="20191106 17:07:43.669"></status>
</kw>
<status status="PASS" endtime="20191106 17:07:44.402" starttime="20191106 17:07:43.669"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:07:44.409" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:07:44.415" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:07:44.416" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191106 17:07:44.416" starttime="20191106 17:07:44.406"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:07:44.417" level="INFO">s3g</msg>
<status status="PASS" endtime="20191106 17:07:44.418" starttime="20191106 17:07:44.416"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:07:44.419" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191106 17:07:44.419" starttime="20191106 17:07:44.418"></status>
</kw>
<msg timestamp="20191106 17:07:44.420" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191106 17:07:44.420" starttime="20191106 17:07:44.406"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191106 17:07:44.421" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191106 17:07:44.422" starttime="20191106 17:07:44.420"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:07:44.427" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:07:44.441" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:07:44.441" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191106 17:07:44.441" starttime="20191106 17:07:44.425"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:07:44.443" level="INFO"></msg>
<status status="PASS" endtime="20191106 17:07:44.443" starttime="20191106 17:07:44.442"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:07:44.443" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191106 17:07:44.444" starttime="20191106 17:07:44.443"></status>
</kw>
<status status="PASS" endtime="20191106 17:07:44.444" starttime="20191106 17:07:44.424"></status>
</kw>
<status status="PASS" endtime="20191106 17:07:44.444" starttime="20191106 17:07:44.422"></status>
</kw>
<status status="PASS" endtime="20191106 17:07:44.444" starttime="20191106 17:07:44.405"></status>
</kw>
<status status="PASS" endtime="20191106 17:07:44.445" starttime="20191106 17:07:44.404"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:07:44.448" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:07:46.420" level="INFO">${rc} = 255</msg>
<msg timestamp="20191106 17:07:46.420" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191106 17:07:46.420" starttime="20191106 17:07:44.447"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:07:46.422" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
2019-11-06 17:07:46,367 ERROR client.OzoneClientFactory: Couldn't create RpcClient protocol exception: 
INTERNAL_ERROR org.apache.hadoop.ozone.om.exceptions.OMException: DestHost:destPort scm:9860 , LocalHost:localPort om/172.19.0.6:0. Failed on local exception: java.io.IOException: javax.security.sasl.SaslException: GSS initiate failed [Caused by GSSException: No valid credentials provided (Mechanism level: Failed to find any Kerberos tgt)]
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.handleError(OzoneManagerProtocolClientSideTranslatorPB.java:758)
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.getServiceInfo(OzoneManagerProtocolClientSideTranslatorPB.java:1249)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.hadoop.hdds.tracing.TraceAllMethod.invoke(TraceAllMethod.java:66)
	at com.sun.proxy.$Proxy20.getServiceInfo(Unknown Source)
	at org.apache.hadoop.ozone.client.rpc.RpcClient.&lt;init&gt;(RpcClient.java:156)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:256)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:239)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getRpcClient(OzoneClientFactory.java:203)
	at org.apache.hadoop.ozone.web.ozShell.OzoneAddress.createClient(OzoneAddress.java:117)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:45)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:32)
	at picocli.CommandLine.execute(CommandLine.java:1173)
	at picocli.CommandLine.access$800(CommandLine.java:141)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1367)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1335)
	at picocli.CommandLine$AbstractParseResultHandler.handleParseResult(CommandLine.java:1243)
	at picocli.CommandLine.parseWithHandlers(CommandLine.java:1526)
	at picocli.CommandLine.parseWithHandler(CommandLine.java:1465)
	at org.apache.hadoop.hdds.cli.GenericCli.execute(GenericCli.java:65)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.execute(S3Shell.java:43)
	at org.apache.hadoop.hdds.cli.GenericCli.run(GenericCli.java:56)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.main(S3Shell.java:54)
Couldn't create RpcClient protocol</msg>
<status status="PASS" endtime="20191106 17:07:46.423" starttime="20191106 17:07:46.421"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:07:46.424" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191106 17:07:46.425" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191106 17:07:46.425" starttime="20191106 17:07:46.423"></status>
</kw>
<status status="FAIL" endtime="20191106 17:07:46.425" starttime="20191106 17:07:44.446"></status>
</kw>
<status status="FAIL" endtime="20191106 17:07:46.426" starttime="20191106 17:07:44.446"></status>
</kw>
<status status="FAIL" endtime="20191106 17:07:46.426" starttime="20191106 17:07:44.445"></status>
</kw>
<status status="FAIL" endtime="20191106 17:07:46.426" starttime="20191106 17:07:44.403"></status>
</kw>
<status status="FAIL" endtime="20191106 17:07:46.426" starttime="20191106 17:07:44.402"></status>
</kw>
<status status="FAIL" endtime="20191106 17:07:46.427" starttime="20191106 17:07:43.668"></status>
</kw>
<status status="FAIL" endtime="20191106 17:07:46.427" critical="yes" starttime="20191106 17:07:43.667">Setup failed:
255 != 0</status>
</test>
<test id="s1-s5-t5" name="Test abort Multipart upload">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:07:46.434" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:07:46.441" level="INFO">${rc} = 1</msg>
<msg timestamp="20191106 17:07:46.441" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191106 17:07:46.442" starttime="20191106 17:07:46.432"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191106 17:07:46.444" starttime="20191106 17:07:46.443"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:07:46.447" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:07:46.639" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:07:46.639" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191106 17:07:46.640" starttime="20191106 17:07:46.444"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:07:46.645" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:07:47.167" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:07:47.168" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.keystealth.org
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: sjc.edge.kernel.org
 * updates: mirror.key...</msg>
<status status="PASS" endtime="20191106 17:07:47.168" starttime="20191106 17:07:46.643"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:07:47.169" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.keystealth.org
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: sjc.edge.kernel.org
 * updates: mirror.keystealth.org
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191106 17:07:47.170" starttime="20191106 17:07:47.169"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:07:47.170" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191106 17:07:47.171" starttime="20191106 17:07:47.170"></status>
</kw>
<status status="PASS" endtime="20191106 17:07:47.171" starttime="20191106 17:07:46.642"></status>
</kw>
<status status="PASS" endtime="20191106 17:07:47.171" starttime="20191106 17:07:46.642"></status>
</kw>
<status status="PASS" endtime="20191106 17:07:47.172" starttime="20191106 17:07:46.640"></status>
</kw>
<status status="PASS" endtime="20191106 17:07:47.172" starttime="20191106 17:07:46.431"></status>
</kw>
<status status="PASS" endtime="20191106 17:07:47.172" starttime="20191106 17:07:46.430"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:07:47.178" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:07:47.183" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:07:47.183" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191106 17:07:47.183" starttime="20191106 17:07:47.176"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:07:47.185" level="INFO">s3g</msg>
<status status="PASS" endtime="20191106 17:07:47.185" starttime="20191106 17:07:47.184"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:07:47.186" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191106 17:07:47.186" starttime="20191106 17:07:47.185"></status>
</kw>
<msg timestamp="20191106 17:07:47.186" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191106 17:07:47.187" starttime="20191106 17:07:47.175"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191106 17:07:47.188" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191106 17:07:47.188" starttime="20191106 17:07:47.187"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:07:47.192" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:07:47.208" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:07:47.208" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191106 17:07:47.208" starttime="20191106 17:07:47.190"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:07:47.210" level="INFO"></msg>
<status status="PASS" endtime="20191106 17:07:47.210" starttime="20191106 17:07:47.209"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:07:47.210" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191106 17:07:47.211" starttime="20191106 17:07:47.210"></status>
</kw>
<status status="PASS" endtime="20191106 17:07:47.211" starttime="20191106 17:07:47.190"></status>
</kw>
<status status="PASS" endtime="20191106 17:07:47.211" starttime="20191106 17:07:47.188"></status>
</kw>
<status status="PASS" endtime="20191106 17:07:47.211" starttime="20191106 17:07:47.175"></status>
</kw>
<status status="PASS" endtime="20191106 17:07:47.211" starttime="20191106 17:07:47.174"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:07:47.215" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:07:49.246" level="INFO">${rc} = 255</msg>
<msg timestamp="20191106 17:07:49.246" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191106 17:07:49.247" starttime="20191106 17:07:47.214"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:07:49.249" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
2019-11-06 17:07:49,197 ERROR client.OzoneClientFactory: Couldn't create RpcClient protocol exception: 
INTERNAL_ERROR org.apache.hadoop.ozone.om.exceptions.OMException: DestHost:destPort scm:9860 , LocalHost:localPort om/172.19.0.6:0. Failed on local exception: java.io.IOException: javax.security.sasl.SaslException: GSS initiate failed [Caused by GSSException: No valid credentials provided (Mechanism level: Failed to find any Kerberos tgt)]
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.handleError(OzoneManagerProtocolClientSideTranslatorPB.java:758)
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.getServiceInfo(OzoneManagerProtocolClientSideTranslatorPB.java:1249)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.hadoop.hdds.tracing.TraceAllMethod.invoke(TraceAllMethod.java:66)
	at com.sun.proxy.$Proxy20.getServiceInfo(Unknown Source)
	at org.apache.hadoop.ozone.client.rpc.RpcClient.&lt;init&gt;(RpcClient.java:156)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:256)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:239)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getRpcClient(OzoneClientFactory.java:203)
	at org.apache.hadoop.ozone.web.ozShell.OzoneAddress.createClient(OzoneAddress.java:117)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:45)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:32)
	at picocli.CommandLine.execute(CommandLine.java:1173)
	at picocli.CommandLine.access$800(CommandLine.java:141)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1367)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1335)
	at picocli.CommandLine$AbstractParseResultHandler.handleParseResult(CommandLine.java:1243)
	at picocli.CommandLine.parseWithHandlers(CommandLine.java:1526)
	at picocli.CommandLine.parseWithHandler(CommandLine.java:1465)
	at org.apache.hadoop.hdds.cli.GenericCli.execute(GenericCli.java:65)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.execute(S3Shell.java:43)
	at org.apache.hadoop.hdds.cli.GenericCli.run(GenericCli.java:56)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.main(S3Shell.java:54)
Couldn't create RpcClient protocol</msg>
<status status="PASS" endtime="20191106 17:07:49.249" starttime="20191106 17:07:49.247"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:07:49.250" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191106 17:07:49.251" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191106 17:07:49.251" starttime="20191106 17:07:49.249"></status>
</kw>
<status status="FAIL" endtime="20191106 17:07:49.251" starttime="20191106 17:07:47.213"></status>
</kw>
<status status="FAIL" endtime="20191106 17:07:49.252" starttime="20191106 17:07:47.213"></status>
</kw>
<status status="FAIL" endtime="20191106 17:07:49.252" starttime="20191106 17:07:47.212"></status>
</kw>
<status status="FAIL" endtime="20191106 17:07:49.252" starttime="20191106 17:07:47.173"></status>
</kw>
<status status="FAIL" endtime="20191106 17:07:49.252" starttime="20191106 17:07:47.172"></status>
</kw>
<status status="FAIL" endtime="20191106 17:07:49.253" starttime="20191106 17:07:46.429"></status>
</kw>
<status status="FAIL" endtime="20191106 17:07:49.253" critical="yes" starttime="20191106 17:07:46.428">Setup failed:
255 != 0</status>
</test>
<test id="s1-s5-t6" name="Test abort Multipart upload with invalid uploadId">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:07:49.260" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:07:49.266" level="INFO">${rc} = 1</msg>
<msg timestamp="20191106 17:07:49.266" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191106 17:07:49.267" starttime="20191106 17:07:49.258"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191106 17:07:49.269" starttime="20191106 17:07:49.267"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:07:49.271" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:07:49.449" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:07:49.449" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191106 17:07:49.450" starttime="20191106 17:07:49.269"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:07:49.456" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:07:49.957" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:07:49.957" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.keystealth.org
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: sjc.edge.kernel.org
 * updates: mirror.key...</msg>
<status status="PASS" endtime="20191106 17:07:49.957" starttime="20191106 17:07:49.454"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:07:49.958" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.keystealth.org
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: sjc.edge.kernel.org
 * updates: mirror.keystealth.org
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191106 17:07:49.958" starttime="20191106 17:07:49.958"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:07:49.959" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191106 17:07:49.959" starttime="20191106 17:07:49.959"></status>
</kw>
<status status="PASS" endtime="20191106 17:07:49.959" starttime="20191106 17:07:49.453"></status>
</kw>
<status status="PASS" endtime="20191106 17:07:49.960" starttime="20191106 17:07:49.452"></status>
</kw>
<status status="PASS" endtime="20191106 17:07:49.960" starttime="20191106 17:07:49.451"></status>
</kw>
<status status="PASS" endtime="20191106 17:07:49.960" starttime="20191106 17:07:49.257"></status>
</kw>
<status status="PASS" endtime="20191106 17:07:49.960" starttime="20191106 17:07:49.256"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:07:49.964" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:07:49.971" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:07:49.971" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191106 17:07:49.971" starttime="20191106 17:07:49.963"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:07:49.973" level="INFO">s3g</msg>
<status status="PASS" endtime="20191106 17:07:49.973" starttime="20191106 17:07:49.972"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:07:49.975" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191106 17:07:49.975" starttime="20191106 17:07:49.973"></status>
</kw>
<msg timestamp="20191106 17:07:49.976" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191106 17:07:49.976" starttime="20191106 17:07:49.962"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191106 17:07:49.977" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191106 17:07:49.977" starttime="20191106 17:07:49.976"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:07:49.982" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:07:49.999" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:07:49.999" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191106 17:07:49.999" starttime="20191106 17:07:49.980"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:07:50.001" level="INFO"></msg>
<status status="PASS" endtime="20191106 17:07:50.001" starttime="20191106 17:07:50.000"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:07:50.002" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191106 17:07:50.002" starttime="20191106 17:07:50.001"></status>
</kw>
<status status="PASS" endtime="20191106 17:07:50.003" starttime="20191106 17:07:49.979"></status>
</kw>
<status status="PASS" endtime="20191106 17:07:50.003" starttime="20191106 17:07:49.978"></status>
</kw>
<status status="PASS" endtime="20191106 17:07:50.003" starttime="20191106 17:07:49.962"></status>
</kw>
<status status="PASS" endtime="20191106 17:07:50.003" starttime="20191106 17:07:49.961"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:07:50.008" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:07:52.016" level="INFO">${rc} = 255</msg>
<msg timestamp="20191106 17:07:52.016" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191106 17:07:52.016" starttime="20191106 17:07:50.006"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:07:52.018" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
2019-11-06 17:07:51,962 ERROR client.OzoneClientFactory: Couldn't create RpcClient protocol exception: 
INTERNAL_ERROR org.apache.hadoop.ozone.om.exceptions.OMException: DestHost:destPort scm:9860 , LocalHost:localPort om/172.19.0.6:0. Failed on local exception: java.io.IOException: javax.security.sasl.SaslException: GSS initiate failed [Caused by GSSException: No valid credentials provided (Mechanism level: Failed to find any Kerberos tgt)]
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.handleError(OzoneManagerProtocolClientSideTranslatorPB.java:758)
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.getServiceInfo(OzoneManagerProtocolClientSideTranslatorPB.java:1249)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.hadoop.hdds.tracing.TraceAllMethod.invoke(TraceAllMethod.java:66)
	at com.sun.proxy.$Proxy20.getServiceInfo(Unknown Source)
	at org.apache.hadoop.ozone.client.rpc.RpcClient.&lt;init&gt;(RpcClient.java:156)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:256)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:239)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getRpcClient(OzoneClientFactory.java:203)
	at org.apache.hadoop.ozone.web.ozShell.OzoneAddress.createClient(OzoneAddress.java:117)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:45)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:32)
	at picocli.CommandLine.execute(CommandLine.java:1173)
	at picocli.CommandLine.access$800(CommandLine.java:141)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1367)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1335)
	at picocli.CommandLine$AbstractParseResultHandler.handleParseResult(CommandLine.java:1243)
	at picocli.CommandLine.parseWithHandlers(CommandLine.java:1526)
	at picocli.CommandLine.parseWithHandler(CommandLine.java:1465)
	at org.apache.hadoop.hdds.cli.GenericCli.execute(GenericCli.java:65)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.execute(S3Shell.java:43)
	at org.apache.hadoop.hdds.cli.GenericCli.run(GenericCli.java:56)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.main(S3Shell.java:54)
Couldn't create RpcClient protocol</msg>
<status status="PASS" endtime="20191106 17:07:52.019" starttime="20191106 17:07:52.017"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:07:52.020" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191106 17:07:52.020" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191106 17:07:52.021" starttime="20191106 17:07:52.019"></status>
</kw>
<status status="FAIL" endtime="20191106 17:07:52.021" starttime="20191106 17:07:50.005"></status>
</kw>
<status status="FAIL" endtime="20191106 17:07:52.022" starttime="20191106 17:07:50.004"></status>
</kw>
<status status="FAIL" endtime="20191106 17:07:52.022" starttime="20191106 17:07:50.004"></status>
</kw>
<status status="FAIL" endtime="20191106 17:07:52.022" starttime="20191106 17:07:49.961"></status>
</kw>
<status status="FAIL" endtime="20191106 17:07:52.022" starttime="20191106 17:07:49.960"></status>
</kw>
<status status="FAIL" endtime="20191106 17:07:52.023" starttime="20191106 17:07:49.255"></status>
</kw>
<status status="FAIL" endtime="20191106 17:07:52.023" critical="yes" starttime="20191106 17:07:49.254">Setup failed:
255 != 0</status>
</test>
<test id="s1-s5-t7" name="Upload part with Incorrect uploadID">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:07:52.030" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:07:52.036" level="INFO">${rc} = 1</msg>
<msg timestamp="20191106 17:07:52.037" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191106 17:07:52.037" starttime="20191106 17:07:52.027"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191106 17:07:52.039" starttime="20191106 17:07:52.038"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:07:52.041" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:07:52.235" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:07:52.235" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191106 17:07:52.235" starttime="20191106 17:07:52.039"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:07:52.239" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:07:52.758" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:07:52.758" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.keystealth.org
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: sjc.edge.kernel.org
 * updates: mirror.key...</msg>
<status status="PASS" endtime="20191106 17:07:52.758" starttime="20191106 17:07:52.238"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:07:52.760" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.keystealth.org
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: sjc.edge.kernel.org
 * updates: mirror.keystealth.org
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191106 17:07:52.760" starttime="20191106 17:07:52.759"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:07:52.761" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191106 17:07:52.762" starttime="20191106 17:07:52.761"></status>
</kw>
<status status="PASS" endtime="20191106 17:07:52.762" starttime="20191106 17:07:52.237"></status>
</kw>
<status status="PASS" endtime="20191106 17:07:52.763" starttime="20191106 17:07:52.236"></status>
</kw>
<status status="PASS" endtime="20191106 17:07:52.763" starttime="20191106 17:07:52.236"></status>
</kw>
<status status="PASS" endtime="20191106 17:07:52.763" starttime="20191106 17:07:52.027"></status>
</kw>
<status status="PASS" endtime="20191106 17:07:52.763" starttime="20191106 17:07:52.026"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:07:52.772" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:07:52.776" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:07:52.777" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191106 17:07:52.777" starttime="20191106 17:07:52.768"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:07:52.778" level="INFO">s3g</msg>
<status status="PASS" endtime="20191106 17:07:52.778" starttime="20191106 17:07:52.777"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:07:52.778" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191106 17:07:52.779" starttime="20191106 17:07:52.778"></status>
</kw>
<msg timestamp="20191106 17:07:52.779" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191106 17:07:52.779" starttime="20191106 17:07:52.768"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191106 17:07:52.780" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191106 17:07:52.780" starttime="20191106 17:07:52.779"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:07:52.783" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:07:52.800" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:07:52.800" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191106 17:07:52.800" starttime="20191106 17:07:52.782"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:07:52.801" level="INFO"></msg>
<status status="PASS" endtime="20191106 17:07:52.801" starttime="20191106 17:07:52.800"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:07:52.801" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191106 17:07:52.802" starttime="20191106 17:07:52.801"></status>
</kw>
<status status="PASS" endtime="20191106 17:07:52.802" starttime="20191106 17:07:52.781"></status>
</kw>
<status status="PASS" endtime="20191106 17:07:52.802" starttime="20191106 17:07:52.780"></status>
</kw>
<status status="PASS" endtime="20191106 17:07:52.802" starttime="20191106 17:07:52.767"></status>
</kw>
<status status="PASS" endtime="20191106 17:07:52.802" starttime="20191106 17:07:52.766"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:07:52.806" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:07:54.816" level="INFO">${rc} = 255</msg>
<msg timestamp="20191106 17:07:54.817" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191106 17:07:54.817" starttime="20191106 17:07:52.804"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:07:54.819" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
2019-11-06 17:07:54,768 ERROR client.OzoneClientFactory: Couldn't create RpcClient protocol exception: 
INTERNAL_ERROR org.apache.hadoop.ozone.om.exceptions.OMException: DestHost:destPort scm:9860 , LocalHost:localPort om/172.19.0.6:0. Failed on local exception: java.io.IOException: javax.security.sasl.SaslException: GSS initiate failed [Caused by GSSException: No valid credentials provided (Mechanism level: Failed to find any Kerberos tgt)]
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.handleError(OzoneManagerProtocolClientSideTranslatorPB.java:758)
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.getServiceInfo(OzoneManagerProtocolClientSideTranslatorPB.java:1249)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.hadoop.hdds.tracing.TraceAllMethod.invoke(TraceAllMethod.java:66)
	at com.sun.proxy.$Proxy20.getServiceInfo(Unknown Source)
	at org.apache.hadoop.ozone.client.rpc.RpcClient.&lt;init&gt;(RpcClient.java:156)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:256)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:239)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getRpcClient(OzoneClientFactory.java:203)
	at org.apache.hadoop.ozone.web.ozShell.OzoneAddress.createClient(OzoneAddress.java:117)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:45)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:32)
	at picocli.CommandLine.execute(CommandLine.java:1173)
	at picocli.CommandLine.access$800(CommandLine.java:141)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1367)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1335)
	at picocli.CommandLine$AbstractParseResultHandler.handleParseResult(CommandLine.java:1243)
	at picocli.CommandLine.parseWithHandlers(CommandLine.java:1526)
	at picocli.CommandLine.parseWithHandler(CommandLine.java:1465)
	at org.apache.hadoop.hdds.cli.GenericCli.execute(GenericCli.java:65)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.execute(S3Shell.java:43)
	at org.apache.hadoop.hdds.cli.GenericCli.run(GenericCli.java:56)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.main(S3Shell.java:54)
Couldn't create RpcClient protocol</msg>
<status status="PASS" endtime="20191106 17:07:54.819" starttime="20191106 17:07:54.818"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:07:54.820" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191106 17:07:54.821" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191106 17:07:54.821" starttime="20191106 17:07:54.820"></status>
</kw>
<status status="FAIL" endtime="20191106 17:07:54.822" starttime="20191106 17:07:52.804"></status>
</kw>
<status status="FAIL" endtime="20191106 17:07:54.822" starttime="20191106 17:07:52.803"></status>
</kw>
<status status="FAIL" endtime="20191106 17:07:54.822" starttime="20191106 17:07:52.803"></status>
</kw>
<status status="FAIL" endtime="20191106 17:07:54.823" starttime="20191106 17:07:52.765"></status>
</kw>
<status status="FAIL" endtime="20191106 17:07:54.823" starttime="20191106 17:07:52.764"></status>
</kw>
<status status="FAIL" endtime="20191106 17:07:54.823" starttime="20191106 17:07:52.025"></status>
</kw>
<status status="FAIL" endtime="20191106 17:07:54.824" critical="yes" starttime="20191106 17:07:52.024">Setup failed:
255 != 0</status>
</test>
<test id="s1-s5-t8" name="Test list parts">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:07:54.830" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:07:54.836" level="INFO">${rc} = 1</msg>
<msg timestamp="20191106 17:07:54.836" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191106 17:07:54.836" starttime="20191106 17:07:54.828"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191106 17:07:54.838" starttime="20191106 17:07:54.837"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:07:54.841" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:07:55.040" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:07:55.040" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191106 17:07:55.040" starttime="20191106 17:07:54.839"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:07:55.047" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:07:55.515" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:07:55.515" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.keystealth.org
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: sjc.edge.kernel.org
 * updates: mirror.key...</msg>
<status status="PASS" endtime="20191106 17:07:55.515" starttime="20191106 17:07:55.044"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:07:55.517" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.keystealth.org
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: sjc.edge.kernel.org
 * updates: mirror.keystealth.org
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191106 17:07:55.517" starttime="20191106 17:07:55.516"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:07:55.518" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191106 17:07:55.519" starttime="20191106 17:07:55.518"></status>
</kw>
<status status="PASS" endtime="20191106 17:07:55.519" starttime="20191106 17:07:55.044"></status>
</kw>
<status status="PASS" endtime="20191106 17:07:55.520" starttime="20191106 17:07:55.043"></status>
</kw>
<status status="PASS" endtime="20191106 17:07:55.520" starttime="20191106 17:07:55.041"></status>
</kw>
<status status="PASS" endtime="20191106 17:07:55.520" starttime="20191106 17:07:54.827"></status>
</kw>
<status status="PASS" endtime="20191106 17:07:55.520" starttime="20191106 17:07:54.826"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:07:55.528" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:07:55.535" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:07:55.535" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191106 17:07:55.535" starttime="20191106 17:07:55.526"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:07:55.537" level="INFO">s3g</msg>
<status status="PASS" endtime="20191106 17:07:55.537" starttime="20191106 17:07:55.536"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:07:55.538" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191106 17:07:55.539" starttime="20191106 17:07:55.538"></status>
</kw>
<msg timestamp="20191106 17:07:55.539" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191106 17:07:55.539" starttime="20191106 17:07:55.524"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191106 17:07:55.541" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191106 17:07:55.541" starttime="20191106 17:07:55.540"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:07:55.546" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:07:55.561" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:07:55.561" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191106 17:07:55.561" starttime="20191106 17:07:55.544"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:07:55.563" level="INFO"></msg>
<status status="PASS" endtime="20191106 17:07:55.563" starttime="20191106 17:07:55.562"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:07:55.564" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191106 17:07:55.564" starttime="20191106 17:07:55.563"></status>
</kw>
<status status="PASS" endtime="20191106 17:07:55.564" starttime="20191106 17:07:55.542"></status>
</kw>
<status status="PASS" endtime="20191106 17:07:55.565" starttime="20191106 17:07:55.541"></status>
</kw>
<status status="PASS" endtime="20191106 17:07:55.565" starttime="20191106 17:07:55.524"></status>
</kw>
<status status="PASS" endtime="20191106 17:07:55.565" starttime="20191106 17:07:55.523"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:07:55.570" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:07:57.616" level="INFO">${rc} = 255</msg>
<msg timestamp="20191106 17:07:57.616" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191106 17:07:57.616" starttime="20191106 17:07:55.568"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:07:57.618" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
2019-11-06 17:07:57,521 ERROR client.OzoneClientFactory: Couldn't create RpcClient protocol exception: 
INTERNAL_ERROR org.apache.hadoop.ozone.om.exceptions.OMException: DestHost:destPort scm:9860 , LocalHost:localPort om/172.19.0.6:0. Failed on local exception: java.io.IOException: javax.security.sasl.SaslException: GSS initiate failed [Caused by GSSException: No valid credentials provided (Mechanism level: Failed to find any Kerberos tgt)]
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.handleError(OzoneManagerProtocolClientSideTranslatorPB.java:758)
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.getServiceInfo(OzoneManagerProtocolClientSideTranslatorPB.java:1249)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.hadoop.hdds.tracing.TraceAllMethod.invoke(TraceAllMethod.java:66)
	at com.sun.proxy.$Proxy20.getServiceInfo(Unknown Source)
	at org.apache.hadoop.ozone.client.rpc.RpcClient.&lt;init&gt;(RpcClient.java:156)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:256)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:239)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getRpcClient(OzoneClientFactory.java:203)
	at org.apache.hadoop.ozone.web.ozShell.OzoneAddress.createClient(OzoneAddress.java:117)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:45)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:32)
	at picocli.CommandLine.execute(CommandLine.java:1173)
	at picocli.CommandLine.access$800(CommandLine.java:141)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1367)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1335)
	at picocli.CommandLine$AbstractParseResultHandler.handleParseResult(CommandLine.java:1243)
	at picocli.CommandLine.parseWithHandlers(CommandLine.java:1526)
	at picocli.CommandLine.parseWithHandler(CommandLine.java:1465)
	at org.apache.hadoop.hdds.cli.GenericCli.execute(GenericCli.java:65)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.execute(S3Shell.java:43)
	at org.apache.hadoop.hdds.cli.GenericCli.run(GenericCli.java:56)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.main(S3Shell.java:54)
Couldn't create RpcClient protocol</msg>
<status status="PASS" endtime="20191106 17:07:57.618" starttime="20191106 17:07:57.617"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:07:57.619" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191106 17:07:57.620" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191106 17:07:57.620" starttime="20191106 17:07:57.619"></status>
</kw>
<status status="FAIL" endtime="20191106 17:07:57.621" starttime="20191106 17:07:55.567"></status>
</kw>
<status status="FAIL" endtime="20191106 17:07:57.621" starttime="20191106 17:07:55.566"></status>
</kw>
<status status="FAIL" endtime="20191106 17:07:57.621" starttime="20191106 17:07:55.565"></status>
</kw>
<status status="FAIL" endtime="20191106 17:07:57.622" starttime="20191106 17:07:55.522"></status>
</kw>
<status status="FAIL" endtime="20191106 17:07:57.622" starttime="20191106 17:07:55.521"></status>
</kw>
<status status="FAIL" endtime="20191106 17:07:57.622" starttime="20191106 17:07:54.825"></status>
</kw>
<status status="FAIL" endtime="20191106 17:07:57.623" critical="yes" starttime="20191106 17:07:54.824">Setup failed:
255 != 0</status>
</test>
<test id="s1-s5-t9" name="Test Multipart Upload with the simplified aws s3 cp API">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:07:57.630" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:07:57.637" level="INFO">${rc} = 1</msg>
<msg timestamp="20191106 17:07:57.637" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191106 17:07:57.637" starttime="20191106 17:07:57.627"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191106 17:07:57.640" starttime="20191106 17:07:57.638"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:07:57.642" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:07:57.834" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:07:57.834" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191106 17:07:57.834" starttime="20191106 17:07:57.640"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:07:57.843" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:07:58.348" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:07:58.348" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.keystealth.org
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: sjc.edge.kernel.org
 * updates: mirror.key...</msg>
<status status="PASS" endtime="20191106 17:07:58.348" starttime="20191106 17:07:57.839"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:07:58.350" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.keystealth.org
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: sjc.edge.kernel.org
 * updates: mirror.keystealth.org
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191106 17:07:58.350" starttime="20191106 17:07:58.349"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:07:58.351" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191106 17:07:58.351" starttime="20191106 17:07:58.350"></status>
</kw>
<status status="PASS" endtime="20191106 17:07:58.351" starttime="20191106 17:07:57.838"></status>
</kw>
<status status="PASS" endtime="20191106 17:07:58.352" starttime="20191106 17:07:57.837"></status>
</kw>
<status status="PASS" endtime="20191106 17:07:58.352" starttime="20191106 17:07:57.835"></status>
</kw>
<status status="PASS" endtime="20191106 17:07:58.352" starttime="20191106 17:07:57.627"></status>
</kw>
<status status="PASS" endtime="20191106 17:07:58.352" starttime="20191106 17:07:57.626"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:07:58.358" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:07:58.363" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:07:58.363" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191106 17:07:58.363" starttime="20191106 17:07:58.356"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:07:58.364" level="INFO">s3g</msg>
<status status="PASS" endtime="20191106 17:07:58.364" starttime="20191106 17:07:58.364"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:07:58.365" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191106 17:07:58.365" starttime="20191106 17:07:58.364"></status>
</kw>
<msg timestamp="20191106 17:07:58.365" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191106 17:07:58.365" starttime="20191106 17:07:58.356"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191106 17:07:58.366" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191106 17:07:58.367" starttime="20191106 17:07:58.366"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:07:58.369" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:07:58.387" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:07:58.387" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191106 17:07:58.387" starttime="20191106 17:07:58.368"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:07:58.388" level="INFO"></msg>
<status status="PASS" endtime="20191106 17:07:58.388" starttime="20191106 17:07:58.388"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:07:58.389" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191106 17:07:58.389" starttime="20191106 17:07:58.389"></status>
</kw>
<status status="PASS" endtime="20191106 17:07:58.389" starttime="20191106 17:07:58.367"></status>
</kw>
<status status="PASS" endtime="20191106 17:07:58.390" starttime="20191106 17:07:58.367"></status>
</kw>
<status status="PASS" endtime="20191106 17:07:58.390" starttime="20191106 17:07:58.355"></status>
</kw>
<status status="PASS" endtime="20191106 17:07:58.390" starttime="20191106 17:07:58.354"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:07:58.393" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:00.420" level="INFO">${rc} = 255</msg>
<msg timestamp="20191106 17:08:00.420" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191106 17:08:00.420" starttime="20191106 17:07:58.392"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:08:00.422" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
2019-11-06 17:08:00,381 ERROR client.OzoneClientFactory: Couldn't create RpcClient protocol exception: 
INTERNAL_ERROR org.apache.hadoop.ozone.om.exceptions.OMException: DestHost:destPort scm:9860 , LocalHost:localPort om/172.19.0.6:0. Failed on local exception: java.io.IOException: javax.security.sasl.SaslException: GSS initiate failed [Caused by GSSException: No valid credentials provided (Mechanism level: Failed to find any Kerberos tgt)]
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.handleError(OzoneManagerProtocolClientSideTranslatorPB.java:758)
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.getServiceInfo(OzoneManagerProtocolClientSideTranslatorPB.java:1249)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.hadoop.hdds.tracing.TraceAllMethod.invoke(TraceAllMethod.java:66)
	at com.sun.proxy.$Proxy20.getServiceInfo(Unknown Source)
	at org.apache.hadoop.ozone.client.rpc.RpcClient.&lt;init&gt;(RpcClient.java:156)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:256)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:239)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getRpcClient(OzoneClientFactory.java:203)
	at org.apache.hadoop.ozone.web.ozShell.OzoneAddress.createClient(OzoneAddress.java:117)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:45)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:32)
	at picocli.CommandLine.execute(CommandLine.java:1173)
	at picocli.CommandLine.access$800(CommandLine.java:141)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1367)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1335)
	at picocli.CommandLine$AbstractParseResultHandler.handleParseResult(CommandLine.java:1243)
	at picocli.CommandLine.parseWithHandlers(CommandLine.java:1526)
	at picocli.CommandLine.parseWithHandler(CommandLine.java:1465)
	at org.apache.hadoop.hdds.cli.GenericCli.execute(GenericCli.java:65)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.execute(S3Shell.java:43)
	at org.apache.hadoop.hdds.cli.GenericCli.run(GenericCli.java:56)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.main(S3Shell.java:54)
Couldn't create RpcClient protocol</msg>
<status status="PASS" endtime="20191106 17:08:00.422" starttime="20191106 17:08:00.421"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:08:00.423" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191106 17:08:00.423" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191106 17:08:00.423" starttime="20191106 17:08:00.422"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:00.424" starttime="20191106 17:07:58.391"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:00.424" starttime="20191106 17:07:58.391"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:00.424" starttime="20191106 17:07:58.390"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:00.424" starttime="20191106 17:07:58.353"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:00.424" starttime="20191106 17:07:58.352"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:00.424" starttime="20191106 17:07:57.625"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:00.425" critical="yes" starttime="20191106 17:07:57.624">Setup failed:
255 != 0</status>
</test>
<test id="s1-s5-t10" name="Test Multipart Upload Put With Copy">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:00.429" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:00.436" level="INFO">${rc} = 1</msg>
<msg timestamp="20191106 17:08:00.436" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191106 17:08:00.436" starttime="20191106 17:08:00.427"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191106 17:08:00.438" starttime="20191106 17:08:00.437"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:00.441" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:00.637" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:08:00.637" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191106 17:08:00.637" starttime="20191106 17:08:00.439"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:00.644" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:01.198" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:08:01.198" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.keystealth.org
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: sjc.edge.kernel.org
 * updates: mirror.key...</msg>
<status status="PASS" endtime="20191106 17:08:01.198" starttime="20191106 17:08:00.641"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:08:01.200" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.keystealth.org
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: sjc.edge.kernel.org
 * updates: mirror.keystealth.org
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191106 17:08:01.201" starttime="20191106 17:08:01.199"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:08:01.202" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191106 17:08:01.203" starttime="20191106 17:08:01.201"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:01.204" starttime="20191106 17:08:00.640"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:01.204" starttime="20191106 17:08:00.639"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:01.204" starttime="20191106 17:08:00.638"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:01.204" starttime="20191106 17:08:00.427"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:01.205" starttime="20191106 17:08:00.426"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:01.212" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:01.219" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:08:01.219" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191106 17:08:01.219" starttime="20191106 17:08:01.210"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:08:01.220" level="INFO">s3g</msg>
<status status="PASS" endtime="20191106 17:08:01.220" starttime="20191106 17:08:01.219"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:08:01.221" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191106 17:08:01.221" starttime="20191106 17:08:01.220"></status>
</kw>
<msg timestamp="20191106 17:08:01.222" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191106 17:08:01.222" starttime="20191106 17:08:01.209"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191106 17:08:01.223" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191106 17:08:01.223" starttime="20191106 17:08:01.222"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:01.226" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:01.246" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:08:01.246" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191106 17:08:01.246" starttime="20191106 17:08:01.225"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:08:01.248" level="INFO"></msg>
<status status="PASS" endtime="20191106 17:08:01.248" starttime="20191106 17:08:01.247"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:08:01.248" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191106 17:08:01.249" starttime="20191106 17:08:01.248"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:01.249" starttime="20191106 17:08:01.224"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:01.249" starttime="20191106 17:08:01.223"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:01.249" starttime="20191106 17:08:01.208"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:01.249" starttime="20191106 17:08:01.207"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:01.253" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:03.328" level="INFO">${rc} = 255</msg>
<msg timestamp="20191106 17:08:03.328" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191106 17:08:03.329" starttime="20191106 17:08:01.252"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:08:03.330" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
2019-11-06 17:08:03,232 ERROR client.OzoneClientFactory: Couldn't create RpcClient protocol exception: 
INTERNAL_ERROR org.apache.hadoop.ozone.om.exceptions.OMException: DestHost:destPort scm:9860 , LocalHost:localPort om/172.19.0.6:0. Failed on local exception: java.io.IOException: javax.security.sasl.SaslException: GSS initiate failed [Caused by GSSException: No valid credentials provided (Mechanism level: Failed to find any Kerberos tgt)]
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.handleError(OzoneManagerProtocolClientSideTranslatorPB.java:758)
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.getServiceInfo(OzoneManagerProtocolClientSideTranslatorPB.java:1249)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.hadoop.hdds.tracing.TraceAllMethod.invoke(TraceAllMethod.java:66)
	at com.sun.proxy.$Proxy20.getServiceInfo(Unknown Source)
	at org.apache.hadoop.ozone.client.rpc.RpcClient.&lt;init&gt;(RpcClient.java:156)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:256)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:239)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getRpcClient(OzoneClientFactory.java:203)
	at org.apache.hadoop.ozone.web.ozShell.OzoneAddress.createClient(OzoneAddress.java:117)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:45)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:32)
	at picocli.CommandLine.execute(CommandLine.java:1173)
	at picocli.CommandLine.access$800(CommandLine.java:141)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1367)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1335)
	at picocli.CommandLine$AbstractParseResultHandler.handleParseResult(CommandLine.java:1243)
	at picocli.CommandLine.parseWithHandlers(CommandLine.java:1526)
	at picocli.CommandLine.parseWithHandler(CommandLine.java:1465)
	at org.apache.hadoop.hdds.cli.GenericCli.execute(GenericCli.java:65)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.execute(S3Shell.java:43)
	at org.apache.hadoop.hdds.cli.GenericCli.run(GenericCli.java:56)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.main(S3Shell.java:54)
Couldn't create RpcClient protocol</msg>
<status status="PASS" endtime="20191106 17:08:03.330" starttime="20191106 17:08:03.329"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:08:03.331" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191106 17:08:03.331" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191106 17:08:03.331" starttime="20191106 17:08:03.330"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:03.331" starttime="20191106 17:08:01.251"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:03.332" starttime="20191106 17:08:01.250"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:03.332" starttime="20191106 17:08:01.250"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:03.332" starttime="20191106 17:08:01.206"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:03.332" starttime="20191106 17:08:01.205"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:03.332" starttime="20191106 17:08:00.426"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:03.333" critical="yes" starttime="20191106 17:08:00.425">Setup failed:
255 != 0</status>
</test>
<test id="s1-s5-t11" name="Test Multipart Upload Put With Copy and range">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:03.337" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:03.344" level="INFO">${rc} = 1</msg>
<msg timestamp="20191106 17:08:03.344" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191106 17:08:03.344" starttime="20191106 17:08:03.335"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191106 17:08:03.345" starttime="20191106 17:08:03.344"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:03.347" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:03.497" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:08:03.497" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191106 17:08:03.498" starttime="20191106 17:08:03.345"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:03.504" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:04.035" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:08:04.035" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.keystealth.org
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: sjc.edge.kernel.org
 * updates: mirror.key...</msg>
<status status="PASS" endtime="20191106 17:08:04.035" starttime="20191106 17:08:03.502"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:08:04.037" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.keystealth.org
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: sjc.edge.kernel.org
 * updates: mirror.keystealth.org
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191106 17:08:04.037" starttime="20191106 17:08:04.036"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:08:04.038" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191106 17:08:04.039" starttime="20191106 17:08:04.038"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:04.039" starttime="20191106 17:08:03.501"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:04.040" starttime="20191106 17:08:03.500"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:04.040" starttime="20191106 17:08:03.498"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:04.040" starttime="20191106 17:08:03.335"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:04.040" starttime="20191106 17:08:03.335"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:04.048" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:04.053" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:08:04.053" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191106 17:08:04.054" starttime="20191106 17:08:04.046"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:08:04.056" level="INFO">s3g</msg>
<status status="PASS" endtime="20191106 17:08:04.056" starttime="20191106 17:08:04.055"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:08:04.057" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191106 17:08:04.057" starttime="20191106 17:08:04.056"></status>
</kw>
<msg timestamp="20191106 17:08:04.058" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191106 17:08:04.058" starttime="20191106 17:08:04.045"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191106 17:08:04.060" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191106 17:08:04.060" starttime="20191106 17:08:04.058"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:04.065" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:04.080" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:08:04.080" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191106 17:08:04.081" starttime="20191106 17:08:04.063"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:08:04.082" level="INFO"></msg>
<status status="PASS" endtime="20191106 17:08:04.082" starttime="20191106 17:08:04.081"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:08:04.083" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191106 17:08:04.084" starttime="20191106 17:08:04.083"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:04.084" starttime="20191106 17:08:04.061"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:04.084" starttime="20191106 17:08:04.060"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:04.085" starttime="20191106 17:08:04.044"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:04.085" starttime="20191106 17:08:04.043"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:04.090" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:06.017" level="INFO">${rc} = 255</msg>
<msg timestamp="20191106 17:08:06.017" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191106 17:08:06.017" starttime="20191106 17:08:04.088"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:08:06.019" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
2019-11-06 17:08:05,966 ERROR client.OzoneClientFactory: Couldn't create RpcClient protocol exception: 
INTERNAL_ERROR org.apache.hadoop.ozone.om.exceptions.OMException: DestHost:destPort scm:9860 , LocalHost:localPort om/172.19.0.6:0. Failed on local exception: java.io.IOException: javax.security.sasl.SaslException: GSS initiate failed [Caused by GSSException: No valid credentials provided (Mechanism level: Failed to find any Kerberos tgt)]
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.handleError(OzoneManagerProtocolClientSideTranslatorPB.java:758)
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.getServiceInfo(OzoneManagerProtocolClientSideTranslatorPB.java:1249)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.hadoop.hdds.tracing.TraceAllMethod.invoke(TraceAllMethod.java:66)
	at com.sun.proxy.$Proxy20.getServiceInfo(Unknown Source)
	at org.apache.hadoop.ozone.client.rpc.RpcClient.&lt;init&gt;(RpcClient.java:156)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:256)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:239)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getRpcClient(OzoneClientFactory.java:203)
	at org.apache.hadoop.ozone.web.ozShell.OzoneAddress.createClient(OzoneAddress.java:117)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:45)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:32)
	at picocli.CommandLine.execute(CommandLine.java:1173)
	at picocli.CommandLine.access$800(CommandLine.java:141)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1367)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1335)
	at picocli.CommandLine$AbstractParseResultHandler.handleParseResult(CommandLine.java:1243)
	at picocli.CommandLine.parseWithHandlers(CommandLine.java:1526)
	at picocli.CommandLine.parseWithHandler(CommandLine.java:1465)
	at org.apache.hadoop.hdds.cli.GenericCli.execute(GenericCli.java:65)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.execute(S3Shell.java:43)
	at org.apache.hadoop.hdds.cli.GenericCli.run(GenericCli.java:56)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.main(S3Shell.java:54)
Couldn't create RpcClient protocol</msg>
<status status="PASS" endtime="20191106 17:08:06.019" starttime="20191106 17:08:06.018"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:08:06.020" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191106 17:08:06.021" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191106 17:08:06.021" starttime="20191106 17:08:06.020"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:06.022" starttime="20191106 17:08:04.087"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:06.022" starttime="20191106 17:08:04.086"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:06.023" starttime="20191106 17:08:04.085"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:06.023" starttime="20191106 17:08:04.042"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:06.023" starttime="20191106 17:08:04.041"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:06.024" starttime="20191106 17:08:03.334"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:06.024" critical="yes" starttime="20191106 17:08:03.333">Setup failed:
255 != 0</status>
</test>
<test id="s1-s5-t12" name="Test Multipart Upload list">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:06.033" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:06.040" level="INFO">${rc} = 1</msg>
<msg timestamp="20191106 17:08:06.040" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191106 17:08:06.040" starttime="20191106 17:08:06.030"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191106 17:08:06.042" starttime="20191106 17:08:06.041"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:06.046" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:06.240" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:08:06.240" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191106 17:08:06.241" starttime="20191106 17:08:06.043"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:06.246" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:06.753" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:08:06.753" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.keystealth.org
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: sjc.edge.kernel.org
 * updates: mirror.key...</msg>
<status status="PASS" endtime="20191106 17:08:06.754" starttime="20191106 17:08:06.244"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:08:06.755" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.keystealth.org
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: sjc.edge.kernel.org
 * updates: mirror.keystealth.org
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191106 17:08:06.756" starttime="20191106 17:08:06.754"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:08:06.757" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191106 17:08:06.757" starttime="20191106 17:08:06.756"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:06.757" starttime="20191106 17:08:06.243"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:06.758" starttime="20191106 17:08:06.242"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:06.758" starttime="20191106 17:08:06.241"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:06.758" starttime="20191106 17:08:06.029"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:06.758" starttime="20191106 17:08:06.028"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:06.766" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:06.770" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:08:06.771" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191106 17:08:06.771" starttime="20191106 17:08:06.763"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:08:06.772" level="INFO">s3g</msg>
<status status="PASS" endtime="20191106 17:08:06.772" starttime="20191106 17:08:06.771"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:08:06.772" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191106 17:08:06.773" starttime="20191106 17:08:06.772"></status>
</kw>
<msg timestamp="20191106 17:08:06.773" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191106 17:08:06.773" starttime="20191106 17:08:06.762"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191106 17:08:06.774" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191106 17:08:06.774" starttime="20191106 17:08:06.773"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:06.777" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:06.795" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:08:06.796" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191106 17:08:06.796" starttime="20191106 17:08:06.776"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:08:06.797" level="INFO"></msg>
<status status="PASS" endtime="20191106 17:08:06.797" starttime="20191106 17:08:06.796"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:08:06.797" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191106 17:08:06.798" starttime="20191106 17:08:06.797"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:06.798" starttime="20191106 17:08:06.775"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:06.798" starttime="20191106 17:08:06.774"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:06.798" starttime="20191106 17:08:06.761"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:06.798" starttime="20191106 17:08:06.761"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:06.802" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:08.813" level="INFO">${rc} = 255</msg>
<msg timestamp="20191106 17:08:08.813" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191106 17:08:08.813" starttime="20191106 17:08:06.800"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:08:08.815" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
2019-11-06 17:08:08,761 ERROR client.OzoneClientFactory: Couldn't create RpcClient protocol exception: 
INTERNAL_ERROR org.apache.hadoop.ozone.om.exceptions.OMException: DestHost:destPort scm:9860 , LocalHost:localPort om/172.19.0.6:0. Failed on local exception: java.io.IOException: javax.security.sasl.SaslException: GSS initiate failed [Caused by GSSException: No valid credentials provided (Mechanism level: Failed to find any Kerberos tgt)]
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.handleError(OzoneManagerProtocolClientSideTranslatorPB.java:758)
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.getServiceInfo(OzoneManagerProtocolClientSideTranslatorPB.java:1249)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.hadoop.hdds.tracing.TraceAllMethod.invoke(TraceAllMethod.java:66)
	at com.sun.proxy.$Proxy20.getServiceInfo(Unknown Source)
	at org.apache.hadoop.ozone.client.rpc.RpcClient.&lt;init&gt;(RpcClient.java:156)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:256)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:239)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getRpcClient(OzoneClientFactory.java:203)
	at org.apache.hadoop.ozone.web.ozShell.OzoneAddress.createClient(OzoneAddress.java:117)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:45)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:32)
	at picocli.CommandLine.execute(CommandLine.java:1173)
	at picocli.CommandLine.access$800(CommandLine.java:141)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1367)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1335)
	at picocli.CommandLine$AbstractParseResultHandler.handleParseResult(CommandLine.java:1243)
	at picocli.CommandLine.parseWithHandlers(CommandLine.java:1526)
	at picocli.CommandLine.parseWithHandler(CommandLine.java:1465)
	at org.apache.hadoop.hdds.cli.GenericCli.execute(GenericCli.java:65)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.execute(S3Shell.java:43)
	at org.apache.hadoop.hdds.cli.GenericCli.run(GenericCli.java:56)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.main(S3Shell.java:54)
Couldn't create RpcClient protocol</msg>
<status status="PASS" endtime="20191106 17:08:08.815" starttime="20191106 17:08:08.814"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:08:08.816" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191106 17:08:08.816" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191106 17:08:08.817" starttime="20191106 17:08:08.815"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:08.817" starttime="20191106 17:08:06.800"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:08.817" starttime="20191106 17:08:06.799"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:08.817" starttime="20191106 17:08:06.798"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:08.818" starttime="20191106 17:08:06.760"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:08.818" starttime="20191106 17:08:06.759"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:08.818" starttime="20191106 17:08:06.027"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:08.819" critical="yes" starttime="20191106 17:08:06.025">Setup failed:
255 != 0</status>
</test>
<doc>S3 gateway test with aws cli</doc>
<status status="FAIL" endtime="20191106 17:08:08.822" starttime="20191106 17:07:35.213"></status>
</suite>
<suite source="/opt/hadoop/smoketest/s3/objectcopy.robot" id="s1-s6" name="Objectcopy">
<test id="s1-s6-t1" name="Copy Object Happy Scenario">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:08.844" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:08.851" level="INFO">${rc} = 1</msg>
<msg timestamp="20191106 17:08:08.851" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191106 17:08:08.851" starttime="20191106 17:08:08.842"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191106 17:08:08.853" starttime="20191106 17:08:08.852"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:08.855" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:09.035" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:08:09.035" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191106 17:08:09.035" starttime="20191106 17:08:08.853"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:09.041" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:09.581" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:08:09.581" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.keystealth.org
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: sjc.edge.kernel.org
 * updates: mirror.key...</msg>
<status status="PASS" endtime="20191106 17:08:09.581" starttime="20191106 17:08:09.039"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:08:09.583" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.keystealth.org
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: sjc.edge.kernel.org
 * updates: mirror.keystealth.org
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191106 17:08:09.584" starttime="20191106 17:08:09.582"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:08:09.585" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191106 17:08:09.585" starttime="20191106 17:08:09.584"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:09.585" starttime="20191106 17:08:09.038"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:09.586" starttime="20191106 17:08:09.038"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:09.586" starttime="20191106 17:08:09.036"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:09.586" starttime="20191106 17:08:08.842"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:09.586" starttime="20191106 17:08:08.841"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:09.595" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:09.601" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:08:09.601" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191106 17:08:09.601" starttime="20191106 17:08:09.591"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:08:09.603" level="INFO">s3g</msg>
<status status="PASS" endtime="20191106 17:08:09.603" starttime="20191106 17:08:09.602"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:08:09.604" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191106 17:08:09.604" starttime="20191106 17:08:09.603"></status>
</kw>
<msg timestamp="20191106 17:08:09.604" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191106 17:08:09.605" starttime="20191106 17:08:09.591"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191106 17:08:09.607" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191106 17:08:09.608" starttime="20191106 17:08:09.605"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:09.612" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:09.629" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:08:09.629" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191106 17:08:09.629" starttime="20191106 17:08:09.610"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:08:09.631" level="INFO"></msg>
<status status="PASS" endtime="20191106 17:08:09.631" starttime="20191106 17:08:09.630"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:08:09.632" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191106 17:08:09.633" starttime="20191106 17:08:09.632"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:09.633" starttime="20191106 17:08:09.609"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:09.633" starttime="20191106 17:08:09.608"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:09.634" starttime="20191106 17:08:09.590"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:09.634" starttime="20191106 17:08:09.589"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:09.639" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:11.672" level="INFO">${rc} = 255</msg>
<msg timestamp="20191106 17:08:11.673" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191106 17:08:11.673" starttime="20191106 17:08:09.637"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:08:11.675" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
2019-11-06 17:08:11,618 ERROR client.OzoneClientFactory: Couldn't create RpcClient protocol exception: 
INTERNAL_ERROR org.apache.hadoop.ozone.om.exceptions.OMException: DestHost:destPort scm:9860 , LocalHost:localPort om/172.19.0.6:0. Failed on local exception: java.io.IOException: javax.security.sasl.SaslException: GSS initiate failed [Caused by GSSException: No valid credentials provided (Mechanism level: Failed to find any Kerberos tgt)]
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.handleError(OzoneManagerProtocolClientSideTranslatorPB.java:758)
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.getServiceInfo(OzoneManagerProtocolClientSideTranslatorPB.java:1249)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.hadoop.hdds.tracing.TraceAllMethod.invoke(TraceAllMethod.java:66)
	at com.sun.proxy.$Proxy20.getServiceInfo(Unknown Source)
	at org.apache.hadoop.ozone.client.rpc.RpcClient.&lt;init&gt;(RpcClient.java:156)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:256)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:239)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getRpcClient(OzoneClientFactory.java:203)
	at org.apache.hadoop.ozone.web.ozShell.OzoneAddress.createClient(OzoneAddress.java:117)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:45)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:32)
	at picocli.CommandLine.execute(CommandLine.java:1173)
	at picocli.CommandLine.access$800(CommandLine.java:141)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1367)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1335)
	at picocli.CommandLine$AbstractParseResultHandler.handleParseResult(CommandLine.java:1243)
	at picocli.CommandLine.parseWithHandlers(CommandLine.java:1526)
	at picocli.CommandLine.parseWithHandler(CommandLine.java:1465)
	at org.apache.hadoop.hdds.cli.GenericCli.execute(GenericCli.java:65)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.execute(S3Shell.java:43)
	at org.apache.hadoop.hdds.cli.GenericCli.run(GenericCli.java:56)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.main(S3Shell.java:54)
Couldn't create RpcClient protocol</msg>
<status status="PASS" endtime="20191106 17:08:11.675" starttime="20191106 17:08:11.674"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:08:11.676" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191106 17:08:11.677" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191106 17:08:11.677" starttime="20191106 17:08:11.676"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:11.678" starttime="20191106 17:08:09.636"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:11.678" starttime="20191106 17:08:09.635"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:11.679" starttime="20191106 17:08:09.634"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:11.679" starttime="20191106 17:08:09.588"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:11.679" starttime="20191106 17:08:09.587"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:11.680" starttime="20191106 17:08:08.841"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:11.680" critical="yes" starttime="20191106 17:08:08.840">Setup failed:
255 != 0</status>
</test>
<test id="s1-s6-t2" name="Copy Object Where Bucket is not available">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:11.687" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:11.694" level="INFO">${rc} = 1</msg>
<msg timestamp="20191106 17:08:11.694" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191106 17:08:11.695" starttime="20191106 17:08:11.685"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191106 17:08:11.697" starttime="20191106 17:08:11.696"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:11.701" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:11.896" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:08:11.896" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191106 17:08:11.896" starttime="20191106 17:08:11.698"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:11.900" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:12.424" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:08:12.424" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.keystealth.org
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: sjc.edge.kernel.org
 * updates: mirror.key...</msg>
<status status="PASS" endtime="20191106 17:08:12.424" starttime="20191106 17:08:11.898"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:08:12.426" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.keystealth.org
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: sjc.edge.kernel.org
 * updates: mirror.keystealth.org
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191106 17:08:12.426" starttime="20191106 17:08:12.425"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:08:12.427" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191106 17:08:12.427" starttime="20191106 17:08:12.427"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:12.428" starttime="20191106 17:08:11.898"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:12.428" starttime="20191106 17:08:11.897"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:12.428" starttime="20191106 17:08:11.896"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:12.429" starttime="20191106 17:08:11.684"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:12.429" starttime="20191106 17:08:11.683"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:12.436" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:12.443" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:08:12.443" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191106 17:08:12.443" starttime="20191106 17:08:12.434"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:08:12.445" level="INFO">s3g</msg>
<status status="PASS" endtime="20191106 17:08:12.445" starttime="20191106 17:08:12.444"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:08:12.446" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191106 17:08:12.446" starttime="20191106 17:08:12.445"></status>
</kw>
<msg timestamp="20191106 17:08:12.446" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191106 17:08:12.447" starttime="20191106 17:08:12.433"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191106 17:08:12.448" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191106 17:08:12.448" starttime="20191106 17:08:12.447"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:12.452" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:12.469" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:08:12.469" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191106 17:08:12.469" starttime="20191106 17:08:12.450"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:08:12.471" level="INFO"></msg>
<status status="PASS" endtime="20191106 17:08:12.471" starttime="20191106 17:08:12.470"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:08:12.472" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191106 17:08:12.472" starttime="20191106 17:08:12.471"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:12.473" starttime="20191106 17:08:12.449"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:12.473" starttime="20191106 17:08:12.448"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:12.473" starttime="20191106 17:08:12.432"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:12.474" starttime="20191106 17:08:12.431"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:12.479" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:14.495" level="INFO">${rc} = 255</msg>
<msg timestamp="20191106 17:08:14.495" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191106 17:08:14.495" starttime="20191106 17:08:12.477"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:08:14.496" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
2019-11-06 17:08:14,410 ERROR client.OzoneClientFactory: Couldn't create RpcClient protocol exception: 
INTERNAL_ERROR org.apache.hadoop.ozone.om.exceptions.OMException: DestHost:destPort scm:9860 , LocalHost:localPort om/172.19.0.6:0. Failed on local exception: java.io.IOException: javax.security.sasl.SaslException: GSS initiate failed [Caused by GSSException: No valid credentials provided (Mechanism level: Failed to find any Kerberos tgt)]
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.handleError(OzoneManagerProtocolClientSideTranslatorPB.java:758)
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.getServiceInfo(OzoneManagerProtocolClientSideTranslatorPB.java:1249)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.hadoop.hdds.tracing.TraceAllMethod.invoke(TraceAllMethod.java:66)
	at com.sun.proxy.$Proxy20.getServiceInfo(Unknown Source)
	at org.apache.hadoop.ozone.client.rpc.RpcClient.&lt;init&gt;(RpcClient.java:156)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:256)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:239)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getRpcClient(OzoneClientFactory.java:203)
	at org.apache.hadoop.ozone.web.ozShell.OzoneAddress.createClient(OzoneAddress.java:117)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:45)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:32)
	at picocli.CommandLine.execute(CommandLine.java:1173)
	at picocli.CommandLine.access$800(CommandLine.java:141)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1367)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1335)
	at picocli.CommandLine$AbstractParseResultHandler.handleParseResult(CommandLine.java:1243)
	at picocli.CommandLine.parseWithHandlers(CommandLine.java:1526)
	at picocli.CommandLine.parseWithHandler(CommandLine.java:1465)
	at org.apache.hadoop.hdds.cli.GenericCli.execute(GenericCli.java:65)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.execute(S3Shell.java:43)
	at org.apache.hadoop.hdds.cli.GenericCli.run(GenericCli.java:56)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.main(S3Shell.java:54)
Couldn't create RpcClient protocol</msg>
<status status="PASS" endtime="20191106 17:08:14.497" starttime="20191106 17:08:14.496"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:08:14.497" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191106 17:08:14.498" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191106 17:08:14.498" starttime="20191106 17:08:14.497"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:14.498" starttime="20191106 17:08:12.476"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:14.498" starttime="20191106 17:08:12.475"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:14.498" starttime="20191106 17:08:12.474"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:14.499" starttime="20191106 17:08:12.430"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:14.499" starttime="20191106 17:08:12.429"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:14.499" starttime="20191106 17:08:11.682"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:14.499" critical="yes" starttime="20191106 17:08:11.681">Setup failed:
255 != 0</status>
</test>
<test id="s1-s6-t3" name="Copy Object Where both source and dest are same with change to storageclass">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:14.504" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:14.508" level="INFO">${rc} = 1</msg>
<msg timestamp="20191106 17:08:14.508" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191106 17:08:14.508" starttime="20191106 17:08:14.502"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191106 17:08:14.509" starttime="20191106 17:08:14.509"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:14.511" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:14.678" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:08:14.679" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191106 17:08:14.679" starttime="20191106 17:08:14.510"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:14.685" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:15.190" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:08:15.190" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.keystealth.org
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: sjc.edge.kernel.org
 * updates: mirror.key...</msg>
<status status="PASS" endtime="20191106 17:08:15.190" starttime="20191106 17:08:14.683"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:08:15.191" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.keystealth.org
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: sjc.edge.kernel.org
 * updates: mirror.keystealth.org
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191106 17:08:15.191" starttime="20191106 17:08:15.191"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:08:15.192" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191106 17:08:15.192" starttime="20191106 17:08:15.192"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:15.193" starttime="20191106 17:08:14.682"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:15.193" starttime="20191106 17:08:14.681"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:15.193" starttime="20191106 17:08:14.680"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:15.193" starttime="20191106 17:08:14.502"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:15.193" starttime="20191106 17:08:14.501"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:15.198" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:15.205" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:08:15.205" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191106 17:08:15.205" starttime="20191106 17:08:15.197"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:08:15.207" level="INFO">s3g</msg>
<status status="PASS" endtime="20191106 17:08:15.207" starttime="20191106 17:08:15.206"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:08:15.208" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191106 17:08:15.208" starttime="20191106 17:08:15.207"></status>
</kw>
<msg timestamp="20191106 17:08:15.209" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191106 17:08:15.209" starttime="20191106 17:08:15.196"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191106 17:08:15.210" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191106 17:08:15.211" starttime="20191106 17:08:15.209"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:15.216" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:15.233" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:08:15.233" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191106 17:08:15.233" starttime="20191106 17:08:15.213"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:08:15.234" level="INFO"></msg>
<status status="PASS" endtime="20191106 17:08:15.235" starttime="20191106 17:08:15.234"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:08:15.236" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191106 17:08:15.236" starttime="20191106 17:08:15.235"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:15.236" starttime="20191106 17:08:15.212"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:15.237" starttime="20191106 17:08:15.211"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:15.237" starttime="20191106 17:08:15.195"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:15.237" starttime="20191106 17:08:15.195"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:15.243" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:17.328" level="INFO">${rc} = 255</msg>
<msg timestamp="20191106 17:08:17.329" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191106 17:08:17.329" starttime="20191106 17:08:15.240"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:08:17.330" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
2019-11-06 17:08:17,287 ERROR client.OzoneClientFactory: Couldn't create RpcClient protocol exception: 
INTERNAL_ERROR org.apache.hadoop.ozone.om.exceptions.OMException: DestHost:destPort scm:9860 , LocalHost:localPort om/172.19.0.6:0. Failed on local exception: java.io.IOException: javax.security.sasl.SaslException: GSS initiate failed [Caused by GSSException: No valid credentials provided (Mechanism level: Failed to find any Kerberos tgt)]
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.handleError(OzoneManagerProtocolClientSideTranslatorPB.java:758)
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.getServiceInfo(OzoneManagerProtocolClientSideTranslatorPB.java:1249)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.hadoop.hdds.tracing.TraceAllMethod.invoke(TraceAllMethod.java:66)
	at com.sun.proxy.$Proxy20.getServiceInfo(Unknown Source)
	at org.apache.hadoop.ozone.client.rpc.RpcClient.&lt;init&gt;(RpcClient.java:156)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:256)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:239)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getRpcClient(OzoneClientFactory.java:203)
	at org.apache.hadoop.ozone.web.ozShell.OzoneAddress.createClient(OzoneAddress.java:117)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:45)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:32)
	at picocli.CommandLine.execute(CommandLine.java:1173)
	at picocli.CommandLine.access$800(CommandLine.java:141)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1367)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1335)
	at picocli.CommandLine$AbstractParseResultHandler.handleParseResult(CommandLine.java:1243)
	at picocli.CommandLine.parseWithHandlers(CommandLine.java:1526)
	at picocli.CommandLine.parseWithHandler(CommandLine.java:1465)
	at org.apache.hadoop.hdds.cli.GenericCli.execute(GenericCli.java:65)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.execute(S3Shell.java:43)
	at org.apache.hadoop.hdds.cli.GenericCli.run(GenericCli.java:56)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.main(S3Shell.java:54)
Couldn't create RpcClient protocol</msg>
<status status="PASS" endtime="20191106 17:08:17.330" starttime="20191106 17:08:17.329"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:08:17.331" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191106 17:08:17.331" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191106 17:08:17.332" starttime="20191106 17:08:17.331"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:17.332" starttime="20191106 17:08:15.240"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:17.332" starttime="20191106 17:08:15.239"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:17.332" starttime="20191106 17:08:15.238"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:17.333" starttime="20191106 17:08:15.194"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:17.333" starttime="20191106 17:08:15.194"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:17.333" starttime="20191106 17:08:14.501"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:17.333" critical="yes" starttime="20191106 17:08:14.500">Setup failed:
255 != 0</status>
</test>
<test id="s1-s6-t4" name="Copy Object Where Key not available">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:17.338" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:17.345" level="INFO">${rc} = 1</msg>
<msg timestamp="20191106 17:08:17.346" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191106 17:08:17.346" starttime="20191106 17:08:17.336"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191106 17:08:17.348" starttime="20191106 17:08:17.347"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:17.351" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:17.534" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:08:17.535" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191106 17:08:17.535" starttime="20191106 17:08:17.349"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:17.541" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:17.995" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:08:17.996" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.keystealth.org
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: sjc.edge.kernel.org
 * updates: mirror.key...</msg>
<status status="PASS" endtime="20191106 17:08:17.996" starttime="20191106 17:08:17.539"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:08:17.997" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.keystealth.org
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: sjc.edge.kernel.org
 * updates: mirror.keystealth.org
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191106 17:08:17.998" starttime="20191106 17:08:17.996"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:08:17.998" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191106 17:08:17.999" starttime="20191106 17:08:17.998"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:17.999" starttime="20191106 17:08:17.538"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:17.999" starttime="20191106 17:08:17.537"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:18.000" starttime="20191106 17:08:17.536"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:18.000" starttime="20191106 17:08:17.336"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:18.000" starttime="20191106 17:08:17.335"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:18.007" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:18.013" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:08:18.014" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191106 17:08:18.014" starttime="20191106 17:08:18.005"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:08:18.015" level="INFO">s3g</msg>
<status status="PASS" endtime="20191106 17:08:18.016" starttime="20191106 17:08:18.014"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:08:18.016" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191106 17:08:18.017" starttime="20191106 17:08:18.016"></status>
</kw>
<msg timestamp="20191106 17:08:18.017" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191106 17:08:18.017" starttime="20191106 17:08:18.004"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191106 17:08:18.019" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191106 17:08:18.019" starttime="20191106 17:08:18.018"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:18.023" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:18.036" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:08:18.036" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191106 17:08:18.037" starttime="20191106 17:08:18.021"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:08:18.038" level="INFO"></msg>
<status status="PASS" endtime="20191106 17:08:18.038" starttime="20191106 17:08:18.037"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:08:18.039" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191106 17:08:18.039" starttime="20191106 17:08:18.038"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:18.039" starttime="20191106 17:08:18.020"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:18.040" starttime="20191106 17:08:18.019"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:18.040" starttime="20191106 17:08:18.004"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:18.040" starttime="20191106 17:08:18.002"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:18.044" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:20.036" level="INFO">${rc} = 255</msg>
<msg timestamp="20191106 17:08:20.036" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191106 17:08:20.037" starttime="20191106 17:08:18.042"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:08:20.038" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
2019-11-06 17:08:19,975 ERROR client.OzoneClientFactory: Couldn't create RpcClient protocol exception: 
INTERNAL_ERROR org.apache.hadoop.ozone.om.exceptions.OMException: DestHost:destPort scm:9860 , LocalHost:localPort om/172.19.0.6:0. Failed on local exception: java.io.IOException: javax.security.sasl.SaslException: GSS initiate failed [Caused by GSSException: No valid credentials provided (Mechanism level: Failed to find any Kerberos tgt)]
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.handleError(OzoneManagerProtocolClientSideTranslatorPB.java:758)
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.getServiceInfo(OzoneManagerProtocolClientSideTranslatorPB.java:1249)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.hadoop.hdds.tracing.TraceAllMethod.invoke(TraceAllMethod.java:66)
	at com.sun.proxy.$Proxy20.getServiceInfo(Unknown Source)
	at org.apache.hadoop.ozone.client.rpc.RpcClient.&lt;init&gt;(RpcClient.java:156)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:256)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:239)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getRpcClient(OzoneClientFactory.java:203)
	at org.apache.hadoop.ozone.web.ozShell.OzoneAddress.createClient(OzoneAddress.java:117)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:45)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:32)
	at picocli.CommandLine.execute(CommandLine.java:1173)
	at picocli.CommandLine.access$800(CommandLine.java:141)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1367)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1335)
	at picocli.CommandLine$AbstractParseResultHandler.handleParseResult(CommandLine.java:1243)
	at picocli.CommandLine.parseWithHandlers(CommandLine.java:1526)
	at picocli.CommandLine.parseWithHandler(CommandLine.java:1465)
	at org.apache.hadoop.hdds.cli.GenericCli.execute(GenericCli.java:65)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.execute(S3Shell.java:43)
	at org.apache.hadoop.hdds.cli.GenericCli.run(GenericCli.java:56)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.main(S3Shell.java:54)
Couldn't create RpcClient protocol</msg>
<status status="PASS" endtime="20191106 17:08:20.039" starttime="20191106 17:08:20.037"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:08:20.040" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191106 17:08:20.040" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191106 17:08:20.040" starttime="20191106 17:08:20.039"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:20.041" starttime="20191106 17:08:18.042"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:20.041" starttime="20191106 17:08:18.041"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:20.041" starttime="20191106 17:08:18.040"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:20.042" starttime="20191106 17:08:18.001"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:20.042" starttime="20191106 17:08:18.000"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:20.042" starttime="20191106 17:08:17.335"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:20.042" critical="yes" starttime="20191106 17:08:17.334">Setup failed:
255 != 0</status>
</test>
<doc>S3 gateway test with aws cli</doc>
<status status="FAIL" endtime="20191106 17:08:20.044" starttime="20191106 17:08:08.830"></status>
</suite>
<suite source="/opt/hadoop/smoketest/s3/objectdelete.robot" id="s1-s7" name="Objectdelete">
<test id="s1-s7-t1" name="Delete file with s3api">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:20.064" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:20.070" level="INFO">${rc} = 1</msg>
<msg timestamp="20191106 17:08:20.070" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191106 17:08:20.071" starttime="20191106 17:08:20.062"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191106 17:08:20.072" starttime="20191106 17:08:20.071"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:20.074" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:20.261" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:08:20.261" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191106 17:08:20.261" starttime="20191106 17:08:20.072"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:20.268" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:20.733" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:08:20.733" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.keystealth.org
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: sjc.edge.kernel.org
 * updates: mirror.key...</msg>
<status status="PASS" endtime="20191106 17:08:20.734" starttime="20191106 17:08:20.265"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:08:20.735" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.keystealth.org
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: sjc.edge.kernel.org
 * updates: mirror.keystealth.org
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191106 17:08:20.736" starttime="20191106 17:08:20.734"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:08:20.737" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191106 17:08:20.737" starttime="20191106 17:08:20.736"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:20.737" starttime="20191106 17:08:20.264"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:20.738" starttime="20191106 17:08:20.263"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:20.738" starttime="20191106 17:08:20.262"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:20.738" starttime="20191106 17:08:20.062"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:20.738" starttime="20191106 17:08:20.061"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:20.745" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:20.751" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:08:20.751" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191106 17:08:20.751" starttime="20191106 17:08:20.743"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:08:20.753" level="INFO">s3g</msg>
<status status="PASS" endtime="20191106 17:08:20.753" starttime="20191106 17:08:20.752"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:08:20.755" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191106 17:08:20.755" starttime="20191106 17:08:20.754"></status>
</kw>
<msg timestamp="20191106 17:08:20.756" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191106 17:08:20.756" starttime="20191106 17:08:20.742"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191106 17:08:20.759" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191106 17:08:20.759" starttime="20191106 17:08:20.756"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:20.764" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:20.781" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:08:20.781" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191106 17:08:20.781" starttime="20191106 17:08:20.762"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:08:20.783" level="INFO"></msg>
<status status="PASS" endtime="20191106 17:08:20.783" starttime="20191106 17:08:20.782"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:08:20.784" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191106 17:08:20.784" starttime="20191106 17:08:20.783"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:20.785" starttime="20191106 17:08:20.761"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:20.785" starttime="20191106 17:08:20.760"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:20.785" starttime="20191106 17:08:20.741"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:20.785" starttime="20191106 17:08:20.740"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:20.791" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:22.882" level="INFO">${rc} = 255</msg>
<msg timestamp="20191106 17:08:22.883" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191106 17:08:22.883" starttime="20191106 17:08:20.789"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:08:22.884" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
2019-11-06 17:08:22,722 ERROR client.OzoneClientFactory: Couldn't create RpcClient protocol exception: 
INTERNAL_ERROR org.apache.hadoop.ozone.om.exceptions.OMException: DestHost:destPort scm:9860 , LocalHost:localPort om/172.19.0.6:0. Failed on local exception: java.io.IOException: javax.security.sasl.SaslException: GSS initiate failed [Caused by GSSException: No valid credentials provided (Mechanism level: Failed to find any Kerberos tgt)]
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.handleError(OzoneManagerProtocolClientSideTranslatorPB.java:758)
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.getServiceInfo(OzoneManagerProtocolClientSideTranslatorPB.java:1249)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.hadoop.hdds.tracing.TraceAllMethod.invoke(TraceAllMethod.java:66)
	at com.sun.proxy.$Proxy20.getServiceInfo(Unknown Source)
	at org.apache.hadoop.ozone.client.rpc.RpcClient.&lt;init&gt;(RpcClient.java:156)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:256)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:239)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getRpcClient(OzoneClientFactory.java:203)
	at org.apache.hadoop.ozone.web.ozShell.OzoneAddress.createClient(OzoneAddress.java:117)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:45)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:32)
	at picocli.CommandLine.execute(CommandLine.java:1173)
	at picocli.CommandLine.access$800(CommandLine.java:141)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1367)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1335)
	at picocli.CommandLine$AbstractParseResultHandler.handleParseResult(CommandLine.java:1243)
	at picocli.CommandLine.parseWithHandlers(CommandLine.java:1526)
	at picocli.CommandLine.parseWithHandler(CommandLine.java:1465)
	at org.apache.hadoop.hdds.cli.GenericCli.execute(GenericCli.java:65)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.execute(S3Shell.java:43)
	at org.apache.hadoop.hdds.cli.GenericCli.run(GenericCli.java:56)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.main(S3Shell.java:54)
Couldn't create RpcClient protocol</msg>
<status status="PASS" endtime="20191106 17:08:22.885" starttime="20191106 17:08:22.883"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:08:22.885" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191106 17:08:22.886" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191106 17:08:22.886" starttime="20191106 17:08:22.885"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:22.886" starttime="20191106 17:08:20.788"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:22.887" starttime="20191106 17:08:20.787"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:22.887" starttime="20191106 17:08:20.786"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:22.887" starttime="20191106 17:08:20.740"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:22.887" starttime="20191106 17:08:20.739"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:22.887" starttime="20191106 17:08:20.060"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:22.888" critical="yes" starttime="20191106 17:08:20.059">Setup failed:
255 != 0</status>
</test>
<test id="s1-s7-t2" name="Delete file with s3api, file doesn't exist">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:22.893" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:22.900" level="INFO">${rc} = 1</msg>
<msg timestamp="20191106 17:08:22.900" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191106 17:08:22.900" starttime="20191106 17:08:22.891"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191106 17:08:22.902" starttime="20191106 17:08:22.901"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:22.905" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:23.089" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:08:23.089" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191106 17:08:23.089" starttime="20191106 17:08:22.903"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:23.096" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:23.604" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:08:23.604" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.keystealth.org
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: sjc.edge.kernel.org
 * updates: mirror.key...</msg>
<status status="PASS" endtime="20191106 17:08:23.605" starttime="20191106 17:08:23.093"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:08:23.607" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.keystealth.org
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: sjc.edge.kernel.org
 * updates: mirror.keystealth.org
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191106 17:08:23.607" starttime="20191106 17:08:23.606"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:08:23.608" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191106 17:08:23.608" starttime="20191106 17:08:23.607"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:23.609" starttime="20191106 17:08:23.092"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:23.609" starttime="20191106 17:08:23.092"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:23.609" starttime="20191106 17:08:23.090"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:23.610" starttime="20191106 17:08:22.890"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:23.610" starttime="20191106 17:08:22.890"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:23.617" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:23.624" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:08:23.624" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191106 17:08:23.624" starttime="20191106 17:08:23.615"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:08:23.626" level="INFO">s3g</msg>
<status status="PASS" endtime="20191106 17:08:23.626" starttime="20191106 17:08:23.625"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:08:23.627" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191106 17:08:23.628" starttime="20191106 17:08:23.627"></status>
</kw>
<msg timestamp="20191106 17:08:23.628" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191106 17:08:23.628" starttime="20191106 17:08:23.614"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191106 17:08:23.630" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191106 17:08:23.630" starttime="20191106 17:08:23.629"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:23.635" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:23.649" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:08:23.649" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191106 17:08:23.649" starttime="20191106 17:08:23.633"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:08:23.651" level="INFO"></msg>
<status status="PASS" endtime="20191106 17:08:23.651" starttime="20191106 17:08:23.650"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:08:23.652" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191106 17:08:23.652" starttime="20191106 17:08:23.651"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:23.652" starttime="20191106 17:08:23.631"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:23.652" starttime="20191106 17:08:23.630"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:23.653" starttime="20191106 17:08:23.613"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:23.653" starttime="20191106 17:08:23.612"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:23.658" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:25.723" level="INFO">${rc} = 255</msg>
<msg timestamp="20191106 17:08:25.724" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191106 17:08:25.724" starttime="20191106 17:08:23.655"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:08:25.726" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
2019-11-06 17:08:25,633 ERROR client.OzoneClientFactory: Couldn't create RpcClient protocol exception: 
INTERNAL_ERROR org.apache.hadoop.ozone.om.exceptions.OMException: DestHost:destPort scm:9860 , LocalHost:localPort om/172.19.0.6:0. Failed on local exception: java.io.IOException: javax.security.sasl.SaslException: GSS initiate failed [Caused by GSSException: No valid credentials provided (Mechanism level: Failed to find any Kerberos tgt)]
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.handleError(OzoneManagerProtocolClientSideTranslatorPB.java:758)
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.getServiceInfo(OzoneManagerProtocolClientSideTranslatorPB.java:1249)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.hadoop.hdds.tracing.TraceAllMethod.invoke(TraceAllMethod.java:66)
	at com.sun.proxy.$Proxy20.getServiceInfo(Unknown Source)
	at org.apache.hadoop.ozone.client.rpc.RpcClient.&lt;init&gt;(RpcClient.java:156)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:256)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:239)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getRpcClient(OzoneClientFactory.java:203)
	at org.apache.hadoop.ozone.web.ozShell.OzoneAddress.createClient(OzoneAddress.java:117)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:45)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:32)
	at picocli.CommandLine.execute(CommandLine.java:1173)
	at picocli.CommandLine.access$800(CommandLine.java:141)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1367)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1335)
	at picocli.CommandLine$AbstractParseResultHandler.handleParseResult(CommandLine.java:1243)
	at picocli.CommandLine.parseWithHandlers(CommandLine.java:1526)
	at picocli.CommandLine.parseWithHandler(CommandLine.java:1465)
	at org.apache.hadoop.hdds.cli.GenericCli.execute(GenericCli.java:65)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.execute(S3Shell.java:43)
	at org.apache.hadoop.hdds.cli.GenericCli.run(GenericCli.java:56)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.main(S3Shell.java:54)
Couldn't create RpcClient protocol</msg>
<status status="PASS" endtime="20191106 17:08:25.726" starttime="20191106 17:08:25.725"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:08:25.727" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191106 17:08:25.728" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191106 17:08:25.728" starttime="20191106 17:08:25.727"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:25.729" starttime="20191106 17:08:23.655"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:25.729" starttime="20191106 17:08:23.654"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:25.729" starttime="20191106 17:08:23.653"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:25.730" starttime="20191106 17:08:23.611"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:25.730" starttime="20191106 17:08:23.610"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:25.730" starttime="20191106 17:08:22.889"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:25.730" critical="yes" starttime="20191106 17:08:22.888">Setup failed:
255 != 0</status>
</test>
<test id="s1-s7-t3" name="Delete dir with s3api">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:25.737" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:25.742" level="INFO">${rc} = 1</msg>
<msg timestamp="20191106 17:08:25.743" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191106 17:08:25.743" starttime="20191106 17:08:25.734"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191106 17:08:25.745" starttime="20191106 17:08:25.744"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:25.747" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:25.941" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:08:25.941" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191106 17:08:25.941" starttime="20191106 17:08:25.745"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:25.948" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:26.469" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:08:26.469" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.keystealth.org
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: sjc.edge.kernel.org
 * updates: mirror.key...</msg>
<status status="PASS" endtime="20191106 17:08:26.469" starttime="20191106 17:08:25.945"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:08:26.471" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.keystealth.org
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: sjc.edge.kernel.org
 * updates: mirror.keystealth.org
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191106 17:08:26.471" starttime="20191106 17:08:26.470"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:08:26.472" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191106 17:08:26.473" starttime="20191106 17:08:26.472"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:26.473" starttime="20191106 17:08:25.944"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:26.474" starttime="20191106 17:08:25.943"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:26.474" starttime="20191106 17:08:25.942"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:26.474" starttime="20191106 17:08:25.734"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:26.474" starttime="20191106 17:08:25.733"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:26.482" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:26.489" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:08:26.489" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191106 17:08:26.489" starttime="20191106 17:08:26.479"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:08:26.491" level="INFO">s3g</msg>
<status status="PASS" endtime="20191106 17:08:26.491" starttime="20191106 17:08:26.490"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:08:26.492" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191106 17:08:26.493" starttime="20191106 17:08:26.492"></status>
</kw>
<msg timestamp="20191106 17:08:26.493" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191106 17:08:26.494" starttime="20191106 17:08:26.478"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191106 17:08:26.495" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191106 17:08:26.495" starttime="20191106 17:08:26.494"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:26.501" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:26.516" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:08:26.517" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191106 17:08:26.517" starttime="20191106 17:08:26.499"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:08:26.518" level="INFO"></msg>
<status status="PASS" endtime="20191106 17:08:26.519" starttime="20191106 17:08:26.517"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:08:26.519" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191106 17:08:26.520" starttime="20191106 17:08:26.519"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:26.520" starttime="20191106 17:08:26.497"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:26.520" starttime="20191106 17:08:26.496"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:26.521" starttime="20191106 17:08:26.478"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:26.521" starttime="20191106 17:08:26.477"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:26.526" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:28.598" level="INFO">${rc} = 255</msg>
<msg timestamp="20191106 17:08:28.598" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191106 17:08:28.598" starttime="20191106 17:08:26.524"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:08:28.600" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
2019-11-06 17:08:28,538 ERROR client.OzoneClientFactory: Couldn't create RpcClient protocol exception: 
INTERNAL_ERROR org.apache.hadoop.ozone.om.exceptions.OMException: DestHost:destPort scm:9860 , LocalHost:localPort om/172.19.0.6:0. Failed on local exception: java.io.IOException: javax.security.sasl.SaslException: GSS initiate failed [Caused by GSSException: No valid credentials provided (Mechanism level: Failed to find any Kerberos tgt)]
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.handleError(OzoneManagerProtocolClientSideTranslatorPB.java:758)
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.getServiceInfo(OzoneManagerProtocolClientSideTranslatorPB.java:1249)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.hadoop.hdds.tracing.TraceAllMethod.invoke(TraceAllMethod.java:66)
	at com.sun.proxy.$Proxy20.getServiceInfo(Unknown Source)
	at org.apache.hadoop.ozone.client.rpc.RpcClient.&lt;init&gt;(RpcClient.java:156)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:256)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:239)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getRpcClient(OzoneClientFactory.java:203)
	at org.apache.hadoop.ozone.web.ozShell.OzoneAddress.createClient(OzoneAddress.java:117)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:45)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:32)
	at picocli.CommandLine.execute(CommandLine.java:1173)
	at picocli.CommandLine.access$800(CommandLine.java:141)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1367)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1335)
	at picocli.CommandLine$AbstractParseResultHandler.handleParseResult(CommandLine.java:1243)
	at picocli.CommandLine.parseWithHandlers(CommandLine.java:1526)
	at picocli.CommandLine.parseWithHandler(CommandLine.java:1465)
	at org.apache.hadoop.hdds.cli.GenericCli.execute(GenericCli.java:65)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.execute(S3Shell.java:43)
	at org.apache.hadoop.hdds.cli.GenericCli.run(GenericCli.java:56)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.main(S3Shell.java:54)
Couldn't create RpcClient protocol</msg>
<status status="PASS" endtime="20191106 17:08:28.600" starttime="20191106 17:08:28.599"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:08:28.601" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191106 17:08:28.602" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191106 17:08:28.602" starttime="20191106 17:08:28.601"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:28.602" starttime="20191106 17:08:26.523"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:28.603" starttime="20191106 17:08:26.522"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:28.603" starttime="20191106 17:08:26.521"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:28.603" starttime="20191106 17:08:26.476"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:28.603" starttime="20191106 17:08:26.475"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:28.604" starttime="20191106 17:08:25.732"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:28.604" critical="yes" starttime="20191106 17:08:25.731">Setup failed:
255 != 0</status>
</test>
<test id="s1-s7-t4" name="Delete file with s3api, file doesn't exist, prefix of a real file">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:28.609" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:28.614" level="INFO">${rc} = 1</msg>
<msg timestamp="20191106 17:08:28.614" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191106 17:08:28.614" starttime="20191106 17:08:28.607"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191106 17:08:28.616" starttime="20191106 17:08:28.615"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:28.619" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:28.791" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:08:28.792" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191106 17:08:28.792" starttime="20191106 17:08:28.617"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:28.799" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:29.319" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:08:29.319" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.keystealth.org
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: sjc.edge.kernel.org
 * updates: mirror.key...</msg>
<status status="PASS" endtime="20191106 17:08:29.319" starttime="20191106 17:08:28.796"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:08:29.321" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.keystealth.org
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: sjc.edge.kernel.org
 * updates: mirror.keystealth.org
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191106 17:08:29.322" starttime="20191106 17:08:29.320"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:08:29.323" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191106 17:08:29.323" starttime="20191106 17:08:29.322"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:29.323" starttime="20191106 17:08:28.795"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:29.324" starttime="20191106 17:08:28.794"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:29.324" starttime="20191106 17:08:28.793"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:29.324" starttime="20191106 17:08:28.607"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:29.324" starttime="20191106 17:08:28.606"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:29.332" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:29.339" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:08:29.339" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191106 17:08:29.339" starttime="20191106 17:08:29.329"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:08:29.341" level="INFO">s3g</msg>
<status status="PASS" endtime="20191106 17:08:29.341" starttime="20191106 17:08:29.340"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:08:29.342" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191106 17:08:29.343" starttime="20191106 17:08:29.342"></status>
</kw>
<msg timestamp="20191106 17:08:29.343" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191106 17:08:29.344" starttime="20191106 17:08:29.329"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191106 17:08:29.345" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191106 17:08:29.346" starttime="20191106 17:08:29.344"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:29.352" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:29.368" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:08:29.369" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191106 17:08:29.369" starttime="20191106 17:08:29.349"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:08:29.370" level="INFO"></msg>
<status status="PASS" endtime="20191106 17:08:29.371" starttime="20191106 17:08:29.369"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:08:29.372" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191106 17:08:29.372" starttime="20191106 17:08:29.371"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:29.372" starttime="20191106 17:08:29.348"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:29.373" starttime="20191106 17:08:29.346"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:29.373" starttime="20191106 17:08:29.328"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:29.373" starttime="20191106 17:08:29.327"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:29.379" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:31.474" level="INFO">${rc} = 255</msg>
<msg timestamp="20191106 17:08:31.474" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191106 17:08:31.474" starttime="20191106 17:08:29.376"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:08:31.476" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
2019-11-06 17:08:31,403 ERROR client.OzoneClientFactory: Couldn't create RpcClient protocol exception: 
INTERNAL_ERROR org.apache.hadoop.ozone.om.exceptions.OMException: DestHost:destPort scm:9860 , LocalHost:localPort om/172.19.0.6:0. Failed on local exception: java.io.IOException: javax.security.sasl.SaslException: GSS initiate failed [Caused by GSSException: No valid credentials provided (Mechanism level: Failed to find any Kerberos tgt)]
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.handleError(OzoneManagerProtocolClientSideTranslatorPB.java:758)
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.getServiceInfo(OzoneManagerProtocolClientSideTranslatorPB.java:1249)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.hadoop.hdds.tracing.TraceAllMethod.invoke(TraceAllMethod.java:66)
	at com.sun.proxy.$Proxy20.getServiceInfo(Unknown Source)
	at org.apache.hadoop.ozone.client.rpc.RpcClient.&lt;init&gt;(RpcClient.java:156)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:256)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:239)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getRpcClient(OzoneClientFactory.java:203)
	at org.apache.hadoop.ozone.web.ozShell.OzoneAddress.createClient(OzoneAddress.java:117)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:45)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:32)
	at picocli.CommandLine.execute(CommandLine.java:1173)
	at picocli.CommandLine.access$800(CommandLine.java:141)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1367)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1335)
	at picocli.CommandLine$AbstractParseResultHandler.handleParseResult(CommandLine.java:1243)
	at picocli.CommandLine.parseWithHandlers(CommandLine.java:1526)
	at picocli.CommandLine.parseWithHandler(CommandLine.java:1465)
	at org.apache.hadoop.hdds.cli.GenericCli.execute(GenericCli.java:65)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.execute(S3Shell.java:43)
	at org.apache.hadoop.hdds.cli.GenericCli.run(GenericCli.java:56)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.main(S3Shell.java:54)
Couldn't create RpcClient protocol</msg>
<status status="PASS" endtime="20191106 17:08:31.477" starttime="20191106 17:08:31.475"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:08:31.478" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191106 17:08:31.478" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191106 17:08:31.478" starttime="20191106 17:08:31.477"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:31.479" starttime="20191106 17:08:29.375"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:31.479" starttime="20191106 17:08:29.375"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:31.479" starttime="20191106 17:08:29.374"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:31.480" starttime="20191106 17:08:29.326"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:31.480" starttime="20191106 17:08:29.325"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:31.480" starttime="20191106 17:08:28.606"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:31.481" critical="yes" starttime="20191106 17:08:28.605">Setup failed:
255 != 0</status>
</test>
<test id="s1-s7-t5" name="Delete file with s3api, bucket doesn't exist">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:31.487" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:31.494" level="INFO">${rc} = 1</msg>
<msg timestamp="20191106 17:08:31.494" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191106 17:08:31.494" starttime="20191106 17:08:31.485"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191106 17:08:31.496" starttime="20191106 17:08:31.495"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:31.498" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:31.694" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:08:31.694" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191106 17:08:31.694" starttime="20191106 17:08:31.496"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:31.701" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:32.187" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:08:32.187" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.keystealth.org
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: sjc.edge.kernel.org
 * updates: mirror.key...</msg>
<status status="PASS" endtime="20191106 17:08:32.187" starttime="20191106 17:08:31.698"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:08:32.189" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.keystealth.org
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: sjc.edge.kernel.org
 * updates: mirror.keystealth.org
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191106 17:08:32.190" starttime="20191106 17:08:32.188"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:08:32.191" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191106 17:08:32.191" starttime="20191106 17:08:32.190"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:32.191" starttime="20191106 17:08:31.697"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:32.192" starttime="20191106 17:08:31.696"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:32.192" starttime="20191106 17:08:31.695"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:32.192" starttime="20191106 17:08:31.484"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:32.192" starttime="20191106 17:08:31.483"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:32.200" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:32.206" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:08:32.206" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191106 17:08:32.206" starttime="20191106 17:08:32.197"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:08:32.208" level="INFO">s3g</msg>
<status status="PASS" endtime="20191106 17:08:32.208" starttime="20191106 17:08:32.207"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:08:32.209" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191106 17:08:32.209" starttime="20191106 17:08:32.208"></status>
</kw>
<msg timestamp="20191106 17:08:32.209" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191106 17:08:32.209" starttime="20191106 17:08:32.197"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191106 17:08:32.211" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191106 17:08:32.211" starttime="20191106 17:08:32.210"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:32.215" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:32.243" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:08:32.244" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191106 17:08:32.244" starttime="20191106 17:08:32.214"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:08:32.245" level="INFO"></msg>
<status status="PASS" endtime="20191106 17:08:32.245" starttime="20191106 17:08:32.244"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:08:32.246" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191106 17:08:32.246" starttime="20191106 17:08:32.245"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:32.246" starttime="20191106 17:08:32.213"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:32.247" starttime="20191106 17:08:32.211"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:32.247" starttime="20191106 17:08:32.196"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:32.247" starttime="20191106 17:08:32.195"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:32.251" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:34.241" level="INFO">${rc} = 255</msg>
<msg timestamp="20191106 17:08:34.241" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191106 17:08:34.241" starttime="20191106 17:08:32.249"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:08:34.243" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
2019-11-06 17:08:34,182 ERROR client.OzoneClientFactory: Couldn't create RpcClient protocol exception: 
INTERNAL_ERROR org.apache.hadoop.ozone.om.exceptions.OMException: DestHost:destPort scm:9860 , LocalHost:localPort om/172.19.0.6:0. Failed on local exception: java.io.IOException: javax.security.sasl.SaslException: GSS initiate failed [Caused by GSSException: No valid credentials provided (Mechanism level: Failed to find any Kerberos tgt)]
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.handleError(OzoneManagerProtocolClientSideTranslatorPB.java:758)
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.getServiceInfo(OzoneManagerProtocolClientSideTranslatorPB.java:1249)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.hadoop.hdds.tracing.TraceAllMethod.invoke(TraceAllMethod.java:66)
	at com.sun.proxy.$Proxy20.getServiceInfo(Unknown Source)
	at org.apache.hadoop.ozone.client.rpc.RpcClient.&lt;init&gt;(RpcClient.java:156)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:256)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:239)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getRpcClient(OzoneClientFactory.java:203)
	at org.apache.hadoop.ozone.web.ozShell.OzoneAddress.createClient(OzoneAddress.java:117)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:45)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:32)
	at picocli.CommandLine.execute(CommandLine.java:1173)
	at picocli.CommandLine.access$800(CommandLine.java:141)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1367)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1335)
	at picocli.CommandLine$AbstractParseResultHandler.handleParseResult(CommandLine.java:1243)
	at picocli.CommandLine.parseWithHandlers(CommandLine.java:1526)
	at picocli.CommandLine.parseWithHandler(CommandLine.java:1465)
	at org.apache.hadoop.hdds.cli.GenericCli.execute(GenericCli.java:65)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.execute(S3Shell.java:43)
	at org.apache.hadoop.hdds.cli.GenericCli.run(GenericCli.java:56)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.main(S3Shell.java:54)
Couldn't create RpcClient protocol</msg>
<status status="PASS" endtime="20191106 17:08:34.244" starttime="20191106 17:08:34.242"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:08:34.244" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191106 17:08:34.245" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191106 17:08:34.245" starttime="20191106 17:08:34.244"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:34.246" starttime="20191106 17:08:32.249"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:34.246" starttime="20191106 17:08:32.248"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:34.246" starttime="20191106 17:08:32.247"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:34.247" starttime="20191106 17:08:32.194"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:34.247" starttime="20191106 17:08:32.193"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:34.247" starttime="20191106 17:08:31.483"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:34.248" critical="yes" starttime="20191106 17:08:31.482">Setup failed:
255 != 0</status>
</test>
<doc>S3 gateway test with aws cli</doc>
<status status="FAIL" endtime="20191106 17:08:34.250" starttime="20191106 17:08:20.049"></status>
</suite>
<suite source="/opt/hadoop/smoketest/s3/objectmultidelete.robot" id="s1-s8" name="Objectmultidelete">
<test id="s1-s8-t1" name="Delete file with multi delete">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:34.271" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:34.277" level="INFO">${rc} = 1</msg>
<msg timestamp="20191106 17:08:34.277" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191106 17:08:34.277" starttime="20191106 17:08:34.269"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191106 17:08:34.279" starttime="20191106 17:08:34.278"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:34.281" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:34.477" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:08:34.477" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191106 17:08:34.477" starttime="20191106 17:08:34.279"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:34.482" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:34.947" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:08:34.947" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.keystealth.org
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: sjc.edge.kernel.org
 * updates: mirror.key...</msg>
<status status="PASS" endtime="20191106 17:08:34.947" starttime="20191106 17:08:34.480"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:08:34.950" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.keystealth.org
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: sjc.edge.kernel.org
 * updates: mirror.keystealth.org
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191106 17:08:34.950" starttime="20191106 17:08:34.948"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:08:34.951" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191106 17:08:34.951" starttime="20191106 17:08:34.950"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:34.952" starttime="20191106 17:08:34.479"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:34.952" starttime="20191106 17:08:34.479"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:34.952" starttime="20191106 17:08:34.478"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:34.953" starttime="20191106 17:08:34.267"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:34.953" starttime="20191106 17:08:34.267"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:34.960" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:34.966" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:08:34.966" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191106 17:08:34.966" starttime="20191106 17:08:34.958"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:08:34.968" level="INFO">s3g</msg>
<status status="PASS" endtime="20191106 17:08:34.968" starttime="20191106 17:08:34.967"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:08:34.968" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191106 17:08:34.969" starttime="20191106 17:08:34.968"></status>
</kw>
<msg timestamp="20191106 17:08:34.969" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191106 17:08:34.969" starttime="20191106 17:08:34.957"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191106 17:08:34.971" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191106 17:08:34.971" starttime="20191106 17:08:34.969"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:34.975" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:34.992" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:08:34.992" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191106 17:08:34.993" starttime="20191106 17:08:34.973"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:08:34.994" level="INFO"></msg>
<status status="PASS" endtime="20191106 17:08:34.994" starttime="20191106 17:08:34.993"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:08:34.995" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191106 17:08:34.996" starttime="20191106 17:08:34.995"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:34.996" starttime="20191106 17:08:34.972"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:34.996" starttime="20191106 17:08:34.972"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:34.997" starttime="20191106 17:08:34.956"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:34.997" starttime="20191106 17:08:34.955"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:35.002" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:37.086" level="INFO">${rc} = 255</msg>
<msg timestamp="20191106 17:08:37.086" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191106 17:08:37.086" starttime="20191106 17:08:35.000"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:08:37.088" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
2019-11-06 17:08:37,033 ERROR client.OzoneClientFactory: Couldn't create RpcClient protocol exception: 
INTERNAL_ERROR org.apache.hadoop.ozone.om.exceptions.OMException: DestHost:destPort scm:9860 , LocalHost:localPort om/172.19.0.6:0. Failed on local exception: java.io.IOException: javax.security.sasl.SaslException: GSS initiate failed [Caused by GSSException: No valid credentials provided (Mechanism level: Failed to find any Kerberos tgt)]
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.handleError(OzoneManagerProtocolClientSideTranslatorPB.java:758)
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.getServiceInfo(OzoneManagerProtocolClientSideTranslatorPB.java:1249)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.hadoop.hdds.tracing.TraceAllMethod.invoke(TraceAllMethod.java:66)
	at com.sun.proxy.$Proxy20.getServiceInfo(Unknown Source)
	at org.apache.hadoop.ozone.client.rpc.RpcClient.&lt;init&gt;(RpcClient.java:156)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:256)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:239)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getRpcClient(OzoneClientFactory.java:203)
	at org.apache.hadoop.ozone.web.ozShell.OzoneAddress.createClient(OzoneAddress.java:117)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:45)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:32)
	at picocli.CommandLine.execute(CommandLine.java:1173)
	at picocli.CommandLine.access$800(CommandLine.java:141)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1367)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1335)
	at picocli.CommandLine$AbstractParseResultHandler.handleParseResult(CommandLine.java:1243)
	at picocli.CommandLine.parseWithHandlers(CommandLine.java:1526)
	at picocli.CommandLine.parseWithHandler(CommandLine.java:1465)
	at org.apache.hadoop.hdds.cli.GenericCli.execute(GenericCli.java:65)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.execute(S3Shell.java:43)
	at org.apache.hadoop.hdds.cli.GenericCli.run(GenericCli.java:56)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.main(S3Shell.java:54)
Couldn't create RpcClient protocol</msg>
<status status="PASS" endtime="20191106 17:08:37.088" starttime="20191106 17:08:37.087"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:08:37.091" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191106 17:08:37.092" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191106 17:08:37.092" starttime="20191106 17:08:37.089"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:37.093" starttime="20191106 17:08:34.999"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:37.093" starttime="20191106 17:08:34.998"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:37.093" starttime="20191106 17:08:34.997"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:37.093" starttime="20191106 17:08:34.954"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:37.093" starttime="20191106 17:08:34.953"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:37.094" starttime="20191106 17:08:34.266"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:37.094" critical="yes" starttime="20191106 17:08:34.265">Setup failed:
255 != 0</status>
</test>
<doc>S3 gateway test with aws cli</doc>
<status status="FAIL" endtime="20191106 17:08:37.095" starttime="20191106 17:08:34.255"></status>
</suite>
<suite source="/opt/hadoop/smoketest/s3/objectputget.robot" id="s1-s9" name="Objectputget">
<test id="s1-s9-t1" name="Put object to s3">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:37.112" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:37.118" level="INFO">${rc} = 1</msg>
<msg timestamp="20191106 17:08:37.118" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191106 17:08:37.118" starttime="20191106 17:08:37.110"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191106 17:08:37.120" starttime="20191106 17:08:37.119"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:37.123" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:37.318" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:08:37.318" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191106 17:08:37.318" starttime="20191106 17:08:37.120"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:37.323" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:37.880" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:08:37.880" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.keystealth.org
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: sjc.edge.kernel.org
 * updates: mirror.key...</msg>
<status status="PASS" endtime="20191106 17:08:37.880" starttime="20191106 17:08:37.321"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:08:37.882" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.keystealth.org
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: sjc.edge.kernel.org
 * updates: mirror.keystealth.org
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191106 17:08:37.882" starttime="20191106 17:08:37.881"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:08:37.883" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191106 17:08:37.883" starttime="20191106 17:08:37.882"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:37.883" starttime="20191106 17:08:37.320"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:37.884" starttime="20191106 17:08:37.320"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:37.884" starttime="20191106 17:08:37.319"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:37.884" starttime="20191106 17:08:37.109"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:37.884" starttime="20191106 17:08:37.109"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:37.891" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:37.897" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:08:37.898" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191106 17:08:37.898" starttime="20191106 17:08:37.888"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:08:37.900" level="INFO">s3g</msg>
<status status="PASS" endtime="20191106 17:08:37.900" starttime="20191106 17:08:37.899"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:08:37.901" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191106 17:08:37.901" starttime="20191106 17:08:37.900"></status>
</kw>
<msg timestamp="20191106 17:08:37.902" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191106 17:08:37.902" starttime="20191106 17:08:37.888"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191106 17:08:37.905" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191106 17:08:37.905" starttime="20191106 17:08:37.902"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:37.910" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:37.927" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:08:37.928" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191106 17:08:37.928" starttime="20191106 17:08:37.908"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:08:37.930" level="INFO"></msg>
<status status="PASS" endtime="20191106 17:08:37.930" starttime="20191106 17:08:37.929"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:08:37.931" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191106 17:08:37.931" starttime="20191106 17:08:37.930"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:37.932" starttime="20191106 17:08:37.907"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:37.932" starttime="20191106 17:08:37.906"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:37.932" starttime="20191106 17:08:37.887"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:37.933" starttime="20191106 17:08:37.886"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:37.938" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:40.028" level="INFO">${rc} = 255</msg>
<msg timestamp="20191106 17:08:40.028" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191106 17:08:40.028" starttime="20191106 17:08:37.936"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:08:40.030" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
2019-11-06 17:08:39,976 ERROR client.OzoneClientFactory: Couldn't create RpcClient protocol exception: 
INTERNAL_ERROR org.apache.hadoop.ozone.om.exceptions.OMException: DestHost:destPort scm:9860 , LocalHost:localPort om/172.19.0.6:0. Failed on local exception: java.io.IOException: javax.security.sasl.SaslException: GSS initiate failed [Caused by GSSException: No valid credentials provided (Mechanism level: Failed to find any Kerberos tgt)]
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.handleError(OzoneManagerProtocolClientSideTranslatorPB.java:758)
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.getServiceInfo(OzoneManagerProtocolClientSideTranslatorPB.java:1249)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.hadoop.hdds.tracing.TraceAllMethod.invoke(TraceAllMethod.java:66)
	at com.sun.proxy.$Proxy20.getServiceInfo(Unknown Source)
	at org.apache.hadoop.ozone.client.rpc.RpcClient.&lt;init&gt;(RpcClient.java:156)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:256)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:239)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getRpcClient(OzoneClientFactory.java:203)
	at org.apache.hadoop.ozone.web.ozShell.OzoneAddress.createClient(OzoneAddress.java:117)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:45)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:32)
	at picocli.CommandLine.execute(CommandLine.java:1173)
	at picocli.CommandLine.access$800(CommandLine.java:141)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1367)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1335)
	at picocli.CommandLine$AbstractParseResultHandler.handleParseResult(CommandLine.java:1243)
	at picocli.CommandLine.parseWithHandlers(CommandLine.java:1526)
	at picocli.CommandLine.parseWithHandler(CommandLine.java:1465)
	at org.apache.hadoop.hdds.cli.GenericCli.execute(GenericCli.java:65)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.execute(S3Shell.java:43)
	at org.apache.hadoop.hdds.cli.GenericCli.run(GenericCli.java:56)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.main(S3Shell.java:54)
Couldn't create RpcClient protocol</msg>
<status status="PASS" endtime="20191106 17:08:40.031" starttime="20191106 17:08:40.029"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:08:40.033" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191106 17:08:40.034" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191106 17:08:40.034" starttime="20191106 17:08:40.031"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:40.034" starttime="20191106 17:08:37.935"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:40.035" starttime="20191106 17:08:37.934"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:40.035" starttime="20191106 17:08:37.933"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:40.035" starttime="20191106 17:08:37.886"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:40.035" starttime="20191106 17:08:37.885"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:40.036" starttime="20191106 17:08:37.108"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:40.036" critical="yes" starttime="20191106 17:08:37.107">Setup failed:
255 != 0</status>
</test>
<test id="s1-s9-t2" name="Get object from s3">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:40.042" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:40.049" level="INFO">${rc} = 1</msg>
<msg timestamp="20191106 17:08:40.050" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191106 17:08:40.050" starttime="20191106 17:08:40.040"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191106 17:08:40.052" starttime="20191106 17:08:40.051"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:40.055" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:40.275" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:08:40.276" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191106 17:08:40.276" starttime="20191106 17:08:40.053"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:40.282" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:40.779" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:08:40.779" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.keystealth.org
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: sjc.edge.kernel.org
 * updates: mirror.key...</msg>
<status status="PASS" endtime="20191106 17:08:40.779" starttime="20191106 17:08:40.280"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:08:40.781" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.keystealth.org
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: sjc.edge.kernel.org
 * updates: mirror.keystealth.org
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191106 17:08:40.782" starttime="20191106 17:08:40.780"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:08:40.783" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191106 17:08:40.783" starttime="20191106 17:08:40.782"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:40.783" starttime="20191106 17:08:40.279"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:40.784" starttime="20191106 17:08:40.278"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:40.784" starttime="20191106 17:08:40.277"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:40.784" starttime="20191106 17:08:40.039"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:40.784" starttime="20191106 17:08:40.039"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:40.792" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:40.799" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:08:40.799" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191106 17:08:40.799" starttime="20191106 17:08:40.789"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:08:40.801" level="INFO">s3g</msg>
<status status="PASS" endtime="20191106 17:08:40.801" starttime="20191106 17:08:40.800"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:08:40.802" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191106 17:08:40.802" starttime="20191106 17:08:40.801"></status>
</kw>
<msg timestamp="20191106 17:08:40.803" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191106 17:08:40.803" starttime="20191106 17:08:40.788"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191106 17:08:40.804" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191106 17:08:40.805" starttime="20191106 17:08:40.803"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:40.809" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:40.838" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:08:40.838" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191106 17:08:40.838" starttime="20191106 17:08:40.807"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:08:40.839" level="INFO"></msg>
<status status="PASS" endtime="20191106 17:08:40.840" starttime="20191106 17:08:40.839"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:08:40.841" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191106 17:08:40.841" starttime="20191106 17:08:40.840"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:40.841" starttime="20191106 17:08:40.806"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:40.842" starttime="20191106 17:08:40.805"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:40.842" starttime="20191106 17:08:40.788"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:40.842" starttime="20191106 17:08:40.787"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:40.847" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:42.925" level="INFO">${rc} = 255</msg>
<msg timestamp="20191106 17:08:42.925" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191106 17:08:42.925" starttime="20191106 17:08:40.845"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:08:42.927" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
2019-11-06 17:08:42,825 ERROR client.OzoneClientFactory: Couldn't create RpcClient protocol exception: 
INTERNAL_ERROR org.apache.hadoop.ozone.om.exceptions.OMException: DestHost:destPort scm:9860 , LocalHost:localPort om/172.19.0.6:0. Failed on local exception: java.io.IOException: javax.security.sasl.SaslException: GSS initiate failed [Caused by GSSException: No valid credentials provided (Mechanism level: Failed to find any Kerberos tgt)]
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.handleError(OzoneManagerProtocolClientSideTranslatorPB.java:758)
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.getServiceInfo(OzoneManagerProtocolClientSideTranslatorPB.java:1249)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.hadoop.hdds.tracing.TraceAllMethod.invoke(TraceAllMethod.java:66)
	at com.sun.proxy.$Proxy20.getServiceInfo(Unknown Source)
	at org.apache.hadoop.ozone.client.rpc.RpcClient.&lt;init&gt;(RpcClient.java:156)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:256)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:239)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getRpcClient(OzoneClientFactory.java:203)
	at org.apache.hadoop.ozone.web.ozShell.OzoneAddress.createClient(OzoneAddress.java:117)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:45)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:32)
	at picocli.CommandLine.execute(CommandLine.java:1173)
	at picocli.CommandLine.access$800(CommandLine.java:141)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1367)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1335)
	at picocli.CommandLine$AbstractParseResultHandler.handleParseResult(CommandLine.java:1243)
	at picocli.CommandLine.parseWithHandlers(CommandLine.java:1526)
	at picocli.CommandLine.parseWithHandler(CommandLine.java:1465)
	at org.apache.hadoop.hdds.cli.GenericCli.execute(GenericCli.java:65)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.execute(S3Shell.java:43)
	at org.apache.hadoop.hdds.cli.GenericCli.run(GenericCli.java:56)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.main(S3Shell.java:54)
Couldn't create RpcClient protocol</msg>
<status status="PASS" endtime="20191106 17:08:42.927" starttime="20191106 17:08:42.926"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:08:42.927" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191106 17:08:42.928" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191106 17:08:42.928" starttime="20191106 17:08:42.927"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:42.928" starttime="20191106 17:08:40.844"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:42.929" starttime="20191106 17:08:40.843"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:42.929" starttime="20191106 17:08:40.842"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:42.929" starttime="20191106 17:08:40.786"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:42.929" starttime="20191106 17:08:40.785"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:42.929" starttime="20191106 17:08:40.038"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:42.930" critical="yes" starttime="20191106 17:08:40.037">Setup failed:
255 != 0</status>
</test>
<test id="s1-s9-t3" name="Get Partial object from s3 with both start and endoffset">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:42.935" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:42.942" level="INFO">${rc} = 1</msg>
<msg timestamp="20191106 17:08:42.942" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191106 17:08:42.942" starttime="20191106 17:08:42.933"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191106 17:08:42.944" starttime="20191106 17:08:42.943"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:42.947" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:43.164" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:08:43.164" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191106 17:08:43.164" starttime="20191106 17:08:42.945"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:43.170" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:43.653" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:08:43.653" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.keystealth.org
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: sjc.edge.kernel.org
 * updates: mirror.key...</msg>
<status status="PASS" endtime="20191106 17:08:43.653" starttime="20191106 17:08:43.167"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:08:43.655" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.keystealth.org
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: sjc.edge.kernel.org
 * updates: mirror.keystealth.org
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191106 17:08:43.656" starttime="20191106 17:08:43.654"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:08:43.657" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191106 17:08:43.657" starttime="20191106 17:08:43.656"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:43.657" starttime="20191106 17:08:43.167"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:43.658" starttime="20191106 17:08:43.166"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:43.658" starttime="20191106 17:08:43.165"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:43.658" starttime="20191106 17:08:42.932"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:43.658" starttime="20191106 17:08:42.932"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:43.666" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:43.673" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:08:43.673" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191106 17:08:43.673" starttime="20191106 17:08:43.663"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:08:43.675" level="INFO">s3g</msg>
<status status="PASS" endtime="20191106 17:08:43.675" starttime="20191106 17:08:43.674"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:08:43.676" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191106 17:08:43.676" starttime="20191106 17:08:43.675"></status>
</kw>
<msg timestamp="20191106 17:08:43.677" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191106 17:08:43.677" starttime="20191106 17:08:43.663"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191106 17:08:43.679" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191106 17:08:43.679" starttime="20191106 17:08:43.677"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:43.684" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:43.699" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:08:43.699" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191106 17:08:43.699" starttime="20191106 17:08:43.682"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:08:43.701" level="INFO"></msg>
<status status="PASS" endtime="20191106 17:08:43.701" starttime="20191106 17:08:43.700"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:08:43.702" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191106 17:08:43.702" starttime="20191106 17:08:43.701"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:43.703" starttime="20191106 17:08:43.680"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:43.703" starttime="20191106 17:08:43.679"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:43.703" starttime="20191106 17:08:43.662"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:43.703" starttime="20191106 17:08:43.661"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:43.708" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:45.783" level="INFO">${rc} = 255</msg>
<msg timestamp="20191106 17:08:45.784" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191106 17:08:45.784" starttime="20191106 17:08:43.706"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:08:45.785" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
2019-11-06 17:08:45,716 ERROR client.OzoneClientFactory: Couldn't create RpcClient protocol exception: 
INTERNAL_ERROR org.apache.hadoop.ozone.om.exceptions.OMException: DestHost:destPort scm:9860 , LocalHost:localPort om/172.19.0.6:0. Failed on local exception: java.io.IOException: javax.security.sasl.SaslException: GSS initiate failed [Caused by GSSException: No valid credentials provided (Mechanism level: Failed to find any Kerberos tgt)]
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.handleError(OzoneManagerProtocolClientSideTranslatorPB.java:758)
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.getServiceInfo(OzoneManagerProtocolClientSideTranslatorPB.java:1249)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.hadoop.hdds.tracing.TraceAllMethod.invoke(TraceAllMethod.java:66)
	at com.sun.proxy.$Proxy20.getServiceInfo(Unknown Source)
	at org.apache.hadoop.ozone.client.rpc.RpcClient.&lt;init&gt;(RpcClient.java:156)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:256)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:239)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getRpcClient(OzoneClientFactory.java:203)
	at org.apache.hadoop.ozone.web.ozShell.OzoneAddress.createClient(OzoneAddress.java:117)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:45)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:32)
	at picocli.CommandLine.execute(CommandLine.java:1173)
	at picocli.CommandLine.access$800(CommandLine.java:141)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1367)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1335)
	at picocli.CommandLine$AbstractParseResultHandler.handleParseResult(CommandLine.java:1243)
	at picocli.CommandLine.parseWithHandlers(CommandLine.java:1526)
	at picocli.CommandLine.parseWithHandler(CommandLine.java:1465)
	at org.apache.hadoop.hdds.cli.GenericCli.execute(GenericCli.java:65)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.execute(S3Shell.java:43)
	at org.apache.hadoop.hdds.cli.GenericCli.run(GenericCli.java:56)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.main(S3Shell.java:54)
Couldn't create RpcClient protocol</msg>
<status status="PASS" endtime="20191106 17:08:45.786" starttime="20191106 17:08:45.784"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:08:45.786" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191106 17:08:45.787" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191106 17:08:45.787" starttime="20191106 17:08:45.786"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:45.788" starttime="20191106 17:08:43.705"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:45.788" starttime="20191106 17:08:43.705"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:45.788" starttime="20191106 17:08:43.704"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:45.788" starttime="20191106 17:08:43.660"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:45.789" starttime="20191106 17:08:43.659"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:45.789" starttime="20191106 17:08:42.931"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:45.789" critical="yes" starttime="20191106 17:08:42.930">Setup failed:
255 != 0</status>
</test>
<test id="s1-s9-t4" name="Get Partial object from s3 with both start and endoffset(start offset and endoffset is greater than file size)">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:45.795" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:45.803" level="INFO">${rc} = 1</msg>
<msg timestamp="20191106 17:08:45.803" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191106 17:08:45.803" starttime="20191106 17:08:45.793"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191106 17:08:45.805" starttime="20191106 17:08:45.804"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:45.808" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:45.969" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:08:45.969" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191106 17:08:45.969" starttime="20191106 17:08:45.806"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:45.973" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:46.472" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:08:46.473" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.keystealth.org
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: sjc.edge.kernel.org
 * updates: mirror.key...</msg>
<status status="PASS" endtime="20191106 17:08:46.473" starttime="20191106 17:08:45.972"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:08:46.475" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.keystealth.org
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: sjc.edge.kernel.org
 * updates: mirror.keystealth.org
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191106 17:08:46.475" starttime="20191106 17:08:46.474"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:08:46.476" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191106 17:08:46.476" starttime="20191106 17:08:46.475"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:46.477" starttime="20191106 17:08:45.971"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:46.477" starttime="20191106 17:08:45.971"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:46.477" starttime="20191106 17:08:45.970"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:46.477" starttime="20191106 17:08:45.792"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:46.478" starttime="20191106 17:08:45.792"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:46.485" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:46.492" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:08:46.492" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191106 17:08:46.492" starttime="20191106 17:08:46.482"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:08:46.494" level="INFO">s3g</msg>
<status status="PASS" endtime="20191106 17:08:46.494" starttime="20191106 17:08:46.493"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:08:46.495" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191106 17:08:46.495" starttime="20191106 17:08:46.494"></status>
</kw>
<msg timestamp="20191106 17:08:46.496" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191106 17:08:46.496" starttime="20191106 17:08:46.481"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191106 17:08:46.498" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191106 17:08:46.498" starttime="20191106 17:08:46.496"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:46.503" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:46.521" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:08:46.521" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191106 17:08:46.522" starttime="20191106 17:08:46.501"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:08:46.523" level="INFO"></msg>
<status status="PASS" endtime="20191106 17:08:46.523" starttime="20191106 17:08:46.522"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:08:46.524" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191106 17:08:46.524" starttime="20191106 17:08:46.524"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:46.525" starttime="20191106 17:08:46.500"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:46.525" starttime="20191106 17:08:46.498"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:46.525" starttime="20191106 17:08:46.481"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:46.525" starttime="20191106 17:08:46.480"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:46.530" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:48.556" level="INFO">${rc} = 255</msg>
<msg timestamp="20191106 17:08:48.556" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191106 17:08:48.556" starttime="20191106 17:08:46.528"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:08:48.558" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
2019-11-06 17:08:48,505 ERROR client.OzoneClientFactory: Couldn't create RpcClient protocol exception: 
INTERNAL_ERROR org.apache.hadoop.ozone.om.exceptions.OMException: DestHost:destPort scm:9860 , LocalHost:localPort om/172.19.0.6:0. Failed on local exception: java.io.IOException: javax.security.sasl.SaslException: GSS initiate failed [Caused by GSSException: No valid credentials provided (Mechanism level: Failed to find any Kerberos tgt)]
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.handleError(OzoneManagerProtocolClientSideTranslatorPB.java:758)
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.getServiceInfo(OzoneManagerProtocolClientSideTranslatorPB.java:1249)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.hadoop.hdds.tracing.TraceAllMethod.invoke(TraceAllMethod.java:66)
	at com.sun.proxy.$Proxy20.getServiceInfo(Unknown Source)
	at org.apache.hadoop.ozone.client.rpc.RpcClient.&lt;init&gt;(RpcClient.java:156)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:256)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:239)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getRpcClient(OzoneClientFactory.java:203)
	at org.apache.hadoop.ozone.web.ozShell.OzoneAddress.createClient(OzoneAddress.java:117)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:45)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:32)
	at picocli.CommandLine.execute(CommandLine.java:1173)
	at picocli.CommandLine.access$800(CommandLine.java:141)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1367)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1335)
	at picocli.CommandLine$AbstractParseResultHandler.handleParseResult(CommandLine.java:1243)
	at picocli.CommandLine.parseWithHandlers(CommandLine.java:1526)
	at picocli.CommandLine.parseWithHandler(CommandLine.java:1465)
	at org.apache.hadoop.hdds.cli.GenericCli.execute(GenericCli.java:65)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.execute(S3Shell.java:43)
	at org.apache.hadoop.hdds.cli.GenericCli.run(GenericCli.java:56)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.main(S3Shell.java:54)
Couldn't create RpcClient protocol</msg>
<status status="PASS" endtime="20191106 17:08:48.558" starttime="20191106 17:08:48.557"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:08:48.559" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191106 17:08:48.560" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191106 17:08:48.560" starttime="20191106 17:08:48.558"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:48.560" starttime="20191106 17:08:46.527"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:48.560" starttime="20191106 17:08:46.527"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:48.560" starttime="20191106 17:08:46.526"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:48.561" starttime="20191106 17:08:46.479"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:48.561" starttime="20191106 17:08:46.478"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:48.561" starttime="20191106 17:08:45.791"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:48.562" critical="yes" starttime="20191106 17:08:45.790">Setup failed:
255 != 0</status>
</test>
<test id="s1-s9-t5" name="Get Partial object from s3 with both start and endoffset(end offset is greater than file size)">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:48.567" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:48.572" level="INFO">${rc} = 1</msg>
<msg timestamp="20191106 17:08:48.572" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191106 17:08:48.572" starttime="20191106 17:08:48.565"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191106 17:08:48.573" starttime="20191106 17:08:48.573"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:48.575" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:48.771" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:08:48.772" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191106 17:08:48.772" starttime="20191106 17:08:48.574"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:48.778" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:49.284" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:08:49.284" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.keystealth.org
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: sjc.edge.kernel.org
 * updates: mirror.key...</msg>
<status status="PASS" endtime="20191106 17:08:49.285" starttime="20191106 17:08:48.776"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:08:49.286" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.keystealth.org
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: sjc.edge.kernel.org
 * updates: mirror.keystealth.org
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191106 17:08:49.286" starttime="20191106 17:08:49.285"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:08:49.287" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191106 17:08:49.288" starttime="20191106 17:08:49.287"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:49.288" starttime="20191106 17:08:48.775"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:49.288" starttime="20191106 17:08:48.774"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:49.289" starttime="20191106 17:08:48.773"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:49.289" starttime="20191106 17:08:48.564"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:49.289" starttime="20191106 17:08:48.564"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:49.296" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:49.303" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:08:49.303" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191106 17:08:49.303" starttime="20191106 17:08:49.294"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:08:49.305" level="INFO">s3g</msg>
<status status="PASS" endtime="20191106 17:08:49.306" starttime="20191106 17:08:49.304"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:08:49.307" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191106 17:08:49.307" starttime="20191106 17:08:49.306"></status>
</kw>
<msg timestamp="20191106 17:08:49.307" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191106 17:08:49.307" starttime="20191106 17:08:49.293"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191106 17:08:49.309" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191106 17:08:49.309" starttime="20191106 17:08:49.308"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:49.315" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:49.328" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:08:49.328" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191106 17:08:49.328" starttime="20191106 17:08:49.312"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:08:49.330" level="INFO"></msg>
<status status="PASS" endtime="20191106 17:08:49.330" starttime="20191106 17:08:49.329"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:08:49.331" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191106 17:08:49.331" starttime="20191106 17:08:49.330"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:49.331" starttime="20191106 17:08:49.311"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:49.331" starttime="20191106 17:08:49.309"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:49.332" starttime="20191106 17:08:49.292"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:49.332" starttime="20191106 17:08:49.291"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:49.337" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:51.416" level="INFO">${rc} = 255</msg>
<msg timestamp="20191106 17:08:51.416" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191106 17:08:51.416" starttime="20191106 17:08:49.335"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:08:51.419" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
2019-11-06 17:08:51,374 ERROR client.OzoneClientFactory: Couldn't create RpcClient protocol exception: 
INTERNAL_ERROR org.apache.hadoop.ozone.om.exceptions.OMException: DestHost:destPort scm:9860 , LocalHost:localPort om/172.19.0.6:0. Failed on local exception: java.io.IOException: javax.security.sasl.SaslException: GSS initiate failed [Caused by GSSException: No valid credentials provided (Mechanism level: Failed to find any Kerberos tgt)]
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.handleError(OzoneManagerProtocolClientSideTranslatorPB.java:758)
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.getServiceInfo(OzoneManagerProtocolClientSideTranslatorPB.java:1249)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.hadoop.hdds.tracing.TraceAllMethod.invoke(TraceAllMethod.java:66)
	at com.sun.proxy.$Proxy20.getServiceInfo(Unknown Source)
	at org.apache.hadoop.ozone.client.rpc.RpcClient.&lt;init&gt;(RpcClient.java:156)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:256)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:239)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getRpcClient(OzoneClientFactory.java:203)
	at org.apache.hadoop.ozone.web.ozShell.OzoneAddress.createClient(OzoneAddress.java:117)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:45)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:32)
	at picocli.CommandLine.execute(CommandLine.java:1173)
	at picocli.CommandLine.access$800(CommandLine.java:141)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1367)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1335)
	at picocli.CommandLine$AbstractParseResultHandler.handleParseResult(CommandLine.java:1243)
	at picocli.CommandLine.parseWithHandlers(CommandLine.java:1526)
	at picocli.CommandLine.parseWithHandler(CommandLine.java:1465)
	at org.apache.hadoop.hdds.cli.GenericCli.execute(GenericCli.java:65)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.execute(S3Shell.java:43)
	at org.apache.hadoop.hdds.cli.GenericCli.run(GenericCli.java:56)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.main(S3Shell.java:54)
Couldn't create RpcClient protocol</msg>
<status status="PASS" endtime="20191106 17:08:51.419" starttime="20191106 17:08:51.417"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:08:51.420" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191106 17:08:51.421" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191106 17:08:51.421" starttime="20191106 17:08:51.419"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:51.422" starttime="20191106 17:08:49.334"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:51.422" starttime="20191106 17:08:49.333"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:51.422" starttime="20191106 17:08:49.332"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:51.423" starttime="20191106 17:08:49.290"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:51.423" starttime="20191106 17:08:49.289"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:51.423" starttime="20191106 17:08:48.563"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:51.424" critical="yes" starttime="20191106 17:08:48.562">Setup failed:
255 != 0</status>
</test>
<test id="s1-s9-t6" name="Get Partial object from s3 with only start offset">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:51.431" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:51.436" level="INFO">${rc} = 1</msg>
<msg timestamp="20191106 17:08:51.436" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191106 17:08:51.436" starttime="20191106 17:08:51.428"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191106 17:08:51.438" starttime="20191106 17:08:51.437"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:51.440" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:51.629" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:08:51.629" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191106 17:08:51.630" starttime="20191106 17:08:51.438"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:51.636" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:52.172" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:08:52.172" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.keystealth.org
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: sjc.edge.kernel.org
 * updates: mirror.key...</msg>
<status status="PASS" endtime="20191106 17:08:52.172" starttime="20191106 17:08:51.633"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:08:52.174" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.keystealth.org
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: sjc.edge.kernel.org
 * updates: mirror.keystealth.org
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191106 17:08:52.175" starttime="20191106 17:08:52.173"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:08:52.176" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191106 17:08:52.176" starttime="20191106 17:08:52.175"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:52.177" starttime="20191106 17:08:51.633"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:52.177" starttime="20191106 17:08:51.632"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:52.177" starttime="20191106 17:08:51.630"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:52.178" starttime="20191106 17:08:51.427"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:52.178" starttime="20191106 17:08:51.427"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:52.185" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:52.190" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:08:52.190" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191106 17:08:52.190" starttime="20191106 17:08:52.183"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:08:52.191" level="INFO">s3g</msg>
<status status="PASS" endtime="20191106 17:08:52.192" starttime="20191106 17:08:52.191"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:08:52.193" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191106 17:08:52.193" starttime="20191106 17:08:52.192"></status>
</kw>
<msg timestamp="20191106 17:08:52.193" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191106 17:08:52.193" starttime="20191106 17:08:52.182"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191106 17:08:52.194" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191106 17:08:52.194" starttime="20191106 17:08:52.194"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:52.197" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:52.213" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:08:52.213" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191106 17:08:52.213" starttime="20191106 17:08:52.196"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:08:52.214" level="INFO"></msg>
<status status="PASS" endtime="20191106 17:08:52.215" starttime="20191106 17:08:52.214"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:08:52.215" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191106 17:08:52.215" starttime="20191106 17:08:52.215"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:52.216" starttime="20191106 17:08:52.195"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:52.216" starttime="20191106 17:08:52.195"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:52.216" starttime="20191106 17:08:52.181"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:52.216" starttime="20191106 17:08:52.180"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:52.219" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:54.205" level="INFO">${rc} = 255</msg>
<msg timestamp="20191106 17:08:54.205" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191106 17:08:54.206" starttime="20191106 17:08:52.218"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:08:54.207" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
2019-11-06 17:08:54,164 ERROR client.OzoneClientFactory: Couldn't create RpcClient protocol exception: 
INTERNAL_ERROR org.apache.hadoop.ozone.om.exceptions.OMException: DestHost:destPort scm:9860 , LocalHost:localPort om/172.19.0.6:0. Failed on local exception: java.io.IOException: javax.security.sasl.SaslException: GSS initiate failed [Caused by GSSException: No valid credentials provided (Mechanism level: Failed to find any Kerberos tgt)]
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.handleError(OzoneManagerProtocolClientSideTranslatorPB.java:758)
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.getServiceInfo(OzoneManagerProtocolClientSideTranslatorPB.java:1249)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.hadoop.hdds.tracing.TraceAllMethod.invoke(TraceAllMethod.java:66)
	at com.sun.proxy.$Proxy20.getServiceInfo(Unknown Source)
	at org.apache.hadoop.ozone.client.rpc.RpcClient.&lt;init&gt;(RpcClient.java:156)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:256)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:239)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getRpcClient(OzoneClientFactory.java:203)
	at org.apache.hadoop.ozone.web.ozShell.OzoneAddress.createClient(OzoneAddress.java:117)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:45)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:32)
	at picocli.CommandLine.execute(CommandLine.java:1173)
	at picocli.CommandLine.access$800(CommandLine.java:141)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1367)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1335)
	at picocli.CommandLine$AbstractParseResultHandler.handleParseResult(CommandLine.java:1243)
	at picocli.CommandLine.parseWithHandlers(CommandLine.java:1526)
	at picocli.CommandLine.parseWithHandler(CommandLine.java:1465)
	at org.apache.hadoop.hdds.cli.GenericCli.execute(GenericCli.java:65)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.execute(S3Shell.java:43)
	at org.apache.hadoop.hdds.cli.GenericCli.run(GenericCli.java:56)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.main(S3Shell.java:54)
Couldn't create RpcClient protocol</msg>
<status status="PASS" endtime="20191106 17:08:54.207" starttime="20191106 17:08:54.206"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:08:54.208" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191106 17:08:54.209" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191106 17:08:54.209" starttime="20191106 17:08:54.208"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:54.209" starttime="20191106 17:08:52.217"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:54.210" starttime="20191106 17:08:52.217"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:54.210" starttime="20191106 17:08:52.216"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:54.210" starttime="20191106 17:08:52.179"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:54.210" starttime="20191106 17:08:52.178"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:54.210" starttime="20191106 17:08:51.426"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:54.211" critical="yes" starttime="20191106 17:08:51.424">Setup failed:
255 != 0</status>
</test>
<test id="s1-s9-t7" name="Get Partial object from s3 with both start and endoffset which are equal">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:54.216" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:54.221" level="INFO">${rc} = 1</msg>
<msg timestamp="20191106 17:08:54.221" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191106 17:08:54.221" starttime="20191106 17:08:54.214"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191106 17:08:54.222" starttime="20191106 17:08:54.222"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:54.224" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:54.414" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:08:54.414" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191106 17:08:54.414" starttime="20191106 17:08:54.223"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:54.418" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:54.910" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:08:54.910" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.keystealth.org
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: sjc.edge.kernel.org
 * updates: mirror.key...</msg>
<status status="PASS" endtime="20191106 17:08:54.910" starttime="20191106 17:08:54.416"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:08:54.912" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.keystealth.org
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: sjc.edge.kernel.org
 * updates: mirror.keystealth.org
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191106 17:08:54.912" starttime="20191106 17:08:54.911"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:08:54.913" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191106 17:08:54.913" starttime="20191106 17:08:54.913"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:54.914" starttime="20191106 17:08:54.416"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:54.914" starttime="20191106 17:08:54.415"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:54.915" starttime="20191106 17:08:54.414"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:54.915" starttime="20191106 17:08:54.214"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:54.915" starttime="20191106 17:08:54.213"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:54.923" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:54.930" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:08:54.930" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191106 17:08:54.930" starttime="20191106 17:08:54.920"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:08:54.932" level="INFO">s3g</msg>
<status status="PASS" endtime="20191106 17:08:54.932" starttime="20191106 17:08:54.931"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:08:54.933" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191106 17:08:54.934" starttime="20191106 17:08:54.932"></status>
</kw>
<msg timestamp="20191106 17:08:54.934" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191106 17:08:54.934" starttime="20191106 17:08:54.919"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191106 17:08:54.936" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191106 17:08:54.936" starttime="20191106 17:08:54.935"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:54.941" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:54.956" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:08:54.957" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191106 17:08:54.957" starttime="20191106 17:08:54.938"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:08:54.958" level="INFO"></msg>
<status status="PASS" endtime="20191106 17:08:54.959" starttime="20191106 17:08:54.957"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:08:54.959" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191106 17:08:54.960" starttime="20191106 17:08:54.959"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:54.960" starttime="20191106 17:08:54.937"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:54.960" starttime="20191106 17:08:54.936"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:54.961" starttime="20191106 17:08:54.918"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:54.961" starttime="20191106 17:08:54.917"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:54.966" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:57.027" level="INFO">${rc} = 255</msg>
<msg timestamp="20191106 17:08:57.027" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191106 17:08:57.027" starttime="20191106 17:08:54.964"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:08:57.029" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
2019-11-06 17:08:56,976 ERROR client.OzoneClientFactory: Couldn't create RpcClient protocol exception: 
INTERNAL_ERROR org.apache.hadoop.ozone.om.exceptions.OMException: DestHost:destPort scm:9860 , LocalHost:localPort om/172.19.0.6:0. Failed on local exception: java.io.IOException: javax.security.sasl.SaslException: GSS initiate failed [Caused by GSSException: No valid credentials provided (Mechanism level: Failed to find any Kerberos tgt)]
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.handleError(OzoneManagerProtocolClientSideTranslatorPB.java:758)
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.getServiceInfo(OzoneManagerProtocolClientSideTranslatorPB.java:1249)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.hadoop.hdds.tracing.TraceAllMethod.invoke(TraceAllMethod.java:66)
	at com.sun.proxy.$Proxy20.getServiceInfo(Unknown Source)
	at org.apache.hadoop.ozone.client.rpc.RpcClient.&lt;init&gt;(RpcClient.java:156)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:256)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:239)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getRpcClient(OzoneClientFactory.java:203)
	at org.apache.hadoop.ozone.web.ozShell.OzoneAddress.createClient(OzoneAddress.java:117)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:45)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:32)
	at picocli.CommandLine.execute(CommandLine.java:1173)
	at picocli.CommandLine.access$800(CommandLine.java:141)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1367)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1335)
	at picocli.CommandLine$AbstractParseResultHandler.handleParseResult(CommandLine.java:1243)
	at picocli.CommandLine.parseWithHandlers(CommandLine.java:1526)
	at picocli.CommandLine.parseWithHandler(CommandLine.java:1465)
	at org.apache.hadoop.hdds.cli.GenericCli.execute(GenericCli.java:65)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.execute(S3Shell.java:43)
	at org.apache.hadoop.hdds.cli.GenericCli.run(GenericCli.java:56)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.main(S3Shell.java:54)
Couldn't create RpcClient protocol</msg>
<status status="PASS" endtime="20191106 17:08:57.029" starttime="20191106 17:08:57.028"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:08:57.030" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191106 17:08:57.030" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191106 17:08:57.030" starttime="20191106 17:08:57.029"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:57.031" starttime="20191106 17:08:54.963"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:57.031" starttime="20191106 17:08:54.962"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:57.031" starttime="20191106 17:08:54.961"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:57.032" starttime="20191106 17:08:54.916"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:57.032" starttime="20191106 17:08:54.915"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:57.032" starttime="20191106 17:08:54.213"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:57.032" critical="yes" starttime="20191106 17:08:54.211">Setup failed:
255 != 0</status>
</test>
<test id="s1-s9-t8" name="Get Partial object from s3 to get last n bytes">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:57.038" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:57.043" level="INFO">${rc} = 1</msg>
<msg timestamp="20191106 17:08:57.043" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191106 17:08:57.044" starttime="20191106 17:08:57.036"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191106 17:08:57.045" starttime="20191106 17:08:57.044"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:57.047" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:57.251" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:08:57.251" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191106 17:08:57.251" starttime="20191106 17:08:57.045"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:57.257" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:57.741" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:08:57.741" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.keystealth.org
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: sjc.edge.kernel.org
 * updates: mirror.key...</msg>
<status status="PASS" endtime="20191106 17:08:57.741" starttime="20191106 17:08:57.255"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:08:57.743" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.keystealth.org
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: sjc.edge.kernel.org
 * updates: mirror.keystealth.org
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191106 17:08:57.743" starttime="20191106 17:08:57.742"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:08:57.744" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191106 17:08:57.745" starttime="20191106 17:08:57.744"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:57.745" starttime="20191106 17:08:57.254"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:57.746" starttime="20191106 17:08:57.253"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:57.746" starttime="20191106 17:08:57.252"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:57.746" starttime="20191106 17:08:57.035"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:57.746" starttime="20191106 17:08:57.035"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:57.755" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:57.762" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:08:57.762" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191106 17:08:57.762" starttime="20191106 17:08:57.752"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:08:57.764" level="INFO">s3g</msg>
<status status="PASS" endtime="20191106 17:08:57.764" starttime="20191106 17:08:57.763"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:08:57.766" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191106 17:08:57.766" starttime="20191106 17:08:57.765"></status>
</kw>
<msg timestamp="20191106 17:08:57.766" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191106 17:08:57.767" starttime="20191106 17:08:57.750"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191106 17:08:57.768" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191106 17:08:57.769" starttime="20191106 17:08:57.767"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:57.773" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:57.788" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:08:57.789" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191106 17:08:57.789" starttime="20191106 17:08:57.771"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:08:57.790" level="INFO"></msg>
<status status="PASS" endtime="20191106 17:08:57.791" starttime="20191106 17:08:57.789"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:08:57.791" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191106 17:08:57.792" starttime="20191106 17:08:57.791"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:57.792" starttime="20191106 17:08:57.770"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:57.792" starttime="20191106 17:08:57.769"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:57.793" starttime="20191106 17:08:57.750"></status>
</kw>
<status status="PASS" endtime="20191106 17:08:57.793" starttime="20191106 17:08:57.749"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:57.798" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:59.780" level="INFO">${rc} = 255</msg>
<msg timestamp="20191106 17:08:59.780" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191106 17:08:59.780" starttime="20191106 17:08:57.796"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:08:59.782" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
2019-11-06 17:08:59,720 ERROR client.OzoneClientFactory: Couldn't create RpcClient protocol exception: 
INTERNAL_ERROR org.apache.hadoop.ozone.om.exceptions.OMException: DestHost:destPort scm:9860 , LocalHost:localPort om/172.19.0.6:0. Failed on local exception: java.io.IOException: javax.security.sasl.SaslException: GSS initiate failed [Caused by GSSException: No valid credentials provided (Mechanism level: Failed to find any Kerberos tgt)]
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.handleError(OzoneManagerProtocolClientSideTranslatorPB.java:758)
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.getServiceInfo(OzoneManagerProtocolClientSideTranslatorPB.java:1249)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.hadoop.hdds.tracing.TraceAllMethod.invoke(TraceAllMethod.java:66)
	at com.sun.proxy.$Proxy20.getServiceInfo(Unknown Source)
	at org.apache.hadoop.ozone.client.rpc.RpcClient.&lt;init&gt;(RpcClient.java:156)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:256)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:239)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getRpcClient(OzoneClientFactory.java:203)
	at org.apache.hadoop.ozone.web.ozShell.OzoneAddress.createClient(OzoneAddress.java:117)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:45)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:32)
	at picocli.CommandLine.execute(CommandLine.java:1173)
	at picocli.CommandLine.access$800(CommandLine.java:141)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1367)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1335)
	at picocli.CommandLine$AbstractParseResultHandler.handleParseResult(CommandLine.java:1243)
	at picocli.CommandLine.parseWithHandlers(CommandLine.java:1526)
	at picocli.CommandLine.parseWithHandler(CommandLine.java:1465)
	at org.apache.hadoop.hdds.cli.GenericCli.execute(GenericCli.java:65)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.execute(S3Shell.java:43)
	at org.apache.hadoop.hdds.cli.GenericCli.run(GenericCli.java:56)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.main(S3Shell.java:54)
Couldn't create RpcClient protocol</msg>
<status status="PASS" endtime="20191106 17:08:59.782" starttime="20191106 17:08:59.781"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:08:59.783" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191106 17:08:59.784" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191106 17:08:59.784" starttime="20191106 17:08:59.783"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:59.785" starttime="20191106 17:08:57.795"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:59.785" starttime="20191106 17:08:57.794"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:59.785" starttime="20191106 17:08:57.793"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:59.786" starttime="20191106 17:08:57.748"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:59.786" starttime="20191106 17:08:57.747"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:59.786" starttime="20191106 17:08:57.034"></status>
</kw>
<status status="FAIL" endtime="20191106 17:08:59.787" critical="yes" starttime="20191106 17:08:57.033">Setup failed:
255 != 0</status>
</test>
<test id="s1-s9-t9" name="Incorrect values for end and start offset">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:59.793" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:08:59.801" level="INFO">${rc} = 1</msg>
<msg timestamp="20191106 17:08:59.801" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191106 17:08:59.801" starttime="20191106 17:08:59.791"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191106 17:08:59.803" starttime="20191106 17:08:59.802"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:08:59.805" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:09:00.001" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:09:00.001" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191106 17:09:00.001" starttime="20191106 17:08:59.803"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:09:00.006" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:09:00.495" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:09:00.495" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.keystealth.org
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: sjc.edge.kernel.org
 * updates: mirror.key...</msg>
<status status="PASS" endtime="20191106 17:09:00.495" starttime="20191106 17:09:00.004"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:09:00.497" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.keystealth.org
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: sjc.edge.kernel.org
 * updates: mirror.keystealth.org
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191106 17:09:00.497" starttime="20191106 17:09:00.496"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:09:00.498" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191106 17:09:00.498" starttime="20191106 17:09:00.497"></status>
</kw>
<status status="PASS" endtime="20191106 17:09:00.499" starttime="20191106 17:09:00.004"></status>
</kw>
<status status="PASS" endtime="20191106 17:09:00.499" starttime="20191106 17:09:00.003"></status>
</kw>
<status status="PASS" endtime="20191106 17:09:00.499" starttime="20191106 17:09:00.002"></status>
</kw>
<status status="PASS" endtime="20191106 17:09:00.499" starttime="20191106 17:08:59.790"></status>
</kw>
<status status="PASS" endtime="20191106 17:09:00.500" starttime="20191106 17:08:59.789"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:09:00.507" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:09:00.513" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:09:00.514" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191106 17:09:00.514" starttime="20191106 17:09:00.505"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:09:00.515" level="INFO">s3g</msg>
<status status="PASS" endtime="20191106 17:09:00.516" starttime="20191106 17:09:00.515"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:09:00.517" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191106 17:09:00.517" starttime="20191106 17:09:00.516"></status>
</kw>
<msg timestamp="20191106 17:09:00.517" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191106 17:09:00.518" starttime="20191106 17:09:00.504"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191106 17:09:00.519" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191106 17:09:00.519" starttime="20191106 17:09:00.518"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:09:00.524" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:09:00.538" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:09:00.538" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191106 17:09:00.539" starttime="20191106 17:09:00.522"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:09:00.540" level="INFO"></msg>
<status status="PASS" endtime="20191106 17:09:00.540" starttime="20191106 17:09:00.539"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:09:00.541" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191106 17:09:00.541" starttime="20191106 17:09:00.540"></status>
</kw>
<status status="PASS" endtime="20191106 17:09:00.542" starttime="20191106 17:09:00.521"></status>
</kw>
<status status="PASS" endtime="20191106 17:09:00.542" starttime="20191106 17:09:00.520"></status>
</kw>
<status status="PASS" endtime="20191106 17:09:00.542" starttime="20191106 17:09:00.502"></status>
</kw>
<status status="PASS" endtime="20191106 17:09:00.542" starttime="20191106 17:09:00.502"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:09:00.547" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:09:02.581" level="INFO">${rc} = 255</msg>
<msg timestamp="20191106 17:09:02.581" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191106 17:09:02.581" starttime="20191106 17:09:00.545"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:09:02.583" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
2019-11-06 17:09:02,525 ERROR client.OzoneClientFactory: Couldn't create RpcClient protocol exception: 
INTERNAL_ERROR org.apache.hadoop.ozone.om.exceptions.OMException: DestHost:destPort scm:9860 , LocalHost:localPort om/172.19.0.6:0. Failed on local exception: java.io.IOException: javax.security.sasl.SaslException: GSS initiate failed [Caused by GSSException: No valid credentials provided (Mechanism level: Failed to find any Kerberos tgt)]
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.handleError(OzoneManagerProtocolClientSideTranslatorPB.java:758)
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.getServiceInfo(OzoneManagerProtocolClientSideTranslatorPB.java:1249)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.hadoop.hdds.tracing.TraceAllMethod.invoke(TraceAllMethod.java:66)
	at com.sun.proxy.$Proxy20.getServiceInfo(Unknown Source)
	at org.apache.hadoop.ozone.client.rpc.RpcClient.&lt;init&gt;(RpcClient.java:156)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:256)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:239)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getRpcClient(OzoneClientFactory.java:203)
	at org.apache.hadoop.ozone.web.ozShell.OzoneAddress.createClient(OzoneAddress.java:117)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:45)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:32)
	at picocli.CommandLine.execute(CommandLine.java:1173)
	at picocli.CommandLine.access$800(CommandLine.java:141)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1367)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1335)
	at picocli.CommandLine$AbstractParseResultHandler.handleParseResult(CommandLine.java:1243)
	at picocli.CommandLine.parseWithHandlers(CommandLine.java:1526)
	at picocli.CommandLine.parseWithHandler(CommandLine.java:1465)
	at org.apache.hadoop.hdds.cli.GenericCli.execute(GenericCli.java:65)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.execute(S3Shell.java:43)
	at org.apache.hadoop.hdds.cli.GenericCli.run(GenericCli.java:56)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.main(S3Shell.java:54)
Couldn't create RpcClient protocol</msg>
<status status="PASS" endtime="20191106 17:09:02.583" starttime="20191106 17:09:02.582"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:09:02.584" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191106 17:09:02.585" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191106 17:09:02.585" starttime="20191106 17:09:02.584"></status>
</kw>
<status status="FAIL" endtime="20191106 17:09:02.586" starttime="20191106 17:09:00.544"></status>
</kw>
<status status="FAIL" endtime="20191106 17:09:02.586" starttime="20191106 17:09:00.543"></status>
</kw>
<status status="FAIL" endtime="20191106 17:09:02.586" starttime="20191106 17:09:00.543"></status>
</kw>
<status status="FAIL" endtime="20191106 17:09:02.587" starttime="20191106 17:09:00.501"></status>
</kw>
<status status="FAIL" endtime="20191106 17:09:02.587" starttime="20191106 17:09:00.500"></status>
</kw>
<status status="FAIL" endtime="20191106 17:09:02.587" starttime="20191106 17:08:59.789"></status>
</kw>
<status status="FAIL" endtime="20191106 17:09:02.588" critical="yes" starttime="20191106 17:08:59.787">Setup failed:
255 != 0</status>
</test>
<test id="s1-s9-t10" name="Zero byte file">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:09:02.594" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:09:02.601" level="INFO">${rc} = 1</msg>
<msg timestamp="20191106 17:09:02.601" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191106 17:09:02.601" starttime="20191106 17:09:02.592"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191106 17:09:02.603" starttime="20191106 17:09:02.602"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:09:02.606" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:09:02.799" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:09:02.799" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191106 17:09:02.800" starttime="20191106 17:09:02.604"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:09:02.806" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:09:03.337" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:09:03.338" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.keystealth.org
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: sjc.edge.kernel.org
 * updates: mirror.key...</msg>
<status status="PASS" endtime="20191106 17:09:03.338" starttime="20191106 17:09:02.804"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:09:03.339" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.keystealth.org
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: sjc.edge.kernel.org
 * updates: mirror.keystealth.org
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191106 17:09:03.340" starttime="20191106 17:09:03.339"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:09:03.341" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191106 17:09:03.341" starttime="20191106 17:09:03.340"></status>
</kw>
<status status="PASS" endtime="20191106 17:09:03.341" starttime="20191106 17:09:02.803"></status>
</kw>
<status status="PASS" endtime="20191106 17:09:03.342" starttime="20191106 17:09:02.802"></status>
</kw>
<status status="PASS" endtime="20191106 17:09:03.342" starttime="20191106 17:09:02.801"></status>
</kw>
<status status="PASS" endtime="20191106 17:09:03.342" starttime="20191106 17:09:02.591"></status>
</kw>
<status status="PASS" endtime="20191106 17:09:03.342" starttime="20191106 17:09:02.590"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:09:03.350" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:09:03.355" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:09:03.355" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191106 17:09:03.355" starttime="20191106 17:09:03.348"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:09:03.356" level="INFO">s3g</msg>
<status status="PASS" endtime="20191106 17:09:03.356" starttime="20191106 17:09:03.356"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:09:03.357" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191106 17:09:03.357" starttime="20191106 17:09:03.356"></status>
</kw>
<msg timestamp="20191106 17:09:03.357" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191106 17:09:03.357" starttime="20191106 17:09:03.348"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191106 17:09:03.358" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191106 17:09:03.358" starttime="20191106 17:09:03.358"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:09:03.361" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:09:03.378" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:09:03.378" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191106 17:09:03.378" starttime="20191106 17:09:03.360"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:09:03.379" level="INFO"></msg>
<status status="PASS" endtime="20191106 17:09:03.379" starttime="20191106 17:09:03.379"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:09:03.380" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191106 17:09:03.380" starttime="20191106 17:09:03.380"></status>
</kw>
<status status="PASS" endtime="20191106 17:09:03.381" starttime="20191106 17:09:03.359"></status>
</kw>
<status status="PASS" endtime="20191106 17:09:03.381" starttime="20191106 17:09:03.359"></status>
</kw>
<status status="PASS" endtime="20191106 17:09:03.381" starttime="20191106 17:09:03.346"></status>
</kw>
<status status="PASS" endtime="20191106 17:09:03.381" starttime="20191106 17:09:03.345"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:09:03.384" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:09:05.328" level="INFO">${rc} = 255</msg>
<msg timestamp="20191106 17:09:05.329" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191106 17:09:05.329" starttime="20191106 17:09:03.383"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:09:05.330" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
2019-11-06 17:09:05,279 ERROR client.OzoneClientFactory: Couldn't create RpcClient protocol exception: 
INTERNAL_ERROR org.apache.hadoop.ozone.om.exceptions.OMException: DestHost:destPort scm:9860 , LocalHost:localPort om/172.19.0.6:0. Failed on local exception: java.io.IOException: javax.security.sasl.SaslException: GSS initiate failed [Caused by GSSException: No valid credentials provided (Mechanism level: Failed to find any Kerberos tgt)]
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.handleError(OzoneManagerProtocolClientSideTranslatorPB.java:758)
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.getServiceInfo(OzoneManagerProtocolClientSideTranslatorPB.java:1249)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.hadoop.hdds.tracing.TraceAllMethod.invoke(TraceAllMethod.java:66)
	at com.sun.proxy.$Proxy20.getServiceInfo(Unknown Source)
	at org.apache.hadoop.ozone.client.rpc.RpcClient.&lt;init&gt;(RpcClient.java:156)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:256)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:239)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getRpcClient(OzoneClientFactory.java:203)
	at org.apache.hadoop.ozone.web.ozShell.OzoneAddress.createClient(OzoneAddress.java:117)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:45)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:32)
	at picocli.CommandLine.execute(CommandLine.java:1173)
	at picocli.CommandLine.access$800(CommandLine.java:141)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1367)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1335)
	at picocli.CommandLine$AbstractParseResultHandler.handleParseResult(CommandLine.java:1243)
	at picocli.CommandLine.parseWithHandlers(CommandLine.java:1526)
	at picocli.CommandLine.parseWithHandler(CommandLine.java:1465)
	at org.apache.hadoop.hdds.cli.GenericCli.execute(GenericCli.java:65)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.execute(S3Shell.java:43)
	at org.apache.hadoop.hdds.cli.GenericCli.run(GenericCli.java:56)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.main(S3Shell.java:54)
Couldn't create RpcClient protocol</msg>
<status status="PASS" endtime="20191106 17:09:05.330" starttime="20191106 17:09:05.329"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:09:05.331" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191106 17:09:05.332" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191106 17:09:05.332" starttime="20191106 17:09:05.331"></status>
</kw>
<status status="FAIL" endtime="20191106 17:09:05.332" starttime="20191106 17:09:03.382"></status>
</kw>
<status status="FAIL" endtime="20191106 17:09:05.333" starttime="20191106 17:09:03.382"></status>
</kw>
<status status="FAIL" endtime="20191106 17:09:05.333" starttime="20191106 17:09:03.381"></status>
</kw>
<status status="FAIL" endtime="20191106 17:09:05.333" starttime="20191106 17:09:03.344"></status>
</kw>
<status status="FAIL" endtime="20191106 17:09:05.333" starttime="20191106 17:09:03.343"></status>
</kw>
<status status="FAIL" endtime="20191106 17:09:05.334" starttime="20191106 17:09:02.589"></status>
</kw>
<status status="FAIL" endtime="20191106 17:09:05.334" critical="yes" starttime="20191106 17:09:02.588">Setup failed:
255 != 0</status>
</test>
<doc>S3 gateway test with aws cli</doc>
<status status="FAIL" endtime="20191106 17:09:05.337" starttime="20191106 17:08:37.097"></status>
</suite>
<suite source="/opt/hadoop/smoketest/s3/webui.robot" id="s1-s10" name="Webui">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:09:05.358" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:09:05.365" level="INFO">${rc} = 1</msg>
<msg timestamp="20191106 17:09:05.365" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191106 17:09:05.365" starttime="20191106 17:09:05.356"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191106 17:09:05.367" starttime="20191106 17:09:05.366"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:09:05.370" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:09:05.559" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:09:05.560" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191106 17:09:05.560" starttime="20191106 17:09:05.368"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:09:05.567" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:09:06.032" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:09:06.033" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.keystealth.org
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: sjc.edge.kernel.org
 * updates: mirror.key...</msg>
<status status="PASS" endtime="20191106 17:09:06.033" starttime="20191106 17:09:05.564"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:09:06.035" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.keystealth.org
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: sjc.edge.kernel.org
 * updates: mirror.keystealth.org
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191106 17:09:06.035" starttime="20191106 17:09:06.034"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:09:06.036" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191106 17:09:06.036" starttime="20191106 17:09:06.035"></status>
</kw>
<status status="PASS" endtime="20191106 17:09:06.037" starttime="20191106 17:09:05.563"></status>
</kw>
<status status="PASS" endtime="20191106 17:09:06.037" starttime="20191106 17:09:05.563"></status>
</kw>
<status status="PASS" endtime="20191106 17:09:06.037" starttime="20191106 17:09:05.561"></status>
</kw>
<status status="PASS" endtime="20191106 17:09:06.038" starttime="20191106 17:09:05.355"></status>
</kw>
<status status="PASS" endtime="20191106 17:09:06.038" starttime="20191106 17:09:05.354"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:09:06.045" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:09:06.051" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:09:06.052" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191106 17:09:06.052" starttime="20191106 17:09:06.042"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:09:06.054" level="INFO">s3g</msg>
<status status="PASS" endtime="20191106 17:09:06.054" starttime="20191106 17:09:06.053"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:09:06.055" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191106 17:09:06.055" starttime="20191106 17:09:06.054"></status>
</kw>
<msg timestamp="20191106 17:09:06.055" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191106 17:09:06.056" starttime="20191106 17:09:06.042"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191106 17:09:06.059" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191106 17:09:06.059" starttime="20191106 17:09:06.056"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:09:06.063" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:09:06.078" level="INFO">${rc} = 0</msg>
<msg timestamp="20191106 17:09:06.078" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191106 17:09:06.078" starttime="20191106 17:09:06.061"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:09:06.080" level="INFO"></msg>
<status status="PASS" endtime="20191106 17:09:06.080" starttime="20191106 17:09:06.079"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:09:06.081" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191106 17:09:06.082" starttime="20191106 17:09:06.081"></status>
</kw>
<status status="PASS" endtime="20191106 17:09:06.082" starttime="20191106 17:09:06.060"></status>
</kw>
<status status="PASS" endtime="20191106 17:09:06.082" starttime="20191106 17:09:06.059"></status>
</kw>
<status status="PASS" endtime="20191106 17:09:06.083" starttime="20191106 17:09:06.041"></status>
</kw>
<status status="PASS" endtime="20191106 17:09:06.083" starttime="20191106 17:09:06.040"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191106 17:09:06.088" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191106 17:09:07.990" level="INFO">${rc} = 255</msg>
<msg timestamp="20191106 17:09:07.991" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191106 17:09:07.991" starttime="20191106 17:09:06.086"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191106 17:09:07.993" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
2019-11-06 17:09:07,927 ERROR client.OzoneClientFactory: Couldn't create RpcClient protocol exception: 
INTERNAL_ERROR org.apache.hadoop.ozone.om.exceptions.OMException: DestHost:destPort scm:9860 , LocalHost:localPort om/172.19.0.6:0. Failed on local exception: java.io.IOException: javax.security.sasl.SaslException: GSS initiate failed [Caused by GSSException: No valid credentials provided (Mechanism level: Failed to find any Kerberos tgt)]
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.handleError(OzoneManagerProtocolClientSideTranslatorPB.java:758)
	at org.apache.hadoop.ozone.om.protocolPB.OzoneManagerProtocolClientSideTranslatorPB.getServiceInfo(OzoneManagerProtocolClientSideTranslatorPB.java:1249)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.hadoop.hdds.tracing.TraceAllMethod.invoke(TraceAllMethod.java:66)
	at com.sun.proxy.$Proxy20.getServiceInfo(Unknown Source)
	at org.apache.hadoop.ozone.client.rpc.RpcClient.&lt;init&gt;(RpcClient.java:156)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:256)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getClientProtocol(OzoneClientFactory.java:239)
	at org.apache.hadoop.ozone.client.OzoneClientFactory.getRpcClient(OzoneClientFactory.java:203)
	at org.apache.hadoop.ozone.web.ozShell.OzoneAddress.createClient(OzoneAddress.java:117)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:45)
	at org.apache.hadoop.ozone.web.ozShell.s3.GetS3SecretHandler.call(GetS3SecretHandler.java:32)
	at picocli.CommandLine.execute(CommandLine.java:1173)
	at picocli.CommandLine.access$800(CommandLine.java:141)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1367)
	at picocli.CommandLine$RunLast.handle(CommandLine.java:1335)
	at picocli.CommandLine$AbstractParseResultHandler.handleParseResult(CommandLine.java:1243)
	at picocli.CommandLine.parseWithHandlers(CommandLine.java:1526)
	at picocli.CommandLine.parseWithHandler(CommandLine.java:1465)
	at org.apache.hadoop.hdds.cli.GenericCli.execute(GenericCli.java:65)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.execute(S3Shell.java:43)
	at org.apache.hadoop.hdds.cli.GenericCli.run(GenericCli.java:56)
	at org.apache.hadoop.ozone.web.ozShell.s3.S3Shell.main(S3Shell.java:54)
Couldn't create RpcClient protocol</msg>
<status status="PASS" endtime="20191106 17:09:07.993" starttime="20191106 17:09:07.992"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191106 17:09:07.994" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191106 17:09:07.995" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191106 17:09:07.995" starttime="20191106 17:09:07.994"></status>
</kw>
<status status="FAIL" endtime="20191106 17:09:07.996" starttime="20191106 17:09:06.085"></status>
</kw>
<status status="FAIL" endtime="20191106 17:09:07.996" starttime="20191106 17:09:06.084"></status>
</kw>
<status status="FAIL" endtime="20191106 17:09:07.996" starttime="20191106 17:09:06.083"></status>
</kw>
<status status="FAIL" endtime="20191106 17:09:07.997" starttime="20191106 17:09:06.039"></status>
</kw>
<status status="FAIL" endtime="20191106 17:09:07.997" starttime="20191106 17:09:06.038"></status>
</kw>
<status status="FAIL" endtime="20191106 17:09:07.997" starttime="20191106 17:09:05.353"></status>
</kw>
<test id="s1-s10-t1" name="S3 Gateway Web UI">
<status status="FAIL" endtime="20191106 17:09:07.999" critical="yes" starttime="20191106 17:09:07.998">Parent suite setup failed:
255 != 0</status>
</test>
<doc>S3 gateway web ui test</doc>
<status status="FAIL" endtime="20191106 17:09:08.000" starttime="20191106 17:09:05.344">Suite setup failed:
255 != 0</status>
</suite>
<status status="FAIL" endtime="20191106 17:09:08.009" starttime="20191106 17:06:51.721"></status>
</suite>
<statistics>
<total>
<stat fail="37" pass="0">Critical Tests</stat>
<stat fail="37" pass="0">All Tests</stat>
</total>
<tag>
</tag>
<suite>
<stat fail="37" id="s1" name="ozonesecure-s3" pass="0">ozonesecure-s3</stat>
<stat fail="1" id="s1-s1" name="Awss3" pass="0">ozonesecure-s3.Awss3</stat>
<stat fail="1" id="s1-s2" name="Bucketcreate" pass="0">ozonesecure-s3.Bucketcreate</stat>
<stat fail="1" id="s1-s3" name="Buckethead" pass="0">ozonesecure-s3.Buckethead</stat>
<stat fail="1" id="s1-s4" name="Bucketlist" pass="0">ozonesecure-s3.Bucketlist</stat>
<stat fail="12" id="s1-s5" name="MultipartUpload" pass="0">ozonesecure-s3.MultipartUpload</stat>
<stat fail="4" id="s1-s6" name="Objectcopy" pass="0">ozonesecure-s3.Objectcopy</stat>
<stat fail="5" id="s1-s7" name="Objectdelete" pass="0">ozonesecure-s3.Objectdelete</stat>
<stat fail="1" id="s1-s8" name="Objectmultidelete" pass="0">ozonesecure-s3.Objectmultidelete</stat>
<stat fail="10" id="s1-s9" name="Objectputget" pass="0">ozonesecure-s3.Objectputget</stat>
<stat fail="1" id="s1-s10" name="Webui" pass="0">ozonesecure-s3.Webui</stat>
</suite>
</statistics>
<errors>
</errors>
</robot>
