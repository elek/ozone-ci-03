<?xml version="1.0" encoding="UTF-8"?>
<robot rpa="false" generated="20191025 23:43:19.332" generator="Robot 3.1.2 (Python 2.7.5 on linux2)">
<suite source="/opt/hadoop/smoketest/s3" id="s1" name="ozonesecure-s3">
<suite source="/opt/hadoop/smoketest/s3/awss3.robot" id="s1-s1" name="Awss3">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:43:19.403" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:43:19.411" level="INFO">${rc} = 1</msg>
<msg timestamp="20191025 23:43:19.411" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191025 23:43:19.411" starttime="20191025 23:43:19.402"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191025 23:43:19.412" starttime="20191025 23:43:19.411"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:43:19.414" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:43:19.614" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:43:19.614" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191025 23:43:19.614" starttime="20191025 23:43:19.412"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:43:19.620" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:43:49.183" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:43:49.184" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Determining fastest mirrors
 * base: mirror.sfo12.us.leaseweb.net
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: mirror.sfo12.us.leaseweb.net
 * updates: mirror.sf...</msg>
<status status="PASS" endtime="20191025 23:43:49.184" starttime="20191025 23:43:19.618"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:43:49.185" level="INFO">Loaded plugins: fastestmirror, ovl
Determining fastest mirrors
 * base: mirror.sfo12.us.leaseweb.net
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: mirror.sfo12.us.leaseweb.net
 * updates: mirror.sfo12.us.leaseweb.net
Resolving Dependencies
--&gt; Running transaction check
---&gt; Package awscli.noarch 0:1.14.28-5.el7_5.1 will be installed
--&gt; Processing Dependency: python-s3transfer &gt;= 0.1.9 for package: awscli-1.14.28-5.el7_5.1.noarch
--&gt; Processing Dependency: python-docutils &gt;= 0.10 for package: awscli-1.14.28-5.el7_5.1.noarch
--&gt; Processing Dependency: python-cryptography &gt;= 1.7.2 for package: awscli-1.14.28-5.el7_5.1.noarch
--&gt; Processing Dependency: PyYAML &gt;= 3.10 for package: awscli-1.14.28-5.el7_5.1.noarch
--&gt; Running transaction check
---&gt; Package PyYAML.x86_64 0:3.10-11.el7 will be installed
--&gt; Processing Dependency: libyaml-0.so.2()(64bit) for package: PyYAML-3.10-11.el7.x86_64
---&gt; Package python-docutils.noarch 0:0.11-0.3.20130715svn7687.el7 will be installed
--&gt; Processing Dependency: python-imaging for package: python-docutils-0.11-0.3.20130715svn7687.el7.noarch
---&gt; Package python-s3transfer.noarch 0:0.1.13-1.el7.0.1 will be installed
--&gt; Processing Dependency: python-dateutil &gt;= 1.4 for package: python-s3transfer-0.1.13-1.el7.0.1.noarch
---&gt; Package python2-cryptography.x86_64 0:1.7.2-2.el7 will be installed
--&gt; Processing Dependency: python-six &gt;= 1.4.1 for package: python2-cryptography-1.7.2-2.el7.x86_64
--&gt; Processing Dependency: python-pyasn1 &gt;= 0.1.8 for package: python2-cryptography-1.7.2-2.el7.x86_64
--&gt; Processing Dependency: python-idna &gt;= 2.0 for package: python2-cryptography-1.7.2-2.el7.x86_64
--&gt; Processing Dependency: python-cffi &gt;= 1.4.1 for package: python2-cryptography-1.7.2-2.el7.x86_64
--&gt; Processing Dependency: python-enum34 for package: python2-cryptography-1.7.2-2.el7.x86_64
--&gt; Processing Dependency: openssl for package: python2-cryptography-1.7.2-2.el7.x86_64
--&gt; Running transaction check
---&gt; Package libyaml.x86_64 0:0.1.4-11.el7_0 will be installed
---&gt; Package openssl.x86_64 1:1.0.2k-19.el7 will be installed
--&gt; Processing Dependency: openssl-libs(x86-64) = 1:1.0.2k-19.el7 for package: 1:openssl-1.0.2k-19.el7.x86_64
--&gt; Processing Dependency: make for package: 1:openssl-1.0.2k-19.el7.x86_64
---&gt; Package python-cffi.x86_64 0:1.6.0-5.el7 will be installed
--&gt; Processing Dependency: python-pycparser for package: python-cffi-1.6.0-5.el7.x86_64
---&gt; Package python-dateutil.noarch 0:1.5-7.el7 will be installed
---&gt; Package python-enum34.noarch 0:1.0.4-1.el7 will be installed
---&gt; Package python-idna.noarch 0:2.4-1.el7 will be installed
---&gt; Package python-pillow.x86_64 0:2.0.0-19.gitd1c6db8.el7 will be installed
--&gt; Processing Dependency: libtiff.so.5(LIBTIFF_4.0)(64bit) for package: python-pillow-2.0.0-19.gitd1c6db8.el7.x86_64
--&gt; Processing Dependency: libwebp.so.4()(64bit) for package: python-pillow-2.0.0-19.gitd1c6db8.el7.x86_64
--&gt; Processing Dependency: libtiff.so.5()(64bit) for package: python-pillow-2.0.0-19.gitd1c6db8.el7.x86_64
---&gt; Package python-six.noarch 0:1.9.0-2.el7 will be installed
---&gt; Package python2-pyasn1.noarch 0:0.1.9-7.el7 will be installed
--&gt; Running transaction check
---&gt; Package libtiff.x86_64 0:4.0.3-32.el7 will be installed
--&gt; Processing Dependency: libjbig.so.2.0()(64bit) for package: libtiff-4.0.3-32.el7.x86_64
---&gt; Package libwebp.x86_64 0:0.3.0-7.el7 will be installed
---&gt; Package make.x86_64 1:3.82-24.el7 will be installed
---&gt; Package openssl-libs.x86_64 1:1.0.2k-16.el7 will be updated
---&gt; Package openssl-libs.x86_64 1:1.0.2k-19.el7 will be an update
---&gt; Package python-pycparser.noarch 0:2.14-1.el7 will be installed
--&gt; Processing Dependency: python-ply for package: python-pycparser-2.14-1.el7.noarch
--&gt; Running transaction check
---&gt; Package jbigkit-libs.x86_64 0:2.0-11.el7 will be installed
---&gt; Package python-ply.noarch 0:3.4-11.el7 will be installed
--&gt; Finished Dependency Resolution

Dependencies Resolved

================================================================================
 Package                Arch     Version                           Repository
                                                                           Size
================================================================================
Installing:
 awscli                 noarch   1.14.28-5.el7_5.1                 base   1.0 M
Installing for dependencies:
 PyYAML                 x86_64   3.10-11.el7                       base   153 k
 jbigkit-libs           x86_64   2.0-11.el7                        base    46 k
 libtiff                x86_64   4.0.3-32.el7                      base   171 k
 libwebp                x86_64   0.3.0-7.el7                       base   170 k
 libyaml                x86_64   0.1.4-11.el7_0                    base    55 k
 make                   x86_64   1:3.82-24.el7                     base   421 k
 openssl                x86_64   1:1.0.2k-19.el7                   base   493 k
 python-cffi            x86_64   1.6.0-5.el7                       base   218 k
 python-dateutil        noarch   1.5-7.el7                         base    85 k
 python-docutils        noarch   0.11-0.3.20130715svn7687.el7      base   1.5 M
 python-enum34          noarch   1.0.4-1.el7                       base    52 k
 python-idna            noarch   2.4-1.el7                         base    94 k
 python-pillow          x86_64   2.0.0-19.gitd1c6db8.el7           base   438 k
 python-ply             noarch   3.4-11.el7                        base   123 k
 python-pycparser       noarch   2.14-1.el7                        base   104 k
 python-s3transfer      noarch   0.1.13-1.el7.0.1                  base   2.9 M
 python-six             noarch   1.9.0-2.el7                       base    29 k
 python2-cryptography   x86_64   1.7.2-2.el7                       base   502 k
 python2-pyasn1         noarch   0.1.9-7.el7                       base   100 k
Updating for dependencies:
 openssl-libs           x86_64   1:1.0.2k-19.el7                   base   1.2 M

Transaction Summary
================================================================================
Install  1 Package  (+19 Dependent packages)
Upgrade             (  1 Dependent package)

Total download size: 9.9 M
Downloading packages:
Delta RPMs disabled because /usr/bin/applydeltarpm not installed.
--------------------------------------------------------------------------------
Total                                               39 MB/s | 9.9 MB  00:00     
Running transaction check
Running transaction test
Transaction test succeeded
Running transaction
  Updating   : 1:openssl-libs-1.0.2k-19.el7.x86_64                         1/22 
  Installing : python2-pyasn1-0.1.9-7.el7.noarch                           2/22 
  Installing : libyaml-0.1.4-11.el7_0.x86_64                               3/22 
  Installing : PyYAML-3.10-11.el7.x86_64                                   4/22 
  Installing : jbigkit-libs-2.0-11.el7.x86_64                              5/22 
  Installing : libtiff-4.0.3-32.el7.x86_64                                 6/22 
  Installing : python-ply-3.4-11.el7.noarch                                7/22 
  Installing : python-pycparser-2.14-1.el7.noarch                          8/22 
  Installing : python-cffi-1.6.0-5.el7.x86_64                              9/22 
  Installing : python-idna-2.4-1.el7.noarch                               10/22 
  Installing : python-six-1.9.0-2.el7.noarch                              11/22 
  Installing : 1:make-3.82-24.el7.x86_64                                  12/22 
  Installing : 1:openssl-1.0.2k-19.el7.x86_64                             13/22 
  Installing : python-dateutil-1.5-7.el7.noarch                           14/22 
  Installing : python-enum34-1.0.4-1.el7.noarch                           15/22 
  Installing : python2-cryptography-1.7.2-2.el7.x86_64                    16/22 
  Installing : libwebp-0.3.0-7.el7.x86_64                                 17/22 
  Installing : python-pillow-2.0.0-19.gitd1c6db8.el7.x86_64               18/22 
  Installing : python-docutils-0.11-0.3.20130715svn7687.el7.noarch        19/22 
  Installing : python-s3transfer-0.1.13-1.el7.0.1.noarch                  20/22 
  Installing : awscli-1.14.28-5.el7_5.1.noarch                            21/22 
  Cleanup    : 1:openssl-libs-1.0.2k-16.el7.x86_64                        22/22 
  Verifying  : libwebp-0.3.0-7.el7.x86_64                                  1/22 
  Verifying  : python-enum34-1.0.4-1.el7.noarch                            2/22 
  Verifying  : python-docutils-0.11-0.3.20130715svn7687.el7.noarch         3/22 
  Verifying  : 1:openssl-libs-1.0.2k-19.el7.x86_64                         4/22 
  Verifying  : python-dateutil-1.5-7.el7.noarch                            5/22 
  Verifying  : 1:make-3.82-24.el7.x86_64                                   6/22 
  Verifying  : python-six-1.9.0-2.el7.noarch                               7/22 
  Verifying  : python-s3transfer-0.1.13-1.el7.0.1.noarch                   8/22 
  Verifying  : python-idna-2.4-1.el7.noarch                                9/22 
  Verifying  : python-ply-3.4-11.el7.noarch                               10/22 
  Verifying  : 1:openssl-1.0.2k-19.el7.x86_64                             11/22 
  Verifying  : python-cffi-1.6.0-5.el7.x86_64                             12/22 
  Verifying  : awscli-1.14.28-5.el7_5.1.noarch                            13/22 
  Verifying  : python-pillow-2.0.0-19.gitd1c6db8.el7.x86_64               14/22 
  Verifying  : jbigkit-libs-2.0-11.el7.x86_64                             15/22 
  Verifying  : python-pycparser-2.14-1.el7.noarch                         16/22 
  Verifying  : libyaml-0.1.4-11.el7_0.x86_64                              17/22 
  Verifying  : libtiff-4.0.3-32.el7.x86_64                                18/22 
  Verifying  : python2-pyasn1-0.1.9-7.el7.noarch                          19/22 
  Verifying  : PyYAML-3.10-11.el7.x86_64                                  20/22 
  Verifying  : python2-cryptography-1.7.2-2.el7.x86_64                    21/22 
  Verifying  : 1:openssl-libs-1.0.2k-16.el7.x86_64                        22/22 

Installed:
  awscli.noarch 0:1.14.28-5.el7_5.1                                             

Dependency Installed:
  PyYAML.x86_64 0:3.10-11.el7                                                   
  jbigkit-libs.x86_64 0:2.0-11.el7                                              
  libtiff.x86_64 0:4.0.3-32.el7                                                 
  libwebp.x86_64 0:0.3.0-7.el7                                                  
  libyaml.x86_64 0:0.1.4-11.el7_0                                               
  make.x86_64 1:3.82-24.el7                                                     
  openssl.x86_64 1:1.0.2k-19.el7                                                
  python-cffi.x86_64 0:1.6.0-5.el7                                              
  python-dateutil.noarch 0:1.5-7.el7                                            
  python-docutils.noarch 0:0.11-0.3.20130715svn7687.el7                         
  python-enum34.noarch 0:1.0.4-1.el7                                            
  python-idna.noarch 0:2.4-1.el7                                                
  python-pillow.x86_64 0:2.0.0-19.gitd1c6db8.el7                                
  python-ply.noarch 0:3.4-11.el7                                                
  python-pycparser.noarch 0:2.14-1.el7                                          
  python-s3transfer.noarch 0:0.1.13-1.el7.0.1                                   
  python-six.noarch 0:1.9.0-2.el7                                               
  python2-cryptography.x86_64 0:1.7.2-2.el7                                     
  python2-pyasn1.noarch 0:0.1.9-7.el7                                           

Dependency Updated:
  openssl-libs.x86_64 1:1.0.2k-19.el7                                           

Complete!</msg>
<status status="PASS" endtime="20191025 23:43:49.185" starttime="20191025 23:43:49.184"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:43:49.186" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:43:49.186" starttime="20191025 23:43:49.186"></status>
</kw>
<status status="PASS" endtime="20191025 23:43:49.186" starttime="20191025 23:43:19.617"></status>
</kw>
<status status="PASS" endtime="20191025 23:43:49.187" starttime="20191025 23:43:19.616"></status>
</kw>
<status status="PASS" endtime="20191025 23:43:49.187" starttime="20191025 23:43:19.615"></status>
</kw>
<status status="PASS" endtime="20191025 23:43:49.187" starttime="20191025 23:43:19.401"></status>
</kw>
<status status="PASS" endtime="20191025 23:43:49.187" starttime="20191025 23:43:19.401"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:43:49.192" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:43:49.199" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:43:49.200" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191025 23:43:49.200" starttime="20191025 23:43:49.190"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:43:49.201" level="INFO">s3g</msg>
<status status="PASS" endtime="20191025 23:43:49.202" starttime="20191025 23:43:49.201"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:43:49.203" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:43:49.203" starttime="20191025 23:43:49.202"></status>
</kw>
<msg timestamp="20191025 23:43:49.203" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191025 23:43:49.204" starttime="20191025 23:43:49.189"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191025 23:43:49.206" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:43:49.207" starttime="20191025 23:43:49.204"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:43:49.211" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:43:49.227" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:43:49.227" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:43:49.227" starttime="20191025 23:43:49.209"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:43:49.229" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:43:49.229" starttime="20191025 23:43:49.228"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:43:49.229" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:43:49.230" starttime="20191025 23:43:49.229"></status>
</kw>
<status status="PASS" endtime="20191025 23:43:49.230" starttime="20191025 23:43:49.208"></status>
</kw>
<status status="PASS" endtime="20191025 23:43:49.230" starttime="20191025 23:43:49.207"></status>
</kw>
<status status="PASS" endtime="20191025 23:43:49.230" starttime="20191025 23:43:49.189"></status>
</kw>
<status status="PASS" endtime="20191025 23:43:49.231" starttime="20191025 23:43:49.188"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:43:49.235" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:43:51.600" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:43:51.600" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:43:51.600" starttime="20191025 23:43:49.233"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:43:51.601" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
awsAccessKey=testuser/s3g@EXAMPLE.COM
awsSecret=bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676</msg>
<status status="PASS" endtime="20191025 23:43:51.601" starttime="20191025 23:43:51.600"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:43:51.602" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:43:51.603" starttime="20191025 23:43:51.602"></status>
</kw>
<msg timestamp="20191025 23:43:51.603" level="INFO">${result} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:43:51.603" starttime="20191025 23:43:49.232"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsAccessKey=).*</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:43:51.605" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:43:51.605" starttime="20191025 23:43:51.604"></status>
</kw>
<kw name="Get Variable Value" library="BuiltIn">
<doc>Returns variable value or ``default`` if the variable does not exist.</doc>
<arguments>
<arg>${accessKey}</arg>
<arg>sdsdasaasdasd</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:43:51.606" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:43:51.606" starttime="20191025 23:43:51.605"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsSecret=).*</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:43:51.607" level="INFO">${secret} = [u'bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676']</msg>
<status status="PASS" endtime="20191025 23:43:51.607" starttime="20191025 23:43:51.606"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${accessKey[0]}</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:43:51.608" level="INFO">${accessKey} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:43:51.608" starttime="20191025 23:43:51.608"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${secret[0]}</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:43:51.609" level="INFO">${secret} = bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676</msg>
<status status="PASS" endtime="20191025 23:43:51.609" starttime="20191025 23:43:51.609"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set default.s3.signature_version s3v4</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:43:51.612" level="INFO">Running command 'aws configure set default.s3.signature_version s3v4 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:43:52.055" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:43:52.055" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:43:52.055" starttime="20191025 23:43:51.610"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:43:52.057" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:43:52.057" starttime="20191025 23:43:52.056"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:43:52.058" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:43:52.059" starttime="20191025 23:43:52.058"></status>
</kw>
<status status="PASS" endtime="20191025 23:43:52.059" starttime="20191025 23:43:51.610"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_access_key_id ${accessKey}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:43:52.063" level="INFO">Running command 'aws configure set aws_access_key_id testuser/s3g@EXAMPLE.COM 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:43:52.557" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:43:52.557" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:43:52.557" starttime="20191025 23:43:52.061"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:43:52.558" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:43:52.559" starttime="20191025 23:43:52.558"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:43:52.559" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:43:52.559" starttime="20191025 23:43:52.559"></status>
</kw>
<status status="PASS" endtime="20191025 23:43:52.560" starttime="20191025 23:43:52.060"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_secret_access_key ${secret}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:43:52.563" level="INFO">Running command 'aws configure set aws_secret_access_key bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:43:52.991" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:43:52.991" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:43:52.991" starttime="20191025 23:43:52.561"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:43:52.993" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:43:52.993" starttime="20191025 23:43:52.992"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:43:52.993" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:43:52.994" starttime="20191025 23:43:52.993"></status>
</kw>
<status status="PASS" endtime="20191025 23:43:52.994" starttime="20191025 23:43:52.560"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set region us-west-1</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:43:52.997" level="INFO">Running command 'aws configure set region us-west-1 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:43:53.486" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:43:53.486" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:43:53.487" starttime="20191025 23:43:52.995"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:43:53.488" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:43:53.488" starttime="20191025 23:43:53.487"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:43:53.488" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:43:53.489" starttime="20191025 23:43:53.488"></status>
</kw>
<status status="PASS" endtime="20191025 23:43:53.489" starttime="20191025 23:43:52.994"></status>
</kw>
<status status="PASS" endtime="20191025 23:43:53.489" starttime="20191025 23:43:49.232"></status>
</kw>
<status status="PASS" endtime="20191025 23:43:53.489" starttime="20191025 23:43:49.231"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'false'</arg>
<arg>Setup dummy credentials for S3</arg>
</arguments>
<status status="PASS" endtime="20191025 23:43:53.490" starttime="20191025 23:43:53.489"></status>
</kw>
<status status="PASS" endtime="20191025 23:43:53.490" starttime="20191025 23:43:49.188"></status>
</kw>
<status status="PASS" endtime="20191025 23:43:53.490" starttime="20191025 23:43:49.187"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${BUCKET}' == 'generated'</arg>
<arg>Create bucket</arg>
</arguments>
<kw name="Create bucket" library="commonawslib">
<kw name="Generate Random String" library="String">
<doc>Generates a string with a desired ``length`` from the given ``chars``.</doc>
<arguments>
<arg>5</arg>
<arg>[NUMBERS]</arg>
</arguments>
<assign>
<var>${postfix}</var>
</assign>
<msg timestamp="20191025 23:43:53.492" level="INFO">${postfix} = 29759</msg>
<status status="PASS" endtime="20191025 23:43:53.492" starttime="20191025 23:43:53.491"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${BUCKET}</arg>
<arg>bucket-${postfix}</arg>
</arguments>
<msg timestamp="20191025 23:43:53.493" level="INFO">${BUCKET} = bucket-29759</msg>
<status status="PASS" endtime="20191025 23:43:53.493" starttime="20191025 23:43:53.492"></status>
</kw>
<kw name="Execute AWSS3APICli" library="commonawslib">
<arguments>
<arg>create-bucket --bucket ${BUCKET}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws s3api --endpoint-url ${ENDPOINT_URL} ${command}</arg>
</arguments>
<assign>
<var>${output}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:43:53.496" level="INFO">Running command 'aws s3api --endpoint-url http://s3g:9878 create-bucket --bucket bucket-29759 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:43:58.576" level="INFO">${rc} = 255</msg>
<msg timestamp="20191025 23:43:58.576" level="INFO">${output} = 
An error occurred (500) when calling the CreateBucket operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:43:58.576" starttime="20191025 23:43:53.494"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:43:58.578" level="INFO">
An error occurred (500) when calling the CreateBucket operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:43:58.578" starttime="20191025 23:43:58.577"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:43:58.579" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191025 23:43:58.580" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191025 23:43:58.580" starttime="20191025 23:43:58.578"></status>
</kw>
<status status="FAIL" endtime="20191025 23:43:58.580" starttime="20191025 23:43:53.493"></status>
</kw>
<status status="FAIL" endtime="20191025 23:43:58.581" starttime="20191025 23:43:53.493"></status>
</kw>
<status status="FAIL" endtime="20191025 23:43:58.581" starttime="20191025 23:43:53.491"></status>
</kw>
<status status="FAIL" endtime="20191025 23:43:58.581" starttime="20191025 23:43:53.490"></status>
</kw>
<status status="FAIL" endtime="20191025 23:43:58.581" starttime="20191025 23:43:19.400"></status>
</kw>
<test id="s1-s1-t1" name="File upload and directory list">
<status status="FAIL" endtime="20191025 23:43:58.583" critical="yes" starttime="20191025 23:43:58.582">Parent suite setup failed:
255 != 0</status>
</test>
<doc>S3 gateway test with aws cli</doc>
<status status="FAIL" endtime="20191025 23:43:58.584" starttime="20191025 23:43:19.393">Suite setup failed:
255 != 0</status>
</suite>
<suite source="/opt/hadoop/smoketest/s3/bucketcreate.robot" id="s1-s2" name="Bucketcreate">
<test id="s1-s2-t1" name="Create bucket which already exists">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:43:58.601" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:43:58.607" level="INFO">${rc} = 1</msg>
<msg timestamp="20191025 23:43:58.607" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191025 23:43:58.607" starttime="20191025 23:43:58.599"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191025 23:43:58.609" starttime="20191025 23:43:58.608"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:43:58.611" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:43:58.783" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:43:58.783" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191025 23:43:58.783" starttime="20191025 23:43:58.609"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:43:58.790" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:43:59.250" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:43:59.250" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: mirror.sfo12.us.leaseweb.net
 * upd...</msg>
<status status="PASS" endtime="20191025 23:43:59.251" starttime="20191025 23:43:58.787"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:43:59.252" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: mirror.sfo12.us.leaseweb.net
 * updates: mirror.sfo12.us.leaseweb.net
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191025 23:43:59.253" starttime="20191025 23:43:59.251"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:43:59.254" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:43:59.254" starttime="20191025 23:43:59.253"></status>
</kw>
<status status="PASS" endtime="20191025 23:43:59.254" starttime="20191025 23:43:58.786"></status>
</kw>
<status status="PASS" endtime="20191025 23:43:59.255" starttime="20191025 23:43:58.786"></status>
</kw>
<status status="PASS" endtime="20191025 23:43:59.255" starttime="20191025 23:43:58.784"></status>
</kw>
<status status="PASS" endtime="20191025 23:43:59.255" starttime="20191025 23:43:58.599"></status>
</kw>
<status status="PASS" endtime="20191025 23:43:59.255" starttime="20191025 23:43:58.598"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:43:59.263" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:43:59.269" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:43:59.269" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191025 23:43:59.269" starttime="20191025 23:43:59.260"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:43:59.271" level="INFO">s3g</msg>
<status status="PASS" endtime="20191025 23:43:59.271" starttime="20191025 23:43:59.270"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:43:59.271" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:43:59.271" starttime="20191025 23:43:59.271"></status>
</kw>
<msg timestamp="20191025 23:43:59.272" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191025 23:43:59.272" starttime="20191025 23:43:59.260"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191025 23:43:59.274" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:43:59.274" starttime="20191025 23:43:59.272"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:43:59.278" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:43:59.419" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:43:59.419" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:43:59.419" starttime="20191025 23:43:59.276"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:43:59.422" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:43:59.422" starttime="20191025 23:43:59.420"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:43:59.423" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:43:59.423" starttime="20191025 23:43:59.422"></status>
</kw>
<status status="PASS" endtime="20191025 23:43:59.424" starttime="20191025 23:43:59.275"></status>
</kw>
<status status="PASS" endtime="20191025 23:43:59.424" starttime="20191025 23:43:59.274"></status>
</kw>
<status status="PASS" endtime="20191025 23:43:59.424" starttime="20191025 23:43:59.259"></status>
</kw>
<status status="PASS" endtime="20191025 23:43:59.424" starttime="20191025 23:43:59.258"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:43:59.430" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:44:02.211" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:44:02.211" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:44:02.211" starttime="20191025 23:43:59.427"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:44:02.212" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
awsAccessKey=testuser/s3g@EXAMPLE.COM
awsSecret=bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676</msg>
<status status="PASS" endtime="20191025 23:44:02.213" starttime="20191025 23:44:02.212"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:44:02.213" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:44:02.214" starttime="20191025 23:44:02.213"></status>
</kw>
<msg timestamp="20191025 23:44:02.214" level="INFO">${result} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:44:02.214" starttime="20191025 23:43:59.426"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsAccessKey=).*</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:44:02.215" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:44:02.215" starttime="20191025 23:44:02.214"></status>
</kw>
<kw name="Get Variable Value" library="BuiltIn">
<doc>Returns variable value or ``default`` if the variable does not exist.</doc>
<arguments>
<arg>${accessKey}</arg>
<arg>sdsdasaasdasd</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:44:02.216" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:44:02.216" starttime="20191025 23:44:02.216"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsSecret=).*</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:44:02.217" level="INFO">${secret} = [u'bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676']</msg>
<status status="PASS" endtime="20191025 23:44:02.217" starttime="20191025 23:44:02.217"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${accessKey[0]}</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:44:02.218" level="INFO">${accessKey} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:44:02.218" starttime="20191025 23:44:02.218"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${secret[0]}</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:44:02.219" level="INFO">${secret} = bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676</msg>
<status status="PASS" endtime="20191025 23:44:02.219" starttime="20191025 23:44:02.219"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set default.s3.signature_version s3v4</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:44:02.222" level="INFO">Running command 'aws configure set default.s3.signature_version s3v4 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:44:02.642" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:44:02.642" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:44:02.642" starttime="20191025 23:44:02.220"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:44:02.644" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:44:02.644" starttime="20191025 23:44:02.643"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:44:02.646" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:44:02.646" starttime="20191025 23:44:02.645"></status>
</kw>
<status status="PASS" endtime="20191025 23:44:02.646" starttime="20191025 23:44:02.220"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_access_key_id ${accessKey}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:44:02.651" level="INFO">Running command 'aws configure set aws_access_key_id testuser/s3g@EXAMPLE.COM 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:44:03.017" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:44:03.017" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:44:03.017" starttime="20191025 23:44:02.648"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:44:03.019" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:44:03.019" starttime="20191025 23:44:03.018"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:44:03.020" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:44:03.020" starttime="20191025 23:44:03.019"></status>
</kw>
<status status="PASS" endtime="20191025 23:44:03.020" starttime="20191025 23:44:02.647"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_secret_access_key ${secret}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:44:03.024" level="INFO">Running command 'aws configure set aws_secret_access_key bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:44:03.488" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:44:03.488" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:44:03.488" starttime="20191025 23:44:03.022"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:44:03.490" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:44:03.490" starttime="20191025 23:44:03.489"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:44:03.490" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:44:03.490" starttime="20191025 23:44:03.490"></status>
</kw>
<status status="PASS" endtime="20191025 23:44:03.491" starttime="20191025 23:44:03.021"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set region us-west-1</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:44:03.493" level="INFO">Running command 'aws configure set region us-west-1 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:44:03.941" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:44:03.941" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:44:03.941" starttime="20191025 23:44:03.491"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:44:03.942" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:44:03.942" starttime="20191025 23:44:03.942"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:44:03.944" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:44:03.944" starttime="20191025 23:44:03.943"></status>
</kw>
<status status="PASS" endtime="20191025 23:44:03.944" starttime="20191025 23:44:03.491"></status>
</kw>
<status status="PASS" endtime="20191025 23:44:03.945" starttime="20191025 23:43:59.426"></status>
</kw>
<status status="PASS" endtime="20191025 23:44:03.945" starttime="20191025 23:43:59.425"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'false'</arg>
<arg>Setup dummy credentials for S3</arg>
</arguments>
<status status="PASS" endtime="20191025 23:44:03.946" starttime="20191025 23:44:03.945"></status>
</kw>
<status status="PASS" endtime="20191025 23:44:03.946" starttime="20191025 23:43:59.257"></status>
</kw>
<status status="PASS" endtime="20191025 23:44:03.946" starttime="20191025 23:43:59.256"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${BUCKET}' == 'generated'</arg>
<arg>Create bucket</arg>
</arguments>
<kw name="Create bucket" library="commonawslib">
<kw name="Generate Random String" library="String">
<doc>Generates a string with a desired ``length`` from the given ``chars``.</doc>
<arguments>
<arg>5</arg>
<arg>[NUMBERS]</arg>
</arguments>
<assign>
<var>${postfix}</var>
</assign>
<msg timestamp="20191025 23:44:03.948" level="INFO">${postfix} = 46293</msg>
<status status="PASS" endtime="20191025 23:44:03.948" starttime="20191025 23:44:03.948"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${BUCKET}</arg>
<arg>bucket-${postfix}</arg>
</arguments>
<msg timestamp="20191025 23:44:03.949" level="INFO">${BUCKET} = bucket-46293</msg>
<status status="PASS" endtime="20191025 23:44:03.949" starttime="20191025 23:44:03.949"></status>
</kw>
<kw name="Execute AWSS3APICli" library="commonawslib">
<arguments>
<arg>create-bucket --bucket ${BUCKET}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws s3api --endpoint-url ${ENDPOINT_URL} ${command}</arg>
</arguments>
<assign>
<var>${output}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:44:03.953" level="INFO">Running command 'aws s3api --endpoint-url http://s3g:9878 create-bucket --bucket bucket-46293 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:44:16.970" level="INFO">${rc} = 255</msg>
<msg timestamp="20191025 23:44:16.970" level="INFO">${output} = 
An error occurred (500) when calling the CreateBucket operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:44:16.970" starttime="20191025 23:44:03.951"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:44:16.972" level="INFO">
An error occurred (500) when calling the CreateBucket operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:44:16.972" starttime="20191025 23:44:16.971"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:44:16.972" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191025 23:44:16.973" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191025 23:44:16.973" starttime="20191025 23:44:16.972"></status>
</kw>
<status status="FAIL" endtime="20191025 23:44:16.973" starttime="20191025 23:44:03.950"></status>
</kw>
<status status="FAIL" endtime="20191025 23:44:16.973" starttime="20191025 23:44:03.950"></status>
</kw>
<status status="FAIL" endtime="20191025 23:44:16.974" starttime="20191025 23:44:03.947"></status>
</kw>
<status status="FAIL" endtime="20191025 23:44:16.974" starttime="20191025 23:44:03.946"></status>
</kw>
<status status="FAIL" endtime="20191025 23:44:16.974" starttime="20191025 23:43:58.597"></status>
</kw>
<status status="FAIL" endtime="20191025 23:44:16.974" critical="yes" starttime="20191025 23:43:58.596">Setup failed:
255 != 0</status>
</test>
<doc>S3 gateway test with aws cli</doc>
<status status="FAIL" endtime="20191025 23:44:16.975" starttime="20191025 23:43:58.585"></status>
</suite>
<suite source="/opt/hadoop/smoketest/s3/buckethead.robot" id="s1-s3" name="Buckethead">
<test id="s1-s3-t1" name="Head Bucket not existent">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:44:16.989" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:44:16.997" level="INFO">${rc} = 1</msg>
<msg timestamp="20191025 23:44:16.997" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191025 23:44:16.997" starttime="20191025 23:44:16.987"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191025 23:44:16.999" starttime="20191025 23:44:16.998"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:44:17.002" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:44:17.215" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:44:17.215" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191025 23:44:17.215" starttime="20191025 23:44:17.000"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:44:17.221" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:44:17.740" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:44:17.740" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: mirror.sfo12.us.leaseweb.net
 * upd...</msg>
<status status="PASS" endtime="20191025 23:44:17.740" starttime="20191025 23:44:17.219"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:44:17.742" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: mirror.sfo12.us.leaseweb.net
 * updates: mirror.sfo12.us.leaseweb.net
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191025 23:44:17.742" starttime="20191025 23:44:17.741"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:44:17.743" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:44:17.743" starttime="20191025 23:44:17.743"></status>
</kw>
<status status="PASS" endtime="20191025 23:44:17.744" starttime="20191025 23:44:17.218"></status>
</kw>
<status status="PASS" endtime="20191025 23:44:17.744" starttime="20191025 23:44:17.218"></status>
</kw>
<status status="PASS" endtime="20191025 23:44:17.744" starttime="20191025 23:44:17.216"></status>
</kw>
<status status="PASS" endtime="20191025 23:44:17.745" starttime="20191025 23:44:16.986"></status>
</kw>
<status status="PASS" endtime="20191025 23:44:17.745" starttime="20191025 23:44:16.986"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:44:17.752" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:44:17.759" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:44:17.759" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191025 23:44:17.760" starttime="20191025 23:44:17.750"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:44:17.761" level="INFO">s3g</msg>
<status status="PASS" endtime="20191025 23:44:17.761" starttime="20191025 23:44:17.760"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:44:17.762" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:44:17.762" starttime="20191025 23:44:17.762"></status>
</kw>
<msg timestamp="20191025 23:44:17.763" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191025 23:44:17.763" starttime="20191025 23:44:17.749"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191025 23:44:17.766" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:44:17.766" starttime="20191025 23:44:17.763"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:44:17.770" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:44:17.798" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:44:17.798" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:44:17.798" starttime="20191025 23:44:17.768"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:44:17.800" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:44:17.800" starttime="20191025 23:44:17.799"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:44:17.801" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:44:17.801" starttime="20191025 23:44:17.800"></status>
</kw>
<status status="PASS" endtime="20191025 23:44:17.802" starttime="20191025 23:44:17.767"></status>
</kw>
<status status="PASS" endtime="20191025 23:44:17.802" starttime="20191025 23:44:17.766"></status>
</kw>
<status status="PASS" endtime="20191025 23:44:17.802" starttime="20191025 23:44:17.749"></status>
</kw>
<status status="PASS" endtime="20191025 23:44:17.802" starttime="20191025 23:44:17.748"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:44:17.807" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:44:20.340" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:44:20.340" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:44:20.341" starttime="20191025 23:44:17.805"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:44:20.342" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
awsAccessKey=testuser/s3g@EXAMPLE.COM
awsSecret=bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676</msg>
<status status="PASS" endtime="20191025 23:44:20.343" starttime="20191025 23:44:20.341"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:44:20.345" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:44:20.345" starttime="20191025 23:44:20.343"></status>
</kw>
<msg timestamp="20191025 23:44:20.346" level="INFO">${result} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:44:20.346" starttime="20191025 23:44:17.804"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsAccessKey=).*</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:44:20.347" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:44:20.347" starttime="20191025 23:44:20.346"></status>
</kw>
<kw name="Get Variable Value" library="BuiltIn">
<doc>Returns variable value or ``default`` if the variable does not exist.</doc>
<arguments>
<arg>${accessKey}</arg>
<arg>sdsdasaasdasd</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:44:20.348" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:44:20.349" starttime="20191025 23:44:20.348"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsSecret=).*</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:44:20.350" level="INFO">${secret} = [u'bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676']</msg>
<status status="PASS" endtime="20191025 23:44:20.350" starttime="20191025 23:44:20.349"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${accessKey[0]}</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:44:20.351" level="INFO">${accessKey} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:44:20.351" starttime="20191025 23:44:20.350"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${secret[0]}</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:44:20.352" level="INFO">${secret} = bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676</msg>
<status status="PASS" endtime="20191025 23:44:20.352" starttime="20191025 23:44:20.351"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set default.s3.signature_version s3v4</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:44:20.356" level="INFO">Running command 'aws configure set default.s3.signature_version s3v4 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:44:20.865" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:44:20.866" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:44:20.866" starttime="20191025 23:44:20.354"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:44:20.868" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:44:20.868" starttime="20191025 23:44:20.867"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:44:20.869" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:44:20.869" starttime="20191025 23:44:20.868"></status>
</kw>
<status status="PASS" endtime="20191025 23:44:20.870" starttime="20191025 23:44:20.353"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_access_key_id ${accessKey}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:44:20.874" level="INFO">Running command 'aws configure set aws_access_key_id testuser/s3g@EXAMPLE.COM 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:44:21.349" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:44:21.349" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:44:21.349" starttime="20191025 23:44:20.871"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:44:21.350" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:44:21.350" starttime="20191025 23:44:21.349"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:44:21.351" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:44:21.351" starttime="20191025 23:44:21.350"></status>
</kw>
<status status="PASS" endtime="20191025 23:44:21.351" starttime="20191025 23:44:20.870"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_secret_access_key ${secret}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:44:21.354" level="INFO">Running command 'aws configure set aws_secret_access_key bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:44:21.816" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:44:21.816" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:44:21.817" starttime="20191025 23:44:21.352"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:44:21.818" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:44:21.818" starttime="20191025 23:44:21.817"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:44:21.819" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:44:21.820" starttime="20191025 23:44:21.819"></status>
</kw>
<status status="PASS" endtime="20191025 23:44:21.820" starttime="20191025 23:44:21.352"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set region us-west-1</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:44:21.823" level="INFO">Running command 'aws configure set region us-west-1 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:44:22.279" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:44:22.279" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:44:22.279" starttime="20191025 23:44:21.821"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:44:22.281" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:44:22.281" starttime="20191025 23:44:22.280"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:44:22.282" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:44:22.282" starttime="20191025 23:44:22.281"></status>
</kw>
<status status="PASS" endtime="20191025 23:44:22.283" starttime="20191025 23:44:21.820"></status>
</kw>
<status status="PASS" endtime="20191025 23:44:22.283" starttime="20191025 23:44:17.803"></status>
</kw>
<status status="PASS" endtime="20191025 23:44:22.283" starttime="20191025 23:44:17.803"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'false'</arg>
<arg>Setup dummy credentials for S3</arg>
</arguments>
<status status="PASS" endtime="20191025 23:44:22.284" starttime="20191025 23:44:22.283"></status>
</kw>
<status status="PASS" endtime="20191025 23:44:22.284" starttime="20191025 23:44:17.747"></status>
</kw>
<status status="PASS" endtime="20191025 23:44:22.284" starttime="20191025 23:44:17.745"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${BUCKET}' == 'generated'</arg>
<arg>Create bucket</arg>
</arguments>
<kw name="Create bucket" library="commonawslib">
<kw name="Generate Random String" library="String">
<doc>Generates a string with a desired ``length`` from the given ``chars``.</doc>
<arguments>
<arg>5</arg>
<arg>[NUMBERS]</arg>
</arguments>
<assign>
<var>${postfix}</var>
</assign>
<msg timestamp="20191025 23:44:22.287" level="INFO">${postfix} = 86523</msg>
<status status="PASS" endtime="20191025 23:44:22.287" starttime="20191025 23:44:22.286"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${BUCKET}</arg>
<arg>bucket-${postfix}</arg>
</arguments>
<msg timestamp="20191025 23:44:22.288" level="INFO">${BUCKET} = bucket-86523</msg>
<status status="PASS" endtime="20191025 23:44:22.288" starttime="20191025 23:44:22.287"></status>
</kw>
<kw name="Execute AWSS3APICli" library="commonawslib">
<arguments>
<arg>create-bucket --bucket ${BUCKET}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws s3api --endpoint-url ${ENDPOINT_URL} ${command}</arg>
</arguments>
<assign>
<var>${output}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:44:22.291" level="INFO">Running command 'aws s3api --endpoint-url http://s3g:9878 create-bucket --bucket bucket-86523 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:44:35.397" level="INFO">${rc} = 255</msg>
<msg timestamp="20191025 23:44:35.397" level="INFO">${output} = 
An error occurred (500) when calling the CreateBucket operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:44:35.397" starttime="20191025 23:44:22.289"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:44:35.400" level="INFO">
An error occurred (500) when calling the CreateBucket operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:44:35.400" starttime="20191025 23:44:35.398"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:44:35.401" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191025 23:44:35.402" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191025 23:44:35.402" starttime="20191025 23:44:35.401"></status>
</kw>
<status status="FAIL" endtime="20191025 23:44:35.402" starttime="20191025 23:44:22.289"></status>
</kw>
<status status="FAIL" endtime="20191025 23:44:35.403" starttime="20191025 23:44:22.288"></status>
</kw>
<status status="FAIL" endtime="20191025 23:44:35.403" starttime="20191025 23:44:22.285"></status>
</kw>
<status status="FAIL" endtime="20191025 23:44:35.403" starttime="20191025 23:44:22.285"></status>
</kw>
<status status="FAIL" endtime="20191025 23:44:35.404" starttime="20191025 23:44:16.986"></status>
</kw>
<status status="FAIL" endtime="20191025 23:44:35.404" critical="yes" starttime="20191025 23:44:16.985">Setup failed:
255 != 0</status>
</test>
<doc>S3 gateway test with aws cli</doc>
<status status="FAIL" endtime="20191025 23:44:35.405" starttime="20191025 23:44:16.977"></status>
</suite>
<suite source="/opt/hadoop/smoketest/s3/bucketlist.robot" id="s1-s4" name="Bucketlist">
<test id="s1-s4-t1" name="List buckets">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:44:35.428" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:44:35.435" level="INFO">${rc} = 1</msg>
<msg timestamp="20191025 23:44:35.435" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191025 23:44:35.435" starttime="20191025 23:44:35.426"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191025 23:44:35.437" starttime="20191025 23:44:35.436"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:44:35.439" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:44:35.644" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:44:35.645" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191025 23:44:35.645" starttime="20191025 23:44:35.437"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:44:35.649" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:44:36.142" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:44:36.142" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: mirror.sfo12.us.leaseweb.net
 * upd...</msg>
<status status="PASS" endtime="20191025 23:44:36.143" starttime="20191025 23:44:35.647"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:44:36.144" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: mirror.sfo12.us.leaseweb.net
 * updates: mirror.sfo12.us.leaseweb.net
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191025 23:44:36.145" starttime="20191025 23:44:36.143"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:44:36.146" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:44:36.146" starttime="20191025 23:44:36.145"></status>
</kw>
<status status="PASS" endtime="20191025 23:44:36.146" starttime="20191025 23:44:35.647"></status>
</kw>
<status status="PASS" endtime="20191025 23:44:36.147" starttime="20191025 23:44:35.646"></status>
</kw>
<status status="PASS" endtime="20191025 23:44:36.147" starttime="20191025 23:44:35.645"></status>
</kw>
<status status="PASS" endtime="20191025 23:44:36.147" starttime="20191025 23:44:35.423"></status>
</kw>
<status status="PASS" endtime="20191025 23:44:36.147" starttime="20191025 23:44:35.423"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:44:36.154" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:44:36.162" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:44:36.162" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191025 23:44:36.162" starttime="20191025 23:44:36.152"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:44:36.164" level="INFO">s3g</msg>
<status status="PASS" endtime="20191025 23:44:36.164" starttime="20191025 23:44:36.163"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:44:36.165" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:44:36.166" starttime="20191025 23:44:36.165"></status>
</kw>
<msg timestamp="20191025 23:44:36.166" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191025 23:44:36.166" starttime="20191025 23:44:36.151"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191025 23:44:36.170" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:44:36.170" starttime="20191025 23:44:36.167"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:44:36.175" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:44:36.192" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:44:36.192" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:44:36.192" starttime="20191025 23:44:36.173"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:44:36.193" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:44:36.194" starttime="20191025 23:44:36.193"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:44:36.195" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:44:36.195" starttime="20191025 23:44:36.194"></status>
</kw>
<status status="PASS" endtime="20191025 23:44:36.195" starttime="20191025 23:44:36.172"></status>
</kw>
<status status="PASS" endtime="20191025 23:44:36.195" starttime="20191025 23:44:36.171"></status>
</kw>
<status status="PASS" endtime="20191025 23:44:36.196" starttime="20191025 23:44:36.150"></status>
</kw>
<status status="PASS" endtime="20191025 23:44:36.196" starttime="20191025 23:44:36.150"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:44:36.201" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:44:38.842" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:44:38.842" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:44:38.843" starttime="20191025 23:44:36.199"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:44:38.844" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
awsAccessKey=testuser/s3g@EXAMPLE.COM
awsSecret=bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676</msg>
<status status="PASS" endtime="20191025 23:44:38.844" starttime="20191025 23:44:38.843"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:44:38.845" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:44:38.845" starttime="20191025 23:44:38.844"></status>
</kw>
<msg timestamp="20191025 23:44:38.846" level="INFO">${result} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:44:38.846" starttime="20191025 23:44:36.198"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsAccessKey=).*</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:44:38.847" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:44:38.847" starttime="20191025 23:44:38.846"></status>
</kw>
<kw name="Get Variable Value" library="BuiltIn">
<doc>Returns variable value or ``default`` if the variable does not exist.</doc>
<arguments>
<arg>${accessKey}</arg>
<arg>sdsdasaasdasd</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:44:38.848" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:44:38.848" starttime="20191025 23:44:38.847"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsSecret=).*</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:44:38.848" level="INFO">${secret} = [u'bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676']</msg>
<status status="PASS" endtime="20191025 23:44:38.848" starttime="20191025 23:44:38.848"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${accessKey[0]}</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:44:38.849" level="INFO">${accessKey} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:44:38.849" starttime="20191025 23:44:38.849"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${secret[0]}</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:44:38.850" level="INFO">${secret} = bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676</msg>
<status status="PASS" endtime="20191025 23:44:38.850" starttime="20191025 23:44:38.849"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set default.s3.signature_version s3v4</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:44:38.853" level="INFO">Running command 'aws configure set default.s3.signature_version s3v4 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:44:39.402" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:44:39.403" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:44:39.403" starttime="20191025 23:44:38.851"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:44:39.405" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:44:39.405" starttime="20191025 23:44:39.404"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:44:39.406" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:44:39.406" starttime="20191025 23:44:39.405"></status>
</kw>
<status status="PASS" endtime="20191025 23:44:39.407" starttime="20191025 23:44:38.850"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_access_key_id ${accessKey}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:44:39.410" level="INFO">Running command 'aws configure set aws_access_key_id testuser/s3g@EXAMPLE.COM 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:44:39.876" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:44:39.876" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:44:39.876" starttime="20191025 23:44:39.408"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:44:39.878" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:44:39.878" starttime="20191025 23:44:39.877"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:44:39.879" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:44:39.879" starttime="20191025 23:44:39.878"></status>
</kw>
<status status="PASS" endtime="20191025 23:44:39.880" starttime="20191025 23:44:39.407"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_secret_access_key ${secret}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:44:39.883" level="INFO">Running command 'aws configure set aws_secret_access_key bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:44:40.342" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:44:40.342" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:44:40.342" starttime="20191025 23:44:39.881"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:44:40.344" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:44:40.344" starttime="20191025 23:44:40.343"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:44:40.345" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:44:40.346" starttime="20191025 23:44:40.345"></status>
</kw>
<status status="PASS" endtime="20191025 23:44:40.346" starttime="20191025 23:44:39.880"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set region us-west-1</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:44:40.350" level="INFO">Running command 'aws configure set region us-west-1 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:44:40.807" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:44:40.807" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:44:40.808" starttime="20191025 23:44:40.347"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:44:40.809" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:44:40.810" starttime="20191025 23:44:40.808"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:44:40.811" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:44:40.811" starttime="20191025 23:44:40.810"></status>
</kw>
<status status="PASS" endtime="20191025 23:44:40.811" starttime="20191025 23:44:40.346"></status>
</kw>
<status status="PASS" endtime="20191025 23:44:40.812" starttime="20191025 23:44:36.197"></status>
</kw>
<status status="PASS" endtime="20191025 23:44:40.812" starttime="20191025 23:44:36.196"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'false'</arg>
<arg>Setup dummy credentials for S3</arg>
</arguments>
<status status="PASS" endtime="20191025 23:44:40.813" starttime="20191025 23:44:40.812"></status>
</kw>
<status status="PASS" endtime="20191025 23:44:40.814" starttime="20191025 23:44:36.149"></status>
</kw>
<status status="PASS" endtime="20191025 23:44:40.814" starttime="20191025 23:44:36.148"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${BUCKET}' == 'generated'</arg>
<arg>Create bucket</arg>
</arguments>
<kw name="Create bucket" library="commonawslib">
<kw name="Generate Random String" library="String">
<doc>Generates a string with a desired ``length`` from the given ``chars``.</doc>
<arguments>
<arg>5</arg>
<arg>[NUMBERS]</arg>
</arguments>
<assign>
<var>${postfix}</var>
</assign>
<msg timestamp="20191025 23:44:40.817" level="INFO">${postfix} = 09193</msg>
<status status="PASS" endtime="20191025 23:44:40.817" starttime="20191025 23:44:40.816"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${BUCKET}</arg>
<arg>bucket-${postfix}</arg>
</arguments>
<msg timestamp="20191025 23:44:40.818" level="INFO">${BUCKET} = bucket-09193</msg>
<status status="PASS" endtime="20191025 23:44:40.818" starttime="20191025 23:44:40.817"></status>
</kw>
<kw name="Execute AWSS3APICli" library="commonawslib">
<arguments>
<arg>create-bucket --bucket ${BUCKET}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws s3api --endpoint-url ${ENDPOINT_URL} ${command}</arg>
</arguments>
<assign>
<var>${output}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:44:40.823" level="INFO">Running command 'aws s3api --endpoint-url http://s3g:9878 create-bucket --bucket bucket-09193 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:44:43.522" level="INFO">${rc} = 255</msg>
<msg timestamp="20191025 23:44:43.522" level="INFO">${output} = 
An error occurred (500) when calling the CreateBucket operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:44:43.522" starttime="20191025 23:44:40.820"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:44:43.524" level="INFO">
An error occurred (500) when calling the CreateBucket operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:44:43.524" starttime="20191025 23:44:43.523"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:44:43.525" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191025 23:44:43.525" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191025 23:44:43.525" starttime="20191025 23:44:43.525"></status>
</kw>
<status status="FAIL" endtime="20191025 23:44:43.526" starttime="20191025 23:44:40.819"></status>
</kw>
<status status="FAIL" endtime="20191025 23:44:43.526" starttime="20191025 23:44:40.818"></status>
</kw>
<status status="FAIL" endtime="20191025 23:44:43.526" starttime="20191025 23:44:40.815"></status>
</kw>
<status status="FAIL" endtime="20191025 23:44:43.526" starttime="20191025 23:44:40.814"></status>
</kw>
<status status="FAIL" endtime="20191025 23:44:43.526" starttime="20191025 23:44:35.422"></status>
</kw>
<status status="FAIL" endtime="20191025 23:44:43.527" critical="yes" starttime="20191025 23:44:35.420">Setup failed:
255 != 0</status>
</test>
<doc>S3 gateway test with aws cli</doc>
<status status="FAIL" endtime="20191025 23:44:43.528" starttime="20191025 23:44:35.408"></status>
</suite>
<suite source="/opt/hadoop/smoketest/s3/MultipartUpload.robot" id="s1-s5" name="MultipartUpload">
<test id="s1-s5-t1" name="Test Multipart Upload">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:44:43.540" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:44:43.546" level="INFO">${rc} = 1</msg>
<msg timestamp="20191025 23:44:43.546" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191025 23:44:43.546" starttime="20191025 23:44:43.539"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191025 23:44:43.547" starttime="20191025 23:44:43.547"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:44:43.549" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:44:43.718" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:44:43.718" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191025 23:44:43.719" starttime="20191025 23:44:43.548"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:44:43.725" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:44:44.214" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:44:44.214" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: mirror.sfo12.us.leaseweb.net
 * upd...</msg>
<status status="PASS" endtime="20191025 23:44:44.214" starttime="20191025 23:44:43.722"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:44:44.215" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: mirror.sfo12.us.leaseweb.net
 * updates: mirror.sfo12.us.leaseweb.net
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191025 23:44:44.215" starttime="20191025 23:44:44.215"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:44:44.216" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:44:44.216" starttime="20191025 23:44:44.215"></status>
</kw>
<status status="PASS" endtime="20191025 23:44:44.216" starttime="20191025 23:44:43.722"></status>
</kw>
<status status="PASS" endtime="20191025 23:44:44.217" starttime="20191025 23:44:43.721"></status>
</kw>
<status status="PASS" endtime="20191025 23:44:44.217" starttime="20191025 23:44:43.719"></status>
</kw>
<status status="PASS" endtime="20191025 23:44:44.217" starttime="20191025 23:44:43.538"></status>
</kw>
<status status="PASS" endtime="20191025 23:44:44.217" starttime="20191025 23:44:43.538"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:44:44.222" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:44:44.228" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:44:44.228" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191025 23:44:44.228" starttime="20191025 23:44:44.220"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:44:44.230" level="INFO">s3g</msg>
<status status="PASS" endtime="20191025 23:44:44.230" starttime="20191025 23:44:44.229"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:44:44.231" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:44:44.231" starttime="20191025 23:44:44.230"></status>
</kw>
<msg timestamp="20191025 23:44:44.232" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191025 23:44:44.232" starttime="20191025 23:44:44.219"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191025 23:44:44.235" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:44:44.235" starttime="20191025 23:44:44.233"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:44:44.240" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:44:44.255" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:44:44.255" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:44:44.255" starttime="20191025 23:44:44.238"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:44:44.256" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:44:44.257" starttime="20191025 23:44:44.256"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:44:44.257" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:44:44.258" starttime="20191025 23:44:44.257"></status>
</kw>
<status status="PASS" endtime="20191025 23:44:44.258" starttime="20191025 23:44:44.237"></status>
</kw>
<status status="PASS" endtime="20191025 23:44:44.258" starttime="20191025 23:44:44.236"></status>
</kw>
<status status="PASS" endtime="20191025 23:44:44.259" starttime="20191025 23:44:44.219"></status>
</kw>
<status status="PASS" endtime="20191025 23:44:44.259" starttime="20191025 23:44:44.218"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:44:44.263" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:44:46.821" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:44:46.821" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:44:46.821" starttime="20191025 23:44:44.261"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:44:46.823" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
awsAccessKey=testuser/s3g@EXAMPLE.COM
awsSecret=bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676</msg>
<status status="PASS" endtime="20191025 23:44:46.823" starttime="20191025 23:44:46.821"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:44:46.823" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:44:46.823" starttime="20191025 23:44:46.823"></status>
</kw>
<msg timestamp="20191025 23:44:46.824" level="INFO">${result} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:44:46.824" starttime="20191025 23:44:44.261"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsAccessKey=).*</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:44:46.825" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:44:46.825" starttime="20191025 23:44:46.824"></status>
</kw>
<kw name="Get Variable Value" library="BuiltIn">
<doc>Returns variable value or ``default`` if the variable does not exist.</doc>
<arguments>
<arg>${accessKey}</arg>
<arg>sdsdasaasdasd</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:44:46.825" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:44:46.825" starttime="20191025 23:44:46.825"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsSecret=).*</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:44:46.826" level="INFO">${secret} = [u'bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676']</msg>
<status status="PASS" endtime="20191025 23:44:46.826" starttime="20191025 23:44:46.826"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${accessKey[0]}</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:44:46.827" level="INFO">${accessKey} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:44:46.827" starttime="20191025 23:44:46.826"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${secret[0]}</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:44:46.828" level="INFO">${secret} = bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676</msg>
<status status="PASS" endtime="20191025 23:44:46.828" starttime="20191025 23:44:46.827"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set default.s3.signature_version s3v4</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:44:46.830" level="INFO">Running command 'aws configure set default.s3.signature_version s3v4 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:44:47.264" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:44:47.265" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:44:47.265" starttime="20191025 23:44:46.828"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:44:47.266" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:44:47.266" starttime="20191025 23:44:47.265"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:44:47.267" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:44:47.267" starttime="20191025 23:44:47.266"></status>
</kw>
<status status="PASS" endtime="20191025 23:44:47.267" starttime="20191025 23:44:46.828"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_access_key_id ${accessKey}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:44:47.270" level="INFO">Running command 'aws configure set aws_access_key_id testuser/s3g@EXAMPLE.COM 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:44:47.743" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:44:47.743" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:44:47.744" starttime="20191025 23:44:47.268"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:44:47.745" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:44:47.746" starttime="20191025 23:44:47.744"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:44:47.747" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:44:47.747" starttime="20191025 23:44:47.746"></status>
</kw>
<status status="PASS" endtime="20191025 23:44:47.747" starttime="20191025 23:44:47.268"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_secret_access_key ${secret}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:44:47.751" level="INFO">Running command 'aws configure set aws_secret_access_key bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:44:48.233" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:44:48.233" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:44:48.234" starttime="20191025 23:44:47.749"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:44:48.235" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:44:48.236" starttime="20191025 23:44:48.235"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:44:48.237" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:44:48.237" starttime="20191025 23:44:48.236"></status>
</kw>
<status status="PASS" endtime="20191025 23:44:48.237" starttime="20191025 23:44:47.748"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set region us-west-1</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:44:48.241" level="INFO">Running command 'aws configure set region us-west-1 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:44:48.718" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:44:48.718" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:44:48.719" starttime="20191025 23:44:48.239"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:44:48.720" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:44:48.721" starttime="20191025 23:44:48.719"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:44:48.722" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:44:48.722" starttime="20191025 23:44:48.721"></status>
</kw>
<status status="PASS" endtime="20191025 23:44:48.722" starttime="20191025 23:44:48.238"></status>
</kw>
<status status="PASS" endtime="20191025 23:44:48.723" starttime="20191025 23:44:44.260"></status>
</kw>
<status status="PASS" endtime="20191025 23:44:48.723" starttime="20191025 23:44:44.259"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'false'</arg>
<arg>Setup dummy credentials for S3</arg>
</arguments>
<status status="PASS" endtime="20191025 23:44:48.724" starttime="20191025 23:44:48.723"></status>
</kw>
<status status="PASS" endtime="20191025 23:44:48.724" starttime="20191025 23:44:44.218"></status>
</kw>
<status status="PASS" endtime="20191025 23:44:48.725" starttime="20191025 23:44:44.217"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${BUCKET}' == 'generated'</arg>
<arg>Create bucket</arg>
</arguments>
<kw name="Create bucket" library="commonawslib">
<kw name="Generate Random String" library="String">
<doc>Generates a string with a desired ``length`` from the given ``chars``.</doc>
<arguments>
<arg>5</arg>
<arg>[NUMBERS]</arg>
</arguments>
<assign>
<var>${postfix}</var>
</assign>
<msg timestamp="20191025 23:44:48.728" level="INFO">${postfix} = 16217</msg>
<status status="PASS" endtime="20191025 23:44:48.728" starttime="20191025 23:44:48.727"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${BUCKET}</arg>
<arg>bucket-${postfix}</arg>
</arguments>
<msg timestamp="20191025 23:44:48.729" level="INFO">${BUCKET} = bucket-16217</msg>
<status status="PASS" endtime="20191025 23:44:48.729" starttime="20191025 23:44:48.728"></status>
</kw>
<kw name="Execute AWSS3APICli" library="commonawslib">
<arguments>
<arg>create-bucket --bucket ${BUCKET}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws s3api --endpoint-url ${ENDPOINT_URL} ${command}</arg>
</arguments>
<assign>
<var>${output}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:44:48.734" level="INFO">Running command 'aws s3api --endpoint-url http://s3g:9878 create-bucket --bucket bucket-16217 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:44:56.505" level="INFO">${rc} = 255</msg>
<msg timestamp="20191025 23:44:56.505" level="INFO">${output} = 
An error occurred (500) when calling the CreateBucket operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:44:56.506" starttime="20191025 23:44:48.731"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:44:56.508" level="INFO">
An error occurred (500) when calling the CreateBucket operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:44:56.509" starttime="20191025 23:44:56.506"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:44:56.510" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191025 23:44:56.510" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191025 23:44:56.510" starttime="20191025 23:44:56.509"></status>
</kw>
<status status="FAIL" endtime="20191025 23:44:56.511" starttime="20191025 23:44:48.730"></status>
</kw>
<status status="FAIL" endtime="20191025 23:44:56.511" starttime="20191025 23:44:48.729"></status>
</kw>
<status status="FAIL" endtime="20191025 23:44:56.512" starttime="20191025 23:44:48.726"></status>
</kw>
<status status="FAIL" endtime="20191025 23:44:56.512" starttime="20191025 23:44:48.725"></status>
</kw>
<status status="FAIL" endtime="20191025 23:44:56.512" starttime="20191025 23:44:43.537"></status>
</kw>
<status status="FAIL" endtime="20191025 23:44:56.513" critical="yes" starttime="20191025 23:44:43.537">Setup failed:
255 != 0</status>
</test>
<test id="s1-s5-t2" name="Test Multipart Upload Complete">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:44:56.519" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:44:56.526" level="INFO">${rc} = 1</msg>
<msg timestamp="20191025 23:44:56.526" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191025 23:44:56.526" starttime="20191025 23:44:56.517"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191025 23:44:56.528" starttime="20191025 23:44:56.527"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:44:56.530" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:44:56.732" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:44:56.733" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191025 23:44:56.733" starttime="20191025 23:44:56.528"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:44:56.738" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:44:57.255" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:44:57.255" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: mirror.sfo12.us.leaseweb.net
 * upd...</msg>
<status status="PASS" endtime="20191025 23:44:57.255" starttime="20191025 23:44:56.736"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:44:57.257" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: mirror.sfo12.us.leaseweb.net
 * updates: mirror.sfo12.us.leaseweb.net
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191025 23:44:57.257" starttime="20191025 23:44:57.256"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:44:57.258" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:44:57.259" starttime="20191025 23:44:57.258"></status>
</kw>
<status status="PASS" endtime="20191025 23:44:57.259" starttime="20191025 23:44:56.735"></status>
</kw>
<status status="PASS" endtime="20191025 23:44:57.259" starttime="20191025 23:44:56.735"></status>
</kw>
<status status="PASS" endtime="20191025 23:44:57.260" starttime="20191025 23:44:56.733"></status>
</kw>
<status status="PASS" endtime="20191025 23:44:57.260" starttime="20191025 23:44:56.516"></status>
</kw>
<status status="PASS" endtime="20191025 23:44:57.260" starttime="20191025 23:44:56.515"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:44:57.267" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:44:57.275" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:44:57.275" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191025 23:44:57.276" starttime="20191025 23:44:57.265"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:44:57.277" level="INFO">s3g</msg>
<status status="PASS" endtime="20191025 23:44:57.278" starttime="20191025 23:44:57.276"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:44:57.279" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:44:57.279" starttime="20191025 23:44:57.278"></status>
</kw>
<msg timestamp="20191025 23:44:57.280" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191025 23:44:57.280" starttime="20191025 23:44:57.264"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191025 23:44:57.281" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:44:57.281" starttime="20191025 23:44:57.280"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:44:57.287" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:44:57.346" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:44:57.347" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:44:57.347" starttime="20191025 23:44:57.284"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:44:57.348" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:44:57.348" starttime="20191025 23:44:57.347"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:44:57.349" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:44:57.350" starttime="20191025 23:44:57.349"></status>
</kw>
<status status="PASS" endtime="20191025 23:44:57.350" starttime="20191025 23:44:57.283"></status>
</kw>
<status status="PASS" endtime="20191025 23:44:57.350" starttime="20191025 23:44:57.282"></status>
</kw>
<status status="PASS" endtime="20191025 23:44:57.350" starttime="20191025 23:44:57.263"></status>
</kw>
<status status="PASS" endtime="20191025 23:44:57.351" starttime="20191025 23:44:57.262"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:44:57.355" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:44:59.727" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:44:59.728" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:44:59.728" starttime="20191025 23:44:57.353"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:44:59.733" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
awsAccessKey=testuser/s3g@EXAMPLE.COM
awsSecret=bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676</msg>
<status status="PASS" endtime="20191025 23:44:59.734" starttime="20191025 23:44:59.728"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:44:59.736" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:44:59.737" starttime="20191025 23:44:59.736"></status>
</kw>
<msg timestamp="20191025 23:44:59.737" level="INFO">${result} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:44:59.737" starttime="20191025 23:44:57.352"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsAccessKey=).*</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:44:59.739" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:44:59.739" starttime="20191025 23:44:59.738"></status>
</kw>
<kw name="Get Variable Value" library="BuiltIn">
<doc>Returns variable value or ``default`` if the variable does not exist.</doc>
<arguments>
<arg>${accessKey}</arg>
<arg>sdsdasaasdasd</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:44:59.740" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:44:59.740" starttime="20191025 23:44:59.739"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsSecret=).*</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:44:59.741" level="INFO">${secret} = [u'bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676']</msg>
<status status="PASS" endtime="20191025 23:44:59.741" starttime="20191025 23:44:59.740"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${accessKey[0]}</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:44:59.742" level="INFO">${accessKey} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:44:59.742" starttime="20191025 23:44:59.741"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${secret[0]}</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:44:59.742" level="INFO">${secret} = bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676</msg>
<status status="PASS" endtime="20191025 23:44:59.742" starttime="20191025 23:44:59.742"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set default.s3.signature_version s3v4</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:44:59.745" level="INFO">Running command 'aws configure set default.s3.signature_version s3v4 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:45:00.207" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:45:00.207" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:45:00.207" starttime="20191025 23:44:59.743"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:45:00.209" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:45:00.209" starttime="20191025 23:45:00.208"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:45:00.210" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:45:00.210" starttime="20191025 23:45:00.209"></status>
</kw>
<status status="PASS" endtime="20191025 23:45:00.210" starttime="20191025 23:44:59.743"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_access_key_id ${accessKey}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:45:00.213" level="INFO">Running command 'aws configure set aws_access_key_id testuser/s3g@EXAMPLE.COM 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:45:00.674" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:45:00.674" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:45:00.674" starttime="20191025 23:45:00.211"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:45:00.675" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:45:00.676" starttime="20191025 23:45:00.675"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:45:00.676" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:45:00.677" starttime="20191025 23:45:00.676"></status>
</kw>
<status status="PASS" endtime="20191025 23:45:00.677" starttime="20191025 23:45:00.210"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_secret_access_key ${secret}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:45:00.680" level="INFO">Running command 'aws configure set aws_secret_access_key bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:45:01.128" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:45:01.128" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:45:01.128" starttime="20191025 23:45:00.678"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:45:01.130" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:45:01.130" starttime="20191025 23:45:01.129"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:45:01.131" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:45:01.131" starttime="20191025 23:45:01.130"></status>
</kw>
<status status="PASS" endtime="20191025 23:45:01.131" starttime="20191025 23:45:00.677"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set region us-west-1</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:45:01.135" level="INFO">Running command 'aws configure set region us-west-1 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:45:01.634" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:45:01.635" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:45:01.635" starttime="20191025 23:45:01.133"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:45:01.636" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:45:01.636" starttime="20191025 23:45:01.635"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:45:01.637" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:45:01.638" starttime="20191025 23:45:01.636"></status>
</kw>
<status status="PASS" endtime="20191025 23:45:01.638" starttime="20191025 23:45:01.132"></status>
</kw>
<status status="PASS" endtime="20191025 23:45:01.638" starttime="20191025 23:44:57.352"></status>
</kw>
<status status="PASS" endtime="20191025 23:45:01.638" starttime="20191025 23:44:57.351"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'false'</arg>
<arg>Setup dummy credentials for S3</arg>
</arguments>
<status status="PASS" endtime="20191025 23:45:01.639" starttime="20191025 23:45:01.638"></status>
</kw>
<status status="PASS" endtime="20191025 23:45:01.639" starttime="20191025 23:44:57.262"></status>
</kw>
<status status="PASS" endtime="20191025 23:45:01.639" starttime="20191025 23:44:57.261"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${BUCKET}' == 'generated'</arg>
<arg>Create bucket</arg>
</arguments>
<status status="PASS" endtime="20191025 23:45:01.640" starttime="20191025 23:45:01.640"></status>
</kw>
<status status="PASS" endtime="20191025 23:45:01.640" starttime="20191025 23:44:56.515"></status>
</kw>
<kw name="Execute AWSS3APICli" library="commonawslib">
<arguments>
<arg>create-multipart-upload --bucket ${BUCKET} --key multipartKey1</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws s3api --endpoint-url ${ENDPOINT_URL} ${command}</arg>
</arguments>
<assign>
<var>${output}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:45:01.644" level="INFO">Running command 'aws s3api --endpoint-url http://s3g:9878 create-multipart-upload --bucket bucket-16217 --key multipartKey1 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:45:15.420" level="INFO">${rc} = 255</msg>
<msg timestamp="20191025 23:45:15.420" level="INFO">${output} = 
An error occurred (500) when calling the CreateMultipartUpload operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:45:15.421" starttime="20191025 23:45:01.642"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:45:15.422" level="INFO">
An error occurred (500) when calling the CreateMultipartUpload operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:45:15.422" starttime="20191025 23:45:15.421"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:45:15.423" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191025 23:45:15.424" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191025 23:45:15.424" starttime="20191025 23:45:15.423"></status>
</kw>
<status status="FAIL" endtime="20191025 23:45:15.425" starttime="20191025 23:45:01.641"></status>
</kw>
<status status="FAIL" endtime="20191025 23:45:15.425" starttime="20191025 23:45:01.641"></status>
</kw>
<status status="FAIL" endtime="20191025 23:45:15.426" critical="yes" starttime="20191025 23:44:56.513">255 != 0</status>
</test>
<test id="s1-s5-t3" name="Test Multipart Upload Complete Entity too small">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:45:15.431" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:45:15.438" level="INFO">${rc} = 1</msg>
<msg timestamp="20191025 23:45:15.439" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191025 23:45:15.439" starttime="20191025 23:45:15.429"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191025 23:45:15.441" starttime="20191025 23:45:15.440"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:45:15.443" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:45:15.620" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:45:15.621" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191025 23:45:15.621" starttime="20191025 23:45:15.441"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:45:15.628" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:45:16.129" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:45:16.130" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: mirror.sfo12.us.leaseweb.net
 * upd...</msg>
<status status="PASS" endtime="20191025 23:45:16.130" starttime="20191025 23:45:15.625"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:45:16.132" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: mirror.sfo12.us.leaseweb.net
 * updates: mirror.sfo12.us.leaseweb.net
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191025 23:45:16.132" starttime="20191025 23:45:16.131"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:45:16.133" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:45:16.133" starttime="20191025 23:45:16.132"></status>
</kw>
<status status="PASS" endtime="20191025 23:45:16.134" starttime="20191025 23:45:15.624"></status>
</kw>
<status status="PASS" endtime="20191025 23:45:16.134" starttime="20191025 23:45:15.623"></status>
</kw>
<status status="PASS" endtime="20191025 23:45:16.135" starttime="20191025 23:45:15.622"></status>
</kw>
<status status="PASS" endtime="20191025 23:45:16.135" starttime="20191025 23:45:15.429"></status>
</kw>
<status status="PASS" endtime="20191025 23:45:16.135" starttime="20191025 23:45:15.428"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:45:16.142" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:45:16.149" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:45:16.149" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191025 23:45:16.149" starttime="20191025 23:45:16.140"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:45:16.151" level="INFO">s3g</msg>
<status status="PASS" endtime="20191025 23:45:16.151" starttime="20191025 23:45:16.150"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:45:16.152" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:45:16.152" starttime="20191025 23:45:16.152"></status>
</kw>
<msg timestamp="20191025 23:45:16.153" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191025 23:45:16.153" starttime="20191025 23:45:16.139"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191025 23:45:16.154" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:45:16.154" starttime="20191025 23:45:16.153"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:45:16.159" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:45:16.173" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:45:16.173" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:45:16.173" starttime="20191025 23:45:16.157"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:45:16.175" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:45:16.175" starttime="20191025 23:45:16.174"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:45:16.176" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:45:16.176" starttime="20191025 23:45:16.175"></status>
</kw>
<status status="PASS" endtime="20191025 23:45:16.176" starttime="20191025 23:45:16.156"></status>
</kw>
<status status="PASS" endtime="20191025 23:45:16.176" starttime="20191025 23:45:16.155"></status>
</kw>
<status status="PASS" endtime="20191025 23:45:16.177" starttime="20191025 23:45:16.138"></status>
</kw>
<status status="PASS" endtime="20191025 23:45:16.177" starttime="20191025 23:45:16.137"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:45:16.181" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:45:18.616" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:45:18.617" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:45:18.617" starttime="20191025 23:45:16.179"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:45:18.619" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
awsAccessKey=testuser/s3g@EXAMPLE.COM
awsSecret=bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676</msg>
<status status="PASS" endtime="20191025 23:45:18.619" starttime="20191025 23:45:18.618"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:45:18.620" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:45:18.620" starttime="20191025 23:45:18.619"></status>
</kw>
<msg timestamp="20191025 23:45:18.621" level="INFO">${result} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:45:18.621" starttime="20191025 23:45:16.179"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsAccessKey=).*</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:45:18.622" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:45:18.622" starttime="20191025 23:45:18.621"></status>
</kw>
<kw name="Get Variable Value" library="BuiltIn">
<doc>Returns variable value or ``default`` if the variable does not exist.</doc>
<arguments>
<arg>${accessKey}</arg>
<arg>sdsdasaasdasd</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:45:18.623" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:45:18.624" starttime="20191025 23:45:18.623"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsSecret=).*</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:45:18.625" level="INFO">${secret} = [u'bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676']</msg>
<status status="PASS" endtime="20191025 23:45:18.625" starttime="20191025 23:45:18.624"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${accessKey[0]}</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:45:18.627" level="INFO">${accessKey} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:45:18.627" starttime="20191025 23:45:18.626"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${secret[0]}</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:45:18.628" level="INFO">${secret} = bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676</msg>
<status status="PASS" endtime="20191025 23:45:18.628" starttime="20191025 23:45:18.627"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set default.s3.signature_version s3v4</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:45:18.632" level="INFO">Running command 'aws configure set default.s3.signature_version s3v4 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:45:19.132" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:45:19.132" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:45:19.132" starttime="20191025 23:45:18.629"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:45:19.134" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:45:19.135" starttime="20191025 23:45:19.133"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:45:19.136" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:45:19.136" starttime="20191025 23:45:19.135"></status>
</kw>
<status status="PASS" endtime="20191025 23:45:19.137" starttime="20191025 23:45:18.628"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_access_key_id ${accessKey}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:45:19.142" level="INFO">Running command 'aws configure set aws_access_key_id testuser/s3g@EXAMPLE.COM 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:45:19.632" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:45:19.632" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:45:19.632" starttime="20191025 23:45:19.139"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:45:19.633" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:45:19.634" starttime="20191025 23:45:19.633"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:45:19.634" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:45:19.634" starttime="20191025 23:45:19.634"></status>
</kw>
<status status="PASS" endtime="20191025 23:45:19.635" starttime="20191025 23:45:19.137"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_secret_access_key ${secret}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:45:19.637" level="INFO">Running command 'aws configure set aws_secret_access_key bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:45:20.090" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:45:20.090" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:45:20.090" starttime="20191025 23:45:19.636"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:45:20.093" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:45:20.093" starttime="20191025 23:45:20.091"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:45:20.094" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:45:20.095" starttime="20191025 23:45:20.094"></status>
</kw>
<status status="PASS" endtime="20191025 23:45:20.095" starttime="20191025 23:45:19.635"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set region us-west-1</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:45:20.099" level="INFO">Running command 'aws configure set region us-west-1 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:45:20.595" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:45:20.595" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:45:20.595" starttime="20191025 23:45:20.097"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:45:20.598" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:45:20.598" starttime="20191025 23:45:20.596"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:45:20.599" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:45:20.599" starttime="20191025 23:45:20.598"></status>
</kw>
<status status="PASS" endtime="20191025 23:45:20.600" starttime="20191025 23:45:20.096"></status>
</kw>
<status status="PASS" endtime="20191025 23:45:20.601" starttime="20191025 23:45:16.178"></status>
</kw>
<status status="PASS" endtime="20191025 23:45:20.601" starttime="20191025 23:45:16.177"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'false'</arg>
<arg>Setup dummy credentials for S3</arg>
</arguments>
<status status="PASS" endtime="20191025 23:45:20.603" starttime="20191025 23:45:20.602"></status>
</kw>
<status status="PASS" endtime="20191025 23:45:20.604" starttime="20191025 23:45:16.137"></status>
</kw>
<status status="PASS" endtime="20191025 23:45:20.604" starttime="20191025 23:45:16.135"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${BUCKET}' == 'generated'</arg>
<arg>Create bucket</arg>
</arguments>
<status status="PASS" endtime="20191025 23:45:20.605" starttime="20191025 23:45:20.604"></status>
</kw>
<status status="PASS" endtime="20191025 23:45:20.606" starttime="20191025 23:45:15.428"></status>
</kw>
<kw name="Execute AWSS3APICli" library="commonawslib">
<arguments>
<arg>create-multipart-upload --bucket ${BUCKET} --key multipartKey2</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws s3api --endpoint-url ${ENDPOINT_URL} ${command}</arg>
</arguments>
<assign>
<var>${output}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:45:20.611" level="INFO">Running command 'aws s3api --endpoint-url http://s3g:9878 create-multipart-upload --bucket bucket-16217 --key multipartKey2 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:45:30.023" level="INFO">${rc} = 255</msg>
<msg timestamp="20191025 23:45:30.023" level="INFO">${output} = 
An error occurred (500) when calling the CreateMultipartUpload operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:45:30.024" starttime="20191025 23:45:20.608"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:45:30.025" level="INFO">
An error occurred (500) when calling the CreateMultipartUpload operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:45:30.026" starttime="20191025 23:45:30.024"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:45:30.026" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191025 23:45:30.027" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191025 23:45:30.027" starttime="20191025 23:45:30.026"></status>
</kw>
<status status="FAIL" endtime="20191025 23:45:30.028" starttime="20191025 23:45:20.607"></status>
</kw>
<status status="FAIL" endtime="20191025 23:45:30.028" starttime="20191025 23:45:20.606"></status>
</kw>
<status status="FAIL" endtime="20191025 23:45:30.029" critical="yes" starttime="20191025 23:45:15.427">255 != 0</status>
</test>
<test id="s1-s5-t4" name="Test Multipart Upload Complete Invalid part">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:45:30.036" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:45:30.043" level="INFO">${rc} = 1</msg>
<msg timestamp="20191025 23:45:30.043" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191025 23:45:30.043" starttime="20191025 23:45:30.034"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191025 23:45:30.045" starttime="20191025 23:45:30.044"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:45:30.048" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:45:30.236" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:45:30.237" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191025 23:45:30.237" starttime="20191025 23:45:30.045"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:45:30.243" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:45:30.746" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:45:30.746" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: mirror.sfo12.us.leaseweb.net
 * upd...</msg>
<status status="PASS" endtime="20191025 23:45:30.746" starttime="20191025 23:45:30.240"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:45:30.747" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: mirror.sfo12.us.leaseweb.net
 * updates: mirror.sfo12.us.leaseweb.net
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191025 23:45:30.748" starttime="20191025 23:45:30.747"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:45:30.749" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:45:30.749" starttime="20191025 23:45:30.748"></status>
</kw>
<status status="PASS" endtime="20191025 23:45:30.749" starttime="20191025 23:45:30.240"></status>
</kw>
<status status="PASS" endtime="20191025 23:45:30.750" starttime="20191025 23:45:30.239"></status>
</kw>
<status status="PASS" endtime="20191025 23:45:30.750" starttime="20191025 23:45:30.238"></status>
</kw>
<status status="PASS" endtime="20191025 23:45:30.750" starttime="20191025 23:45:30.033"></status>
</kw>
<status status="PASS" endtime="20191025 23:45:30.750" starttime="20191025 23:45:30.032"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:45:30.756" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:45:30.761" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:45:30.761" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191025 23:45:30.761" starttime="20191025 23:45:30.754"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:45:30.763" level="INFO">s3g</msg>
<status status="PASS" endtime="20191025 23:45:30.764" starttime="20191025 23:45:30.762"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:45:30.764" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:45:30.764" starttime="20191025 23:45:30.764"></status>
</kw>
<msg timestamp="20191025 23:45:30.765" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191025 23:45:30.765" starttime="20191025 23:45:30.753"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191025 23:45:30.766" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:45:30.766" starttime="20191025 23:45:30.765"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:45:30.770" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:45:30.786" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:45:30.786" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:45:30.787" starttime="20191025 23:45:30.768"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:45:30.788" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:45:30.788" starttime="20191025 23:45:30.787"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:45:30.789" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:45:30.789" starttime="20191025 23:45:30.788"></status>
</kw>
<status status="PASS" endtime="20191025 23:45:30.789" starttime="20191025 23:45:30.767"></status>
</kw>
<status status="PASS" endtime="20191025 23:45:30.789" starttime="20191025 23:45:30.766"></status>
</kw>
<status status="PASS" endtime="20191025 23:45:30.789" starttime="20191025 23:45:30.753"></status>
</kw>
<status status="PASS" endtime="20191025 23:45:30.790" starttime="20191025 23:45:30.752"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:45:30.794" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:45:33.300" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:45:33.300" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:45:33.300" starttime="20191025 23:45:30.792"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:45:33.301" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
awsAccessKey=testuser/s3g@EXAMPLE.COM
awsSecret=bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676</msg>
<status status="PASS" endtime="20191025 23:45:33.302" starttime="20191025 23:45:33.301"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:45:33.302" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:45:33.303" starttime="20191025 23:45:33.302"></status>
</kw>
<msg timestamp="20191025 23:45:33.303" level="INFO">${result} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:45:33.303" starttime="20191025 23:45:30.791"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsAccessKey=).*</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:45:33.304" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:45:33.304" starttime="20191025 23:45:33.303"></status>
</kw>
<kw name="Get Variable Value" library="BuiltIn">
<doc>Returns variable value or ``default`` if the variable does not exist.</doc>
<arguments>
<arg>${accessKey}</arg>
<arg>sdsdasaasdasd</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:45:33.305" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:45:33.305" starttime="20191025 23:45:33.304"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsSecret=).*</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:45:33.306" level="INFO">${secret} = [u'bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676']</msg>
<status status="PASS" endtime="20191025 23:45:33.306" starttime="20191025 23:45:33.305"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${accessKey[0]}</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:45:33.307" level="INFO">${accessKey} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:45:33.307" starttime="20191025 23:45:33.306"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${secret[0]}</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:45:33.307" level="INFO">${secret} = bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676</msg>
<status status="PASS" endtime="20191025 23:45:33.307" starttime="20191025 23:45:33.307"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set default.s3.signature_version s3v4</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:45:33.310" level="INFO">Running command 'aws configure set default.s3.signature_version s3v4 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:45:33.788" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:45:33.788" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:45:33.788" starttime="20191025 23:45:33.308"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:45:33.789" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:45:33.790" starttime="20191025 23:45:33.789"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:45:33.790" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:45:33.791" starttime="20191025 23:45:33.790"></status>
</kw>
<status status="PASS" endtime="20191025 23:45:33.791" starttime="20191025 23:45:33.308"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_access_key_id ${accessKey}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:45:33.794" level="INFO">Running command 'aws configure set aws_access_key_id testuser/s3g@EXAMPLE.COM 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:45:34.265" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:45:34.265" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:45:34.266" starttime="20191025 23:45:33.792"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:45:34.267" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:45:34.268" starttime="20191025 23:45:34.266"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:45:34.268" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:45:34.269" starttime="20191025 23:45:34.268"></status>
</kw>
<status status="PASS" endtime="20191025 23:45:34.269" starttime="20191025 23:45:33.791"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_secret_access_key ${secret}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:45:34.273" level="INFO">Running command 'aws configure set aws_secret_access_key bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:45:34.762" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:45:34.762" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:45:34.763" starttime="20191025 23:45:34.271"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:45:34.764" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:45:34.765" starttime="20191025 23:45:34.763"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:45:34.765" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:45:34.765" starttime="20191025 23:45:34.765"></status>
</kw>
<status status="PASS" endtime="20191025 23:45:34.766" starttime="20191025 23:45:34.270"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set region us-west-1</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:45:34.768" level="INFO">Running command 'aws configure set region us-west-1 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:45:35.230" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:45:35.230" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:45:35.230" starttime="20191025 23:45:34.767"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:45:35.231" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:45:35.231" starttime="20191025 23:45:35.230"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:45:35.232" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:45:35.232" starttime="20191025 23:45:35.231"></status>
</kw>
<status status="PASS" endtime="20191025 23:45:35.233" starttime="20191025 23:45:34.766"></status>
</kw>
<status status="PASS" endtime="20191025 23:45:35.233" starttime="20191025 23:45:30.791"></status>
</kw>
<status status="PASS" endtime="20191025 23:45:35.233" starttime="20191025 23:45:30.790"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'false'</arg>
<arg>Setup dummy credentials for S3</arg>
</arguments>
<status status="PASS" endtime="20191025 23:45:35.234" starttime="20191025 23:45:35.233"></status>
</kw>
<status status="PASS" endtime="20191025 23:45:35.234" starttime="20191025 23:45:30.751"></status>
</kw>
<status status="PASS" endtime="20191025 23:45:35.234" starttime="20191025 23:45:30.750"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${BUCKET}' == 'generated'</arg>
<arg>Create bucket</arg>
</arguments>
<status status="PASS" endtime="20191025 23:45:35.235" starttime="20191025 23:45:35.234"></status>
</kw>
<status status="PASS" endtime="20191025 23:45:35.235" starttime="20191025 23:45:30.031"></status>
</kw>
<kw name="Execute AWSS3APICli" library="commonawslib">
<arguments>
<arg>create-multipart-upload --bucket ${BUCKET} --key multipartKey3</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws s3api --endpoint-url ${ENDPOINT_URL} ${command}</arg>
</arguments>
<assign>
<var>${output}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:45:35.239" level="INFO">Running command 'aws s3api --endpoint-url http://s3g:9878 create-multipart-upload --bucket bucket-16217 --key multipartKey3 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:45:39.423" level="INFO">${rc} = 255</msg>
<msg timestamp="20191025 23:45:39.423" level="INFO">${output} = 
An error occurred (500) when calling the CreateMultipartUpload operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:45:39.423" starttime="20191025 23:45:35.237"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:45:39.425" level="INFO">
An error occurred (500) when calling the CreateMultipartUpload operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:45:39.425" starttime="20191025 23:45:39.424"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:45:39.425" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191025 23:45:39.426" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191025 23:45:39.426" starttime="20191025 23:45:39.425"></status>
</kw>
<status status="FAIL" endtime="20191025 23:45:39.426" starttime="20191025 23:45:35.236"></status>
</kw>
<status status="FAIL" endtime="20191025 23:45:39.426" starttime="20191025 23:45:35.235"></status>
</kw>
<status status="FAIL" endtime="20191025 23:45:39.427" critical="yes" starttime="20191025 23:45:30.030">255 != 0</status>
</test>
<test id="s1-s5-t5" name="Test abort Multipart upload">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:45:39.431" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:45:39.437" level="INFO">${rc} = 1</msg>
<msg timestamp="20191025 23:45:39.437" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191025 23:45:39.437" starttime="20191025 23:45:39.429"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191025 23:45:39.439" starttime="20191025 23:45:39.438"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:45:39.440" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:45:39.606" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:45:39.606" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191025 23:45:39.606" starttime="20191025 23:45:39.439"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:45:39.614" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:45:40.138" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:45:40.138" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: mirror.sfo12.us.leaseweb.net
 * upd...</msg>
<status status="PASS" endtime="20191025 23:45:40.138" starttime="20191025 23:45:39.611"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:45:40.140" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: mirror.sfo12.us.leaseweb.net
 * updates: mirror.sfo12.us.leaseweb.net
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191025 23:45:40.141" starttime="20191025 23:45:40.139"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:45:40.142" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:45:40.142" starttime="20191025 23:45:40.141"></status>
</kw>
<status status="PASS" endtime="20191025 23:45:40.142" starttime="20191025 23:45:39.610"></status>
</kw>
<status status="PASS" endtime="20191025 23:45:40.143" starttime="20191025 23:45:39.609"></status>
</kw>
<status status="PASS" endtime="20191025 23:45:40.143" starttime="20191025 23:45:39.607"></status>
</kw>
<status status="PASS" endtime="20191025 23:45:40.143" starttime="20191025 23:45:39.429"></status>
</kw>
<status status="PASS" endtime="20191025 23:45:40.143" starttime="20191025 23:45:39.428"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:45:40.151" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:45:40.158" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:45:40.159" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191025 23:45:40.159" starttime="20191025 23:45:40.148"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:45:40.162" level="INFO">s3g</msg>
<status status="PASS" endtime="20191025 23:45:40.163" starttime="20191025 23:45:40.159"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:45:40.163" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:45:40.164" starttime="20191025 23:45:40.163"></status>
</kw>
<msg timestamp="20191025 23:45:40.164" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191025 23:45:40.164" starttime="20191025 23:45:40.148"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191025 23:45:40.165" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:45:40.166" starttime="20191025 23:45:40.165"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:45:40.170" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:45:40.187" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:45:40.187" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:45:40.187" starttime="20191025 23:45:40.168"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:45:40.189" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:45:40.189" starttime="20191025 23:45:40.188"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:45:40.190" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:45:40.190" starttime="20191025 23:45:40.189"></status>
</kw>
<status status="PASS" endtime="20191025 23:45:40.190" starttime="20191025 23:45:40.167"></status>
</kw>
<status status="PASS" endtime="20191025 23:45:40.190" starttime="20191025 23:45:40.166"></status>
</kw>
<status status="PASS" endtime="20191025 23:45:40.191" starttime="20191025 23:45:40.147"></status>
</kw>
<status status="PASS" endtime="20191025 23:45:40.191" starttime="20191025 23:45:40.146"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:45:40.196" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:45:42.674" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:45:42.674" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:45:42.675" starttime="20191025 23:45:40.193"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:45:42.676" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
awsAccessKey=testuser/s3g@EXAMPLE.COM
awsSecret=bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676</msg>
<status status="PASS" endtime="20191025 23:45:42.676" starttime="20191025 23:45:42.675"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:45:42.677" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:45:42.678" starttime="20191025 23:45:42.677"></status>
</kw>
<msg timestamp="20191025 23:45:42.678" level="INFO">${result} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:45:42.678" starttime="20191025 23:45:40.193"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsAccessKey=).*</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:45:42.679" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:45:42.679" starttime="20191025 23:45:42.679"></status>
</kw>
<kw name="Get Variable Value" library="BuiltIn">
<doc>Returns variable value or ``default`` if the variable does not exist.</doc>
<arguments>
<arg>${accessKey}</arg>
<arg>sdsdasaasdasd</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:45:42.680" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:45:42.680" starttime="20191025 23:45:42.680"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsSecret=).*</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:45:42.681" level="INFO">${secret} = [u'bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676']</msg>
<status status="PASS" endtime="20191025 23:45:42.681" starttime="20191025 23:45:42.681"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${accessKey[0]}</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:45:42.682" level="INFO">${accessKey} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:45:42.683" starttime="20191025 23:45:42.682"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${secret[0]}</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:45:42.684" level="INFO">${secret} = bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676</msg>
<status status="PASS" endtime="20191025 23:45:42.684" starttime="20191025 23:45:42.683"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set default.s3.signature_version s3v4</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:45:42.687" level="INFO">Running command 'aws configure set default.s3.signature_version s3v4 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:45:43.124" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:45:43.124" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:45:43.125" starttime="20191025 23:45:42.685"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:45:43.126" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:45:43.126" starttime="20191025 23:45:43.125"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:45:43.126" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:45:43.127" starttime="20191025 23:45:43.126"></status>
</kw>
<status status="PASS" endtime="20191025 23:45:43.127" starttime="20191025 23:45:42.684"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_access_key_id ${accessKey}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:45:43.129" level="INFO">Running command 'aws configure set aws_access_key_id testuser/s3g@EXAMPLE.COM 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:45:43.568" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:45:43.568" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:45:43.569" starttime="20191025 23:45:43.128"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:45:43.571" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:45:43.571" starttime="20191025 23:45:43.569"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:45:43.572" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:45:43.572" starttime="20191025 23:45:43.571"></status>
</kw>
<status status="PASS" endtime="20191025 23:45:43.573" starttime="20191025 23:45:43.127"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_secret_access_key ${secret}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:45:43.577" level="INFO">Running command 'aws configure set aws_secret_access_key bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:45:43.966" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:45:43.967" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:45:43.967" starttime="20191025 23:45:43.574"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:45:43.969" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:45:43.969" starttime="20191025 23:45:43.968"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:45:43.971" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:45:43.971" starttime="20191025 23:45:43.969"></status>
</kw>
<status status="PASS" endtime="20191025 23:45:43.972" starttime="20191025 23:45:43.573"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set region us-west-1</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:45:43.976" level="INFO">Running command 'aws configure set region us-west-1 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:45:44.486" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:45:44.486" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:45:44.486" starttime="20191025 23:45:43.973"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:45:44.487" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:45:44.487" starttime="20191025 23:45:44.486"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:45:44.488" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:45:44.488" starttime="20191025 23:45:44.487"></status>
</kw>
<status status="PASS" endtime="20191025 23:45:44.488" starttime="20191025 23:45:43.972"></status>
</kw>
<status status="PASS" endtime="20191025 23:45:44.489" starttime="20191025 23:45:40.192"></status>
</kw>
<status status="PASS" endtime="20191025 23:45:44.489" starttime="20191025 23:45:40.191"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'false'</arg>
<arg>Setup dummy credentials for S3</arg>
</arguments>
<status status="PASS" endtime="20191025 23:45:44.489" starttime="20191025 23:45:44.489"></status>
</kw>
<status status="PASS" endtime="20191025 23:45:44.490" starttime="20191025 23:45:40.145"></status>
</kw>
<status status="PASS" endtime="20191025 23:45:44.490" starttime="20191025 23:45:40.144"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${BUCKET}' == 'generated'</arg>
<arg>Create bucket</arg>
</arguments>
<status status="PASS" endtime="20191025 23:45:44.490" starttime="20191025 23:45:44.490"></status>
</kw>
<status status="PASS" endtime="20191025 23:45:44.491" starttime="20191025 23:45:39.428"></status>
</kw>
<kw name="Execute AWSS3APICli" library="commonawslib">
<arguments>
<arg>create-multipart-upload --bucket ${BUCKET} --key multipartKey4 --storage-class REDUCED_REDUNDANCY</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws s3api --endpoint-url ${ENDPOINT_URL} ${command}</arg>
</arguments>
<assign>
<var>${output}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:45:44.494" level="INFO">Running command 'aws s3api --endpoint-url http://s3g:9878 create-multipart-upload --bucket bucket-16217 --key multipartKey4 --storage-class REDUCED_REDUNDANCY 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:45:52.592" level="INFO">${rc} = 255</msg>
<msg timestamp="20191025 23:45:52.592" level="INFO">${output} = 
An error occurred (500) when calling the CreateMultipartUpload operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:45:52.592" starttime="20191025 23:45:44.492"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:45:52.594" level="INFO">
An error occurred (500) when calling the CreateMultipartUpload operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:45:52.594" starttime="20191025 23:45:52.593"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:45:52.594" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191025 23:45:52.595" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191025 23:45:52.595" starttime="20191025 23:45:52.594"></status>
</kw>
<status status="FAIL" endtime="20191025 23:45:52.595" starttime="20191025 23:45:44.492"></status>
</kw>
<status status="FAIL" endtime="20191025 23:45:52.595" starttime="20191025 23:45:44.491"></status>
</kw>
<status status="FAIL" endtime="20191025 23:45:52.596" critical="yes" starttime="20191025 23:45:39.427">255 != 0</status>
</test>
<test id="s1-s5-t6" name="Test abort Multipart upload with invalid uploadId">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:45:52.602" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:45:52.609" level="INFO">${rc} = 1</msg>
<msg timestamp="20191025 23:45:52.609" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191025 23:45:52.609" starttime="20191025 23:45:52.600"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191025 23:45:52.611" starttime="20191025 23:45:52.610"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:45:52.613" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:45:52.874" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:45:52.874" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191025 23:45:52.874" starttime="20191025 23:45:52.611"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:45:52.878" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:45:53.416" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:45:53.416" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: mirror.sfo12.us.leaseweb.net
 * upd...</msg>
<status status="PASS" endtime="20191025 23:45:53.417" starttime="20191025 23:45:52.876"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:45:53.418" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: mirror.sfo12.us.leaseweb.net
 * updates: mirror.sfo12.us.leaseweb.net
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191025 23:45:53.418" starttime="20191025 23:45:53.417"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:45:53.419" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:45:53.419" starttime="20191025 23:45:53.418"></status>
</kw>
<status status="PASS" endtime="20191025 23:45:53.419" starttime="20191025 23:45:52.876"></status>
</kw>
<status status="PASS" endtime="20191025 23:45:53.419" starttime="20191025 23:45:52.875"></status>
</kw>
<status status="PASS" endtime="20191025 23:45:53.419" starttime="20191025 23:45:52.875"></status>
</kw>
<status status="PASS" endtime="20191025 23:45:53.419" starttime="20191025 23:45:52.599"></status>
</kw>
<status status="PASS" endtime="20191025 23:45:53.420" starttime="20191025 23:45:52.598"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:45:53.424" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:45:53.431" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:45:53.431" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191025 23:45:53.431" starttime="20191025 23:45:53.423"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:45:53.433" level="INFO">s3g</msg>
<status status="PASS" endtime="20191025 23:45:53.433" starttime="20191025 23:45:53.432"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:45:53.434" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:45:53.434" starttime="20191025 23:45:53.433"></status>
</kw>
<msg timestamp="20191025 23:45:53.434" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191025 23:45:53.434" starttime="20191025 23:45:53.422"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191025 23:45:53.435" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:45:53.435" starttime="20191025 23:45:53.434"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:45:53.438" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:45:53.451" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:45:53.451" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:45:53.451" starttime="20191025 23:45:53.437"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:45:53.453" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:45:53.453" starttime="20191025 23:45:53.452"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:45:53.454" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:45:53.454" starttime="20191025 23:45:53.454"></status>
</kw>
<status status="PASS" endtime="20191025 23:45:53.455" starttime="20191025 23:45:53.436"></status>
</kw>
<status status="PASS" endtime="20191025 23:45:53.455" starttime="20191025 23:45:53.435"></status>
</kw>
<status status="PASS" endtime="20191025 23:45:53.455" starttime="20191025 23:45:53.422"></status>
</kw>
<status status="PASS" endtime="20191025 23:45:53.455" starttime="20191025 23:45:53.421"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:45:53.459" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:45:55.980" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:45:55.980" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:45:55.980" starttime="20191025 23:45:53.457"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:45:55.982" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
awsAccessKey=testuser/s3g@EXAMPLE.COM
awsSecret=bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676</msg>
<status status="PASS" endtime="20191025 23:45:55.982" starttime="20191025 23:45:55.981"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:45:55.983" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:45:55.983" starttime="20191025 23:45:55.982"></status>
</kw>
<msg timestamp="20191025 23:45:55.984" level="INFO">${result} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:45:55.984" starttime="20191025 23:45:53.457"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsAccessKey=).*</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:45:55.985" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:45:55.985" starttime="20191025 23:45:55.984"></status>
</kw>
<kw name="Get Variable Value" library="BuiltIn">
<doc>Returns variable value or ``default`` if the variable does not exist.</doc>
<arguments>
<arg>${accessKey}</arg>
<arg>sdsdasaasdasd</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:45:55.986" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:45:55.987" starttime="20191025 23:45:55.986"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsSecret=).*</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:45:55.988" level="INFO">${secret} = [u'bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676']</msg>
<status status="PASS" endtime="20191025 23:45:55.988" starttime="20191025 23:45:55.987"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${accessKey[0]}</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:45:55.989" level="INFO">${accessKey} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:45:55.989" starttime="20191025 23:45:55.988"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${secret[0]}</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:45:55.990" level="INFO">${secret} = bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676</msg>
<status status="PASS" endtime="20191025 23:45:55.990" starttime="20191025 23:45:55.989"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set default.s3.signature_version s3v4</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:45:55.993" level="INFO">Running command 'aws configure set default.s3.signature_version s3v4 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:45:56.500" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:45:56.500" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:45:56.500" starttime="20191025 23:45:55.991"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:45:56.501" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:45:56.502" starttime="20191025 23:45:56.501"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:45:56.502" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:45:56.502" starttime="20191025 23:45:56.502"></status>
</kw>
<status status="PASS" endtime="20191025 23:45:56.503" starttime="20191025 23:45:55.990"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_access_key_id ${accessKey}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:45:56.505" level="INFO">Running command 'aws configure set aws_access_key_id testuser/s3g@EXAMPLE.COM 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:45:56.963" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:45:56.963" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:45:56.963" starttime="20191025 23:45:56.504"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:45:56.965" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:45:56.965" starttime="20191025 23:45:56.964"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:45:56.967" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:45:56.967" starttime="20191025 23:45:56.966"></status>
</kw>
<status status="PASS" endtime="20191025 23:45:56.967" starttime="20191025 23:45:56.503"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_secret_access_key ${secret}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:45:56.971" level="INFO">Running command 'aws configure set aws_secret_access_key bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:45:57.475" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:45:57.475" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:45:57.475" starttime="20191025 23:45:56.969"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:45:57.477" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:45:57.477" starttime="20191025 23:45:57.476"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:45:57.479" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:45:57.479" starttime="20191025 23:45:57.477"></status>
</kw>
<status status="PASS" endtime="20191025 23:45:57.479" starttime="20191025 23:45:56.968"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set region us-west-1</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:45:57.483" level="INFO">Running command 'aws configure set region us-west-1 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:45:57.918" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:45:57.919" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:45:57.919" starttime="20191025 23:45:57.480"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:45:57.920" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:45:57.920" starttime="20191025 23:45:57.919"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:45:57.921" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:45:57.921" starttime="20191025 23:45:57.921"></status>
</kw>
<status status="PASS" endtime="20191025 23:45:57.922" starttime="20191025 23:45:57.480"></status>
</kw>
<status status="PASS" endtime="20191025 23:45:57.922" starttime="20191025 23:45:53.456"></status>
</kw>
<status status="PASS" endtime="20191025 23:45:57.922" starttime="20191025 23:45:53.456"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'false'</arg>
<arg>Setup dummy credentials for S3</arg>
</arguments>
<status status="PASS" endtime="20191025 23:45:57.923" starttime="20191025 23:45:57.923"></status>
</kw>
<status status="PASS" endtime="20191025 23:45:57.923" starttime="20191025 23:45:53.420"></status>
</kw>
<status status="PASS" endtime="20191025 23:45:57.924" starttime="20191025 23:45:53.420"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${BUCKET}' == 'generated'</arg>
<arg>Create bucket</arg>
</arguments>
<status status="PASS" endtime="20191025 23:45:57.924" starttime="20191025 23:45:57.924"></status>
</kw>
<status status="PASS" endtime="20191025 23:45:57.925" starttime="20191025 23:45:52.598"></status>
</kw>
<kw name="Execute AWSS3APICli and checkrc" library="commonawslib">
<arguments>
<arg>abort-multipart-upload --bucket ${BUCKET} --key multipartKey5 --upload-id "random"</arg>
<arg>255</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Execute and checkrc" library="commonlib">
<arguments>
<arg>aws s3api --endpoint-url ${ENDPOINT_URL} ${command}</arg>
<arg>${expected_error_code}</arg>
</arguments>
<assign>
<var>${output}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:45:57.929" level="INFO">Running command 'aws s3api --endpoint-url http://s3g:9878 abort-multipart-upload --bucket bucket-16217 --key multipartKey5 --upload-id "random" 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:46:07.162" level="INFO">${rc} = 255</msg>
<msg timestamp="20191025 23:46:07.162" level="INFO">${output} = 
An error occurred (500) when calling the AbortMultipartUpload operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:46:07.162" starttime="20191025 23:45:57.927"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:46:07.164" level="INFO">
An error occurred (500) when calling the AbortMultipartUpload operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:46:07.164" starttime="20191025 23:46:07.163"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
</arguments>
<msg timestamp="20191025 23:46:07.165" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:46:07.165" starttime="20191025 23:46:07.164"></status>
</kw>
<msg timestamp="20191025 23:46:07.166" level="INFO">${output} = 
An error occurred (500) when calling the AbortMultipartUpload operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:46:07.166" starttime="20191025 23:45:57.926"></status>
</kw>
<msg timestamp="20191025 23:46:07.167" level="INFO">${result} = 
An error occurred (500) when calling the AbortMultipartUpload operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:46:07.167" starttime="20191025 23:45:57.925"></status>
</kw>
<status status="PASS" endtime="20191025 23:46:07.167" critical="yes" starttime="20191025 23:45:52.596"></status>
</test>
<test id="s1-s5-t7" name="Upload part with Incorrect uploadID">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:46:07.173" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:46:07.180" level="INFO">${rc} = 1</msg>
<msg timestamp="20191025 23:46:07.181" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191025 23:46:07.181" starttime="20191025 23:46:07.171"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191025 23:46:07.183" starttime="20191025 23:46:07.182"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:46:07.185" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:46:07.374" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:46:07.375" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191025 23:46:07.375" starttime="20191025 23:46:07.183"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:46:07.380" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:46:07.778" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:46:07.778" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: mirror.sfo12.us.leaseweb.net
 * upd...</msg>
<status status="PASS" endtime="20191025 23:46:07.778" starttime="20191025 23:46:07.378"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:46:07.780" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: mirror.sfo12.us.leaseweb.net
 * updates: mirror.sfo12.us.leaseweb.net
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191025 23:46:07.780" starttime="20191025 23:46:07.779"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:46:07.781" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:46:07.782" starttime="20191025 23:46:07.781"></status>
</kw>
<status status="PASS" endtime="20191025 23:46:07.782" starttime="20191025 23:46:07.377"></status>
</kw>
<status status="PASS" endtime="20191025 23:46:07.783" starttime="20191025 23:46:07.377"></status>
</kw>
<status status="PASS" endtime="20191025 23:46:07.783" starttime="20191025 23:46:07.376"></status>
</kw>
<status status="PASS" endtime="20191025 23:46:07.783" starttime="20191025 23:46:07.171"></status>
</kw>
<status status="PASS" endtime="20191025 23:46:07.783" starttime="20191025 23:46:07.170"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:46:07.791" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:46:07.797" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:46:07.797" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191025 23:46:07.798" starttime="20191025 23:46:07.788"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:46:07.799" level="INFO">s3g</msg>
<status status="PASS" endtime="20191025 23:46:07.799" starttime="20191025 23:46:07.798"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:46:07.800" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:46:07.800" starttime="20191025 23:46:07.799"></status>
</kw>
<msg timestamp="20191025 23:46:07.801" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191025 23:46:07.801" starttime="20191025 23:46:07.787"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191025 23:46:07.802" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:46:07.802" starttime="20191025 23:46:07.801"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:46:07.806" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:46:07.843" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:46:07.843" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:46:07.843" starttime="20191025 23:46:07.805"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:46:07.845" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:46:07.845" starttime="20191025 23:46:07.844"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:46:07.846" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:46:07.846" starttime="20191025 23:46:07.845"></status>
</kw>
<status status="PASS" endtime="20191025 23:46:07.846" starttime="20191025 23:46:07.804"></status>
</kw>
<status status="PASS" endtime="20191025 23:46:07.847" starttime="20191025 23:46:07.803"></status>
</kw>
<status status="PASS" endtime="20191025 23:46:07.847" starttime="20191025 23:46:07.787"></status>
</kw>
<status status="PASS" endtime="20191025 23:46:07.847" starttime="20191025 23:46:07.786"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:46:07.852" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:46:10.331" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:46:10.331" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:46:10.331" starttime="20191025 23:46:07.850"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:46:10.333" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
awsAccessKey=testuser/s3g@EXAMPLE.COM
awsSecret=bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676</msg>
<status status="PASS" endtime="20191025 23:46:10.333" starttime="20191025 23:46:10.332"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:46:10.334" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:46:10.335" starttime="20191025 23:46:10.334"></status>
</kw>
<msg timestamp="20191025 23:46:10.335" level="INFO">${result} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:46:10.335" starttime="20191025 23:46:07.849"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsAccessKey=).*</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:46:10.337" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:46:10.337" starttime="20191025 23:46:10.336"></status>
</kw>
<kw name="Get Variable Value" library="BuiltIn">
<doc>Returns variable value or ``default`` if the variable does not exist.</doc>
<arguments>
<arg>${accessKey}</arg>
<arg>sdsdasaasdasd</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:46:10.338" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:46:10.338" starttime="20191025 23:46:10.337"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsSecret=).*</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:46:10.339" level="INFO">${secret} = [u'bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676']</msg>
<status status="PASS" endtime="20191025 23:46:10.340" starttime="20191025 23:46:10.339"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${accessKey[0]}</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:46:10.341" level="INFO">${accessKey} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:46:10.341" starttime="20191025 23:46:10.340"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${secret[0]}</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:46:10.342" level="INFO">${secret} = bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676</msg>
<status status="PASS" endtime="20191025 23:46:10.342" starttime="20191025 23:46:10.341"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set default.s3.signature_version s3v4</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:46:10.346" level="INFO">Running command 'aws configure set default.s3.signature_version s3v4 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:46:10.844" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:46:10.844" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:46:10.844" starttime="20191025 23:46:10.343"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:46:10.846" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:46:10.846" starttime="20191025 23:46:10.845"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:46:10.847" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:46:10.848" starttime="20191025 23:46:10.847"></status>
</kw>
<status status="PASS" endtime="20191025 23:46:10.848" starttime="20191025 23:46:10.342"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_access_key_id ${accessKey}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:46:10.852" level="INFO">Running command 'aws configure set aws_access_key_id testuser/s3g@EXAMPLE.COM 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:46:11.341" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:46:11.341" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:46:11.341" starttime="20191025 23:46:10.850"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:46:11.343" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:46:11.343" starttime="20191025 23:46:11.342"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:46:11.344" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:46:11.344" starttime="20191025 23:46:11.343"></status>
</kw>
<status status="PASS" endtime="20191025 23:46:11.345" starttime="20191025 23:46:10.849"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_secret_access_key ${secret}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:46:11.348" level="INFO">Running command 'aws configure set aws_secret_access_key bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:46:11.792" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:46:11.792" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:46:11.792" starttime="20191025 23:46:11.346"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:46:11.794" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:46:11.794" starttime="20191025 23:46:11.793"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:46:11.795" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:46:11.795" starttime="20191025 23:46:11.795"></status>
</kw>
<status status="PASS" endtime="20191025 23:46:11.796" starttime="20191025 23:46:11.345"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set region us-west-1</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:46:11.798" level="INFO">Running command 'aws configure set region us-west-1 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:46:12.240" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:46:12.240" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:46:12.240" starttime="20191025 23:46:11.796"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:46:12.242" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:46:12.243" starttime="20191025 23:46:12.241"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:46:12.244" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:46:12.244" starttime="20191025 23:46:12.243"></status>
</kw>
<status status="PASS" endtime="20191025 23:46:12.245" starttime="20191025 23:46:11.796"></status>
</kw>
<status status="PASS" endtime="20191025 23:46:12.245" starttime="20191025 23:46:07.848"></status>
</kw>
<status status="PASS" endtime="20191025 23:46:12.245" starttime="20191025 23:46:07.847"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'false'</arg>
<arg>Setup dummy credentials for S3</arg>
</arguments>
<status status="PASS" endtime="20191025 23:46:12.246" starttime="20191025 23:46:12.245"></status>
</kw>
<status status="PASS" endtime="20191025 23:46:12.246" starttime="20191025 23:46:07.785"></status>
</kw>
<status status="PASS" endtime="20191025 23:46:12.247" starttime="20191025 23:46:07.784"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${BUCKET}' == 'generated'</arg>
<arg>Create bucket</arg>
</arguments>
<status status="PASS" endtime="20191025 23:46:12.248" starttime="20191025 23:46:12.247"></status>
</kw>
<status status="PASS" endtime="20191025 23:46:12.248" starttime="20191025 23:46:07.169"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>echo "Multipart upload" &gt; /tmp/testfile</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:46:12.251" level="INFO">Running command 'echo "Multipart upload" &gt; /tmp/testfile'.</msg>
<msg timestamp="20191025 23:46:12.257" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:46:12.257" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:46:12.258" starttime="20191025 23:46:12.249"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:46:12.259" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:46:12.259" starttime="20191025 23:46:12.258"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:46:12.260" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:46:12.260" starttime="20191025 23:46:12.259"></status>
</kw>
<status status="PASS" endtime="20191025 23:46:12.261" starttime="20191025 23:46:12.248"></status>
</kw>
<kw name="Execute AWSS3APICli and checkrc" library="commonawslib">
<arguments>
<arg>upload-part --bucket ${BUCKET} --key multipartKey --part-number 1 --body /tmp/testfile --upload-id "random"</arg>
<arg>255</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Execute and checkrc" library="commonlib">
<arguments>
<arg>aws s3api --endpoint-url ${ENDPOINT_URL} ${command}</arg>
<arg>${expected_error_code}</arg>
</arguments>
<assign>
<var>${output}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:46:12.265" level="INFO">Running command 'aws s3api --endpoint-url http://s3g:9878 upload-part --bucket bucket-16217 --key multipartKey --part-number 1 --body /tmp/testfile --upload-id "random" 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:46:24.496" level="INFO">${rc} = 255</msg>
<msg timestamp="20191025 23:46:24.496" level="INFO">${output} = 
An error occurred (500) when calling the UploadPart operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:46:24.497" starttime="20191025 23:46:12.263"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:46:24.498" level="INFO">
An error occurred (500) when calling the UploadPart operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:46:24.498" starttime="20191025 23:46:24.497"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
</arguments>
<msg timestamp="20191025 23:46:24.499" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:46:24.499" starttime="20191025 23:46:24.499"></status>
</kw>
<msg timestamp="20191025 23:46:24.500" level="INFO">${output} = 
An error occurred (500) when calling the UploadPart operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:46:24.500" starttime="20191025 23:46:12.262"></status>
</kw>
<msg timestamp="20191025 23:46:24.500" level="INFO">${result} = 
An error occurred (500) when calling the UploadPart operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:46:24.501" starttime="20191025 23:46:12.261"></status>
</kw>
<kw name="Should Contain" library="BuiltIn">
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<arguments>
<arg>${result}</arg>
<arg>NoSuchUpload</arg>
</arguments>
<msg timestamp="20191025 23:46:24.502" level="FAIL">'
An error occurred (500) when calling the UploadPart operation (reached max retries: 4): Internal Server Error' does not contain 'NoSuchUpload'</msg>
<status status="FAIL" endtime="20191025 23:46:24.502" starttime="20191025 23:46:24.501"></status>
</kw>
<status status="FAIL" endtime="20191025 23:46:24.502" critical="yes" starttime="20191025 23:46:07.168">'
An error occurred (500) when calling the UploadPart operation (reached max retries: 4): Internal Server Error' does not contain 'NoSuchUpload'</status>
</test>
<test id="s1-s5-t8" name="Test list parts">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:46:24.508" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:46:24.515" level="INFO">${rc} = 1</msg>
<msg timestamp="20191025 23:46:24.516" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191025 23:46:24.516" starttime="20191025 23:46:24.506"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191025 23:46:24.518" starttime="20191025 23:46:24.517"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:46:24.520" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:46:24.718" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:46:24.719" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191025 23:46:24.719" starttime="20191025 23:46:24.518"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:46:24.726" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:46:25.297" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:46:25.297" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: mirror.sfo12.us.leaseweb.net
 * upd...</msg>
<status status="PASS" endtime="20191025 23:46:25.297" starttime="20191025 23:46:24.723"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:46:25.299" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: mirror.sfo12.us.leaseweb.net
 * updates: mirror.sfo12.us.leaseweb.net
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191025 23:46:25.299" starttime="20191025 23:46:25.298"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:46:25.300" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:46:25.300" starttime="20191025 23:46:25.299"></status>
</kw>
<status status="PASS" endtime="20191025 23:46:25.301" starttime="20191025 23:46:24.722"></status>
</kw>
<status status="PASS" endtime="20191025 23:46:25.301" starttime="20191025 23:46:24.721"></status>
</kw>
<status status="PASS" endtime="20191025 23:46:25.301" starttime="20191025 23:46:24.720"></status>
</kw>
<status status="PASS" endtime="20191025 23:46:25.302" starttime="20191025 23:46:24.505"></status>
</kw>
<status status="PASS" endtime="20191025 23:46:25.302" starttime="20191025 23:46:24.505"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:46:25.310" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:46:25.317" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:46:25.317" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191025 23:46:25.318" starttime="20191025 23:46:25.307"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:46:25.319" level="INFO">s3g</msg>
<status status="PASS" endtime="20191025 23:46:25.319" starttime="20191025 23:46:25.318"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:46:25.320" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:46:25.320" starttime="20191025 23:46:25.320"></status>
</kw>
<msg timestamp="20191025 23:46:25.321" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191025 23:46:25.321" starttime="20191025 23:46:25.306"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191025 23:46:25.322" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:46:25.322" starttime="20191025 23:46:25.321"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:46:25.327" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:46:25.357" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:46:25.357" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:46:25.358" starttime="20191025 23:46:25.325"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:46:25.359" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:46:25.359" starttime="20191025 23:46:25.358"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:46:25.359" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:46:25.360" starttime="20191025 23:46:25.359"></status>
</kw>
<status status="PASS" endtime="20191025 23:46:25.360" starttime="20191025 23:46:25.324"></status>
</kw>
<status status="PASS" endtime="20191025 23:46:25.360" starttime="20191025 23:46:25.323"></status>
</kw>
<status status="PASS" endtime="20191025 23:46:25.360" starttime="20191025 23:46:25.306"></status>
</kw>
<status status="PASS" endtime="20191025 23:46:25.360" starttime="20191025 23:46:25.304"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:46:25.364" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:46:27.810" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:46:27.810" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:46:27.810" starttime="20191025 23:46:25.362"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:46:27.811" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
awsAccessKey=testuser/s3g@EXAMPLE.COM
awsSecret=bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676</msg>
<status status="PASS" endtime="20191025 23:46:27.811" starttime="20191025 23:46:27.810"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:46:27.812" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:46:27.812" starttime="20191025 23:46:27.811"></status>
</kw>
<msg timestamp="20191025 23:46:27.812" level="INFO">${result} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:46:27.813" starttime="20191025 23:46:25.362"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsAccessKey=).*</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:46:27.813" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:46:27.813" starttime="20191025 23:46:27.813"></status>
</kw>
<kw name="Get Variable Value" library="BuiltIn">
<doc>Returns variable value or ``default`` if the variable does not exist.</doc>
<arguments>
<arg>${accessKey}</arg>
<arg>sdsdasaasdasd</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:46:27.814" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:46:27.814" starttime="20191025 23:46:27.814"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsSecret=).*</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:46:27.815" level="INFO">${secret} = [u'bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676']</msg>
<status status="PASS" endtime="20191025 23:46:27.815" starttime="20191025 23:46:27.814"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${accessKey[0]}</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:46:27.816" level="INFO">${accessKey} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:46:27.816" starttime="20191025 23:46:27.815"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${secret[0]}</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:46:27.816" level="INFO">${secret} = bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676</msg>
<status status="PASS" endtime="20191025 23:46:27.816" starttime="20191025 23:46:27.816"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set default.s3.signature_version s3v4</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:46:27.819" level="INFO">Running command 'aws configure set default.s3.signature_version s3v4 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:46:28.278" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:46:28.278" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:46:28.278" starttime="20191025 23:46:27.817"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:46:28.280" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:46:28.280" starttime="20191025 23:46:28.279"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:46:28.281" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:46:28.281" starttime="20191025 23:46:28.280"></status>
</kw>
<status status="PASS" endtime="20191025 23:46:28.281" starttime="20191025 23:46:27.817"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_access_key_id ${accessKey}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:46:28.285" level="INFO">Running command 'aws configure set aws_access_key_id testuser/s3g@EXAMPLE.COM 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:46:28.789" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:46:28.789" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:46:28.789" starttime="20191025 23:46:28.282"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:46:28.791" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:46:28.791" starttime="20191025 23:46:28.790"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:46:28.792" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:46:28.792" starttime="20191025 23:46:28.791"></status>
</kw>
<status status="PASS" endtime="20191025 23:46:28.793" starttime="20191025 23:46:28.282"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_secret_access_key ${secret}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:46:28.796" level="INFO">Running command 'aws configure set aws_secret_access_key bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:46:29.221" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:46:29.221" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:46:29.221" starttime="20191025 23:46:28.794"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:46:29.223" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:46:29.223" starttime="20191025 23:46:29.222"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:46:29.223" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:46:29.223" starttime="20191025 23:46:29.223"></status>
</kw>
<status status="PASS" endtime="20191025 23:46:29.224" starttime="20191025 23:46:28.793"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set region us-west-1</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:46:29.226" level="INFO">Running command 'aws configure set region us-west-1 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:46:29.730" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:46:29.730" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:46:29.730" starttime="20191025 23:46:29.225"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:46:29.732" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:46:29.732" starttime="20191025 23:46:29.731"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:46:29.733" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:46:29.733" starttime="20191025 23:46:29.732"></status>
</kw>
<status status="PASS" endtime="20191025 23:46:29.734" starttime="20191025 23:46:29.224"></status>
</kw>
<status status="PASS" endtime="20191025 23:46:29.734" starttime="20191025 23:46:25.361"></status>
</kw>
<status status="PASS" endtime="20191025 23:46:29.734" starttime="20191025 23:46:25.361"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'false'</arg>
<arg>Setup dummy credentials for S3</arg>
</arguments>
<status status="PASS" endtime="20191025 23:46:29.735" starttime="20191025 23:46:29.735"></status>
</kw>
<status status="PASS" endtime="20191025 23:46:29.736" starttime="20191025 23:46:25.303"></status>
</kw>
<status status="PASS" endtime="20191025 23:46:29.736" starttime="20191025 23:46:25.302"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${BUCKET}' == 'generated'</arg>
<arg>Create bucket</arg>
</arguments>
<status status="PASS" endtime="20191025 23:46:29.737" starttime="20191025 23:46:29.736"></status>
</kw>
<status status="PASS" endtime="20191025 23:46:29.738" starttime="20191025 23:46:24.504"></status>
</kw>
<kw name="Execute AWSS3APICli" library="commonawslib">
<arguments>
<arg>create-multipart-upload --bucket ${BUCKET} --key multipartKey5</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws s3api --endpoint-url ${ENDPOINT_URL} ${command}</arg>
</arguments>
<assign>
<var>${output}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:46:29.742" level="INFO">Running command 'aws s3api --endpoint-url http://s3g:9878 create-multipart-upload --bucket bucket-16217 --key multipartKey5 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:46:43.731" level="INFO">${rc} = 255</msg>
<msg timestamp="20191025 23:46:43.731" level="INFO">${output} = 
An error occurred (500) when calling the CreateMultipartUpload operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:46:43.731" starttime="20191025 23:46:29.740"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:46:43.733" level="INFO">
An error occurred (500) when calling the CreateMultipartUpload operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:46:43.733" starttime="20191025 23:46:43.732"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:46:43.734" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191025 23:46:43.735" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191025 23:46:43.735" starttime="20191025 23:46:43.733"></status>
</kw>
<status status="FAIL" endtime="20191025 23:46:43.735" starttime="20191025 23:46:29.739"></status>
</kw>
<status status="FAIL" endtime="20191025 23:46:43.736" starttime="20191025 23:46:29.738"></status>
</kw>
<status status="FAIL" endtime="20191025 23:46:43.736" critical="yes" starttime="20191025 23:46:24.503">255 != 0</status>
</test>
<test id="s1-s5-t9" name="Test Multipart Upload with the simplified aws s3 cp API">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:46:43.743" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:46:43.750" level="INFO">${rc} = 1</msg>
<msg timestamp="20191025 23:46:43.750" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191025 23:46:43.750" starttime="20191025 23:46:43.740"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191025 23:46:43.752" starttime="20191025 23:46:43.751"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:46:43.755" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:46:43.928" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:46:43.928" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191025 23:46:43.929" starttime="20191025 23:46:43.753"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:46:43.936" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:46:44.400" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:46:44.400" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: mirror.sfo12.us.leaseweb.net
 * upd...</msg>
<status status="PASS" endtime="20191025 23:46:44.401" starttime="20191025 23:46:43.933"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:46:44.402" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: mirror.sfo12.us.leaseweb.net
 * updates: mirror.sfo12.us.leaseweb.net
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191025 23:46:44.403" starttime="20191025 23:46:44.401"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:46:44.404" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:46:44.404" starttime="20191025 23:46:44.403"></status>
</kw>
<status status="PASS" endtime="20191025 23:46:44.405" starttime="20191025 23:46:43.932"></status>
</kw>
<status status="PASS" endtime="20191025 23:46:44.405" starttime="20191025 23:46:43.931"></status>
</kw>
<status status="PASS" endtime="20191025 23:46:44.405" starttime="20191025 23:46:43.930"></status>
</kw>
<status status="PASS" endtime="20191025 23:46:44.405" starttime="20191025 23:46:43.740"></status>
</kw>
<status status="PASS" endtime="20191025 23:46:44.406" starttime="20191025 23:46:43.739"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:46:44.413" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:46:44.420" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:46:44.421" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191025 23:46:44.421" starttime="20191025 23:46:44.411"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:46:44.423" level="INFO">s3g</msg>
<status status="PASS" endtime="20191025 23:46:44.423" starttime="20191025 23:46:44.422"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:46:44.424" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:46:44.424" starttime="20191025 23:46:44.423"></status>
</kw>
<msg timestamp="20191025 23:46:44.425" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191025 23:46:44.425" starttime="20191025 23:46:44.410"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191025 23:46:44.426" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:46:44.426" starttime="20191025 23:46:44.425"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:46:44.431" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:46:44.447" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:46:44.447" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:46:44.447" starttime="20191025 23:46:44.429"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:46:44.449" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:46:44.449" starttime="20191025 23:46:44.448"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:46:44.450" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:46:44.450" starttime="20191025 23:46:44.449"></status>
</kw>
<status status="PASS" endtime="20191025 23:46:44.450" starttime="20191025 23:46:44.428"></status>
</kw>
<status status="PASS" endtime="20191025 23:46:44.450" starttime="20191025 23:46:44.427"></status>
</kw>
<status status="PASS" endtime="20191025 23:46:44.451" starttime="20191025 23:46:44.409"></status>
</kw>
<status status="PASS" endtime="20191025 23:46:44.451" starttime="20191025 23:46:44.408"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:46:44.456" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:46:46.967" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:46:46.967" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:46:46.967" starttime="20191025 23:46:44.454"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:46:46.968" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
awsAccessKey=testuser/s3g@EXAMPLE.COM
awsSecret=bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676</msg>
<status status="PASS" endtime="20191025 23:46:46.968" starttime="20191025 23:46:46.968"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:46:46.969" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:46:46.969" starttime="20191025 23:46:46.969"></status>
</kw>
<msg timestamp="20191025 23:46:46.970" level="INFO">${result} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:46:46.970" starttime="20191025 23:46:44.453"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsAccessKey=).*</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:46:46.971" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:46:46.971" starttime="20191025 23:46:46.970"></status>
</kw>
<kw name="Get Variable Value" library="BuiltIn">
<doc>Returns variable value or ``default`` if the variable does not exist.</doc>
<arguments>
<arg>${accessKey}</arg>
<arg>sdsdasaasdasd</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:46:46.971" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:46:46.971" starttime="20191025 23:46:46.971"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsSecret=).*</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:46:46.972" level="INFO">${secret} = [u'bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676']</msg>
<status status="PASS" endtime="20191025 23:46:46.972" starttime="20191025 23:46:46.972"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${accessKey[0]}</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:46:46.973" level="INFO">${accessKey} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:46:46.973" starttime="20191025 23:46:46.972"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${secret[0]}</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:46:46.974" level="INFO">${secret} = bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676</msg>
<status status="PASS" endtime="20191025 23:46:46.974" starttime="20191025 23:46:46.973"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set default.s3.signature_version s3v4</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:46:46.976" level="INFO">Running command 'aws configure set default.s3.signature_version s3v4 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:46:47.430" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:46:47.430" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:46:47.430" starttime="20191025 23:46:46.975"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:46:47.432" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:46:47.432" starttime="20191025 23:46:47.431"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:46:47.433" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:46:47.433" starttime="20191025 23:46:47.432"></status>
</kw>
<status status="PASS" endtime="20191025 23:46:47.433" starttime="20191025 23:46:46.974"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_access_key_id ${accessKey}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:46:47.436" level="INFO">Running command 'aws configure set aws_access_key_id testuser/s3g@EXAMPLE.COM 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:46:47.900" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:46:47.900" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:46:47.900" starttime="20191025 23:46:47.434"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:46:47.902" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:46:47.902" starttime="20191025 23:46:47.900"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:46:47.902" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:46:47.903" starttime="20191025 23:46:47.902"></status>
</kw>
<status status="PASS" endtime="20191025 23:46:47.903" starttime="20191025 23:46:47.433"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_secret_access_key ${secret}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:46:47.906" level="INFO">Running command 'aws configure set aws_secret_access_key bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:46:48.407" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:46:48.407" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:46:48.408" starttime="20191025 23:46:47.904"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:46:48.409" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:46:48.410" starttime="20191025 23:46:48.408"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:46:48.411" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:46:48.411" starttime="20191025 23:46:48.410"></status>
</kw>
<status status="PASS" endtime="20191025 23:46:48.412" starttime="20191025 23:46:47.903"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set region us-west-1</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:46:48.415" level="INFO">Running command 'aws configure set region us-west-1 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:46:48.862" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:46:48.862" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:46:48.862" starttime="20191025 23:46:48.413"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:46:48.864" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:46:48.864" starttime="20191025 23:46:48.863"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:46:48.865" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:46:48.865" starttime="20191025 23:46:48.864"></status>
</kw>
<status status="PASS" endtime="20191025 23:46:48.866" starttime="20191025 23:46:48.412"></status>
</kw>
<status status="PASS" endtime="20191025 23:46:48.866" starttime="20191025 23:46:44.452"></status>
</kw>
<status status="PASS" endtime="20191025 23:46:48.866" starttime="20191025 23:46:44.451"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'false'</arg>
<arg>Setup dummy credentials for S3</arg>
</arguments>
<status status="PASS" endtime="20191025 23:46:48.867" starttime="20191025 23:46:48.867"></status>
</kw>
<status status="PASS" endtime="20191025 23:46:48.868" starttime="20191025 23:46:44.407"></status>
</kw>
<status status="PASS" endtime="20191025 23:46:48.868" starttime="20191025 23:46:44.406"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${BUCKET}' == 'generated'</arg>
<arg>Create bucket</arg>
</arguments>
<status status="PASS" endtime="20191025 23:46:48.869" starttime="20191025 23:46:48.868"></status>
</kw>
<status status="PASS" endtime="20191025 23:46:48.869" starttime="20191025 23:46:43.738"></status>
</kw>
<kw name="Create Random file">
<arguments>
<arg>22</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>dd if=/dev/urandom of=/tmp/part1 bs=1048576 count=${size_in_megabytes}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:46:48.873" level="INFO">Running command 'dd if=/dev/urandom of=/tmp/part1 bs=1048576 count=22 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:46:49.047" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:46:49.047" level="INFO">${output} = 22+0 records in
22+0 records out
23068672 bytes (23 MB) copied, 0.166715 s, 138 MB/s</msg>
<status status="PASS" endtime="20191025 23:46:49.047" starttime="20191025 23:46:48.871"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:46:49.049" level="INFO">22+0 records in
22+0 records out
23068672 bytes (23 MB) copied, 0.166715 s, 138 MB/s</msg>
<status status="PASS" endtime="20191025 23:46:49.049" starttime="20191025 23:46:49.048"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:46:49.049" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:46:49.050" starttime="20191025 23:46:49.049"></status>
</kw>
<status status="PASS" endtime="20191025 23:46:49.050" starttime="20191025 23:46:48.870"></status>
</kw>
<status status="PASS" endtime="20191025 23:46:49.051" starttime="20191025 23:46:48.869"></status>
</kw>
<kw name="Execute AWSS3Cli" library="commonawslib">
<arguments>
<arg>cp /tmp/part1 s3://${BUCKET}/mpyawscli</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws s3 --endpoint-url ${ENDPOINT_URL} ${command}</arg>
</arguments>
<assign>
<var>${output}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:46:49.054" level="INFO">Running command 'aws s3 --endpoint-url http://s3g:9878 cp /tmp/part1 s3://bucket-16217/mpyawscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:46:55.275" level="INFO">${rc} = 1</msg>
<msg timestamp="20191025 23:46:55.275" level="INFO">${output} = upload failed: ../../tmp/part1 to s3://bucket-16217/mpyawscli An error occurred (500) when calling the CreateMultipartUpload operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:46:55.275" starttime="20191025 23:46:49.052"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:46:55.276" level="INFO">upload failed: ../../tmp/part1 to s3://bucket-16217/mpyawscli An error occurred (500) when calling the CreateMultipartUpload operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:46:55.276" starttime="20191025 23:46:55.276"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:46:55.277" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191025 23:46:55.278" level="FAIL">1 != 0</msg>
<status status="FAIL" endtime="20191025 23:46:55.278" starttime="20191025 23:46:55.277"></status>
</kw>
<status status="FAIL" endtime="20191025 23:46:55.278" starttime="20191025 23:46:49.052"></status>
</kw>
<status status="FAIL" endtime="20191025 23:46:55.278" starttime="20191025 23:46:49.051"></status>
</kw>
<status status="FAIL" endtime="20191025 23:46:55.279" critical="yes" starttime="20191025 23:46:43.737">1 != 0</status>
</test>
<test id="s1-s5-t10" name="Test Multipart Upload Put With Copy">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:46:55.283" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:46:55.290" level="INFO">${rc} = 1</msg>
<msg timestamp="20191025 23:46:55.290" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191025 23:46:55.290" starttime="20191025 23:46:55.282"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191025 23:46:55.291" starttime="20191025 23:46:55.291"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:46:55.293" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:46:55.485" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:46:55.485" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191025 23:46:55.485" starttime="20191025 23:46:55.292"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:46:55.490" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:46:56.011" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:46:56.011" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: mirror.sfo12.us.leaseweb.net
 * upd...</msg>
<status status="PASS" endtime="20191025 23:46:56.011" starttime="20191025 23:46:55.489"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:46:56.013" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: mirror.sfo12.us.leaseweb.net
 * updates: mirror.sfo12.us.leaseweb.net
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191025 23:46:56.013" starttime="20191025 23:46:56.012"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:46:56.014" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:46:56.015" starttime="20191025 23:46:56.014"></status>
</kw>
<status status="PASS" endtime="20191025 23:46:56.015" starttime="20191025 23:46:55.487"></status>
</kw>
<status status="PASS" endtime="20191025 23:46:56.015" starttime="20191025 23:46:55.487"></status>
</kw>
<status status="PASS" endtime="20191025 23:46:56.016" starttime="20191025 23:46:55.486"></status>
</kw>
<status status="PASS" endtime="20191025 23:46:56.016" starttime="20191025 23:46:55.281"></status>
</kw>
<status status="PASS" endtime="20191025 23:46:56.016" starttime="20191025 23:46:55.281"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:46:56.024" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:46:56.031" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:46:56.031" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191025 23:46:56.031" starttime="20191025 23:46:56.021"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:46:56.032" level="INFO">s3g</msg>
<status status="PASS" endtime="20191025 23:46:56.033" starttime="20191025 23:46:56.032"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:46:56.033" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:46:56.033" starttime="20191025 23:46:56.033"></status>
</kw>
<msg timestamp="20191025 23:46:56.034" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191025 23:46:56.034" starttime="20191025 23:46:56.020"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191025 23:46:56.035" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:46:56.035" starttime="20191025 23:46:56.034"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:46:56.038" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:46:56.054" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:46:56.054" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:46:56.054" starttime="20191025 23:46:56.036"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:46:56.055" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:46:56.055" starttime="20191025 23:46:56.055"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:46:56.056" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:46:56.056" starttime="20191025 23:46:56.056"></status>
</kw>
<status status="PASS" endtime="20191025 23:46:56.056" starttime="20191025 23:46:56.036"></status>
</kw>
<status status="PASS" endtime="20191025 23:46:56.057" starttime="20191025 23:46:56.035"></status>
</kw>
<status status="PASS" endtime="20191025 23:46:56.057" starttime="20191025 23:46:56.020"></status>
</kw>
<status status="PASS" endtime="20191025 23:46:56.057" starttime="20191025 23:46:56.018"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:46:56.060" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:46:58.595" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:46:58.595" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:46:58.595" starttime="20191025 23:46:56.059"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:46:58.596" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
awsAccessKey=testuser/s3g@EXAMPLE.COM
awsSecret=bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676</msg>
<status status="PASS" endtime="20191025 23:46:58.596" starttime="20191025 23:46:58.596"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:46:58.597" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:46:58.597" starttime="20191025 23:46:58.597"></status>
</kw>
<msg timestamp="20191025 23:46:58.598" level="INFO">${result} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:46:58.598" starttime="20191025 23:46:56.058"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsAccessKey=).*</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:46:58.599" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:46:58.599" starttime="20191025 23:46:58.598"></status>
</kw>
<kw name="Get Variable Value" library="BuiltIn">
<doc>Returns variable value or ``default`` if the variable does not exist.</doc>
<arguments>
<arg>${accessKey}</arg>
<arg>sdsdasaasdasd</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:46:58.600" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:46:58.600" starttime="20191025 23:46:58.599"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsSecret=).*</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:46:58.601" level="INFO">${secret} = [u'bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676']</msg>
<status status="PASS" endtime="20191025 23:46:58.601" starttime="20191025 23:46:58.600"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${accessKey[0]}</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:46:58.601" level="INFO">${accessKey} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:46:58.601" starttime="20191025 23:46:58.601"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${secret[0]}</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:46:58.602" level="INFO">${secret} = bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676</msg>
<status status="PASS" endtime="20191025 23:46:58.602" starttime="20191025 23:46:58.602"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set default.s3.signature_version s3v4</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:46:58.605" level="INFO">Running command 'aws configure set default.s3.signature_version s3v4 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:46:59.091" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:46:59.091" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:46:59.091" starttime="20191025 23:46:58.603"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:46:59.093" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:46:59.093" starttime="20191025 23:46:59.092"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:46:59.094" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:46:59.095" starttime="20191025 23:46:59.094"></status>
</kw>
<status status="PASS" endtime="20191025 23:46:59.095" starttime="20191025 23:46:58.602"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_access_key_id ${accessKey}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:46:59.100" level="INFO">Running command 'aws configure set aws_access_key_id testuser/s3g@EXAMPLE.COM 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:46:59.602" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:46:59.603" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:46:59.603" starttime="20191025 23:46:59.097"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:46:59.605" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:46:59.605" starttime="20191025 23:46:59.604"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:46:59.606" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:46:59.606" starttime="20191025 23:46:59.605"></status>
</kw>
<status status="PASS" endtime="20191025 23:46:59.607" starttime="20191025 23:46:59.096"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_secret_access_key ${secret}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:46:59.611" level="INFO">Running command 'aws configure set aws_secret_access_key bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:47:00.115" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:47:00.115" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:47:00.115" starttime="20191025 23:46:59.608"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:47:00.117" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:47:00.117" starttime="20191025 23:47:00.116"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:47:00.118" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:47:00.119" starttime="20191025 23:47:00.118"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:00.119" starttime="20191025 23:46:59.607"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set region us-west-1</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:47:00.123" level="INFO">Running command 'aws configure set region us-west-1 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:47:00.648" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:47:00.648" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:47:00.649" starttime="20191025 23:47:00.121"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:47:00.651" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:47:00.651" starttime="20191025 23:47:00.650"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:47:00.653" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:47:00.653" starttime="20191025 23:47:00.652"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:00.654" starttime="20191025 23:47:00.120"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:00.654" starttime="20191025 23:46:56.058"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:00.654" starttime="20191025 23:46:56.057"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'false'</arg>
<arg>Setup dummy credentials for S3</arg>
</arguments>
<status status="PASS" endtime="20191025 23:47:00.656" starttime="20191025 23:47:00.655"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:00.657" starttime="20191025 23:46:56.018"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:00.657" starttime="20191025 23:46:56.017"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${BUCKET}' == 'generated'</arg>
<arg>Create bucket</arg>
</arguments>
<status status="PASS" endtime="20191025 23:47:00.659" starttime="20191025 23:47:00.658"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:00.659" starttime="20191025 23:46:55.280"></status>
</kw>
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Create Random file</arg>
<arg>5</arg>
</arguments>
<kw name="Create Random file">
<arguments>
<arg>5</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>dd if=/dev/urandom of=/tmp/part1 bs=1048576 count=${size_in_megabytes}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:47:00.666" level="INFO">Running command 'dd if=/dev/urandom of=/tmp/part1 bs=1048576 count=5 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:47:00.738" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:47:00.738" level="INFO">${output} = 5+0 records in
5+0 records out
5242880 bytes (5.2 MB) copied, 0.0546546 s, 95.9 MB/s</msg>
<status status="PASS" endtime="20191025 23:47:00.738" starttime="20191025 23:47:00.663"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:47:00.740" level="INFO">5+0 records in
5+0 records out
5242880 bytes (5.2 MB) copied, 0.0546546 s, 95.9 MB/s</msg>
<status status="PASS" endtime="20191025 23:47:00.740" starttime="20191025 23:47:00.739"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:47:00.741" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:47:00.742" starttime="20191025 23:47:00.741"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:00.742" starttime="20191025 23:47:00.661"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:00.743" starttime="20191025 23:47:00.661"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:00.743" starttime="20191025 23:47:00.660"></status>
</kw>
<kw name="Execute AWSS3APICli" library="commonawslib">
<arguments>
<arg>put-object --bucket ${BUCKET} --key copytest/source --body /tmp/part1</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws s3api --endpoint-url ${ENDPOINT_URL} ${command}</arg>
</arguments>
<assign>
<var>${output}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:47:00.748" level="INFO">Running command 'aws s3api --endpoint-url http://s3g:9878 put-object --bucket bucket-16217 --key copytest/source --body /tmp/part1 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:47:07.253" level="INFO">${rc} = 255</msg>
<msg timestamp="20191025 23:47:07.253" level="INFO">${output} = 
('Connection aborted.', error(32, 'Broken pipe'))</msg>
<status status="PASS" endtime="20191025 23:47:07.253" starttime="20191025 23:47:00.746"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:47:07.254" level="INFO">
('Connection aborted.', error(32, 'Broken pipe'))</msg>
<status status="PASS" endtime="20191025 23:47:07.255" starttime="20191025 23:47:07.254"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:47:07.255" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191025 23:47:07.256" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191025 23:47:07.256" starttime="20191025 23:47:07.255"></status>
</kw>
<status status="FAIL" endtime="20191025 23:47:07.256" starttime="20191025 23:47:00.744"></status>
</kw>
<status status="FAIL" endtime="20191025 23:47:07.257" starttime="20191025 23:47:00.743"></status>
</kw>
<status status="FAIL" endtime="20191025 23:47:07.257" critical="yes" starttime="20191025 23:46:55.279">255 != 0</status>
</test>
<test id="s1-s5-t11" name="Test Multipart Upload Put With Copy and range">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:47:07.263" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:47:07.271" level="INFO">${rc} = 1</msg>
<msg timestamp="20191025 23:47:07.272" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191025 23:47:07.272" starttime="20191025 23:47:07.260"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191025 23:47:07.274" starttime="20191025 23:47:07.273"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:47:07.277" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:47:07.475" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:47:07.476" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191025 23:47:07.476" starttime="20191025 23:47:07.275"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:47:07.482" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:47:07.988" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:47:07.988" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: mirror.sfo12.us.leaseweb.net
 * upd...</msg>
<status status="PASS" endtime="20191025 23:47:07.988" starttime="20191025 23:47:07.479"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:47:07.989" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: mirror.sfo12.us.leaseweb.net
 * updates: mirror.sfo12.us.leaseweb.net
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191025 23:47:07.990" starttime="20191025 23:47:07.989"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:47:07.990" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:47:07.990" starttime="20191025 23:47:07.990"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:07.991" starttime="20191025 23:47:07.479"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:07.991" starttime="20191025 23:47:07.478"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:07.991" starttime="20191025 23:47:07.477"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:07.992" starttime="20191025 23:47:07.260"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:07.992" starttime="20191025 23:47:07.259"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:47:07.997" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:47:08.005" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:47:08.005" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191025 23:47:08.005" starttime="20191025 23:47:07.995"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:47:08.007" level="INFO">s3g</msg>
<status status="PASS" endtime="20191025 23:47:08.007" starttime="20191025 23:47:08.006"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:47:08.008" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:47:08.009" starttime="20191025 23:47:08.008"></status>
</kw>
<msg timestamp="20191025 23:47:08.009" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191025 23:47:08.009" starttime="20191025 23:47:07.995"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191025 23:47:08.011" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:47:08.011" starttime="20191025 23:47:08.010"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:47:08.016" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:47:08.061" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:47:08.061" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:47:08.061" starttime="20191025 23:47:08.014"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:47:08.063" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:47:08.063" starttime="20191025 23:47:08.062"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:47:08.064" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:47:08.064" starttime="20191025 23:47:08.063"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:08.065" starttime="20191025 23:47:08.012"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:08.065" starttime="20191025 23:47:08.011"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:08.065" starttime="20191025 23:47:07.994"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:08.066" starttime="20191025 23:47:07.993"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:47:08.071" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:47:10.793" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:47:10.794" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:47:10.794" starttime="20191025 23:47:08.069"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:47:10.796" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
awsAccessKey=testuser/s3g@EXAMPLE.COM
awsSecret=bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676</msg>
<status status="PASS" endtime="20191025 23:47:10.796" starttime="20191025 23:47:10.795"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:47:10.797" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:47:10.797" starttime="20191025 23:47:10.796"></status>
</kw>
<msg timestamp="20191025 23:47:10.798" level="INFO">${result} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:47:10.798" starttime="20191025 23:47:08.068"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsAccessKey=).*</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:47:10.800" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:47:10.800" starttime="20191025 23:47:10.798"></status>
</kw>
<kw name="Get Variable Value" library="BuiltIn">
<doc>Returns variable value or ``default`` if the variable does not exist.</doc>
<arguments>
<arg>${accessKey}</arg>
<arg>sdsdasaasdasd</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:47:10.801" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:47:10.802" starttime="20191025 23:47:10.801"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsSecret=).*</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:47:10.803" level="INFO">${secret} = [u'bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676']</msg>
<status status="PASS" endtime="20191025 23:47:10.803" starttime="20191025 23:47:10.802"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${accessKey[0]}</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:47:10.804" level="INFO">${accessKey} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:47:10.804" starttime="20191025 23:47:10.803"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${secret[0]}</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:47:10.805" level="INFO">${secret} = bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676</msg>
<status status="PASS" endtime="20191025 23:47:10.805" starttime="20191025 23:47:10.804"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set default.s3.signature_version s3v4</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:47:10.809" level="INFO">Running command 'aws configure set default.s3.signature_version s3v4 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:47:11.241" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:47:11.241" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:47:11.242" starttime="20191025 23:47:10.806"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:47:11.243" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:47:11.244" starttime="20191025 23:47:11.242"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:47:11.245" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:47:11.245" starttime="20191025 23:47:11.244"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:11.245" starttime="20191025 23:47:10.805"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_access_key_id ${accessKey}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:47:11.249" level="INFO">Running command 'aws configure set aws_access_key_id testuser/s3g@EXAMPLE.COM 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:47:11.690" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:47:11.690" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:47:11.690" starttime="20191025 23:47:11.247"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:47:11.692" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:47:11.693" starttime="20191025 23:47:11.691"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:47:11.694" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:47:11.694" starttime="20191025 23:47:11.693"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:11.694" starttime="20191025 23:47:11.246"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_secret_access_key ${secret}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:47:11.698" level="INFO">Running command 'aws configure set aws_secret_access_key bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:47:12.141" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:47:12.141" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:47:12.141" starttime="20191025 23:47:11.696"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:47:12.143" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:47:12.143" starttime="20191025 23:47:12.142"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:47:12.144" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:47:12.145" starttime="20191025 23:47:12.144"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:12.145" starttime="20191025 23:47:11.695"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set region us-west-1</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:47:12.149" level="INFO">Running command 'aws configure set region us-west-1 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:47:12.646" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:47:12.647" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:47:12.647" starttime="20191025 23:47:12.147"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:47:12.649" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:47:12.649" starttime="20191025 23:47:12.648"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:47:12.650" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:47:12.650" starttime="20191025 23:47:12.649"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:12.651" starttime="20191025 23:47:12.146"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:12.651" starttime="20191025 23:47:08.067"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:12.651" starttime="20191025 23:47:08.066"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'false'</arg>
<arg>Setup dummy credentials for S3</arg>
</arguments>
<status status="PASS" endtime="20191025 23:47:12.653" starttime="20191025 23:47:12.652"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:12.653" starttime="20191025 23:47:07.993"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:12.653" starttime="20191025 23:47:07.992"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${BUCKET}' == 'generated'</arg>
<arg>Create bucket</arg>
</arguments>
<status status="PASS" endtime="20191025 23:47:12.654" starttime="20191025 23:47:12.653"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:12.654" starttime="20191025 23:47:07.259"></status>
</kw>
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Create Random file</arg>
<arg>10</arg>
</arguments>
<kw name="Create Random file">
<arguments>
<arg>10</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>dd if=/dev/urandom of=/tmp/part1 bs=1048576 count=${size_in_megabytes}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:47:12.660" level="INFO">Running command 'dd if=/dev/urandom of=/tmp/part1 bs=1048576 count=10 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:47:12.767" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:47:12.767" level="INFO">${output} = 10+0 records in
10+0 records out
10485760 bytes (10 MB) copied, 0.0977616 s, 107 MB/s</msg>
<status status="PASS" endtime="20191025 23:47:12.767" starttime="20191025 23:47:12.657"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:47:12.769" level="INFO">10+0 records in
10+0 records out
10485760 bytes (10 MB) copied, 0.0977616 s, 107 MB/s</msg>
<status status="PASS" endtime="20191025 23:47:12.769" starttime="20191025 23:47:12.768"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:47:12.770" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:47:12.771" starttime="20191025 23:47:12.770"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:12.771" starttime="20191025 23:47:12.656"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:12.772" starttime="20191025 23:47:12.656"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:12.772" starttime="20191025 23:47:12.655"></status>
</kw>
<kw name="Execute AWSS3APICli" library="commonawslib">
<arguments>
<arg>put-object --bucket ${BUCKET} --key copyrange/source --body /tmp/part1</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws s3api --endpoint-url ${ENDPOINT_URL} ${command}</arg>
</arguments>
<assign>
<var>${output}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:47:12.777" level="INFO">Running command 'aws s3api --endpoint-url http://s3g:9878 put-object --bucket bucket-16217 --key copyrange/source --body /tmp/part1 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:47:26.052" level="INFO">${rc} = 255</msg>
<msg timestamp="20191025 23:47:26.052" level="INFO">${output} = 
('Connection aborted.', error(32, 'Broken pipe'))</msg>
<status status="PASS" endtime="20191025 23:47:26.052" starttime="20191025 23:47:12.774"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:47:26.054" level="INFO">
('Connection aborted.', error(32, 'Broken pipe'))</msg>
<status status="PASS" endtime="20191025 23:47:26.054" starttime="20191025 23:47:26.053"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:47:26.056" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191025 23:47:26.057" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191025 23:47:26.057" starttime="20191025 23:47:26.055"></status>
</kw>
<status status="FAIL" endtime="20191025 23:47:26.058" starttime="20191025 23:47:12.773"></status>
</kw>
<status status="FAIL" endtime="20191025 23:47:26.058" starttime="20191025 23:47:12.772"></status>
</kw>
<status status="FAIL" endtime="20191025 23:47:26.059" critical="yes" starttime="20191025 23:47:07.258">255 != 0</status>
</test>
<test id="s1-s5-t12" name="Test Multipart Upload list">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:47:26.065" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:47:26.073" level="INFO">${rc} = 1</msg>
<msg timestamp="20191025 23:47:26.073" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191025 23:47:26.073" starttime="20191025 23:47:26.063"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191025 23:47:26.075" starttime="20191025 23:47:26.074"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:47:26.078" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:47:26.276" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:47:26.276" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191025 23:47:26.276" starttime="20191025 23:47:26.076"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:47:26.282" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:47:26.753" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:47:26.754" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: mirror.sfo12.us.leaseweb.net
 * upd...</msg>
<status status="PASS" endtime="20191025 23:47:26.754" starttime="20191025 23:47:26.280"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:47:26.755" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: mirror.sfo12.us.leaseweb.net
 * updates: mirror.sfo12.us.leaseweb.net
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191025 23:47:26.756" starttime="20191025 23:47:26.755"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:47:26.757" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:47:26.757" starttime="20191025 23:47:26.756"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:26.757" starttime="20191025 23:47:26.279"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:26.758" starttime="20191025 23:47:26.278"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:26.758" starttime="20191025 23:47:26.277"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:26.758" starttime="20191025 23:47:26.062"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:26.758" starttime="20191025 23:47:26.061"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:47:26.765" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:47:26.773" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:47:26.773" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191025 23:47:26.773" starttime="20191025 23:47:26.763"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:47:26.775" level="INFO">s3g</msg>
<status status="PASS" endtime="20191025 23:47:26.775" starttime="20191025 23:47:26.774"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:47:26.776" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:47:26.776" starttime="20191025 23:47:26.775"></status>
</kw>
<msg timestamp="20191025 23:47:26.777" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191025 23:47:26.777" starttime="20191025 23:47:26.762"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191025 23:47:26.779" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:47:26.779" starttime="20191025 23:47:26.778"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:47:26.785" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:47:26.801" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:47:26.801" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:47:26.801" starttime="20191025 23:47:26.781"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:47:26.802" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:47:26.803" starttime="20191025 23:47:26.802"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:47:26.803" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:47:26.804" starttime="20191025 23:47:26.803"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:26.804" starttime="20191025 23:47:26.780"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:26.804" starttime="20191025 23:47:26.779"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:26.805" starttime="20191025 23:47:26.761"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:26.805" starttime="20191025 23:47:26.760"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:47:26.810" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:47:29.277" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:47:29.277" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:47:29.277" starttime="20191025 23:47:26.808"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:47:29.279" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
awsAccessKey=testuser/s3g@EXAMPLE.COM
awsSecret=bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676</msg>
<status status="PASS" endtime="20191025 23:47:29.279" starttime="20191025 23:47:29.278"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:47:29.279" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:47:29.280" starttime="20191025 23:47:29.279"></status>
</kw>
<msg timestamp="20191025 23:47:29.280" level="INFO">${result} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:47:29.280" starttime="20191025 23:47:26.807"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsAccessKey=).*</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:47:29.281" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:47:29.281" starttime="20191025 23:47:29.281"></status>
</kw>
<kw name="Get Variable Value" library="BuiltIn">
<doc>Returns variable value or ``default`` if the variable does not exist.</doc>
<arguments>
<arg>${accessKey}</arg>
<arg>sdsdasaasdasd</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:47:29.282" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:47:29.282" starttime="20191025 23:47:29.282"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsSecret=).*</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:47:29.283" level="INFO">${secret} = [u'bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676']</msg>
<status status="PASS" endtime="20191025 23:47:29.283" starttime="20191025 23:47:29.283"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${accessKey[0]}</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:47:29.284" level="INFO">${accessKey} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:47:29.284" starttime="20191025 23:47:29.284"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${secret[0]}</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:47:29.285" level="INFO">${secret} = bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676</msg>
<status status="PASS" endtime="20191025 23:47:29.285" starttime="20191025 23:47:29.285"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set default.s3.signature_version s3v4</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:47:29.288" level="INFO">Running command 'aws configure set default.s3.signature_version s3v4 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:47:29.763" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:47:29.763" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:47:29.763" starttime="20191025 23:47:29.286"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:47:29.765" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:47:29.765" starttime="20191025 23:47:29.764"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:47:29.766" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:47:29.766" starttime="20191025 23:47:29.765"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:29.767" starttime="20191025 23:47:29.286"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_access_key_id ${accessKey}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:47:29.771" level="INFO">Running command 'aws configure set aws_access_key_id testuser/s3g@EXAMPLE.COM 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:47:30.303" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:47:30.303" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:47:30.304" starttime="20191025 23:47:29.768"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:47:30.306" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:47:30.306" starttime="20191025 23:47:30.305"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:47:30.307" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:47:30.307" starttime="20191025 23:47:30.306"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:30.308" starttime="20191025 23:47:29.767"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_secret_access_key ${secret}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:47:30.312" level="INFO">Running command 'aws configure set aws_secret_access_key bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:47:30.776" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:47:30.776" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:47:30.776" starttime="20191025 23:47:30.310"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:47:30.778" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:47:30.778" starttime="20191025 23:47:30.777"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:47:30.779" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:47:30.780" starttime="20191025 23:47:30.779"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:30.780" starttime="20191025 23:47:30.308"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set region us-west-1</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:47:30.784" level="INFO">Running command 'aws configure set region us-west-1 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:47:31.245" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:47:31.245" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:47:31.245" starttime="20191025 23:47:30.781"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:47:31.246" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:47:31.246" starttime="20191025 23:47:31.246"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:47:31.247" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:47:31.248" starttime="20191025 23:47:31.247"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:31.248" starttime="20191025 23:47:30.780"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:31.248" starttime="20191025 23:47:26.806"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:31.248" starttime="20191025 23:47:26.805"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'false'</arg>
<arg>Setup dummy credentials for S3</arg>
</arguments>
<status status="PASS" endtime="20191025 23:47:31.249" starttime="20191025 23:47:31.249"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:31.249" starttime="20191025 23:47:26.760"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:31.249" starttime="20191025 23:47:26.759"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${BUCKET}' == 'generated'</arg>
<arg>Create bucket</arg>
</arguments>
<status status="PASS" endtime="20191025 23:47:31.250" starttime="20191025 23:47:31.250"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:31.250" starttime="20191025 23:47:26.061"></status>
</kw>
<kw name="Execute AWSS3APICli" library="commonawslib">
<arguments>
<arg>create-multipart-upload --bucket ${BUCKET} --key listtest/key1</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws s3api --endpoint-url ${ENDPOINT_URL} ${command}</arg>
</arguments>
<assign>
<var>${output}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:47:31.254" level="INFO">Running command 'aws s3api --endpoint-url http://s3g:9878 create-multipart-upload --bucket bucket-16217 --key listtest/key1 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:47:41.003" level="INFO">${rc} = 255</msg>
<msg timestamp="20191025 23:47:41.003" level="INFO">${output} = 
An error occurred (500) when calling the CreateMultipartUpload operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:47:41.003" starttime="20191025 23:47:31.252"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:47:41.004" level="INFO">
An error occurred (500) when calling the CreateMultipartUpload operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:47:41.005" starttime="20191025 23:47:41.004"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:47:41.005" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191025 23:47:41.006" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191025 23:47:41.006" starttime="20191025 23:47:41.005"></status>
</kw>
<status status="FAIL" endtime="20191025 23:47:41.007" starttime="20191025 23:47:31.251"></status>
</kw>
<status status="FAIL" endtime="20191025 23:47:41.007" starttime="20191025 23:47:31.251"></status>
</kw>
<status status="FAIL" endtime="20191025 23:47:41.007" critical="yes" starttime="20191025 23:47:26.059">255 != 0</status>
</test>
<doc>S3 gateway test with aws cli</doc>
<status status="FAIL" endtime="20191025 23:47:41.011" starttime="20191025 23:44:43.529"></status>
</suite>
<suite source="/opt/hadoop/smoketest/s3/objectcopy.robot" id="s1-s6" name="Objectcopy">
<test id="s1-s6-t1" name="Copy Object Happy Scenario">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:47:41.035" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:47:41.042" level="INFO">${rc} = 1</msg>
<msg timestamp="20191025 23:47:41.042" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191025 23:47:41.043" starttime="20191025 23:47:41.034"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191025 23:47:41.044" starttime="20191025 23:47:41.043"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:47:41.045" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:47:41.228" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:47:41.228" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191025 23:47:41.228" starttime="20191025 23:47:41.044"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:47:41.234" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:47:41.760" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:47:41.760" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: mirror.sfo12.us.leaseweb.net
 * upd...</msg>
<status status="PASS" endtime="20191025 23:47:41.760" starttime="20191025 23:47:41.232"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:47:41.761" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: mirror.sfo12.us.leaseweb.net
 * updates: mirror.sfo12.us.leaseweb.net
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191025 23:47:41.762" starttime="20191025 23:47:41.761"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:47:41.762" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:47:41.762" starttime="20191025 23:47:41.762"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:41.763" starttime="20191025 23:47:41.231"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:41.763" starttime="20191025 23:47:41.230"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:41.763" starttime="20191025 23:47:41.229"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:41.763" starttime="20191025 23:47:41.033"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:41.763" starttime="20191025 23:47:41.032"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:47:41.768" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:47:41.775" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:47:41.775" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191025 23:47:41.775" starttime="20191025 23:47:41.766"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:47:41.776" level="INFO">s3g</msg>
<status status="PASS" endtime="20191025 23:47:41.776" starttime="20191025 23:47:41.776"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:47:41.777" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:47:41.777" starttime="20191025 23:47:41.776"></status>
</kw>
<msg timestamp="20191025 23:47:41.777" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191025 23:47:41.777" starttime="20191025 23:47:41.766"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191025 23:47:41.780" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:47:41.780" starttime="20191025 23:47:41.778"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:47:41.783" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:47:41.819" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:47:41.819" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:47:41.819" starttime="20191025 23:47:41.782"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:47:41.820" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:47:41.820" starttime="20191025 23:47:41.819"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:47:41.821" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:47:41.821" starttime="20191025 23:47:41.820"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:41.821" starttime="20191025 23:47:41.781"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:41.822" starttime="20191025 23:47:41.780"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:41.822" starttime="20191025 23:47:41.765"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:41.822" starttime="20191025 23:47:41.765"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:47:41.825" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:47:44.476" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:47:44.476" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:47:44.476" starttime="20191025 23:47:41.824"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:47:44.478" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
awsAccessKey=testuser/s3g@EXAMPLE.COM
awsSecret=bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676</msg>
<status status="PASS" endtime="20191025 23:47:44.478" starttime="20191025 23:47:44.477"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:47:44.479" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:47:44.479" starttime="20191025 23:47:44.478"></status>
</kw>
<msg timestamp="20191025 23:47:44.479" level="INFO">${result} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:47:44.479" starttime="20191025 23:47:41.823"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsAccessKey=).*</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:47:44.480" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:47:44.480" starttime="20191025 23:47:44.479"></status>
</kw>
<kw name="Get Variable Value" library="BuiltIn">
<doc>Returns variable value or ``default`` if the variable does not exist.</doc>
<arguments>
<arg>${accessKey}</arg>
<arg>sdsdasaasdasd</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:47:44.481" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:47:44.481" starttime="20191025 23:47:44.480"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsSecret=).*</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:47:44.481" level="INFO">${secret} = [u'bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676']</msg>
<status status="PASS" endtime="20191025 23:47:44.481" starttime="20191025 23:47:44.481"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${accessKey[0]}</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:47:44.482" level="INFO">${accessKey} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:47:44.482" starttime="20191025 23:47:44.482"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${secret[0]}</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:47:44.483" level="INFO">${secret} = bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676</msg>
<status status="PASS" endtime="20191025 23:47:44.483" starttime="20191025 23:47:44.482"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set default.s3.signature_version s3v4</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:47:44.485" level="INFO">Running command 'aws configure set default.s3.signature_version s3v4 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:47:45.007" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:47:45.008" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:47:45.008" starttime="20191025 23:47:44.484"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:47:45.010" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:47:45.010" starttime="20191025 23:47:45.009"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:47:45.011" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:47:45.011" starttime="20191025 23:47:45.010"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:45.012" starttime="20191025 23:47:44.483"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_access_key_id ${accessKey}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:47:45.015" level="INFO">Running command 'aws configure set aws_access_key_id testuser/s3g@EXAMPLE.COM 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:47:45.497" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:47:45.497" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:47:45.497" starttime="20191025 23:47:45.013"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:47:45.499" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:47:45.499" starttime="20191025 23:47:45.498"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:47:45.500" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:47:45.500" starttime="20191025 23:47:45.499"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:45.500" starttime="20191025 23:47:45.012"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_secret_access_key ${secret}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:47:45.504" level="INFO">Running command 'aws configure set aws_secret_access_key bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:47:45.968" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:47:45.968" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:47:45.969" starttime="20191025 23:47:45.501"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:47:45.971" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:47:45.971" starttime="20191025 23:47:45.970"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:47:45.972" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:47:45.972" starttime="20191025 23:47:45.971"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:45.973" starttime="20191025 23:47:45.501"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set region us-west-1</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:47:45.977" level="INFO">Running command 'aws configure set region us-west-1 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:47:46.459" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:47:46.460" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:47:46.460" starttime="20191025 23:47:45.974"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:47:46.462" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:47:46.462" starttime="20191025 23:47:46.461"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:47:46.463" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:47:46.463" starttime="20191025 23:47:46.462"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:46.464" starttime="20191025 23:47:45.973"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:46.464" starttime="20191025 23:47:41.823"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:46.464" starttime="20191025 23:47:41.822"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'false'</arg>
<arg>Setup dummy credentials for S3</arg>
</arguments>
<status status="PASS" endtime="20191025 23:47:46.465" starttime="20191025 23:47:46.465"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:46.466" starttime="20191025 23:47:41.764"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:46.466" starttime="20191025 23:47:41.764"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${BUCKET}' == 'generated'</arg>
<arg>Create bucket</arg>
</arguments>
<kw name="Create bucket" library="commonawslib">
<kw name="Generate Random String" library="String">
<doc>Generates a string with a desired ``length`` from the given ``chars``.</doc>
<arguments>
<arg>5</arg>
<arg>[NUMBERS]</arg>
</arguments>
<assign>
<var>${postfix}</var>
</assign>
<msg timestamp="20191025 23:47:46.469" level="INFO">${postfix} = 74397</msg>
<status status="PASS" endtime="20191025 23:47:46.469" starttime="20191025 23:47:46.468"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${BUCKET}</arg>
<arg>bucket-${postfix}</arg>
</arguments>
<msg timestamp="20191025 23:47:46.471" level="INFO">${BUCKET} = bucket-74397</msg>
<status status="PASS" endtime="20191025 23:47:46.471" starttime="20191025 23:47:46.470"></status>
</kw>
<kw name="Execute AWSS3APICli" library="commonawslib">
<arguments>
<arg>create-bucket --bucket ${BUCKET}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws s3api --endpoint-url ${ENDPOINT_URL} ${command}</arg>
</arguments>
<assign>
<var>${output}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:47:46.475" level="INFO">Running command 'aws s3api --endpoint-url http://s3g:9878 create-bucket --bucket bucket-74397 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:47:54.757" level="INFO">${rc} = 255</msg>
<msg timestamp="20191025 23:47:54.758" level="INFO">${output} = 
An error occurred (500) when calling the CreateBucket operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:47:54.758" starttime="20191025 23:47:46.473"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:47:54.761" level="INFO">
An error occurred (500) when calling the CreateBucket operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:47:54.761" starttime="20191025 23:47:54.759"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:47:54.762" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191025 23:47:54.763" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191025 23:47:54.763" starttime="20191025 23:47:54.762"></status>
</kw>
<status status="FAIL" endtime="20191025 23:47:54.764" starttime="20191025 23:47:46.472"></status>
</kw>
<status status="FAIL" endtime="20191025 23:47:54.764" starttime="20191025 23:47:46.471"></status>
</kw>
<status status="FAIL" endtime="20191025 23:47:54.765" starttime="20191025 23:47:46.467"></status>
</kw>
<status status="FAIL" endtime="20191025 23:47:54.765" starttime="20191025 23:47:46.466"></status>
</kw>
<status status="FAIL" endtime="20191025 23:47:54.765" starttime="20191025 23:47:41.032"></status>
</kw>
<status status="FAIL" endtime="20191025 23:47:54.766" critical="yes" starttime="20191025 23:47:41.031">Setup failed:
255 != 0</status>
</test>
<test id="s1-s6-t2" name="Copy Object Where Bucket is not available">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:47:54.773" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:47:54.779" level="INFO">${rc} = 1</msg>
<msg timestamp="20191025 23:47:54.780" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191025 23:47:54.780" starttime="20191025 23:47:54.770"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191025 23:47:54.781" starttime="20191025 23:47:54.780"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:47:54.784" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:47:54.972" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:47:54.972" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191025 23:47:54.972" starttime="20191025 23:47:54.782"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:47:54.978" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:47:55.430" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:47:55.430" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: mirror.sfo12.us.leaseweb.net
 * upd...</msg>
<status status="PASS" endtime="20191025 23:47:55.430" starttime="20191025 23:47:54.976"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:47:55.432" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: mirror.sfo12.us.leaseweb.net
 * updates: mirror.sfo12.us.leaseweb.net
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191025 23:47:55.432" starttime="20191025 23:47:55.431"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:47:55.433" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:47:55.433" starttime="20191025 23:47:55.432"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:55.433" starttime="20191025 23:47:54.975"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:55.434" starttime="20191025 23:47:54.974"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:55.434" starttime="20191025 23:47:54.973"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:55.434" starttime="20191025 23:47:54.769"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:55.434" starttime="20191025 23:47:54.769"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:47:55.440" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:47:55.445" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:47:55.445" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191025 23:47:55.445" starttime="20191025 23:47:55.438"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:47:55.447" level="INFO">s3g</msg>
<status status="PASS" endtime="20191025 23:47:55.448" starttime="20191025 23:47:55.446"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:47:55.449" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:47:55.449" starttime="20191025 23:47:55.448"></status>
</kw>
<msg timestamp="20191025 23:47:55.450" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191025 23:47:55.450" starttime="20191025 23:47:55.437"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191025 23:47:55.452" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:47:55.452" starttime="20191025 23:47:55.450"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:47:55.460" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:47:55.472" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:47:55.472" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:47:55.472" starttime="20191025 23:47:55.456"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:47:55.474" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:47:55.474" starttime="20191025 23:47:55.473"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:47:55.475" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:47:55.475" starttime="20191025 23:47:55.474"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:55.476" starttime="20191025 23:47:55.454"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:55.476" starttime="20191025 23:47:55.452"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:55.476" starttime="20191025 23:47:55.436"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:55.476" starttime="20191025 23:47:55.436"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:47:55.481" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:47:58.010" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:47:58.010" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:47:58.010" starttime="20191025 23:47:55.479"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:47:58.012" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
awsAccessKey=testuser/s3g@EXAMPLE.COM
awsSecret=bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676</msg>
<status status="PASS" endtime="20191025 23:47:58.012" starttime="20191025 23:47:58.011"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:47:58.012" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:47:58.012" starttime="20191025 23:47:58.012"></status>
</kw>
<msg timestamp="20191025 23:47:58.013" level="INFO">${result} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:47:58.013" starttime="20191025 23:47:55.478"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsAccessKey=).*</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:47:58.014" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:47:58.014" starttime="20191025 23:47:58.013"></status>
</kw>
<kw name="Get Variable Value" library="BuiltIn">
<doc>Returns variable value or ``default`` if the variable does not exist.</doc>
<arguments>
<arg>${accessKey}</arg>
<arg>sdsdasaasdasd</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:47:58.014" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:47:58.015" starttime="20191025 23:47:58.014"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsSecret=).*</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:47:58.015" level="INFO">${secret} = [u'bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676']</msg>
<status status="PASS" endtime="20191025 23:47:58.015" starttime="20191025 23:47:58.015"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${accessKey[0]}</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:47:58.016" level="INFO">${accessKey} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:47:58.016" starttime="20191025 23:47:58.016"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${secret[0]}</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:47:58.017" level="INFO">${secret} = bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676</msg>
<status status="PASS" endtime="20191025 23:47:58.017" starttime="20191025 23:47:58.016"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set default.s3.signature_version s3v4</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:47:58.019" level="INFO">Running command 'aws configure set default.s3.signature_version s3v4 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:47:58.482" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:47:58.482" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:47:58.482" starttime="20191025 23:47:58.018"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:47:58.484" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:47:58.484" starttime="20191025 23:47:58.483"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:47:58.485" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:47:58.486" starttime="20191025 23:47:58.485"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:58.486" starttime="20191025 23:47:58.017"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_access_key_id ${accessKey}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:47:58.490" level="INFO">Running command 'aws configure set aws_access_key_id testuser/s3g@EXAMPLE.COM 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:47:58.903" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:47:58.903" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:47:58.903" starttime="20191025 23:47:58.488"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:47:58.905" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:47:58.906" starttime="20191025 23:47:58.904"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:47:58.907" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:47:58.907" starttime="20191025 23:47:58.906"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:58.907" starttime="20191025 23:47:58.486"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_secret_access_key ${secret}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:47:58.911" level="INFO">Running command 'aws configure set aws_secret_access_key bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:47:59.369" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:47:59.369" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:47:59.369" starttime="20191025 23:47:58.909"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:47:59.371" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:47:59.371" starttime="20191025 23:47:59.370"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:47:59.372" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:47:59.373" starttime="20191025 23:47:59.372"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:59.373" starttime="20191025 23:47:58.908"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set region us-west-1</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:47:59.377" level="INFO">Running command 'aws configure set region us-west-1 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:47:59.913" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:47:59.913" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:47:59.913" starttime="20191025 23:47:59.374"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:47:59.915" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:47:59.915" starttime="20191025 23:47:59.914"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:47:59.916" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:47:59.918" starttime="20191025 23:47:59.916"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:59.918" starttime="20191025 23:47:59.373"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:59.919" starttime="20191025 23:47:55.478"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:59.919" starttime="20191025 23:47:55.477"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'false'</arg>
<arg>Setup dummy credentials for S3</arg>
</arguments>
<status status="PASS" endtime="20191025 23:47:59.920" starttime="20191025 23:47:59.919"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:59.920" starttime="20191025 23:47:55.435"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:59.921" starttime="20191025 23:47:55.434"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${BUCKET}' == 'generated'</arg>
<arg>Create bucket</arg>
</arguments>
<status status="PASS" endtime="20191025 23:47:59.922" starttime="20191025 23:47:59.921"></status>
</kw>
<status status="PASS" endtime="20191025 23:47:59.922" starttime="20191025 23:47:54.768"></status>
</kw>
<kw name="Execute AWSS3APICli and checkrc" library="commonawslib">
<arguments>
<arg>copy-object --bucket dfdfdfdfdfnonexistent --key copyobject/f1 --copy-source ${BUCKET}/copyobject/f1</arg>
<arg>255</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Execute and checkrc" library="commonlib">
<arguments>
<arg>aws s3api --endpoint-url ${ENDPOINT_URL} ${command}</arg>
<arg>${expected_error_code}</arg>
</arguments>
<assign>
<var>${output}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:47:59.928" level="INFO">Running command 'aws s3api --endpoint-url http://s3g:9878 copy-object --bucket dfdfdfdfdfnonexistent --key copyobject/f1 --copy-source bucket-74397/copyobject/f1 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:48:12.179" level="INFO">${rc} = 255</msg>
<msg timestamp="20191025 23:48:12.179" level="INFO">${output} = 
An error occurred (500) when calling the CopyObject operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:48:12.179" starttime="20191025 23:47:59.925"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:48:12.181" level="INFO">
An error occurred (500) when calling the CopyObject operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:48:12.181" starttime="20191025 23:48:12.180"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
</arguments>
<msg timestamp="20191025 23:48:12.183" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:48:12.183" starttime="20191025 23:48:12.182"></status>
</kw>
<msg timestamp="20191025 23:48:12.184" level="INFO">${output} = 
An error occurred (500) when calling the CopyObject operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:48:12.184" starttime="20191025 23:47:59.924"></status>
</kw>
<msg timestamp="20191025 23:48:12.184" level="INFO">${result} = 
An error occurred (500) when calling the CopyObject operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:48:12.185" starttime="20191025 23:47:59.923"></status>
</kw>
<kw name="Should Contain" library="BuiltIn">
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<arguments>
<arg>${result}</arg>
<arg>NoSuchBucket</arg>
</arguments>
<msg timestamp="20191025 23:48:12.186" level="FAIL">'
An error occurred (500) when calling the CopyObject operation (reached max retries: 4): Internal Server Error' does not contain 'NoSuchBucket'</msg>
<status status="FAIL" endtime="20191025 23:48:12.186" starttime="20191025 23:48:12.185"></status>
</kw>
<status status="FAIL" endtime="20191025 23:48:12.187" critical="yes" starttime="20191025 23:47:54.767">'
An error occurred (500) when calling the CopyObject operation (reached max retries: 4): Internal Server Error' does not contain 'NoSuchBucket'</status>
</test>
<test id="s1-s6-t3" name="Copy Object Where both source and dest are same with change to storageclass">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:48:12.194" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:48:12.202" level="INFO">${rc} = 1</msg>
<msg timestamp="20191025 23:48:12.202" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191025 23:48:12.202" starttime="20191025 23:48:12.192"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191025 23:48:12.204" starttime="20191025 23:48:12.203"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:48:12.205" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:48:12.403" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:48:12.403" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191025 23:48:12.403" starttime="20191025 23:48:12.204"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:48:12.409" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:48:12.977" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:48:12.977" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: mirror.sfo12.us.leaseweb.net
 * upd...</msg>
<status status="PASS" endtime="20191025 23:48:12.977" starttime="20191025 23:48:12.407"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:48:12.979" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: mirror.sfo12.us.leaseweb.net
 * updates: mirror.sfo12.us.leaseweb.net
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191025 23:48:12.980" starttime="20191025 23:48:12.978"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:48:12.981" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:48:12.981" starttime="20191025 23:48:12.980"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:12.982" starttime="20191025 23:48:12.406"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:12.982" starttime="20191025 23:48:12.405"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:12.982" starttime="20191025 23:48:12.404"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:12.982" starttime="20191025 23:48:12.191"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:12.983" starttime="20191025 23:48:12.190"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:48:12.991" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:48:12.998" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:48:12.998" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191025 23:48:12.998" starttime="20191025 23:48:12.988"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:48:13.000" level="INFO">s3g</msg>
<status status="PASS" endtime="20191025 23:48:13.000" starttime="20191025 23:48:12.999"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:48:13.001" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:48:13.001" starttime="20191025 23:48:13.000"></status>
</kw>
<msg timestamp="20191025 23:48:13.002" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191025 23:48:13.002" starttime="20191025 23:48:12.987"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191025 23:48:13.003" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:48:13.004" starttime="20191025 23:48:13.002"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:48:13.008" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:48:13.025" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:48:13.026" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:48:13.026" starttime="20191025 23:48:13.006"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:48:13.028" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:48:13.028" starttime="20191025 23:48:13.027"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:48:13.029" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:48:13.029" starttime="20191025 23:48:13.028"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:13.030" starttime="20191025 23:48:13.005"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:13.030" starttime="20191025 23:48:13.004"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:13.030" starttime="20191025 23:48:12.986"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:13.030" starttime="20191025 23:48:12.985"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:48:13.036" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:48:15.608" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:48:15.608" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:48:15.608" starttime="20191025 23:48:13.034"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:48:15.610" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
awsAccessKey=testuser/s3g@EXAMPLE.COM
awsSecret=bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676</msg>
<status status="PASS" endtime="20191025 23:48:15.610" starttime="20191025 23:48:15.609"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:48:15.611" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:48:15.612" starttime="20191025 23:48:15.611"></status>
</kw>
<msg timestamp="20191025 23:48:15.612" level="INFO">${result} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:48:15.613" starttime="20191025 23:48:13.033"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsAccessKey=).*</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:48:15.614" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:48:15.614" starttime="20191025 23:48:15.613"></status>
</kw>
<kw name="Get Variable Value" library="BuiltIn">
<doc>Returns variable value or ``default`` if the variable does not exist.</doc>
<arguments>
<arg>${accessKey}</arg>
<arg>sdsdasaasdasd</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:48:15.615" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:48:15.615" starttime="20191025 23:48:15.614"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsSecret=).*</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:48:15.617" level="INFO">${secret} = [u'bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676']</msg>
<status status="PASS" endtime="20191025 23:48:15.617" starttime="20191025 23:48:15.616"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${accessKey[0]}</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:48:15.618" level="INFO">${accessKey} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:48:15.618" starttime="20191025 23:48:15.617"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${secret[0]}</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:48:15.619" level="INFO">${secret} = bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676</msg>
<status status="PASS" endtime="20191025 23:48:15.619" starttime="20191025 23:48:15.618"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set default.s3.signature_version s3v4</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:48:15.623" level="INFO">Running command 'aws configure set default.s3.signature_version s3v4 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:48:16.088" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:48:16.089" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:48:16.089" starttime="20191025 23:48:15.621"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:48:16.091" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:48:16.091" starttime="20191025 23:48:16.090"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:48:16.092" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:48:16.092" starttime="20191025 23:48:16.091"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:16.093" starttime="20191025 23:48:15.620"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_access_key_id ${accessKey}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:48:16.097" level="INFO">Running command 'aws configure set aws_access_key_id testuser/s3g@EXAMPLE.COM 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:48:16.640" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:48:16.641" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:48:16.641" starttime="20191025 23:48:16.094"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:48:16.643" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:48:16.644" starttime="20191025 23:48:16.642"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:48:16.645" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:48:16.645" starttime="20191025 23:48:16.644"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:16.646" starttime="20191025 23:48:16.093"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_secret_access_key ${secret}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:48:16.649" level="INFO">Running command 'aws configure set aws_secret_access_key bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:48:17.149" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:48:17.149" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:48:17.149" starttime="20191025 23:48:16.647"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:48:17.151" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:48:17.151" starttime="20191025 23:48:17.150"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:48:17.152" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:48:17.152" starttime="20191025 23:48:17.152"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:17.153" starttime="20191025 23:48:16.646"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set region us-west-1</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:48:17.156" level="INFO">Running command 'aws configure set region us-west-1 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:48:17.694" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:48:17.695" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:48:17.695" starttime="20191025 23:48:17.154"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:48:17.697" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:48:17.697" starttime="20191025 23:48:17.696"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:48:17.698" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:48:17.698" starttime="20191025 23:48:17.697"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:17.699" starttime="20191025 23:48:17.153"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:17.699" starttime="20191025 23:48:13.032"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:17.700" starttime="20191025 23:48:13.031"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'false'</arg>
<arg>Setup dummy credentials for S3</arg>
</arguments>
<status status="PASS" endtime="20191025 23:48:17.701" starttime="20191025 23:48:17.700"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:17.701" starttime="20191025 23:48:12.984"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:17.702" starttime="20191025 23:48:12.983"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${BUCKET}' == 'generated'</arg>
<arg>Create bucket</arg>
</arguments>
<status status="PASS" endtime="20191025 23:48:17.703" starttime="20191025 23:48:17.702"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:17.703" starttime="20191025 23:48:12.189"></status>
</kw>
<kw name="Execute AWSS3APICli" library="commonawslib">
<arguments>
<arg>copy-object --storage-class REDUCED_REDUNDANCY --bucket ${DESTBUCKET} --key copyobject/f1 --copy-source ${DESTBUCKET}/copyobject/f1</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws s3api --endpoint-url ${ENDPOINT_URL} ${command}</arg>
</arguments>
<assign>
<var>${output}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:48:17.708" level="INFO">Running command 'aws s3api --endpoint-url http://s3g:9878 copy-object --storage-class REDUCED_REDUNDANCY --bucket generated1 --key copyobject/f1 --copy-source generated1/copyobject/f1 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:48:18.437" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:48:18.437" level="INFO">${output} = {
    "CopyObjectResult": {
        "LastModified": "2019-10-25T23:48:18.330Z", 
        "ETag": "9e594766-ee4a-4225-932b-3c3cfdd4ca59"
    }
}</msg>
<status status="PASS" endtime="20191025 23:48:18.437" starttime="20191025 23:48:17.706"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:48:18.439" level="INFO">{
    "CopyObjectResult": {
        "LastModified": "2019-10-25T23:48:18.330Z", 
        "ETag": "9e594766-ee4a-4225-932b-3c3cfdd4ca59"
    }
}</msg>
<status status="PASS" endtime="20191025 23:48:18.439" starttime="20191025 23:48:18.438"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:48:18.440" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:48:18.440" starttime="20191025 23:48:18.439"></status>
</kw>
<msg timestamp="20191025 23:48:18.441" level="INFO">${output} = {
    "CopyObjectResult": {
        "LastModified": "2019-10-25T23:48:18.330Z", 
        "ETag": "9e594766-ee4a-4225-932b-3c3cfdd4ca59"
    }
}</msg>
<status status="PASS" endtime="20191025 23:48:18.441" starttime="20191025 23:48:17.705"></status>
</kw>
<msg timestamp="20191025 23:48:18.441" level="INFO">${result} = {
    "CopyObjectResult": {
        "LastModified": "2019-10-25T23:48:18.330Z", 
        "ETag": "9e594766-ee4a-4225-932b-3c3cfdd4ca59"
    }
}</msg>
<status status="PASS" endtime="20191025 23:48:18.441" starttime="20191025 23:48:17.704"></status>
</kw>
<kw name="Should Contain" library="BuiltIn">
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<arguments>
<arg>${result}</arg>
<arg>ETag</arg>
</arguments>
<status status="PASS" endtime="20191025 23:48:18.442" starttime="20191025 23:48:18.442"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:18.443" critical="yes" starttime="20191025 23:48:12.188"></status>
</test>
<test id="s1-s6-t4" name="Copy Object Where Key not available">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:48:18.449" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:48:18.455" level="INFO">${rc} = 1</msg>
<msg timestamp="20191025 23:48:18.456" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191025 23:48:18.456" starttime="20191025 23:48:18.447"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191025 23:48:18.458" starttime="20191025 23:48:18.457"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:48:18.461" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:48:18.637" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:48:18.637" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191025 23:48:18.637" starttime="20191025 23:48:18.458"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:48:18.643" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:48:19.186" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:48:19.187" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: mirror.sfo12.us.leaseweb.net
 * upd...</msg>
<status status="PASS" endtime="20191025 23:48:19.187" starttime="20191025 23:48:18.641"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:48:19.188" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: mirror.sfo12.us.leaseweb.net
 * updates: mirror.sfo12.us.leaseweb.net
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191025 23:48:19.189" starttime="20191025 23:48:19.187"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:48:19.189" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:48:19.190" starttime="20191025 23:48:19.189"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:19.190" starttime="20191025 23:48:18.640"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:19.190" starttime="20191025 23:48:18.639"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:19.190" starttime="20191025 23:48:18.638"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:19.191" starttime="20191025 23:48:18.446"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:19.191" starttime="20191025 23:48:18.445"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:48:19.198" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:48:19.205" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:48:19.205" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191025 23:48:19.205" starttime="20191025 23:48:19.196"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:48:19.207" level="INFO">s3g</msg>
<status status="PASS" endtime="20191025 23:48:19.207" starttime="20191025 23:48:19.206"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:48:19.208" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:48:19.208" starttime="20191025 23:48:19.207"></status>
</kw>
<msg timestamp="20191025 23:48:19.209" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191025 23:48:19.209" starttime="20191025 23:48:19.194"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191025 23:48:19.210" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:48:19.211" starttime="20191025 23:48:19.209"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:48:19.215" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:48:19.228" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:48:19.229" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:48:19.229" starttime="20191025 23:48:19.213"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:48:19.230" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:48:19.231" starttime="20191025 23:48:19.230"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:48:19.231" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:48:19.232" starttime="20191025 23:48:19.231"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:19.232" starttime="20191025 23:48:19.212"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:19.232" starttime="20191025 23:48:19.211"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:19.233" starttime="20191025 23:48:19.193"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:19.233" starttime="20191025 23:48:19.193"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:48:19.238" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:48:21.902" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:48:21.902" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:48:21.902" starttime="20191025 23:48:19.236"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:48:21.903" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
awsAccessKey=testuser/s3g@EXAMPLE.COM
awsSecret=bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676</msg>
<status status="PASS" endtime="20191025 23:48:21.903" starttime="20191025 23:48:21.902"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:48:21.904" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:48:21.904" starttime="20191025 23:48:21.903"></status>
</kw>
<msg timestamp="20191025 23:48:21.904" level="INFO">${result} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:48:21.905" starttime="20191025 23:48:19.235"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsAccessKey=).*</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:48:21.906" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:48:21.906" starttime="20191025 23:48:21.905"></status>
</kw>
<kw name="Get Variable Value" library="BuiltIn">
<doc>Returns variable value or ``default`` if the variable does not exist.</doc>
<arguments>
<arg>${accessKey}</arg>
<arg>sdsdasaasdasd</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:48:21.907" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:48:21.907" starttime="20191025 23:48:21.906"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsSecret=).*</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:48:21.907" level="INFO">${secret} = [u'bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676']</msg>
<status status="PASS" endtime="20191025 23:48:21.907" starttime="20191025 23:48:21.907"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${accessKey[0]}</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:48:21.908" level="INFO">${accessKey} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:48:21.908" starttime="20191025 23:48:21.908"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${secret[0]}</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:48:21.909" level="INFO">${secret} = bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676</msg>
<status status="PASS" endtime="20191025 23:48:21.909" starttime="20191025 23:48:21.908"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set default.s3.signature_version s3v4</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:48:21.911" level="INFO">Running command 'aws configure set default.s3.signature_version s3v4 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:48:22.364" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:48:22.364" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:48:22.364" starttime="20191025 23:48:21.910"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:48:22.366" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:48:22.366" starttime="20191025 23:48:22.365"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:48:22.367" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:48:22.368" starttime="20191025 23:48:22.367"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:22.368" starttime="20191025 23:48:21.909"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_access_key_id ${accessKey}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:48:22.372" level="INFO">Running command 'aws configure set aws_access_key_id testuser/s3g@EXAMPLE.COM 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:48:22.852" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:48:22.852" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:48:22.852" starttime="20191025 23:48:22.369"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:48:22.854" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:48:22.854" starttime="20191025 23:48:22.853"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:48:22.855" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:48:22.856" starttime="20191025 23:48:22.855"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:22.856" starttime="20191025 23:48:22.368"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_secret_access_key ${secret}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:48:22.861" level="INFO">Running command 'aws configure set aws_secret_access_key bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:48:23.374" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:48:23.374" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:48:23.375" starttime="20191025 23:48:22.858"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:48:23.376" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:48:23.377" starttime="20191025 23:48:23.375"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:48:23.378" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:48:23.378" starttime="20191025 23:48:23.377"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:23.378" starttime="20191025 23:48:22.856"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set region us-west-1</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:48:23.382" level="INFO">Running command 'aws configure set region us-west-1 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:48:23.897" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:48:23.897" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:48:23.897" starttime="20191025 23:48:23.380"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:48:23.899" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:48:23.899" starttime="20191025 23:48:23.898"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:48:23.900" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:48:23.901" starttime="20191025 23:48:23.900"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:23.901" starttime="20191025 23:48:23.379"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:23.902" starttime="20191025 23:48:19.234"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:23.902" starttime="20191025 23:48:19.233"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'false'</arg>
<arg>Setup dummy credentials for S3</arg>
</arguments>
<status status="PASS" endtime="20191025 23:48:23.903" starttime="20191025 23:48:23.902"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:23.904" starttime="20191025 23:48:19.192"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:23.904" starttime="20191025 23:48:19.191"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${BUCKET}' == 'generated'</arg>
<arg>Create bucket</arg>
</arguments>
<status status="PASS" endtime="20191025 23:48:23.905" starttime="20191025 23:48:23.904"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:23.905" starttime="20191025 23:48:18.445"></status>
</kw>
<kw name="Execute AWSS3APICli and checkrc" library="commonawslib">
<arguments>
<arg>copy-object --bucket ${DESTBUCKET} --key copyobject/f1 --copy-source ${BUCKET}/nonnonexistentkey</arg>
<arg>255</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Execute and checkrc" library="commonlib">
<arguments>
<arg>aws s3api --endpoint-url ${ENDPOINT_URL} ${command}</arg>
<arg>${expected_error_code}</arg>
</arguments>
<assign>
<var>${output}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:48:23.911" level="INFO">Running command 'aws s3api --endpoint-url http://s3g:9878 copy-object --bucket generated1 --key copyobject/f1 --copy-source bucket-74397/nonnonexistentkey 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:48:31.090" level="INFO">${rc} = 255</msg>
<msg timestamp="20191025 23:48:31.090" level="INFO">${output} = 
An error occurred (500) when calling the CopyObject operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:48:31.090" starttime="20191025 23:48:23.908"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:48:31.092" level="INFO">
An error occurred (500) when calling the CopyObject operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:48:31.092" starttime="20191025 23:48:31.091"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
</arguments>
<msg timestamp="20191025 23:48:31.093" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:48:31.094" starttime="20191025 23:48:31.093"></status>
</kw>
<msg timestamp="20191025 23:48:31.094" level="INFO">${output} = 
An error occurred (500) when calling the CopyObject operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:48:31.095" starttime="20191025 23:48:23.907"></status>
</kw>
<msg timestamp="20191025 23:48:31.095" level="INFO">${result} = 
An error occurred (500) when calling the CopyObject operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:48:31.095" starttime="20191025 23:48:23.906"></status>
</kw>
<kw name="Should Contain" library="BuiltIn">
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<arguments>
<arg>${result}</arg>
<arg>NoSuchKey</arg>
</arguments>
<msg timestamp="20191025 23:48:31.097" level="FAIL">'
An error occurred (500) when calling the CopyObject operation (reached max retries: 4): Internal Server Error' does not contain 'NoSuchKey'</msg>
<status status="FAIL" endtime="20191025 23:48:31.098" starttime="20191025 23:48:31.096"></status>
</kw>
<status status="FAIL" endtime="20191025 23:48:31.098" critical="yes" starttime="20191025 23:48:18.443">'
An error occurred (500) when calling the CopyObject operation (reached max retries: 4): Internal Server Error' does not contain 'NoSuchKey'</status>
</test>
<doc>S3 gateway test with aws cli</doc>
<status status="FAIL" endtime="20191025 23:48:31.101" starttime="20191025 23:47:41.020"></status>
</suite>
<suite source="/opt/hadoop/smoketest/s3/objectdelete.robot" id="s1-s7" name="Objectdelete">
<test id="s1-s7-t1" name="Delete file with s3api">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:48:31.135" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:48:31.142" level="INFO">${rc} = 1</msg>
<msg timestamp="20191025 23:48:31.142" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191025 23:48:31.143" starttime="20191025 23:48:31.132"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191025 23:48:31.144" starttime="20191025 23:48:31.143"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:48:31.147" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:48:31.333" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:48:31.333" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191025 23:48:31.334" starttime="20191025 23:48:31.145"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:48:31.340" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:48:31.835" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:48:31.836" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: mirror.sfo12.us.leaseweb.net
 * upd...</msg>
<status status="PASS" endtime="20191025 23:48:31.836" starttime="20191025 23:48:31.338"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:48:31.838" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: mirror.sfo12.us.leaseweb.net
 * updates: mirror.sfo12.us.leaseweb.net
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191025 23:48:31.838" starttime="20191025 23:48:31.837"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:48:31.839" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:48:31.839" starttime="20191025 23:48:31.838"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:31.840" starttime="20191025 23:48:31.337"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:31.840" starttime="20191025 23:48:31.336"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:31.841" starttime="20191025 23:48:31.335"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:31.841" starttime="20191025 23:48:31.130"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:31.841" starttime="20191025 23:48:31.130"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:48:31.849" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:48:31.856" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:48:31.856" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191025 23:48:31.856" starttime="20191025 23:48:31.846"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:48:31.858" level="INFO">s3g</msg>
<status status="PASS" endtime="20191025 23:48:31.858" starttime="20191025 23:48:31.857"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:48:31.859" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:48:31.859" starttime="20191025 23:48:31.858"></status>
</kw>
<msg timestamp="20191025 23:48:31.860" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191025 23:48:31.860" starttime="20191025 23:48:31.845"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191025 23:48:31.863" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:48:31.863" starttime="20191025 23:48:31.860"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:48:31.868" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:48:31.883" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:48:31.883" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:48:31.883" starttime="20191025 23:48:31.866"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:48:31.885" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:48:31.885" starttime="20191025 23:48:31.884"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:48:31.886" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:48:31.886" starttime="20191025 23:48:31.885"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:31.887" starttime="20191025 23:48:31.865"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:31.887" starttime="20191025 23:48:31.864"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:31.887" starttime="20191025 23:48:31.845"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:31.887" starttime="20191025 23:48:31.844"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:48:31.892" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:48:34.681" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:48:34.681" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:48:34.681" starttime="20191025 23:48:31.890"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:48:34.683" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
awsAccessKey=testuser/s3g@EXAMPLE.COM
awsSecret=bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676</msg>
<status status="PASS" endtime="20191025 23:48:34.683" starttime="20191025 23:48:34.682"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:48:34.685" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:48:34.685" starttime="20191025 23:48:34.683"></status>
</kw>
<msg timestamp="20191025 23:48:34.686" level="INFO">${result} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:48:34.686" starttime="20191025 23:48:31.889"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsAccessKey=).*</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:48:34.687" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:48:34.688" starttime="20191025 23:48:34.686"></status>
</kw>
<kw name="Get Variable Value" library="BuiltIn">
<doc>Returns variable value or ``default`` if the variable does not exist.</doc>
<arguments>
<arg>${accessKey}</arg>
<arg>sdsdasaasdasd</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:48:34.689" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:48:34.689" starttime="20191025 23:48:34.688"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsSecret=).*</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:48:34.690" level="INFO">${secret} = [u'bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676']</msg>
<status status="PASS" endtime="20191025 23:48:34.690" starttime="20191025 23:48:34.689"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${accessKey[0]}</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:48:34.692" level="INFO">${accessKey} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:48:34.692" starttime="20191025 23:48:34.691"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${secret[0]}</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:48:34.693" level="INFO">${secret} = bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676</msg>
<status status="PASS" endtime="20191025 23:48:34.693" starttime="20191025 23:48:34.692"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set default.s3.signature_version s3v4</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:48:34.697" level="INFO">Running command 'aws configure set default.s3.signature_version s3v4 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:48:35.188" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:48:35.188" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:48:35.188" starttime="20191025 23:48:34.694"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:48:35.189" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:48:35.189" starttime="20191025 23:48:35.189"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:48:35.190" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:48:35.190" starttime="20191025 23:48:35.190"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:35.191" starttime="20191025 23:48:34.694"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_access_key_id ${accessKey}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:48:35.194" level="INFO">Running command 'aws configure set aws_access_key_id testuser/s3g@EXAMPLE.COM 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:48:35.677" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:48:35.678" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:48:35.678" starttime="20191025 23:48:35.192"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:48:35.680" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:48:35.680" starttime="20191025 23:48:35.679"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:48:35.681" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:48:35.681" starttime="20191025 23:48:35.680"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:35.682" starttime="20191025 23:48:35.191"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_secret_access_key ${secret}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:48:35.686" level="INFO">Running command 'aws configure set aws_secret_access_key bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:48:36.128" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:48:36.129" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:48:36.129" starttime="20191025 23:48:35.683"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:48:36.131" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:48:36.131" starttime="20191025 23:48:36.130"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:48:36.132" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:48:36.133" starttime="20191025 23:48:36.132"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:36.133" starttime="20191025 23:48:35.682"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set region us-west-1</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:48:36.137" level="INFO">Running command 'aws configure set region us-west-1 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:48:36.682" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:48:36.683" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:48:36.683" starttime="20191025 23:48:36.134"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:48:36.684" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:48:36.685" starttime="20191025 23:48:36.683"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:48:36.685" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:48:36.686" starttime="20191025 23:48:36.685"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:36.686" starttime="20191025 23:48:36.134"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:36.687" starttime="20191025 23:48:31.889"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:36.687" starttime="20191025 23:48:31.888"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'false'</arg>
<arg>Setup dummy credentials for S3</arg>
</arguments>
<status status="PASS" endtime="20191025 23:48:36.688" starttime="20191025 23:48:36.687"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:36.688" starttime="20191025 23:48:31.843"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:36.688" starttime="20191025 23:48:31.842"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${BUCKET}' == 'generated'</arg>
<arg>Create bucket</arg>
</arguments>
<kw name="Create bucket" library="commonawslib">
<kw name="Generate Random String" library="String">
<doc>Generates a string with a desired ``length`` from the given ``chars``.</doc>
<arguments>
<arg>5</arg>
<arg>[NUMBERS]</arg>
</arguments>
<assign>
<var>${postfix}</var>
</assign>
<msg timestamp="20191025 23:48:36.691" level="INFO">${postfix} = 88408</msg>
<status status="PASS" endtime="20191025 23:48:36.691" starttime="20191025 23:48:36.690"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${BUCKET}</arg>
<arg>bucket-${postfix}</arg>
</arguments>
<msg timestamp="20191025 23:48:36.692" level="INFO">${BUCKET} = bucket-88408</msg>
<status status="PASS" endtime="20191025 23:48:36.693" starttime="20191025 23:48:36.692"></status>
</kw>
<kw name="Execute AWSS3APICli" library="commonawslib">
<arguments>
<arg>create-bucket --bucket ${BUCKET}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws s3api --endpoint-url ${ENDPOINT_URL} ${command}</arg>
</arguments>
<assign>
<var>${output}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:48:36.697" level="INFO">Running command 'aws s3api --endpoint-url http://s3g:9878 create-bucket --bucket bucket-88408 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:48:46.825" level="INFO">${rc} = 255</msg>
<msg timestamp="20191025 23:48:46.825" level="INFO">${output} = 
An error occurred (500) when calling the CreateBucket operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:48:46.825" starttime="20191025 23:48:36.694"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:48:46.826" level="INFO">
An error occurred (500) when calling the CreateBucket operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:48:46.827" starttime="20191025 23:48:46.825"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:48:46.828" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191025 23:48:46.828" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191025 23:48:46.828" starttime="20191025 23:48:46.827"></status>
</kw>
<status status="FAIL" endtime="20191025 23:48:46.829" starttime="20191025 23:48:36.694"></status>
</kw>
<status status="FAIL" endtime="20191025 23:48:46.829" starttime="20191025 23:48:36.693"></status>
</kw>
<status status="FAIL" endtime="20191025 23:48:46.829" starttime="20191025 23:48:36.690"></status>
</kw>
<status status="FAIL" endtime="20191025 23:48:46.829" starttime="20191025 23:48:36.689"></status>
</kw>
<status status="FAIL" endtime="20191025 23:48:46.830" starttime="20191025 23:48:31.129"></status>
</kw>
<status status="FAIL" endtime="20191025 23:48:46.830" critical="yes" starttime="20191025 23:48:31.127">Setup failed:
255 != 0</status>
</test>
<test id="s1-s7-t2" name="Delete file with s3api, file doesn't exist">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:48:46.835" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:48:46.842" level="INFO">${rc} = 1</msg>
<msg timestamp="20191025 23:48:46.842" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191025 23:48:46.842" starttime="20191025 23:48:46.833"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191025 23:48:46.844" starttime="20191025 23:48:46.843"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:48:46.847" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:48:47.029" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:48:47.029" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191025 23:48:47.030" starttime="20191025 23:48:46.845"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:48:47.035" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:48:47.545" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:48:47.545" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: mirror.sfo12.us.leaseweb.net
 * upd...</msg>
<status status="PASS" endtime="20191025 23:48:47.545" starttime="20191025 23:48:47.033"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:48:47.546" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: mirror.sfo12.us.leaseweb.net
 * updates: mirror.sfo12.us.leaseweb.net
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191025 23:48:47.546" starttime="20191025 23:48:47.545"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:48:47.547" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:48:47.547" starttime="20191025 23:48:47.546"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:47.547" starttime="20191025 23:48:47.033"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:47.547" starttime="20191025 23:48:47.032"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:47.548" starttime="20191025 23:48:47.030"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:47.548" starttime="20191025 23:48:46.832"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:47.548" starttime="20191025 23:48:46.832"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:48:47.552" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:48:47.558" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:48:47.558" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191025 23:48:47.558" starttime="20191025 23:48:47.551"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:48:47.560" level="INFO">s3g</msg>
<status status="PASS" endtime="20191025 23:48:47.560" starttime="20191025 23:48:47.559"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:48:47.561" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:48:47.561" starttime="20191025 23:48:47.560"></status>
</kw>
<msg timestamp="20191025 23:48:47.561" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191025 23:48:47.561" starttime="20191025 23:48:47.550"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191025 23:48:47.562" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:48:47.562" starttime="20191025 23:48:47.562"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:48:47.566" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:48:47.584" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:48:47.584" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:48:47.584" starttime="20191025 23:48:47.564"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:48:47.585" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:48:47.585" starttime="20191025 23:48:47.584"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:48:47.585" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:48:47.586" starttime="20191025 23:48:47.585"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:47.586" starttime="20191025 23:48:47.563"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:47.586" starttime="20191025 23:48:47.563"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:47.586" starttime="20191025 23:48:47.550"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:47.586" starttime="20191025 23:48:47.549"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:48:47.589" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:48:50.236" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:48:50.236" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:48:50.236" starttime="20191025 23:48:47.588"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:48:50.238" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
awsAccessKey=testuser/s3g@EXAMPLE.COM
awsSecret=bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676</msg>
<status status="PASS" endtime="20191025 23:48:50.238" starttime="20191025 23:48:50.237"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:48:50.238" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:48:50.239" starttime="20191025 23:48:50.238"></status>
</kw>
<msg timestamp="20191025 23:48:50.239" level="INFO">${result} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:48:50.239" starttime="20191025 23:48:47.587"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsAccessKey=).*</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:48:50.240" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:48:50.240" starttime="20191025 23:48:50.239"></status>
</kw>
<kw name="Get Variable Value" library="BuiltIn">
<doc>Returns variable value or ``default`` if the variable does not exist.</doc>
<arguments>
<arg>${accessKey}</arg>
<arg>sdsdasaasdasd</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:48:50.241" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:48:50.241" starttime="20191025 23:48:50.240"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsSecret=).*</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:48:50.241" level="INFO">${secret} = [u'bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676']</msg>
<status status="PASS" endtime="20191025 23:48:50.241" starttime="20191025 23:48:50.241"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${accessKey[0]}</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:48:50.242" level="INFO">${accessKey} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:48:50.242" starttime="20191025 23:48:50.242"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${secret[0]}</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:48:50.243" level="INFO">${secret} = bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676</msg>
<status status="PASS" endtime="20191025 23:48:50.243" starttime="20191025 23:48:50.242"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set default.s3.signature_version s3v4</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:48:50.245" level="INFO">Running command 'aws configure set default.s3.signature_version s3v4 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:48:50.773" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:48:50.774" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:48:50.774" starttime="20191025 23:48:50.244"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:48:50.775" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:48:50.775" starttime="20191025 23:48:50.774"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:48:50.776" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:48:50.776" starttime="20191025 23:48:50.775"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:50.776" starttime="20191025 23:48:50.243"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_access_key_id ${accessKey}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:48:50.779" level="INFO">Running command 'aws configure set aws_access_key_id testuser/s3g@EXAMPLE.COM 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:48:51.295" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:48:51.295" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:48:51.296" starttime="20191025 23:48:50.777"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:48:51.297" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:48:51.297" starttime="20191025 23:48:51.296"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:48:51.298" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:48:51.298" starttime="20191025 23:48:51.297"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:51.299" starttime="20191025 23:48:50.777"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_secret_access_key ${secret}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:48:51.302" level="INFO">Running command 'aws configure set aws_secret_access_key bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:48:51.792" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:48:51.793" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:48:51.793" starttime="20191025 23:48:51.300"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:48:51.795" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:48:51.795" starttime="20191025 23:48:51.794"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:48:51.796" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:48:51.796" starttime="20191025 23:48:51.795"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:51.797" starttime="20191025 23:48:51.299"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set region us-west-1</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:48:51.801" level="INFO">Running command 'aws configure set region us-west-1 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:48:52.240" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:48:52.241" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:48:52.241" starttime="20191025 23:48:51.798"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:48:52.243" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:48:52.243" starttime="20191025 23:48:52.242"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:48:52.244" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:48:52.245" starttime="20191025 23:48:52.243"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:52.246" starttime="20191025 23:48:51.797"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:52.246" starttime="20191025 23:48:47.587"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:52.246" starttime="20191025 23:48:47.586"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'false'</arg>
<arg>Setup dummy credentials for S3</arg>
</arguments>
<status status="PASS" endtime="20191025 23:48:52.247" starttime="20191025 23:48:52.247"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:52.248" starttime="20191025 23:48:47.549"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:52.248" starttime="20191025 23:48:47.548"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${BUCKET}' == 'generated'</arg>
<arg>Create bucket</arg>
</arguments>
<status status="PASS" endtime="20191025 23:48:52.249" starttime="20191025 23:48:52.248"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:52.249" starttime="20191025 23:48:46.831"></status>
</kw>
<kw name="Execute AWSS3Cli" library="commonawslib">
<arguments>
<arg>ls s3://${BUCKET}/</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws s3 --endpoint-url ${ENDPOINT_URL} ${command}</arg>
</arguments>
<assign>
<var>${output}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:48:52.254" level="INFO">Running command 'aws s3 --endpoint-url http://s3g:9878 ls s3://bucket-88408/ 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:48:57.026" level="INFO">${rc} = 255</msg>
<msg timestamp="20191025 23:48:57.027" level="INFO">${output} = 
An error occurred (500) when calling the ListObjects operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:48:57.027" starttime="20191025 23:48:52.252"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:48:57.029" level="INFO">
An error occurred (500) when calling the ListObjects operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:48:57.029" starttime="20191025 23:48:57.028"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:48:57.030" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191025 23:48:57.031" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191025 23:48:57.031" starttime="20191025 23:48:57.030"></status>
</kw>
<status status="FAIL" endtime="20191025 23:48:57.032" starttime="20191025 23:48:52.251"></status>
</kw>
<status status="FAIL" endtime="20191025 23:48:57.032" starttime="20191025 23:48:52.250"></status>
</kw>
<status status="FAIL" endtime="20191025 23:48:57.033" critical="yes" starttime="20191025 23:48:46.831">255 != 0</status>
</test>
<test id="s1-s7-t3" name="Delete dir with s3api">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:48:57.040" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:48:57.048" level="INFO">${rc} = 1</msg>
<msg timestamp="20191025 23:48:57.048" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191025 23:48:57.048" starttime="20191025 23:48:57.037"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191025 23:48:57.050" starttime="20191025 23:48:57.049"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:48:57.053" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:48:57.251" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:48:57.251" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191025 23:48:57.251" starttime="20191025 23:48:57.051"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:48:57.258" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:48:57.727" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:48:57.728" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: mirror.sfo12.us.leaseweb.net
 * upd...</msg>
<status status="PASS" endtime="20191025 23:48:57.728" starttime="20191025 23:48:57.256"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:48:57.729" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: mirror.sfo12.us.leaseweb.net
 * updates: mirror.sfo12.us.leaseweb.net
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191025 23:48:57.730" starttime="20191025 23:48:57.729"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:48:57.731" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:48:57.731" starttime="20191025 23:48:57.730"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:57.731" starttime="20191025 23:48:57.255"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:57.732" starttime="20191025 23:48:57.254"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:57.732" starttime="20191025 23:48:57.252"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:57.732" starttime="20191025 23:48:57.037"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:57.732" starttime="20191025 23:48:57.036"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:48:57.739" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:48:57.747" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:48:57.747" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191025 23:48:57.747" starttime="20191025 23:48:57.737"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:48:57.749" level="INFO">s3g</msg>
<status status="PASS" endtime="20191025 23:48:57.749" starttime="20191025 23:48:57.748"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:48:57.751" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:48:57.752" starttime="20191025 23:48:57.750"></status>
</kw>
<msg timestamp="20191025 23:48:57.752" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191025 23:48:57.752" starttime="20191025 23:48:57.736"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191025 23:48:57.754" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:48:57.754" starttime="20191025 23:48:57.753"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:48:57.759" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:48:57.775" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:48:57.775" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:48:57.775" starttime="20191025 23:48:57.757"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:48:57.777" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:48:57.777" starttime="20191025 23:48:57.776"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:48:57.778" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:48:57.778" starttime="20191025 23:48:57.777"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:57.779" starttime="20191025 23:48:57.755"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:57.779" starttime="20191025 23:48:57.754"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:57.779" starttime="20191025 23:48:57.735"></status>
</kw>
<status status="PASS" endtime="20191025 23:48:57.780" starttime="20191025 23:48:57.734"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:48:57.785" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:49:00.294" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:49:00.294" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:49:00.294" starttime="20191025 23:48:57.783"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:49:00.296" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
awsAccessKey=testuser/s3g@EXAMPLE.COM
awsSecret=bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676</msg>
<status status="PASS" endtime="20191025 23:49:00.296" starttime="20191025 23:49:00.295"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:49:00.297" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:49:00.297" starttime="20191025 23:49:00.297"></status>
</kw>
<msg timestamp="20191025 23:49:00.298" level="INFO">${result} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:49:00.298" starttime="20191025 23:48:57.782"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsAccessKey=).*</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:49:00.299" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:49:00.299" starttime="20191025 23:49:00.298"></status>
</kw>
<kw name="Get Variable Value" library="BuiltIn">
<doc>Returns variable value or ``default`` if the variable does not exist.</doc>
<arguments>
<arg>${accessKey}</arg>
<arg>sdsdasaasdasd</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:49:00.300" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:49:00.300" starttime="20191025 23:49:00.299"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsSecret=).*</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:49:00.301" level="INFO">${secret} = [u'bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676']</msg>
<status status="PASS" endtime="20191025 23:49:00.301" starttime="20191025 23:49:00.301"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${accessKey[0]}</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:49:00.302" level="INFO">${accessKey} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:49:00.302" starttime="20191025 23:49:00.302"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${secret[0]}</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:49:00.304" level="INFO">${secret} = bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676</msg>
<status status="PASS" endtime="20191025 23:49:00.304" starttime="20191025 23:49:00.303"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set default.s3.signature_version s3v4</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:49:00.307" level="INFO">Running command 'aws configure set default.s3.signature_version s3v4 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:49:00.733" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:49:00.734" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:49:00.734" starttime="20191025 23:49:00.305"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:49:00.736" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:49:00.736" starttime="20191025 23:49:00.735"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:49:00.737" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:49:00.738" starttime="20191025 23:49:00.737"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:00.738" starttime="20191025 23:49:00.304"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_access_key_id ${accessKey}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:49:00.742" level="INFO">Running command 'aws configure set aws_access_key_id testuser/s3g@EXAMPLE.COM 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:49:01.207" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:49:01.207" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:49:01.207" starttime="20191025 23:49:00.740"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:49:01.209" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:49:01.209" starttime="20191025 23:49:01.208"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:49:01.211" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:49:01.211" starttime="20191025 23:49:01.210"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:01.211" starttime="20191025 23:49:00.739"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_secret_access_key ${secret}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:49:01.215" level="INFO">Running command 'aws configure set aws_secret_access_key bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:49:01.653" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:49:01.653" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:49:01.653" starttime="20191025 23:49:01.213"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:49:01.655" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:49:01.655" starttime="20191025 23:49:01.654"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:49:01.657" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:49:01.657" starttime="20191025 23:49:01.655"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:01.658" starttime="20191025 23:49:01.212"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set region us-west-1</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:49:01.661" level="INFO">Running command 'aws configure set region us-west-1 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:49:02.093" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:49:02.093" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:49:02.093" starttime="20191025 23:49:01.659"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:49:02.094" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:49:02.094" starttime="20191025 23:49:02.093"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:49:02.095" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:49:02.095" starttime="20191025 23:49:02.095"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:02.096" starttime="20191025 23:49:01.658"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:02.096" starttime="20191025 23:48:57.781"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:02.096" starttime="20191025 23:48:57.780"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'false'</arg>
<arg>Setup dummy credentials for S3</arg>
</arguments>
<status status="PASS" endtime="20191025 23:49:02.097" starttime="20191025 23:49:02.096"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:02.097" starttime="20191025 23:48:57.734"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:02.097" starttime="20191025 23:48:57.733"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${BUCKET}' == 'generated'</arg>
<arg>Create bucket</arg>
</arguments>
<status status="PASS" endtime="20191025 23:49:02.098" starttime="20191025 23:49:02.098"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:02.098" starttime="20191025 23:48:57.035"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>date &gt; /tmp/testfile</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:49:02.101" level="INFO">Running command 'date &gt; /tmp/testfile'.</msg>
<msg timestamp="20191025 23:49:02.108" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:49:02.108" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:49:02.108" starttime="20191025 23:49:02.099"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:49:02.110" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:49:02.110" starttime="20191025 23:49:02.109"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:49:02.110" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:49:02.110" starttime="20191025 23:49:02.110"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:02.111" starttime="20191025 23:49:02.099"></status>
</kw>
<kw name="Execute AWSS3Cli" library="commonawslib">
<arguments>
<arg>cp /tmp/testfile s3://${BUCKET}/deletetestapidir/f1</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws s3 --endpoint-url ${ENDPOINT_URL} ${command}</arg>
</arguments>
<assign>
<var>${output}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:49:02.114" level="INFO">Running command 'aws s3 --endpoint-url http://s3g:9878 cp /tmp/testfile s3://bucket-88408/deletetestapidir/f1 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:49:06.645" level="INFO">${rc} = 1</msg>
<msg timestamp="20191025 23:49:06.645" level="INFO">${output} = Completed 29 Bytes/29 Bytes (7 Bytes/s) with 1 file(s) remainingupload failed: ../../tmp/testfile to s3://bucket-88408/deletetestapidir/f1 An error occurred (500) when calling the PutObject operation...</msg>
<status status="PASS" endtime="20191025 23:49:06.646" starttime="20191025 23:49:02.112"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:49:06.647" level="INFO">Completed 29 Bytes/29 Bytes (7 Bytes/s) with 1 file(s) remainingupload failed: ../../tmp/testfile to s3://bucket-88408/deletetestapidir/f1 An error occurred (500) when calling the PutObject operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:49:06.648" starttime="20191025 23:49:06.646"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:49:06.648" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191025 23:49:06.649" level="FAIL">1 != 0</msg>
<status status="FAIL" endtime="20191025 23:49:06.649" starttime="20191025 23:49:06.648"></status>
</kw>
<status status="FAIL" endtime="20191025 23:49:06.650" starttime="20191025 23:49:02.112"></status>
</kw>
<status status="FAIL" endtime="20191025 23:49:06.650" starttime="20191025 23:49:02.111"></status>
</kw>
<status status="FAIL" endtime="20191025 23:49:06.651" critical="yes" starttime="20191025 23:48:57.034">1 != 0</status>
</test>
<test id="s1-s7-t4" name="Delete file with s3api, file doesn't exist, prefix of a real file">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:49:06.657" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:49:06.666" level="INFO">${rc} = 1</msg>
<msg timestamp="20191025 23:49:06.666" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191025 23:49:06.666" starttime="20191025 23:49:06.654"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191025 23:49:06.668" starttime="20191025 23:49:06.667"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:49:06.671" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:49:06.896" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:49:06.897" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191025 23:49:06.897" starttime="20191025 23:49:06.669"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:49:06.904" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:49:07.365" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:49:07.365" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: mirror.sfo12.us.leaseweb.net
 * upd...</msg>
<status status="PASS" endtime="20191025 23:49:07.365" starttime="20191025 23:49:06.901"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:49:07.367" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: mirror.sfo12.us.leaseweb.net
 * updates: mirror.sfo12.us.leaseweb.net
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191025 23:49:07.367" starttime="20191025 23:49:07.366"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:49:07.368" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:49:07.369" starttime="20191025 23:49:07.368"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:07.369" starttime="20191025 23:49:06.900"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:07.369" starttime="20191025 23:49:06.899"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:07.370" starttime="20191025 23:49:06.898"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:07.370" starttime="20191025 23:49:06.654"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:07.370" starttime="20191025 23:49:06.653"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:49:07.378" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:49:07.385" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:49:07.385" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191025 23:49:07.386" starttime="20191025 23:49:07.376"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:49:07.387" level="INFO">s3g</msg>
<status status="PASS" endtime="20191025 23:49:07.387" starttime="20191025 23:49:07.386"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:49:07.388" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:49:07.389" starttime="20191025 23:49:07.388"></status>
</kw>
<msg timestamp="20191025 23:49:07.389" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191025 23:49:07.389" starttime="20191025 23:49:07.375"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191025 23:49:07.391" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:49:07.391" starttime="20191025 23:49:07.390"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:49:07.396" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:49:07.413" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:49:07.413" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:49:07.413" starttime="20191025 23:49:07.394"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:49:07.415" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:49:07.415" starttime="20191025 23:49:07.414"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:49:07.416" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:49:07.416" starttime="20191025 23:49:07.415"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:07.417" starttime="20191025 23:49:07.392"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:07.417" starttime="20191025 23:49:07.391"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:07.417" starttime="20191025 23:49:07.373"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:07.418" starttime="20191025 23:49:07.372"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:49:07.422" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:49:09.905" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:49:09.906" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:49:09.906" starttime="20191025 23:49:07.420"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:49:09.907" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
awsAccessKey=testuser/s3g@EXAMPLE.COM
awsSecret=bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676</msg>
<status status="PASS" endtime="20191025 23:49:09.908" starttime="20191025 23:49:09.906"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:49:09.908" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:49:09.909" starttime="20191025 23:49:09.908"></status>
</kw>
<msg timestamp="20191025 23:49:09.909" level="INFO">${result} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:49:09.909" starttime="20191025 23:49:07.419"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsAccessKey=).*</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:49:09.910" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:49:09.910" starttime="20191025 23:49:09.910"></status>
</kw>
<kw name="Get Variable Value" library="BuiltIn">
<doc>Returns variable value or ``default`` if the variable does not exist.</doc>
<arguments>
<arg>${accessKey}</arg>
<arg>sdsdasaasdasd</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:49:09.912" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:49:09.912" starttime="20191025 23:49:09.911"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsSecret=).*</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:49:09.913" level="INFO">${secret} = [u'bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676']</msg>
<status status="PASS" endtime="20191025 23:49:09.913" starttime="20191025 23:49:09.912"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${accessKey[0]}</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:49:09.914" level="INFO">${accessKey} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:49:09.914" starttime="20191025 23:49:09.913"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${secret[0]}</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:49:09.915" level="INFO">${secret} = bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676</msg>
<status status="PASS" endtime="20191025 23:49:09.915" starttime="20191025 23:49:09.914"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set default.s3.signature_version s3v4</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:49:09.918" level="INFO">Running command 'aws configure set default.s3.signature_version s3v4 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:49:10.434" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:49:10.434" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:49:10.434" starttime="20191025 23:49:09.916"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:49:10.436" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:49:10.436" starttime="20191025 23:49:10.435"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:49:10.436" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:49:10.437" starttime="20191025 23:49:10.436"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:10.437" starttime="20191025 23:49:09.915"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_access_key_id ${accessKey}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:49:10.440" level="INFO">Running command 'aws configure set aws_access_key_id testuser/s3g@EXAMPLE.COM 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:49:10.928" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:49:10.928" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:49:10.928" starttime="20191025 23:49:10.438"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:49:10.930" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:49:10.930" starttime="20191025 23:49:10.929"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:49:10.931" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:49:10.932" starttime="20191025 23:49:10.931"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:10.932" starttime="20191025 23:49:10.437"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_secret_access_key ${secret}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:49:10.937" level="INFO">Running command 'aws configure set aws_secret_access_key bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:49:11.451" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:49:11.451" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:49:11.451" starttime="20191025 23:49:10.935"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:49:11.453" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:49:11.453" starttime="20191025 23:49:11.452"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:49:11.454" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:49:11.454" starttime="20191025 23:49:11.454"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:11.455" starttime="20191025 23:49:10.933"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set region us-west-1</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:49:11.459" level="INFO">Running command 'aws configure set region us-west-1 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:49:11.904" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:49:11.905" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:49:11.905" starttime="20191025 23:49:11.456"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:49:11.907" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:49:11.907" starttime="20191025 23:49:11.906"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:49:11.908" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:49:11.908" starttime="20191025 23:49:11.907"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:11.909" starttime="20191025 23:49:11.455"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:11.909" starttime="20191025 23:49:07.419"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:11.909" starttime="20191025 23:49:07.418"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'false'</arg>
<arg>Setup dummy credentials for S3</arg>
</arguments>
<status status="PASS" endtime="20191025 23:49:11.910" starttime="20191025 23:49:11.910"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:11.911" starttime="20191025 23:49:07.372"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:11.911" starttime="20191025 23:49:07.370"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${BUCKET}' == 'generated'</arg>
<arg>Create bucket</arg>
</arguments>
<status status="PASS" endtime="20191025 23:49:11.912" starttime="20191025 23:49:11.911"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:11.912" starttime="20191025 23:49:06.652"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>date &gt; /tmp/testfile</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:49:11.916" level="INFO">Running command 'date &gt; /tmp/testfile'.</msg>
<msg timestamp="20191025 23:49:11.922" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:49:11.922" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:49:11.922" starttime="20191025 23:49:11.913"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:49:11.924" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:49:11.924" starttime="20191025 23:49:11.923"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:49:11.925" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:49:11.925" starttime="20191025 23:49:11.924"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:11.926" starttime="20191025 23:49:11.913"></status>
</kw>
<kw name="Execute AWSS3Cli" library="commonawslib">
<arguments>
<arg>cp /tmp/testfile s3://${BUCKET}/deletetestapiprefix/filefile</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws s3 --endpoint-url ${ENDPOINT_URL} ${command}</arg>
</arguments>
<assign>
<var>${output}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:49:11.930" level="INFO">Running command 'aws s3 --endpoint-url http://s3g:9878 cp /tmp/testfile s3://bucket-88408/deletetestapiprefix/filefile 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:49:18.655" level="INFO">${rc} = 1</msg>
<msg timestamp="20191025 23:49:18.656" level="INFO">${output} = Completed 29 Bytes/29 Bytes (4 Bytes/s) with 1 file(s) remainingupload failed: ../../tmp/testfile to s3://bucket-88408/deletetestapiprefix/filefile An error occurred (500) when calling the PutObject ...</msg>
<status status="PASS" endtime="20191025 23:49:18.656" starttime="20191025 23:49:11.928"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:49:18.657" level="INFO">Completed 29 Bytes/29 Bytes (4 Bytes/s) with 1 file(s) remainingupload failed: ../../tmp/testfile to s3://bucket-88408/deletetestapiprefix/filefile An error occurred (500) when calling the PutObject operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:49:18.657" starttime="20191025 23:49:18.656"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:49:18.658" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191025 23:49:18.658" level="FAIL">1 != 0</msg>
<status status="FAIL" endtime="20191025 23:49:18.658" starttime="20191025 23:49:18.657"></status>
</kw>
<status status="FAIL" endtime="20191025 23:49:18.659" starttime="20191025 23:49:11.927"></status>
</kw>
<status status="FAIL" endtime="20191025 23:49:18.659" starttime="20191025 23:49:11.926"></status>
</kw>
<status status="FAIL" endtime="20191025 23:49:18.659" critical="yes" starttime="20191025 23:49:06.651">1 != 0</status>
</test>
<test id="s1-s7-t5" name="Delete file with s3api, bucket doesn't exist">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:49:18.667" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:49:18.673" level="INFO">${rc} = 1</msg>
<msg timestamp="20191025 23:49:18.673" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191025 23:49:18.673" starttime="20191025 23:49:18.664"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191025 23:49:18.675" starttime="20191025 23:49:18.674"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:49:18.678" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:49:18.899" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:49:18.899" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191025 23:49:18.899" starttime="20191025 23:49:18.676"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:49:18.906" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:49:19.408" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:49:19.409" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: mirror.sfo12.us.leaseweb.net
 * upd...</msg>
<status status="PASS" endtime="20191025 23:49:19.409" starttime="20191025 23:49:18.903"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:49:19.410" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: mirror.sfo12.us.leaseweb.net
 * updates: mirror.sfo12.us.leaseweb.net
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191025 23:49:19.411" starttime="20191025 23:49:19.410"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:49:19.412" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:49:19.413" starttime="20191025 23:49:19.411"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:19.413" starttime="20191025 23:49:18.902"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:19.413" starttime="20191025 23:49:18.902"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:19.413" starttime="20191025 23:49:18.900"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:19.414" starttime="20191025 23:49:18.663"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:19.414" starttime="20191025 23:49:18.663"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:49:19.420" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:49:19.427" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:49:19.427" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191025 23:49:19.427" starttime="20191025 23:49:19.418"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:49:19.428" level="INFO">s3g</msg>
<status status="PASS" endtime="20191025 23:49:19.428" starttime="20191025 23:49:19.427"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:49:19.429" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:49:19.429" starttime="20191025 23:49:19.429"></status>
</kw>
<msg timestamp="20191025 23:49:19.430" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191025 23:49:19.430" starttime="20191025 23:49:19.417"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191025 23:49:19.431" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:49:19.431" starttime="20191025 23:49:19.430"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:49:19.434" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:49:20.675" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:49:20.675" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:49:20.675" starttime="20191025 23:49:19.433"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:49:20.677" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:49:20.678" starttime="20191025 23:49:20.676"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:49:20.679" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:49:20.679" starttime="20191025 23:49:20.678"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:20.680" starttime="20191025 23:49:19.432"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:20.680" starttime="20191025 23:49:19.431"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:20.680" starttime="20191025 23:49:19.417"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:20.681" starttime="20191025 23:49:19.416"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:49:20.686" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:49:23.327" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:49:23.327" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:49:23.327" starttime="20191025 23:49:20.684"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:49:23.329" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
awsAccessKey=testuser/s3g@EXAMPLE.COM
awsSecret=bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676</msg>
<status status="PASS" endtime="20191025 23:49:23.330" starttime="20191025 23:49:23.328"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:49:23.331" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:49:23.331" starttime="20191025 23:49:23.330"></status>
</kw>
<msg timestamp="20191025 23:49:23.331" level="INFO">${result} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:49:23.332" starttime="20191025 23:49:20.683"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsAccessKey=).*</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:49:23.333" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:49:23.333" starttime="20191025 23:49:23.332"></status>
</kw>
<kw name="Get Variable Value" library="BuiltIn">
<doc>Returns variable value or ``default`` if the variable does not exist.</doc>
<arguments>
<arg>${accessKey}</arg>
<arg>sdsdasaasdasd</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:49:23.334" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:49:23.335" starttime="20191025 23:49:23.334"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsSecret=).*</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:49:23.336" level="INFO">${secret} = [u'bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676']</msg>
<status status="PASS" endtime="20191025 23:49:23.336" starttime="20191025 23:49:23.335"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${accessKey[0]}</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:49:23.337" level="INFO">${accessKey} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:49:23.337" starttime="20191025 23:49:23.336"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${secret[0]}</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:49:23.338" level="INFO">${secret} = bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676</msg>
<status status="PASS" endtime="20191025 23:49:23.338" starttime="20191025 23:49:23.337"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set default.s3.signature_version s3v4</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:49:23.344" level="INFO">Running command 'aws configure set default.s3.signature_version s3v4 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:49:23.852" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:49:23.853" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:49:23.853" starttime="20191025 23:49:23.340"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:49:23.855" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:49:23.855" starttime="20191025 23:49:23.854"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:49:23.856" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:49:23.857" starttime="20191025 23:49:23.856"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:23.857" starttime="20191025 23:49:23.339"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_access_key_id ${accessKey}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:49:23.861" level="INFO">Running command 'aws configure set aws_access_key_id testuser/s3g@EXAMPLE.COM 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:49:24.346" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:49:24.346" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:49:24.346" starttime="20191025 23:49:23.858"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:49:24.347" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:49:24.347" starttime="20191025 23:49:24.347"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:49:24.348" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:49:24.348" starttime="20191025 23:49:24.348"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:24.349" starttime="20191025 23:49:23.857"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_secret_access_key ${secret}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:49:24.352" level="INFO">Running command 'aws configure set aws_secret_access_key bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:49:24.829" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:49:24.829" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:49:24.830" starttime="20191025 23:49:24.350"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:49:24.831" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:49:24.832" starttime="20191025 23:49:24.830"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:49:24.833" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:49:24.833" starttime="20191025 23:49:24.832"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:24.833" starttime="20191025 23:49:24.349"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set region us-west-1</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:49:24.837" level="INFO">Running command 'aws configure set region us-west-1 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:49:25.362" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:49:25.362" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:49:25.363" starttime="20191025 23:49:24.834"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:49:25.365" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:49:25.365" starttime="20191025 23:49:25.364"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:49:25.366" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:49:25.367" starttime="20191025 23:49:25.365"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:25.367" starttime="20191025 23:49:24.834"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:25.368" starttime="20191025 23:49:20.682"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:25.368" starttime="20191025 23:49:20.681"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'false'</arg>
<arg>Setup dummy credentials for S3</arg>
</arguments>
<status status="PASS" endtime="20191025 23:49:25.369" starttime="20191025 23:49:25.368"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:25.370" starttime="20191025 23:49:19.415"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:25.370" starttime="20191025 23:49:19.414"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${BUCKET}' == 'generated'</arg>
<arg>Create bucket</arg>
</arguments>
<status status="PASS" endtime="20191025 23:49:25.371" starttime="20191025 23:49:25.370"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:25.371" starttime="20191025 23:49:18.662"></status>
</kw>
<kw name="Execute AWSS3APICli and checkrc" library="commonawslib">
<arguments>
<arg>delete-object --bucket ${BUCKET}-nosuchbucket --key f1</arg>
<arg>255</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Execute and checkrc" library="commonlib">
<arguments>
<arg>aws s3api --endpoint-url ${ENDPOINT_URL} ${command}</arg>
<arg>${expected_error_code}</arg>
</arguments>
<assign>
<var>${output}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:49:25.377" level="INFO">Running command 'aws s3api --endpoint-url http://s3g:9878 delete-object --bucket bucket-88408-nosuchbucket --key f1 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:49:26.197" level="INFO">${rc} = 255</msg>
<msg timestamp="20191025 23:49:26.197" level="INFO">${output} = 
An error occurred (NoSuchBucket) when calling the DeleteObject operation: The specified bucket does not exist</msg>
<status status="PASS" endtime="20191025 23:49:26.198" starttime="20191025 23:49:25.374"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:49:26.200" level="INFO">
An error occurred (NoSuchBucket) when calling the DeleteObject operation: The specified bucket does not exist</msg>
<status status="PASS" endtime="20191025 23:49:26.200" starttime="20191025 23:49:26.199"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
</arguments>
<msg timestamp="20191025 23:49:26.201" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:49:26.201" starttime="20191025 23:49:26.200"></status>
</kw>
<msg timestamp="20191025 23:49:26.202" level="INFO">${output} = 
An error occurred (NoSuchBucket) when calling the DeleteObject operation: The specified bucket does not exist</msg>
<status status="PASS" endtime="20191025 23:49:26.202" starttime="20191025 23:49:25.373"></status>
</kw>
<msg timestamp="20191025 23:49:26.202" level="INFO">${result} = 
An error occurred (NoSuchBucket) when calling the DeleteObject operation: The specified bucket does not exist</msg>
<status status="PASS" endtime="20191025 23:49:26.203" starttime="20191025 23:49:25.372"></status>
</kw>
<kw name="Should Contain" library="BuiltIn">
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<arguments>
<arg>${result}</arg>
<arg>NoSuchBucket</arg>
</arguments>
<status status="PASS" endtime="20191025 23:49:26.204" starttime="20191025 23:49:26.203"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:26.204" critical="yes" starttime="20191025 23:49:18.660"></status>
</test>
<doc>S3 gateway test with aws cli</doc>
<status status="FAIL" endtime="20191025 23:49:26.206" starttime="20191025 23:48:31.109"></status>
</suite>
<suite source="/opt/hadoop/smoketest/s3/objectmultidelete.robot" id="s1-s8" name="Objectmultidelete">
<test id="s1-s8-t1" name="Delete file with multi delete">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:49:26.252" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:49:26.260" level="INFO">${rc} = 1</msg>
<msg timestamp="20191025 23:49:26.260" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191025 23:49:26.260" starttime="20191025 23:49:26.250"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191025 23:49:26.262" starttime="20191025 23:49:26.261"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:49:26.265" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:49:26.451" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:49:26.451" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191025 23:49:26.451" starttime="20191025 23:49:26.263"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:49:26.458" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:49:26.917" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:49:26.918" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: mirror.sfo12.us.leaseweb.net
 * upd...</msg>
<status status="PASS" endtime="20191025 23:49:26.918" starttime="20191025 23:49:26.455"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:49:26.920" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: mirror.sfo12.us.leaseweb.net
 * updates: mirror.sfo12.us.leaseweb.net
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191025 23:49:26.920" starttime="20191025 23:49:26.919"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:49:26.921" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:49:26.921" starttime="20191025 23:49:26.920"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:26.922" starttime="20191025 23:49:26.455"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:26.922" starttime="20191025 23:49:26.454"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:26.922" starttime="20191025 23:49:26.452"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:26.923" starttime="20191025 23:49:26.249"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:26.923" starttime="20191025 23:49:26.249"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:49:26.930" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:49:26.934" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:49:26.935" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191025 23:49:26.935" starttime="20191025 23:49:26.927"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:49:26.937" level="INFO">s3g</msg>
<status status="PASS" endtime="20191025 23:49:26.937" starttime="20191025 23:49:26.936"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:49:26.938" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:49:26.938" starttime="20191025 23:49:26.937"></status>
</kw>
<msg timestamp="20191025 23:49:26.939" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191025 23:49:26.939" starttime="20191025 23:49:26.927"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191025 23:49:26.943" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:49:26.943" starttime="20191025 23:49:26.940"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:49:26.948" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:49:26.963" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:49:26.963" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:49:26.963" starttime="20191025 23:49:26.946"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:49:26.965" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:49:26.965" starttime="20191025 23:49:26.964"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:49:26.966" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:49:26.966" starttime="20191025 23:49:26.965"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:26.966" starttime="20191025 23:49:26.944"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:26.967" starttime="20191025 23:49:26.943"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:26.967" starttime="20191025 23:49:26.926"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:26.967" starttime="20191025 23:49:26.925"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:49:26.972" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:49:29.358" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:49:29.358" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:49:29.358" starttime="20191025 23:49:26.970"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:49:29.360" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
awsAccessKey=testuser/s3g@EXAMPLE.COM
awsSecret=bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676</msg>
<status status="PASS" endtime="20191025 23:49:29.361" starttime="20191025 23:49:29.359"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:49:29.361" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:49:29.361" starttime="20191025 23:49:29.361"></status>
</kw>
<msg timestamp="20191025 23:49:29.362" level="INFO">${result} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:49:29.362" starttime="20191025 23:49:26.969"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsAccessKey=).*</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:49:29.363" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:49:29.363" starttime="20191025 23:49:29.362"></status>
</kw>
<kw name="Get Variable Value" library="BuiltIn">
<doc>Returns variable value or ``default`` if the variable does not exist.</doc>
<arguments>
<arg>${accessKey}</arg>
<arg>sdsdasaasdasd</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:49:29.364" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:49:29.364" starttime="20191025 23:49:29.363"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsSecret=).*</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:49:29.365" level="INFO">${secret} = [u'bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676']</msg>
<status status="PASS" endtime="20191025 23:49:29.365" starttime="20191025 23:49:29.364"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${accessKey[0]}</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:49:29.365" level="INFO">${accessKey} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:49:29.365" starttime="20191025 23:49:29.365"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${secret[0]}</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:49:29.366" level="INFO">${secret} = bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676</msg>
<status status="PASS" endtime="20191025 23:49:29.366" starttime="20191025 23:49:29.366"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set default.s3.signature_version s3v4</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:49:29.369" level="INFO">Running command 'aws configure set default.s3.signature_version s3v4 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:49:29.870" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:49:29.870" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:49:29.870" starttime="20191025 23:49:29.367"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:49:29.872" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:49:29.872" starttime="20191025 23:49:29.871"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:49:29.873" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:49:29.873" starttime="20191025 23:49:29.872"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:29.874" starttime="20191025 23:49:29.367"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_access_key_id ${accessKey}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:49:29.877" level="INFO">Running command 'aws configure set aws_access_key_id testuser/s3g@EXAMPLE.COM 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:49:30.442" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:49:30.442" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:49:30.443" starttime="20191025 23:49:29.875"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:49:30.444" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:49:30.444" starttime="20191025 23:49:30.443"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:49:30.445" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:49:30.446" starttime="20191025 23:49:30.444"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:30.446" starttime="20191025 23:49:29.874"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_secret_access_key ${secret}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:49:30.450" level="INFO">Running command 'aws configure set aws_secret_access_key bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:49:30.913" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:49:30.913" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:49:30.913" starttime="20191025 23:49:30.447"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:49:30.914" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:49:30.915" starttime="20191025 23:49:30.914"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:49:30.915" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:49:30.915" starttime="20191025 23:49:30.915"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:30.916" starttime="20191025 23:49:30.447"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set region us-west-1</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:49:30.918" level="INFO">Running command 'aws configure set region us-west-1 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:49:31.392" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:49:31.392" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:49:31.392" starttime="20191025 23:49:30.917"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:49:31.394" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:49:31.394" starttime="20191025 23:49:31.393"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:49:31.395" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:49:31.395" starttime="20191025 23:49:31.394"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:31.396" starttime="20191025 23:49:30.916"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:31.396" starttime="20191025 23:49:26.968"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:31.396" starttime="20191025 23:49:26.967"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'false'</arg>
<arg>Setup dummy credentials for S3</arg>
</arguments>
<status status="PASS" endtime="20191025 23:49:31.397" starttime="20191025 23:49:31.397"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:31.397" starttime="20191025 23:49:26.924"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:31.397" starttime="20191025 23:49:26.923"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${BUCKET}' == 'generated'</arg>
<arg>Create bucket</arg>
</arguments>
<kw name="Create bucket" library="commonawslib">
<kw name="Generate Random String" library="String">
<doc>Generates a string with a desired ``length`` from the given ``chars``.</doc>
<arguments>
<arg>5</arg>
<arg>[NUMBERS]</arg>
</arguments>
<assign>
<var>${postfix}</var>
</assign>
<msg timestamp="20191025 23:49:31.399" level="INFO">${postfix} = 41036</msg>
<status status="PASS" endtime="20191025 23:49:31.399" starttime="20191025 23:49:31.399"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${BUCKET}</arg>
<arg>bucket-${postfix}</arg>
</arguments>
<msg timestamp="20191025 23:49:31.400" level="INFO">${BUCKET} = bucket-41036</msg>
<status status="PASS" endtime="20191025 23:49:31.400" starttime="20191025 23:49:31.400"></status>
</kw>
<kw name="Execute AWSS3APICli" library="commonawslib">
<arguments>
<arg>create-bucket --bucket ${BUCKET}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws s3api --endpoint-url ${ENDPOINT_URL} ${command}</arg>
</arguments>
<assign>
<var>${output}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:49:31.404" level="INFO">Running command 'aws s3api --endpoint-url http://s3g:9878 create-bucket --bucket bucket-41036 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:49:40.906" level="INFO">${rc} = 255</msg>
<msg timestamp="20191025 23:49:40.907" level="INFO">${output} = 
An error occurred (500) when calling the CreateBucket operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:49:40.907" starttime="20191025 23:49:31.402"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:49:40.909" level="INFO">
An error occurred (500) when calling the CreateBucket operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:49:40.909" starttime="20191025 23:49:40.908"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:49:40.910" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191025 23:49:40.911" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191025 23:49:40.911" starttime="20191025 23:49:40.909"></status>
</kw>
<status status="FAIL" endtime="20191025 23:49:40.912" starttime="20191025 23:49:31.401"></status>
</kw>
<status status="FAIL" endtime="20191025 23:49:40.912" starttime="20191025 23:49:31.401"></status>
</kw>
<status status="FAIL" endtime="20191025 23:49:40.912" starttime="20191025 23:49:31.398"></status>
</kw>
<status status="FAIL" endtime="20191025 23:49:40.913" starttime="20191025 23:49:31.398"></status>
</kw>
<status status="FAIL" endtime="20191025 23:49:40.913" starttime="20191025 23:49:26.248"></status>
</kw>
<status status="FAIL" endtime="20191025 23:49:40.914" critical="yes" starttime="20191025 23:49:26.247">Setup failed:
255 != 0</status>
</test>
<doc>S3 gateway test with aws cli</doc>
<status status="FAIL" endtime="20191025 23:49:40.915" starttime="20191025 23:49:26.212"></status>
</suite>
<suite source="/opt/hadoop/smoketest/s3/objectputget.robot" id="s1-s9" name="Objectputget">
<test id="s1-s9-t1" name="Put object to s3">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:49:40.935" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:49:40.944" level="INFO">${rc} = 1</msg>
<msg timestamp="20191025 23:49:40.944" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191025 23:49:40.944" starttime="20191025 23:49:40.933"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191025 23:49:40.946" starttime="20191025 23:49:40.945"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:49:40.949" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:49:41.177" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:49:41.178" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191025 23:49:41.178" starttime="20191025 23:49:40.946"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:49:41.185" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:49:41.704" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:49:41.705" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: mirror.sfo12.us.leaseweb.net
 * upd...</msg>
<status status="PASS" endtime="20191025 23:49:41.705" starttime="20191025 23:49:41.183"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:49:41.706" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: mirror.sfo12.us.leaseweb.net
 * updates: mirror.sfo12.us.leaseweb.net
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191025 23:49:41.706" starttime="20191025 23:49:41.705"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:49:41.707" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:49:41.707" starttime="20191025 23:49:41.706"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:41.707" starttime="20191025 23:49:41.182"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:41.707" starttime="20191025 23:49:41.181"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:41.707" starttime="20191025 23:49:41.179"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:41.708" starttime="20191025 23:49:40.933"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:41.708" starttime="20191025 23:49:40.932"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:49:41.712" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:49:41.721" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:49:41.721" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191025 23:49:41.721" starttime="20191025 23:49:41.711"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:49:41.723" level="INFO">s3g</msg>
<status status="PASS" endtime="20191025 23:49:41.723" starttime="20191025 23:49:41.722"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:49:41.724" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:49:41.725" starttime="20191025 23:49:41.724"></status>
</kw>
<msg timestamp="20191025 23:49:41.725" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191025 23:49:41.725" starttime="20191025 23:49:41.710"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191025 23:49:41.729" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:49:41.729" starttime="20191025 23:49:41.726"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:49:41.734" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:49:41.749" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:49:41.749" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:49:41.750" starttime="20191025 23:49:41.731"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:49:41.751" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:49:41.751" starttime="20191025 23:49:41.750"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:49:41.753" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:49:41.753" starttime="20191025 23:49:41.752"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:41.754" starttime="20191025 23:49:41.730"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:41.754" starttime="20191025 23:49:41.729"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:41.754" starttime="20191025 23:49:41.710"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:41.754" starttime="20191025 23:49:41.709"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:49:41.759" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:49:44.458" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:49:44.458" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:49:44.458" starttime="20191025 23:49:41.757"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:49:44.460" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
awsAccessKey=testuser/s3g@EXAMPLE.COM
awsSecret=bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676</msg>
<status status="PASS" endtime="20191025 23:49:44.460" starttime="20191025 23:49:44.459"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:49:44.461" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:49:44.462" starttime="20191025 23:49:44.461"></status>
</kw>
<msg timestamp="20191025 23:49:44.462" level="INFO">${result} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:49:44.462" starttime="20191025 23:49:41.756"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsAccessKey=).*</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:49:44.463" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:49:44.463" starttime="20191025 23:49:44.462"></status>
</kw>
<kw name="Get Variable Value" library="BuiltIn">
<doc>Returns variable value or ``default`` if the variable does not exist.</doc>
<arguments>
<arg>${accessKey}</arg>
<arg>sdsdasaasdasd</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:49:44.464" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:49:44.465" starttime="20191025 23:49:44.464"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsSecret=).*</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:49:44.466" level="INFO">${secret} = [u'bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676']</msg>
<status status="PASS" endtime="20191025 23:49:44.466" starttime="20191025 23:49:44.465"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${accessKey[0]}</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:49:44.467" level="INFO">${accessKey} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:49:44.467" starttime="20191025 23:49:44.466"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${secret[0]}</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:49:44.468" level="INFO">${secret} = bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676</msg>
<status status="PASS" endtime="20191025 23:49:44.468" starttime="20191025 23:49:44.467"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set default.s3.signature_version s3v4</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:49:44.471" level="INFO">Running command 'aws configure set default.s3.signature_version s3v4 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:49:45.002" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:49:45.002" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:49:45.002" starttime="20191025 23:49:44.469"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:49:45.003" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:49:45.004" starttime="20191025 23:49:45.003"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:49:45.004" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:49:45.005" starttime="20191025 23:49:45.004"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:45.005" starttime="20191025 23:49:44.468"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_access_key_id ${accessKey}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:49:45.008" level="INFO">Running command 'aws configure set aws_access_key_id testuser/s3g@EXAMPLE.COM 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:49:45.550" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:49:45.550" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:49:45.550" starttime="20191025 23:49:45.006"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:49:45.552" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:49:45.552" starttime="20191025 23:49:45.551"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:49:45.554" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:49:45.554" starttime="20191025 23:49:45.553"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:45.554" starttime="20191025 23:49:45.005"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_secret_access_key ${secret}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:49:45.558" level="INFO">Running command 'aws configure set aws_secret_access_key bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:49:46.046" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:49:46.046" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:49:46.046" starttime="20191025 23:49:45.556"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:49:46.048" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:49:46.048" starttime="20191025 23:49:46.047"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:49:46.049" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:49:46.050" starttime="20191025 23:49:46.049"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:46.050" starttime="20191025 23:49:45.555"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set region us-west-1</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:49:46.054" level="INFO">Running command 'aws configure set region us-west-1 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:49:46.520" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:49:46.520" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:49:46.520" starttime="20191025 23:49:46.052"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:49:46.522" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:49:46.522" starttime="20191025 23:49:46.521"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:49:46.524" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:49:46.524" starttime="20191025 23:49:46.523"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:46.525" starttime="20191025 23:49:46.050"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:46.525" starttime="20191025 23:49:41.756"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:46.525" starttime="20191025 23:49:41.755"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'false'</arg>
<arg>Setup dummy credentials for S3</arg>
</arguments>
<status status="PASS" endtime="20191025 23:49:46.527" starttime="20191025 23:49:46.526"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:46.527" starttime="20191025 23:49:41.709"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:46.527" starttime="20191025 23:49:41.708"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${BUCKET}' == 'generated'</arg>
<arg>Create bucket</arg>
</arguments>
<kw name="Create bucket" library="commonawslib">
<kw name="Generate Random String" library="String">
<doc>Generates a string with a desired ``length`` from the given ``chars``.</doc>
<arguments>
<arg>5</arg>
<arg>[NUMBERS]</arg>
</arguments>
<assign>
<var>${postfix}</var>
</assign>
<msg timestamp="20191025 23:49:46.530" level="INFO">${postfix} = 67137</msg>
<status status="PASS" endtime="20191025 23:49:46.530" starttime="20191025 23:49:46.529"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${BUCKET}</arg>
<arg>bucket-${postfix}</arg>
</arguments>
<msg timestamp="20191025 23:49:46.531" level="INFO">${BUCKET} = bucket-67137</msg>
<status status="PASS" endtime="20191025 23:49:46.531" starttime="20191025 23:49:46.530"></status>
</kw>
<kw name="Execute AWSS3APICli" library="commonawslib">
<arguments>
<arg>create-bucket --bucket ${BUCKET}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws s3api --endpoint-url ${ENDPOINT_URL} ${command}</arg>
</arguments>
<assign>
<var>${output}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:49:46.536" level="INFO">Running command 'aws s3api --endpoint-url http://s3g:9878 create-bucket --bucket bucket-67137 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:49:56.124" level="INFO">${rc} = 255</msg>
<msg timestamp="20191025 23:49:56.124" level="INFO">${output} = 
An error occurred (500) when calling the CreateBucket operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:49:56.124" starttime="20191025 23:49:46.533"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:49:56.126" level="INFO">
An error occurred (500) when calling the CreateBucket operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:49:56.127" starttime="20191025 23:49:56.125"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:49:56.128" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191025 23:49:56.128" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191025 23:49:56.128" starttime="20191025 23:49:56.127"></status>
</kw>
<status status="FAIL" endtime="20191025 23:49:56.129" starttime="20191025 23:49:46.532"></status>
</kw>
<status status="FAIL" endtime="20191025 23:49:56.129" starttime="20191025 23:49:46.531"></status>
</kw>
<status status="FAIL" endtime="20191025 23:49:56.130" starttime="20191025 23:49:46.528"></status>
</kw>
<status status="FAIL" endtime="20191025 23:49:56.130" starttime="20191025 23:49:46.527"></status>
</kw>
<status status="FAIL" endtime="20191025 23:49:56.130" starttime="20191025 23:49:40.931"></status>
</kw>
<status status="FAIL" endtime="20191025 23:49:56.131" critical="yes" starttime="20191025 23:49:40.930">Setup failed:
255 != 0</status>
</test>
<test id="s1-s9-t2" name="Get object from s3">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:49:56.137" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:49:56.144" level="INFO">${rc} = 1</msg>
<msg timestamp="20191025 23:49:56.144" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191025 23:49:56.144" starttime="20191025 23:49:56.135"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191025 23:49:56.146" starttime="20191025 23:49:56.145"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:49:56.148" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:49:56.324" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:49:56.325" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191025 23:49:56.325" starttime="20191025 23:49:56.146"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:49:56.331" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:49:56.834" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:49:56.834" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: mirror.sfo12.us.leaseweb.net
 * upd...</msg>
<status status="PASS" endtime="20191025 23:49:56.834" starttime="20191025 23:49:56.329"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:49:56.836" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: mirror.sfo12.us.leaseweb.net
 * updates: mirror.sfo12.us.leaseweb.net
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191025 23:49:56.836" starttime="20191025 23:49:56.835"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:49:56.837" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:49:56.838" starttime="20191025 23:49:56.837"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:56.838" starttime="20191025 23:49:56.328"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:56.838" starttime="20191025 23:49:56.327"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:56.839" starttime="20191025 23:49:56.326"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:56.839" starttime="20191025 23:49:56.134"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:56.839" starttime="20191025 23:49:56.134"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:49:56.846" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:49:56.853" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:49:56.853" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191025 23:49:56.853" starttime="20191025 23:49:56.844"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:49:56.854" level="INFO">s3g</msg>
<status status="PASS" endtime="20191025 23:49:56.854" starttime="20191025 23:49:56.853"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:49:56.855" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:49:56.855" starttime="20191025 23:49:56.855"></status>
</kw>
<msg timestamp="20191025 23:49:56.856" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191025 23:49:56.856" starttime="20191025 23:49:56.843"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191025 23:49:56.857" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:49:56.857" starttime="20191025 23:49:56.856"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:49:56.862" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:49:56.879" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:49:56.879" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:49:56.879" starttime="20191025 23:49:56.860"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:49:56.881" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:49:56.881" starttime="20191025 23:49:56.880"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:49:56.882" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:49:56.882" starttime="20191025 23:49:56.881"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:56.883" starttime="20191025 23:49:56.859"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:56.883" starttime="20191025 23:49:56.858"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:56.883" starttime="20191025 23:49:56.842"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:56.883" starttime="20191025 23:49:56.841"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:49:56.888" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:49:59.359" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:49:59.360" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:49:59.360" starttime="20191025 23:49:56.886"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:49:59.361" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
awsAccessKey=testuser/s3g@EXAMPLE.COM
awsSecret=bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676</msg>
<status status="PASS" endtime="20191025 23:49:59.361" starttime="20191025 23:49:59.360"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:49:59.362" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:49:59.362" starttime="20191025 23:49:59.361"></status>
</kw>
<msg timestamp="20191025 23:49:59.362" level="INFO">${result} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:49:59.362" starttime="20191025 23:49:56.885"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsAccessKey=).*</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:49:59.363" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:49:59.363" starttime="20191025 23:49:59.363"></status>
</kw>
<kw name="Get Variable Value" library="BuiltIn">
<doc>Returns variable value or ``default`` if the variable does not exist.</doc>
<arguments>
<arg>${accessKey}</arg>
<arg>sdsdasaasdasd</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:49:59.364" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:49:59.364" starttime="20191025 23:49:59.363"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsSecret=).*</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:49:59.365" level="INFO">${secret} = [u'bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676']</msg>
<status status="PASS" endtime="20191025 23:49:59.365" starttime="20191025 23:49:59.364"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${accessKey[0]}</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:49:59.365" level="INFO">${accessKey} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:49:59.366" starttime="20191025 23:49:59.365"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${secret[0]}</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:49:59.366" level="INFO">${secret} = bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676</msg>
<status status="PASS" endtime="20191025 23:49:59.366" starttime="20191025 23:49:59.366"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set default.s3.signature_version s3v4</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:49:59.369" level="INFO">Running command 'aws configure set default.s3.signature_version s3v4 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:49:59.825" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:49:59.825" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:49:59.825" starttime="20191025 23:49:59.367"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:49:59.827" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:49:59.827" starttime="20191025 23:49:59.826"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:49:59.827" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:49:59.828" starttime="20191025 23:49:59.827"></status>
</kw>
<status status="PASS" endtime="20191025 23:49:59.828" starttime="20191025 23:49:59.366"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_access_key_id ${accessKey}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:49:59.831" level="INFO">Running command 'aws configure set aws_access_key_id testuser/s3g@EXAMPLE.COM 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:50:00.308" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:50:00.308" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:50:00.309" starttime="20191025 23:49:59.829"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:50:00.311" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:50:00.311" starttime="20191025 23:50:00.310"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:50:00.312" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:50:00.312" starttime="20191025 23:50:00.311"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:00.313" starttime="20191025 23:49:59.828"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_secret_access_key ${secret}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:50:00.317" level="INFO">Running command 'aws configure set aws_secret_access_key bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:50:00.779" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:50:00.779" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:50:00.780" starttime="20191025 23:50:00.314"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:50:00.782" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:50:00.782" starttime="20191025 23:50:00.781"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:50:00.783" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:50:00.783" starttime="20191025 23:50:00.782"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:00.784" starttime="20191025 23:50:00.313"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set region us-west-1</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:50:00.788" level="INFO">Running command 'aws configure set region us-west-1 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:50:01.288" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:50:01.288" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:50:01.288" starttime="20191025 23:50:00.785"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:50:01.290" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:50:01.290" starttime="20191025 23:50:01.289"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:50:01.291" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:50:01.292" starttime="20191025 23:50:01.291"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:01.292" starttime="20191025 23:50:00.784"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:01.292" starttime="20191025 23:49:56.885"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:01.293" starttime="20191025 23:49:56.884"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'false'</arg>
<arg>Setup dummy credentials for S3</arg>
</arguments>
<status status="PASS" endtime="20191025 23:50:01.294" starttime="20191025 23:50:01.293"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:01.294" starttime="20191025 23:49:56.840"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:01.294" starttime="20191025 23:49:56.839"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${BUCKET}' == 'generated'</arg>
<arg>Create bucket</arg>
</arguments>
<status status="PASS" endtime="20191025 23:50:01.295" starttime="20191025 23:50:01.295"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:01.295" starttime="20191025 23:49:56.133"></status>
</kw>
<kw name="Execute AWSS3APICli" library="commonawslib">
<arguments>
<arg>get-object --bucket ${BUCKET} --key putobject/f1 /tmp/testfile.result</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws s3api --endpoint-url ${ENDPOINT_URL} ${command}</arg>
</arguments>
<assign>
<var>${output}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:50:01.300" level="INFO">Running command 'aws s3api --endpoint-url http://s3g:9878 get-object --bucket bucket-67137 --key putobject/f1 /tmp/testfile.result 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:50:07.075" level="INFO">${rc} = 255</msg>
<msg timestamp="20191025 23:50:07.076" level="INFO">${output} = 
An error occurred (500) when calling the GetObject operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:50:07.076" starttime="20191025 23:50:01.298"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:50:07.078" level="INFO">
An error occurred (500) when calling the GetObject operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:50:07.078" starttime="20191025 23:50:07.077"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:50:07.079" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191025 23:50:07.080" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191025 23:50:07.080" starttime="20191025 23:50:07.078"></status>
</kw>
<status status="FAIL" endtime="20191025 23:50:07.080" starttime="20191025 23:50:01.297"></status>
</kw>
<status status="FAIL" endtime="20191025 23:50:07.081" starttime="20191025 23:50:01.296"></status>
</kw>
<status status="FAIL" endtime="20191025 23:50:07.081" critical="yes" starttime="20191025 23:49:56.132">255 != 0</status>
</test>
<test id="s1-s9-t3" name="Get Partial object from s3 with both start and endoffset">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:50:07.088" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:50:07.096" level="INFO">${rc} = 1</msg>
<msg timestamp="20191025 23:50:07.097" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191025 23:50:07.097" starttime="20191025 23:50:07.086"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191025 23:50:07.099" starttime="20191025 23:50:07.098"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:50:07.101" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:50:07.317" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:50:07.317" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191025 23:50:07.318" starttime="20191025 23:50:07.099"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:50:07.324" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:50:07.881" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:50:07.881" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: mirror.sfo12.us.leaseweb.net
 * upd...</msg>
<status status="PASS" endtime="20191025 23:50:07.881" starttime="20191025 23:50:07.321"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:50:07.883" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: mirror.sfo12.us.leaseweb.net
 * updates: mirror.sfo12.us.leaseweb.net
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191025 23:50:07.883" starttime="20191025 23:50:07.882"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:50:07.884" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:50:07.884" starttime="20191025 23:50:07.883"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:07.885" starttime="20191025 23:50:07.321"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:07.885" starttime="20191025 23:50:07.320"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:07.885" starttime="20191025 23:50:07.318"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:07.886" starttime="20191025 23:50:07.085"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:07.886" starttime="20191025 23:50:07.084"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:50:07.894" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:50:07.900" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:50:07.900" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191025 23:50:07.900" starttime="20191025 23:50:07.891"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:50:07.902" level="INFO">s3g</msg>
<status status="PASS" endtime="20191025 23:50:07.902" starttime="20191025 23:50:07.901"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:50:07.903" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:50:07.903" starttime="20191025 23:50:07.902"></status>
</kw>
<msg timestamp="20191025 23:50:07.904" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191025 23:50:07.904" starttime="20191025 23:50:07.890"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191025 23:50:07.905" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:50:07.905" starttime="20191025 23:50:07.904"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:50:07.909" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:50:07.925" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:50:07.925" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:50:07.925" starttime="20191025 23:50:07.908"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:50:07.926" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:50:07.927" starttime="20191025 23:50:07.926"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:50:07.928" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:50:07.928" starttime="20191025 23:50:07.927"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:07.929" starttime="20191025 23:50:07.906"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:07.929" starttime="20191025 23:50:07.906"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:07.929" starttime="20191025 23:50:07.889"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:07.929" starttime="20191025 23:50:07.888"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:50:07.935" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:50:10.327" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:50:10.327" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:50:10.327" starttime="20191025 23:50:07.932"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:50:10.329" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
awsAccessKey=testuser/s3g@EXAMPLE.COM
awsSecret=bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676</msg>
<status status="PASS" endtime="20191025 23:50:10.329" starttime="20191025 23:50:10.328"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:50:10.330" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:50:10.331" starttime="20191025 23:50:10.330"></status>
</kw>
<msg timestamp="20191025 23:50:10.331" level="INFO">${result} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:50:10.331" starttime="20191025 23:50:07.931"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsAccessKey=).*</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:50:10.333" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:50:10.333" starttime="20191025 23:50:10.332"></status>
</kw>
<kw name="Get Variable Value" library="BuiltIn">
<doc>Returns variable value or ``default`` if the variable does not exist.</doc>
<arguments>
<arg>${accessKey}</arg>
<arg>sdsdasaasdasd</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:50:10.334" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:50:10.334" starttime="20191025 23:50:10.333"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsSecret=).*</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:50:10.335" level="INFO">${secret} = [u'bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676']</msg>
<status status="PASS" endtime="20191025 23:50:10.335" starttime="20191025 23:50:10.334"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${accessKey[0]}</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:50:10.336" level="INFO">${accessKey} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:50:10.336" starttime="20191025 23:50:10.335"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${secret[0]}</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:50:10.337" level="INFO">${secret} = bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676</msg>
<status status="PASS" endtime="20191025 23:50:10.337" starttime="20191025 23:50:10.337"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set default.s3.signature_version s3v4</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:50:10.341" level="INFO">Running command 'aws configure set default.s3.signature_version s3v4 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:50:10.798" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:50:10.799" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:50:10.799" starttime="20191025 23:50:10.339"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:50:10.801" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:50:10.801" starttime="20191025 23:50:10.800"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:50:10.802" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:50:10.803" starttime="20191025 23:50:10.802"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:10.803" starttime="20191025 23:50:10.338"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_access_key_id ${accessKey}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:50:10.807" level="INFO">Running command 'aws configure set aws_access_key_id testuser/s3g@EXAMPLE.COM 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:50:11.320" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:50:11.320" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:50:11.320" starttime="20191025 23:50:10.805"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:50:11.322" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:50:11.322" starttime="20191025 23:50:11.321"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:50:11.323" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:50:11.323" starttime="20191025 23:50:11.322"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:11.324" starttime="20191025 23:50:10.803"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_secret_access_key ${secret}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:50:11.327" level="INFO">Running command 'aws configure set aws_secret_access_key bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:50:11.815" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:50:11.815" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:50:11.816" starttime="20191025 23:50:11.325"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:50:11.817" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:50:11.817" starttime="20191025 23:50:11.816"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:50:11.818" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:50:11.818" starttime="20191025 23:50:11.818"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:11.819" starttime="20191025 23:50:11.324"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set region us-west-1</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:50:11.822" level="INFO">Running command 'aws configure set region us-west-1 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:50:12.288" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:50:12.289" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:50:12.289" starttime="20191025 23:50:11.820"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:50:12.291" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:50:12.291" starttime="20191025 23:50:12.290"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:50:12.292" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:50:12.292" starttime="20191025 23:50:12.291"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:12.293" starttime="20191025 23:50:11.819"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:12.293" starttime="20191025 23:50:07.931"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:12.293" starttime="20191025 23:50:07.930"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'false'</arg>
<arg>Setup dummy credentials for S3</arg>
</arguments>
<status status="PASS" endtime="20191025 23:50:12.294" starttime="20191025 23:50:12.294"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:12.295" starttime="20191025 23:50:07.887"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:12.295" starttime="20191025 23:50:07.886"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${BUCKET}' == 'generated'</arg>
<arg>Create bucket</arg>
</arguments>
<status status="PASS" endtime="20191025 23:50:12.296" starttime="20191025 23:50:12.295"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:12.296" starttime="20191025 23:50:07.084"></status>
</kw>
<kw name="Execute AWSS3APICli" library="commonawslib">
<arguments>
<arg>get-object --bucket ${BUCKET} --key putobject/f1 --range bytes=0-4 /tmp/testfile1.result</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws s3api --endpoint-url ${ENDPOINT_URL} ${command}</arg>
</arguments>
<assign>
<var>${output}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:50:12.301" level="INFO">Running command 'aws s3api --endpoint-url http://s3g:9878 get-object --bucket bucket-67137 --key putobject/f1 --range bytes=0-4 /tmp/testfile1.result 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:50:21.779" level="INFO">${rc} = 255</msg>
<msg timestamp="20191025 23:50:21.779" level="INFO">${output} = 
An error occurred (500) when calling the GetObject operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:50:21.779" starttime="20191025 23:50:12.299"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:50:21.780" level="INFO">
An error occurred (500) when calling the GetObject operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:50:21.781" starttime="20191025 23:50:21.780"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:50:21.781" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191025 23:50:21.782" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191025 23:50:21.782" starttime="20191025 23:50:21.781"></status>
</kw>
<status status="FAIL" endtime="20191025 23:50:21.782" starttime="20191025 23:50:12.298"></status>
</kw>
<status status="FAIL" endtime="20191025 23:50:21.782" starttime="20191025 23:50:12.297"></status>
</kw>
<status status="FAIL" endtime="20191025 23:50:21.783" critical="yes" starttime="20191025 23:50:07.082">255 != 0</status>
</test>
<test id="s1-s9-t4" name="Get Partial object from s3 with both start and endoffset(start offset and endoffset is greater than file size)">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:50:21.788" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:50:21.794" level="INFO">${rc} = 1</msg>
<msg timestamp="20191025 23:50:21.794" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191025 23:50:21.794" starttime="20191025 23:50:21.786"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191025 23:50:21.796" starttime="20191025 23:50:21.795"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:50:21.797" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:50:21.973" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:50:21.973" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191025 23:50:21.973" starttime="20191025 23:50:21.796"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:50:21.980" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:50:22.461" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:50:22.462" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: mirror.sfo12.us.leaseweb.net
 * upd...</msg>
<status status="PASS" endtime="20191025 23:50:22.462" starttime="20191025 23:50:21.978"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:50:22.463" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: mirror.sfo12.us.leaseweb.net
 * updates: mirror.sfo12.us.leaseweb.net
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191025 23:50:22.463" starttime="20191025 23:50:22.462"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:50:22.464" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:50:22.464" starttime="20191025 23:50:22.463"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:22.464" starttime="20191025 23:50:21.977"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:22.464" starttime="20191025 23:50:21.976"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:22.465" starttime="20191025 23:50:21.974"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:22.465" starttime="20191025 23:50:21.786"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:22.465" starttime="20191025 23:50:21.785"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:50:22.470" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:50:22.478" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:50:22.479" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191025 23:50:22.479" starttime="20191025 23:50:22.468"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:50:22.480" level="INFO">s3g</msg>
<status status="PASS" endtime="20191025 23:50:22.480" starttime="20191025 23:50:22.479"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:50:22.481" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:50:22.481" starttime="20191025 23:50:22.480"></status>
</kw>
<msg timestamp="20191025 23:50:22.481" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191025 23:50:22.481" starttime="20191025 23:50:22.467"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191025 23:50:22.482" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:50:22.482" starttime="20191025 23:50:22.482"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:50:22.486" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:50:22.525" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:50:22.525" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:50:22.525" starttime="20191025 23:50:22.484"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:50:22.527" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:50:22.527" starttime="20191025 23:50:22.526"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:50:22.529" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:50:22.529" starttime="20191025 23:50:22.528"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:22.529" starttime="20191025 23:50:22.483"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:22.530" starttime="20191025 23:50:22.483"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:22.530" starttime="20191025 23:50:22.467"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:22.530" starttime="20191025 23:50:22.466"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:50:22.535" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:50:24.940" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:50:24.940" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:50:24.941" starttime="20191025 23:50:22.532"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:50:24.942" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
awsAccessKey=testuser/s3g@EXAMPLE.COM
awsSecret=bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676</msg>
<status status="PASS" endtime="20191025 23:50:24.942" starttime="20191025 23:50:24.941"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:50:24.943" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:50:24.943" starttime="20191025 23:50:24.943"></status>
</kw>
<msg timestamp="20191025 23:50:24.944" level="INFO">${result} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:50:24.944" starttime="20191025 23:50:22.532"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsAccessKey=).*</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:50:24.945" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:50:24.945" starttime="20191025 23:50:24.945"></status>
</kw>
<kw name="Get Variable Value" library="BuiltIn">
<doc>Returns variable value or ``default`` if the variable does not exist.</doc>
<arguments>
<arg>${accessKey}</arg>
<arg>sdsdasaasdasd</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:50:24.947" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:50:24.947" starttime="20191025 23:50:24.946"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsSecret=).*</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:50:24.948" level="INFO">${secret} = [u'bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676']</msg>
<status status="PASS" endtime="20191025 23:50:24.948" starttime="20191025 23:50:24.947"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${accessKey[0]}</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:50:24.949" level="INFO">${accessKey} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:50:24.949" starttime="20191025 23:50:24.948"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${secret[0]}</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:50:24.950" level="INFO">${secret} = bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676</msg>
<status status="PASS" endtime="20191025 23:50:24.950" starttime="20191025 23:50:24.949"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set default.s3.signature_version s3v4</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:50:24.953" level="INFO">Running command 'aws configure set default.s3.signature_version s3v4 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:50:25.413" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:50:25.413" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:50:25.414" starttime="20191025 23:50:24.951"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:50:25.415" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:50:25.416" starttime="20191025 23:50:25.414"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:50:25.417" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:50:25.417" starttime="20191025 23:50:25.416"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:25.418" starttime="20191025 23:50:24.950"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_access_key_id ${accessKey}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:50:25.422" level="INFO">Running command 'aws configure set aws_access_key_id testuser/s3g@EXAMPLE.COM 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:50:25.874" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:50:25.874" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:50:25.874" starttime="20191025 23:50:25.419"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:50:25.876" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:50:25.876" starttime="20191025 23:50:25.875"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:50:25.877" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:50:25.878" starttime="20191025 23:50:25.877"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:25.878" starttime="20191025 23:50:25.418"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_secret_access_key ${secret}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:50:25.882" level="INFO">Running command 'aws configure set aws_secret_access_key bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:50:26.345" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:50:26.346" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:50:26.346" starttime="20191025 23:50:25.880"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:50:26.348" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:50:26.348" starttime="20191025 23:50:26.347"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:50:26.349" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:50:26.349" starttime="20191025 23:50:26.348"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:26.350" starttime="20191025 23:50:25.878"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set region us-west-1</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:50:26.353" level="INFO">Running command 'aws configure set region us-west-1 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:50:26.838" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:50:26.838" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:50:26.838" starttime="20191025 23:50:26.351"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:50:26.840" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:50:26.840" starttime="20191025 23:50:26.839"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:50:26.841" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:50:26.841" starttime="20191025 23:50:26.841"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:26.842" starttime="20191025 23:50:26.350"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:26.842" starttime="20191025 23:50:22.531"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:26.843" starttime="20191025 23:50:22.530"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'false'</arg>
<arg>Setup dummy credentials for S3</arg>
</arguments>
<status status="PASS" endtime="20191025 23:50:26.844" starttime="20191025 23:50:26.843"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:26.844" starttime="20191025 23:50:22.466"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:26.844" starttime="20191025 23:50:22.465"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${BUCKET}' == 'generated'</arg>
<arg>Create bucket</arg>
</arguments>
<status status="PASS" endtime="20191025 23:50:26.845" starttime="20191025 23:50:26.845"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:26.846" starttime="20191025 23:50:21.785"></status>
</kw>
<kw name="Execute AWSS3APICli and checkrc" library="commonawslib">
<arguments>
<arg>get-object --bucket ${BUCKET} --key putobject/f1 --range bytes=10000-10000 /tmp/testfile2.result</arg>
<arg>255</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Execute and checkrc" library="commonlib">
<arguments>
<arg>aws s3api --endpoint-url ${ENDPOINT_URL} ${command}</arg>
<arg>${expected_error_code}</arg>
</arguments>
<assign>
<var>${output}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:50:26.851" level="INFO">Running command 'aws s3api --endpoint-url http://s3g:9878 get-object --bucket bucket-67137 --key putobject/f1 --range bytes=10000-10000 /tmp/testfile2.result 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:50:38.455" level="INFO">${rc} = 255</msg>
<msg timestamp="20191025 23:50:38.455" level="INFO">${output} = 
An error occurred (500) when calling the GetObject operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:50:38.455" starttime="20191025 23:50:26.848"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:50:38.457" level="INFO">
An error occurred (500) when calling the GetObject operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:50:38.458" starttime="20191025 23:50:38.456"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
</arguments>
<msg timestamp="20191025 23:50:38.459" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:50:38.459" starttime="20191025 23:50:38.458"></status>
</kw>
<msg timestamp="20191025 23:50:38.460" level="INFO">${output} = 
An error occurred (500) when calling the GetObject operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:50:38.460" starttime="20191025 23:50:26.847"></status>
</kw>
<msg timestamp="20191025 23:50:38.461" level="INFO">${result} = 
An error occurred (500) when calling the GetObject operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:50:38.461" starttime="20191025 23:50:26.846"></status>
</kw>
<kw name="Should Contain" library="BuiltIn">
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<arguments>
<arg>${result}</arg>
<arg>InvalidRange</arg>
</arguments>
<msg timestamp="20191025 23:50:38.462" level="FAIL">'
An error occurred (500) when calling the GetObject operation (reached max retries: 4): Internal Server Error' does not contain 'InvalidRange'</msg>
<status status="FAIL" endtime="20191025 23:50:38.462" starttime="20191025 23:50:38.461"></status>
</kw>
<status status="FAIL" endtime="20191025 23:50:38.463" critical="yes" starttime="20191025 23:50:21.783">'
An error occurred (500) when calling the GetObject operation (reached max retries: 4): Internal Server Error' does not contain 'InvalidRange'</status>
</test>
<test id="s1-s9-t5" name="Get Partial object from s3 with both start and endoffset(end offset is greater than file size)">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:50:38.470" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:50:38.476" level="INFO">${rc} = 1</msg>
<msg timestamp="20191025 23:50:38.477" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191025 23:50:38.477" starttime="20191025 23:50:38.467"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191025 23:50:38.478" starttime="20191025 23:50:38.477"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:50:38.480" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:50:38.645" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:50:38.645" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191025 23:50:38.645" starttime="20191025 23:50:38.478"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:50:38.649" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:50:39.154" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:50:39.154" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: mirror.sfo12.us.leaseweb.net
 * upd...</msg>
<status status="PASS" endtime="20191025 23:50:39.154" starttime="20191025 23:50:38.648"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:50:39.156" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: mirror.sfo12.us.leaseweb.net
 * updates: mirror.sfo12.us.leaseweb.net
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191025 23:50:39.156" starttime="20191025 23:50:39.155"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:50:39.157" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:50:39.158" starttime="20191025 23:50:39.157"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:39.158" starttime="20191025 23:50:38.647"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:39.159" starttime="20191025 23:50:38.647"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:39.159" starttime="20191025 23:50:38.646"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:39.159" starttime="20191025 23:50:38.467"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:39.159" starttime="20191025 23:50:38.466"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:50:39.168" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:50:39.173" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:50:39.174" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191025 23:50:39.174" starttime="20191025 23:50:39.166"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:50:39.175" level="INFO">s3g</msg>
<status status="PASS" endtime="20191025 23:50:39.175" starttime="20191025 23:50:39.174"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:50:39.176" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:50:39.177" starttime="20191025 23:50:39.176"></status>
</kw>
<msg timestamp="20191025 23:50:39.177" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191025 23:50:39.177" starttime="20191025 23:50:39.163"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191025 23:50:39.179" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:50:39.179" starttime="20191025 23:50:39.178"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:50:39.183" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:50:39.196" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:50:39.196" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:50:39.196" starttime="20191025 23:50:39.181"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:50:39.198" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:50:39.198" starttime="20191025 23:50:39.197"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:50:39.198" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:50:39.199" starttime="20191025 23:50:39.198"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:39.199" starttime="20191025 23:50:39.180"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:39.199" starttime="20191025 23:50:39.179"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:39.199" starttime="20191025 23:50:39.162"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:39.199" starttime="20191025 23:50:39.161"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:50:39.203" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:50:41.649" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:50:41.650" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:50:41.650" starttime="20191025 23:50:39.201"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:50:41.652" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
awsAccessKey=testuser/s3g@EXAMPLE.COM
awsSecret=bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676</msg>
<status status="PASS" endtime="20191025 23:50:41.652" starttime="20191025 23:50:41.651"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:50:41.653" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:50:41.654" starttime="20191025 23:50:41.653"></status>
</kw>
<msg timestamp="20191025 23:50:41.655" level="INFO">${result} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:50:41.655" starttime="20191025 23:50:39.201"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsAccessKey=).*</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:50:41.656" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:50:41.656" starttime="20191025 23:50:41.655"></status>
</kw>
<kw name="Get Variable Value" library="BuiltIn">
<doc>Returns variable value or ``default`` if the variable does not exist.</doc>
<arguments>
<arg>${accessKey}</arg>
<arg>sdsdasaasdasd</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:50:41.658" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:50:41.658" starttime="20191025 23:50:41.657"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsSecret=).*</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:50:41.660" level="INFO">${secret} = [u'bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676']</msg>
<status status="PASS" endtime="20191025 23:50:41.660" starttime="20191025 23:50:41.659"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${accessKey[0]}</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:50:41.661" level="INFO">${accessKey} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:50:41.661" starttime="20191025 23:50:41.660"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${secret[0]}</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:50:41.662" level="INFO">${secret} = bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676</msg>
<status status="PASS" endtime="20191025 23:50:41.663" starttime="20191025 23:50:41.661"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set default.s3.signature_version s3v4</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:50:41.666" level="INFO">Running command 'aws configure set default.s3.signature_version s3v4 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:50:42.116" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:50:42.117" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:50:42.117" starttime="20191025 23:50:41.664"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:50:42.119" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:50:42.119" starttime="20191025 23:50:42.118"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:50:42.120" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:50:42.121" starttime="20191025 23:50:42.120"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:42.121" starttime="20191025 23:50:41.663"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_access_key_id ${accessKey}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:50:42.126" level="INFO">Running command 'aws configure set aws_access_key_id testuser/s3g@EXAMPLE.COM 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:50:42.570" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:50:42.570" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:50:42.570" starttime="20191025 23:50:42.123"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:50:42.572" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:50:42.573" starttime="20191025 23:50:42.571"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:50:42.574" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:50:42.574" starttime="20191025 23:50:42.573"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:42.575" starttime="20191025 23:50:42.122"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_secret_access_key ${secret}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:50:42.579" level="INFO">Running command 'aws configure set aws_secret_access_key bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:50:43.058" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:50:43.059" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:50:43.059" starttime="20191025 23:50:42.577"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:50:43.061" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:50:43.061" starttime="20191025 23:50:43.060"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:50:43.062" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:50:43.063" starttime="20191025 23:50:43.062"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:43.063" starttime="20191025 23:50:42.575"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set region us-west-1</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:50:43.067" level="INFO">Running command 'aws configure set region us-west-1 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:50:43.562" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:50:43.562" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:50:43.563" starttime="20191025 23:50:43.065"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:50:43.564" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:50:43.564" starttime="20191025 23:50:43.563"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:50:43.565" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:50:43.565" starttime="20191025 23:50:43.564"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:43.565" starttime="20191025 23:50:43.063"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:43.565" starttime="20191025 23:50:39.200"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:43.565" starttime="20191025 23:50:39.200"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'false'</arg>
<arg>Setup dummy credentials for S3</arg>
</arguments>
<status status="PASS" endtime="20191025 23:50:43.566" starttime="20191025 23:50:43.566"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:43.566" starttime="20191025 23:50:39.161"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:43.567" starttime="20191025 23:50:39.160"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${BUCKET}' == 'generated'</arg>
<arg>Create bucket</arg>
</arguments>
<status status="PASS" endtime="20191025 23:50:43.567" starttime="20191025 23:50:43.567"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:43.567" starttime="20191025 23:50:38.465"></status>
</kw>
<kw name="Execute AWSS3APICli" library="commonawslib">
<arguments>
<arg>get-object --bucket ${BUCKET} --key putobject/f1 --range bytes=0-10000 /tmp/testfile2.result</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws s3api --endpoint-url ${ENDPOINT_URL} ${command}</arg>
</arguments>
<assign>
<var>${output}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:50:43.571" level="INFO">Running command 'aws s3api --endpoint-url http://s3g:9878 get-object --bucket bucket-67137 --key putobject/f1 --range bytes=0-10000 /tmp/testfile2.result 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:50:57.323" level="INFO">${rc} = 255</msg>
<msg timestamp="20191025 23:50:57.323" level="INFO">${output} = 
An error occurred (500) when calling the GetObject operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:50:57.323" starttime="20191025 23:50:43.569"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:50:57.325" level="INFO">
An error occurred (500) when calling the GetObject operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:50:57.326" starttime="20191025 23:50:57.324"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:50:57.327" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191025 23:50:57.327" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191025 23:50:57.328" starttime="20191025 23:50:57.326"></status>
</kw>
<status status="FAIL" endtime="20191025 23:50:57.328" starttime="20191025 23:50:43.568"></status>
</kw>
<status status="FAIL" endtime="20191025 23:50:57.328" starttime="20191025 23:50:43.568"></status>
</kw>
<status status="FAIL" endtime="20191025 23:50:57.329" critical="yes" starttime="20191025 23:50:38.464">255 != 0</status>
</test>
<test id="s1-s9-t6" name="Get Partial object from s3 with only start offset">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:50:57.336" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:50:57.342" level="INFO">${rc} = 1</msg>
<msg timestamp="20191025 23:50:57.343" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191025 23:50:57.343" starttime="20191025 23:50:57.333"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191025 23:50:57.345" starttime="20191025 23:50:57.344"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:50:57.347" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:50:57.554" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:50:57.554" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191025 23:50:57.554" starttime="20191025 23:50:57.345"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:50:57.561" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:50:58.069" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:50:58.070" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: mirror.sfo12.us.leaseweb.net
 * upd...</msg>
<status status="PASS" endtime="20191025 23:50:58.070" starttime="20191025 23:50:57.559"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:50:58.072" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: mirror.sfo12.us.leaseweb.net
 * updates: mirror.sfo12.us.leaseweb.net
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191025 23:50:58.072" starttime="20191025 23:50:58.071"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:50:58.073" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:50:58.073" starttime="20191025 23:50:58.072"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:58.073" starttime="20191025 23:50:57.558"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:58.074" starttime="20191025 23:50:57.557"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:58.074" starttime="20191025 23:50:57.555"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:58.074" starttime="20191025 23:50:57.333"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:58.074" starttime="20191025 23:50:57.332"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:50:58.082" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:50:58.089" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:50:58.090" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191025 23:50:58.090" starttime="20191025 23:50:58.079"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:50:58.092" level="INFO">s3g</msg>
<status status="PASS" endtime="20191025 23:50:58.092" starttime="20191025 23:50:58.091"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:50:58.093" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:50:58.093" starttime="20191025 23:50:58.092"></status>
</kw>
<msg timestamp="20191025 23:50:58.094" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191025 23:50:58.094" starttime="20191025 23:50:58.078"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191025 23:50:58.095" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:50:58.095" starttime="20191025 23:50:58.094"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:50:58.100" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:50:58.118" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:50:58.118" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:50:58.118" starttime="20191025 23:50:58.098"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:50:58.120" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:50:58.120" starttime="20191025 23:50:58.119"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:50:58.121" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:50:58.121" starttime="20191025 23:50:58.120"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:58.121" starttime="20191025 23:50:58.097"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:58.122" starttime="20191025 23:50:58.096"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:58.122" starttime="20191025 23:50:58.077"></status>
</kw>
<status status="PASS" endtime="20191025 23:50:58.122" starttime="20191025 23:50:58.076"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:50:58.127" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:51:00.726" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:51:00.726" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:51:00.726" starttime="20191025 23:50:58.125"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:51:00.728" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
awsAccessKey=testuser/s3g@EXAMPLE.COM
awsSecret=bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676</msg>
<status status="PASS" endtime="20191025 23:51:00.728" starttime="20191025 23:51:00.727"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:51:00.729" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:51:00.730" starttime="20191025 23:51:00.729"></status>
</kw>
<msg timestamp="20191025 23:51:00.730" level="INFO">${result} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:51:00.730" starttime="20191025 23:50:58.124"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsAccessKey=).*</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:51:00.732" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:51:00.732" starttime="20191025 23:51:00.731"></status>
</kw>
<kw name="Get Variable Value" library="BuiltIn">
<doc>Returns variable value or ``default`` if the variable does not exist.</doc>
<arguments>
<arg>${accessKey}</arg>
<arg>sdsdasaasdasd</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:51:00.733" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:51:00.733" starttime="20191025 23:51:00.732"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsSecret=).*</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:51:00.734" level="INFO">${secret} = [u'bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676']</msg>
<status status="PASS" endtime="20191025 23:51:00.734" starttime="20191025 23:51:00.733"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${accessKey[0]}</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:51:00.735" level="INFO">${accessKey} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:51:00.736" starttime="20191025 23:51:00.735"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${secret[0]}</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:51:00.737" level="INFO">${secret} = bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676</msg>
<status status="PASS" endtime="20191025 23:51:00.737" starttime="20191025 23:51:00.736"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set default.s3.signature_version s3v4</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:51:00.740" level="INFO">Running command 'aws configure set default.s3.signature_version s3v4 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:51:01.226" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:51:01.226" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:51:01.226" starttime="20191025 23:51:00.738"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:51:01.228" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:51:01.228" starttime="20191025 23:51:01.227"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:51:01.229" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:51:01.230" starttime="20191025 23:51:01.229"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:01.230" starttime="20191025 23:51:00.737"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_access_key_id ${accessKey}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:51:01.234" level="INFO">Running command 'aws configure set aws_access_key_id testuser/s3g@EXAMPLE.COM 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:51:01.711" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:51:01.711" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:51:01.711" starttime="20191025 23:51:01.232"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:51:01.712" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:51:01.713" starttime="20191025 23:51:01.712"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:51:01.713" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:51:01.713" starttime="20191025 23:51:01.713"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:01.714" starttime="20191025 23:51:01.230"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_secret_access_key ${secret}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:51:01.717" level="INFO">Running command 'aws configure set aws_secret_access_key bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:51:02.102" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:51:02.102" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:51:02.102" starttime="20191025 23:51:01.714"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:51:02.104" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:51:02.104" starttime="20191025 23:51:02.103"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:51:02.106" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:51:02.106" starttime="20191025 23:51:02.105"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:02.106" starttime="20191025 23:51:01.714"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set region us-west-1</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:51:02.110" level="INFO">Running command 'aws configure set region us-west-1 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:51:02.614" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:51:02.614" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:51:02.614" starttime="20191025 23:51:02.108"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:51:02.616" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:51:02.616" starttime="20191025 23:51:02.615"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:51:02.618" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:51:02.618" starttime="20191025 23:51:02.617"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:02.618" starttime="20191025 23:51:02.107"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:02.619" starttime="20191025 23:50:58.123"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:02.619" starttime="20191025 23:50:58.122"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'false'</arg>
<arg>Setup dummy credentials for S3</arg>
</arguments>
<status status="PASS" endtime="20191025 23:51:02.620" starttime="20191025 23:51:02.619"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:02.621" starttime="20191025 23:50:58.076"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:02.621" starttime="20191025 23:50:58.075"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${BUCKET}' == 'generated'</arg>
<arg>Create bucket</arg>
</arguments>
<status status="PASS" endtime="20191025 23:51:02.622" starttime="20191025 23:51:02.621"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:02.622" starttime="20191025 23:50:57.331"></status>
</kw>
<kw name="Execute AWSS3APICli" library="commonawslib">
<arguments>
<arg>get-object --bucket ${BUCKET} --key putobject/f1 --range bytes=0- /tmp/testfile3.result</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws s3api --endpoint-url ${ENDPOINT_URL} ${command}</arg>
</arguments>
<assign>
<var>${output}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:51:02.628" level="INFO">Running command 'aws s3api --endpoint-url http://s3g:9878 get-object --bucket bucket-67137 --key putobject/f1 --range bytes=0- /tmp/testfile3.result 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:51:06.586" level="INFO">${rc} = 255</msg>
<msg timestamp="20191025 23:51:06.587" level="INFO">${output} = 
An error occurred (500) when calling the GetObject operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:51:06.587" starttime="20191025 23:51:02.625"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:51:06.589" level="INFO">
An error occurred (500) when calling the GetObject operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:51:06.589" starttime="20191025 23:51:06.588"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:51:06.590" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191025 23:51:06.591" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191025 23:51:06.591" starttime="20191025 23:51:06.589"></status>
</kw>
<status status="FAIL" endtime="20191025 23:51:06.591" starttime="20191025 23:51:02.624"></status>
</kw>
<status status="FAIL" endtime="20191025 23:51:06.592" starttime="20191025 23:51:02.623"></status>
</kw>
<status status="FAIL" endtime="20191025 23:51:06.592" critical="yes" starttime="20191025 23:50:57.330">255 != 0</status>
</test>
<test id="s1-s9-t7" name="Get Partial object from s3 with both start and endoffset which are equal">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:51:06.599" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:51:06.607" level="INFO">${rc} = 1</msg>
<msg timestamp="20191025 23:51:06.607" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191025 23:51:06.608" starttime="20191025 23:51:06.597"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191025 23:51:06.609" starttime="20191025 23:51:06.608"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:51:06.612" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:51:06.799" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:51:06.799" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191025 23:51:06.800" starttime="20191025 23:51:06.610"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:51:06.806" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:51:07.324" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:51:07.324" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: mirror.sfo12.us.leaseweb.net
 * upd...</msg>
<status status="PASS" endtime="20191025 23:51:07.324" starttime="20191025 23:51:06.804"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:51:07.326" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: mirror.sfo12.us.leaseweb.net
 * updates: mirror.sfo12.us.leaseweb.net
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191025 23:51:07.326" starttime="20191025 23:51:07.325"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:51:07.327" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:51:07.327" starttime="20191025 23:51:07.326"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:07.327" starttime="20191025 23:51:06.803"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:07.328" starttime="20191025 23:51:06.802"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:07.328" starttime="20191025 23:51:06.801"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:07.328" starttime="20191025 23:51:06.596"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:07.328" starttime="20191025 23:51:06.595"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:51:07.334" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:51:07.342" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:51:07.342" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191025 23:51:07.343" starttime="20191025 23:51:07.332"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:51:07.344" level="INFO">s3g</msg>
<status status="PASS" endtime="20191025 23:51:07.344" starttime="20191025 23:51:07.343"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:51:07.345" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:51:07.345" starttime="20191025 23:51:07.344"></status>
</kw>
<msg timestamp="20191025 23:51:07.345" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191025 23:51:07.345" starttime="20191025 23:51:07.331"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191025 23:51:07.346" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:51:07.346" starttime="20191025 23:51:07.345"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:51:07.350" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:51:07.367" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:51:07.367" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:51:07.367" starttime="20191025 23:51:07.348"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:51:07.368" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:51:07.368" starttime="20191025 23:51:07.368"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:51:07.369" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:51:07.369" starttime="20191025 23:51:07.369"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:07.370" starttime="20191025 23:51:07.347"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:07.370" starttime="20191025 23:51:07.347"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:07.370" starttime="20191025 23:51:07.331"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:07.370" starttime="20191025 23:51:07.330"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:51:07.374" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:51:09.942" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:51:09.943" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:51:09.943" starttime="20191025 23:51:07.372"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:51:09.945" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
awsAccessKey=testuser/s3g@EXAMPLE.COM
awsSecret=bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676</msg>
<status status="PASS" endtime="20191025 23:51:09.945" starttime="20191025 23:51:09.944"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:51:09.946" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:51:09.946" starttime="20191025 23:51:09.945"></status>
</kw>
<msg timestamp="20191025 23:51:09.947" level="INFO">${result} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:51:09.947" starttime="20191025 23:51:07.371"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsAccessKey=).*</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:51:09.948" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:51:09.948" starttime="20191025 23:51:09.947"></status>
</kw>
<kw name="Get Variable Value" library="BuiltIn">
<doc>Returns variable value or ``default`` if the variable does not exist.</doc>
<arguments>
<arg>${accessKey}</arg>
<arg>sdsdasaasdasd</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:51:09.950" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:51:09.950" starttime="20191025 23:51:09.949"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsSecret=).*</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:51:09.951" level="INFO">${secret} = [u'bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676']</msg>
<status status="PASS" endtime="20191025 23:51:09.951" starttime="20191025 23:51:09.950"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${accessKey[0]}</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:51:09.952" level="INFO">${accessKey} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:51:09.953" starttime="20191025 23:51:09.952"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${secret[0]}</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:51:09.954" level="INFO">${secret} = bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676</msg>
<status status="PASS" endtime="20191025 23:51:09.954" starttime="20191025 23:51:09.953"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set default.s3.signature_version s3v4</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:51:09.957" level="INFO">Running command 'aws configure set default.s3.signature_version s3v4 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:51:10.360" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:51:10.360" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:51:10.360" starttime="20191025 23:51:09.955"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:51:10.363" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:51:10.363" starttime="20191025 23:51:10.362"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:51:10.364" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:51:10.365" starttime="20191025 23:51:10.363"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:10.365" starttime="20191025 23:51:09.954"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_access_key_id ${accessKey}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:51:10.369" level="INFO">Running command 'aws configure set aws_access_key_id testuser/s3g@EXAMPLE.COM 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:51:10.836" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:51:10.836" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:51:10.836" starttime="20191025 23:51:10.367"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:51:10.838" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:51:10.838" starttime="20191025 23:51:10.837"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:51:10.838" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:51:10.839" starttime="20191025 23:51:10.838"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:10.839" starttime="20191025 23:51:10.366"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_secret_access_key ${secret}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:51:10.842" level="INFO">Running command 'aws configure set aws_secret_access_key bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:51:11.223" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:51:11.223" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:51:11.223" starttime="20191025 23:51:10.840"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:51:11.226" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:51:11.227" starttime="20191025 23:51:11.224"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:51:11.228" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:51:11.228" starttime="20191025 23:51:11.227"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:11.228" starttime="20191025 23:51:10.839"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set region us-west-1</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:51:11.232" level="INFO">Running command 'aws configure set region us-west-1 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:51:11.679" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:51:11.679" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:51:11.679" starttime="20191025 23:51:11.230"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:51:11.680" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:51:11.681" starttime="20191025 23:51:11.680"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:51:11.681" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:51:11.681" starttime="20191025 23:51:11.681"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:11.682" starttime="20191025 23:51:11.229"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:11.682" starttime="20191025 23:51:07.371"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:11.682" starttime="20191025 23:51:07.370"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'false'</arg>
<arg>Setup dummy credentials for S3</arg>
</arguments>
<status status="PASS" endtime="20191025 23:51:11.683" starttime="20191025 23:51:11.682"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:11.683" starttime="20191025 23:51:07.329"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:11.683" starttime="20191025 23:51:07.328"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${BUCKET}' == 'generated'</arg>
<arg>Create bucket</arg>
</arguments>
<status status="PASS" endtime="20191025 23:51:11.684" starttime="20191025 23:51:11.683"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:11.684" starttime="20191025 23:51:06.594"></status>
</kw>
<kw name="Execute AWSS3APICli" library="commonawslib">
<arguments>
<arg>get-object --bucket ${BUCKET} --key putobject/f1 --range bytes=0-0 /tmp/testfile4.result</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws s3api --endpoint-url ${ENDPOINT_URL} ${command}</arg>
</arguments>
<assign>
<var>${output}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:51:11.687" level="INFO">Running command 'aws s3api --endpoint-url http://s3g:9878 get-object --bucket bucket-67137 --key putobject/f1 --range bytes=0-0 /tmp/testfile4.result 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:51:21.060" level="INFO">${rc} = 255</msg>
<msg timestamp="20191025 23:51:21.060" level="INFO">${output} = 
An error occurred (500) when calling the GetObject operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:51:21.060" starttime="20191025 23:51:11.686"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:51:21.061" level="INFO">
An error occurred (500) when calling the GetObject operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:51:21.061" starttime="20191025 23:51:21.060"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:51:21.062" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191025 23:51:21.063" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191025 23:51:21.063" starttime="20191025 23:51:21.062"></status>
</kw>
<status status="FAIL" endtime="20191025 23:51:21.063" starttime="20191025 23:51:11.685"></status>
</kw>
<status status="FAIL" endtime="20191025 23:51:21.063" starttime="20191025 23:51:11.685"></status>
</kw>
<status status="FAIL" endtime="20191025 23:51:21.064" critical="yes" starttime="20191025 23:51:06.593">255 != 0</status>
</test>
<test id="s1-s9-t8" name="Get Partial object from s3 to get last n bytes">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:51:21.069" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:51:21.077" level="INFO">${rc} = 1</msg>
<msg timestamp="20191025 23:51:21.077" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191025 23:51:21.078" starttime="20191025 23:51:21.067"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191025 23:51:21.080" starttime="20191025 23:51:21.079"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:51:21.082" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:51:21.291" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:51:21.291" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191025 23:51:21.292" starttime="20191025 23:51:21.080"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:51:21.299" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:51:21.819" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:51:21.819" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: mirror.sfo12.us.leaseweb.net
 * upd...</msg>
<status status="PASS" endtime="20191025 23:51:21.819" starttime="20191025 23:51:21.296"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:51:21.820" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: mirror.sfo12.us.leaseweb.net
 * updates: mirror.sfo12.us.leaseweb.net
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191025 23:51:21.821" starttime="20191025 23:51:21.820"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:51:21.821" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:51:21.821" starttime="20191025 23:51:21.821"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:21.822" starttime="20191025 23:51:21.295"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:21.822" starttime="20191025 23:51:21.294"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:21.822" starttime="20191025 23:51:21.293"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:21.822" starttime="20191025 23:51:21.066"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:21.822" starttime="20191025 23:51:21.066"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:51:21.827" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:51:21.834" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:51:21.834" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191025 23:51:21.834" starttime="20191025 23:51:21.826"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:51:21.836" level="INFO">s3g</msg>
<status status="PASS" endtime="20191025 23:51:21.836" starttime="20191025 23:51:21.834"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:51:21.836" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:51:21.836" starttime="20191025 23:51:21.836"></status>
</kw>
<msg timestamp="20191025 23:51:21.837" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191025 23:51:21.837" starttime="20191025 23:51:21.825"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191025 23:51:21.838" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:51:21.838" starttime="20191025 23:51:21.837"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:51:21.841" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:51:21.855" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:51:21.855" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:51:21.855" starttime="20191025 23:51:21.839"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:51:21.856" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:51:21.856" starttime="20191025 23:51:21.855"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:51:21.857" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:51:21.857" starttime="20191025 23:51:21.856"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:21.857" starttime="20191025 23:51:21.839"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:21.857" starttime="20191025 23:51:21.838"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:21.857" starttime="20191025 23:51:21.825"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:21.857" starttime="20191025 23:51:21.824"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:51:21.861" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:51:24.352" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:51:24.352" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:51:24.352" starttime="20191025 23:51:21.859"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:51:24.353" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
awsAccessKey=testuser/s3g@EXAMPLE.COM
awsSecret=bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676</msg>
<status status="PASS" endtime="20191025 23:51:24.353" starttime="20191025 23:51:24.353"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:51:24.354" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:51:24.354" starttime="20191025 23:51:24.354"></status>
</kw>
<msg timestamp="20191025 23:51:24.355" level="INFO">${result} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:51:24.355" starttime="20191025 23:51:21.859"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsAccessKey=).*</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:51:24.356" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:51:24.356" starttime="20191025 23:51:24.355"></status>
</kw>
<kw name="Get Variable Value" library="BuiltIn">
<doc>Returns variable value or ``default`` if the variable does not exist.</doc>
<arguments>
<arg>${accessKey}</arg>
<arg>sdsdasaasdasd</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:51:24.356" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:51:24.357" starttime="20191025 23:51:24.356"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsSecret=).*</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:51:24.357" level="INFO">${secret} = [u'bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676']</msg>
<status status="PASS" endtime="20191025 23:51:24.358" starttime="20191025 23:51:24.357"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${accessKey[0]}</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:51:24.358" level="INFO">${accessKey} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:51:24.358" starttime="20191025 23:51:24.358"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${secret[0]}</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:51:24.359" level="INFO">${secret} = bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676</msg>
<status status="PASS" endtime="20191025 23:51:24.359" starttime="20191025 23:51:24.359"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set default.s3.signature_version s3v4</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:51:24.362" level="INFO">Running command 'aws configure set default.s3.signature_version s3v4 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:51:24.823" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:51:24.823" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:51:24.823" starttime="20191025 23:51:24.360"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:51:24.824" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:51:24.825" starttime="20191025 23:51:24.824"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:51:24.825" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:51:24.825" starttime="20191025 23:51:24.825"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:24.826" starttime="20191025 23:51:24.359"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_access_key_id ${accessKey}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:51:24.829" level="INFO">Running command 'aws configure set aws_access_key_id testuser/s3g@EXAMPLE.COM 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:51:25.355" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:51:25.356" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:51:25.356" starttime="20191025 23:51:24.827"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:51:25.358" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:51:25.358" starttime="20191025 23:51:25.357"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:51:25.359" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:51:25.359" starttime="20191025 23:51:25.358"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:25.360" starttime="20191025 23:51:24.826"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_secret_access_key ${secret}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:51:25.363" level="INFO">Running command 'aws configure set aws_secret_access_key bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:51:25.774" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:51:25.774" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:51:25.774" starttime="20191025 23:51:25.361"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:51:25.776" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:51:25.776" starttime="20191025 23:51:25.775"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:51:25.779" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:51:25.779" starttime="20191025 23:51:25.777"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:25.779" starttime="20191025 23:51:25.360"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set region us-west-1</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:51:25.783" level="INFO">Running command 'aws configure set region us-west-1 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:51:26.245" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:51:26.246" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:51:26.246" starttime="20191025 23:51:25.781"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:51:26.247" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:51:26.247" starttime="20191025 23:51:26.246"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:51:26.248" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:51:26.248" starttime="20191025 23:51:26.247"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:26.248" starttime="20191025 23:51:25.780"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:26.248" starttime="20191025 23:51:21.858"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:26.248" starttime="20191025 23:51:21.858"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'false'</arg>
<arg>Setup dummy credentials for S3</arg>
</arguments>
<status status="PASS" endtime="20191025 23:51:26.249" starttime="20191025 23:51:26.249"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:26.250" starttime="20191025 23:51:21.823"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:26.250" starttime="20191025 23:51:21.823"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${BUCKET}' == 'generated'</arg>
<arg>Create bucket</arg>
</arguments>
<status status="PASS" endtime="20191025 23:51:26.250" starttime="20191025 23:51:26.250"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:26.250" starttime="20191025 23:51:21.065"></status>
</kw>
<kw name="Execute AWSS3APICli" library="commonawslib">
<arguments>
<arg>get-object --bucket ${BUCKET} --key putobject/f1 --range bytes=-4 /tmp/testfile6.result</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws s3api --endpoint-url ${ENDPOINT_URL} ${command}</arg>
</arguments>
<assign>
<var>${output}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:51:26.254" level="INFO">Running command 'aws s3api --endpoint-url http://s3g:9878 get-object --bucket bucket-67137 --key putobject/f1 --range bytes=-4 /tmp/testfile6.result 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:51:34.185" level="INFO">${rc} = 255</msg>
<msg timestamp="20191025 23:51:34.186" level="INFO">${output} = 
An error occurred (500) when calling the GetObject operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:51:34.186" starttime="20191025 23:51:26.252"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:51:34.188" level="INFO">
An error occurred (500) when calling the GetObject operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:51:34.188" starttime="20191025 23:51:34.187"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:51:34.189" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191025 23:51:34.190" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191025 23:51:34.190" starttime="20191025 23:51:34.188"></status>
</kw>
<status status="FAIL" endtime="20191025 23:51:34.190" starttime="20191025 23:51:26.252"></status>
</kw>
<status status="FAIL" endtime="20191025 23:51:34.191" starttime="20191025 23:51:26.251"></status>
</kw>
<status status="FAIL" endtime="20191025 23:51:34.191" critical="yes" starttime="20191025 23:51:21.064">255 != 0</status>
</test>
<test id="s1-s9-t9" name="Incorrect values for end and start offset">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:51:34.198" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:51:34.205" level="INFO">${rc} = 1</msg>
<msg timestamp="20191025 23:51:34.205" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191025 23:51:34.206" starttime="20191025 23:51:34.196"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191025 23:51:34.207" starttime="20191025 23:51:34.206"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:51:34.209" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:51:34.403" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:51:34.404" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191025 23:51:34.404" starttime="20191025 23:51:34.208"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:51:34.410" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:51:34.949" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:51:34.949" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: mirror.sfo12.us.leaseweb.net
 * upd...</msg>
<status status="PASS" endtime="20191025 23:51:34.950" starttime="20191025 23:51:34.408"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:51:34.952" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: mirror.sfo12.us.leaseweb.net
 * updates: mirror.sfo12.us.leaseweb.net
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191025 23:51:34.952" starttime="20191025 23:51:34.950"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:51:34.953" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:51:34.953" starttime="20191025 23:51:34.952"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:34.954" starttime="20191025 23:51:34.407"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:34.954" starttime="20191025 23:51:34.406"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:34.954" starttime="20191025 23:51:34.405"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:34.955" starttime="20191025 23:51:34.195"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:34.955" starttime="20191025 23:51:34.194"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:51:34.962" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:51:34.969" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:51:34.969" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191025 23:51:34.969" starttime="20191025 23:51:34.960"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:51:34.972" level="INFO">s3g</msg>
<status status="PASS" endtime="20191025 23:51:34.972" starttime="20191025 23:51:34.970"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:51:34.973" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:51:34.973" starttime="20191025 23:51:34.972"></status>
</kw>
<msg timestamp="20191025 23:51:34.974" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191025 23:51:34.974" starttime="20191025 23:51:34.959"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191025 23:51:34.975" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:51:34.976" starttime="20191025 23:51:34.974"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:51:34.980" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:51:34.994" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:51:34.995" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:51:34.995" starttime="20191025 23:51:34.978"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:51:34.996" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:51:34.997" starttime="20191025 23:51:34.995"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:51:34.997" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:51:34.998" starttime="20191025 23:51:34.997"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:34.998" starttime="20191025 23:51:34.977"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:34.998" starttime="20191025 23:51:34.976"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:34.999" starttime="20191025 23:51:34.958"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:34.999" starttime="20191025 23:51:34.957"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:51:35.004" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:51:37.491" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:51:37.492" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:51:37.492" starttime="20191025 23:51:35.002"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:51:37.493" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
awsAccessKey=testuser/s3g@EXAMPLE.COM
awsSecret=bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676</msg>
<status status="PASS" endtime="20191025 23:51:37.493" starttime="20191025 23:51:37.492"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:51:37.494" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:51:37.494" starttime="20191025 23:51:37.493"></status>
</kw>
<msg timestamp="20191025 23:51:37.494" level="INFO">${result} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:51:37.494" starttime="20191025 23:51:35.001"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsAccessKey=).*</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:51:37.495" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:51:37.495" starttime="20191025 23:51:37.495"></status>
</kw>
<kw name="Get Variable Value" library="BuiltIn">
<doc>Returns variable value or ``default`` if the variable does not exist.</doc>
<arguments>
<arg>${accessKey}</arg>
<arg>sdsdasaasdasd</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:51:37.496" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:51:37.496" starttime="20191025 23:51:37.496"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsSecret=).*</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:51:37.497" level="INFO">${secret} = [u'bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676']</msg>
<status status="PASS" endtime="20191025 23:51:37.497" starttime="20191025 23:51:37.496"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${accessKey[0]}</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:51:37.498" level="INFO">${accessKey} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:51:37.498" starttime="20191025 23:51:37.497"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${secret[0]}</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:51:37.499" level="INFO">${secret} = bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676</msg>
<status status="PASS" endtime="20191025 23:51:37.499" starttime="20191025 23:51:37.498"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set default.s3.signature_version s3v4</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:51:37.501" level="INFO">Running command 'aws configure set default.s3.signature_version s3v4 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:51:38.009" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:51:38.009" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:51:38.010" starttime="20191025 23:51:37.499"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:51:38.011" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:51:38.012" starttime="20191025 23:51:38.010"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:51:38.013" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:51:38.013" starttime="20191025 23:51:38.012"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:38.014" starttime="20191025 23:51:37.499"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_access_key_id ${accessKey}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:51:38.017" level="INFO">Running command 'aws configure set aws_access_key_id testuser/s3g@EXAMPLE.COM 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:51:38.514" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:51:38.515" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:51:38.515" starttime="20191025 23:51:38.015"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:51:38.517" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:51:38.517" starttime="20191025 23:51:38.516"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:51:38.518" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:51:38.518" starttime="20191025 23:51:38.517"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:38.519" starttime="20191025 23:51:38.014"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_secret_access_key ${secret}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:51:38.523" level="INFO">Running command 'aws configure set aws_secret_access_key bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:51:38.982" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:51:38.982" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:51:38.982" starttime="20191025 23:51:38.520"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:51:38.984" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:51:38.984" starttime="20191025 23:51:38.983"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:51:38.986" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:51:38.987" starttime="20191025 23:51:38.985"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:38.987" starttime="20191025 23:51:38.519"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set region us-west-1</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:51:38.991" level="INFO">Running command 'aws configure set region us-west-1 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:51:39.445" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:51:39.445" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:51:39.445" starttime="20191025 23:51:38.989"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:51:39.446" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:51:39.446" starttime="20191025 23:51:39.446"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:51:39.447" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:51:39.447" starttime="20191025 23:51:39.447"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:39.448" starttime="20191025 23:51:38.988"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:39.448" starttime="20191025 23:51:35.000"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:39.448" starttime="20191025 23:51:34.999"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'false'</arg>
<arg>Setup dummy credentials for S3</arg>
</arguments>
<status status="PASS" endtime="20191025 23:51:39.449" starttime="20191025 23:51:39.449"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:39.450" starttime="20191025 23:51:34.957"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:39.450" starttime="20191025 23:51:34.955"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${BUCKET}' == 'generated'</arg>
<arg>Create bucket</arg>
</arguments>
<status status="PASS" endtime="20191025 23:51:39.450" starttime="20191025 23:51:39.450"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:39.451" starttime="20191025 23:51:34.193"></status>
</kw>
<kw name="Execute AWSS3APICli" library="commonawslib">
<arguments>
<arg>get-object --bucket ${BUCKET} --key putobject/f1 --range bytes=-11-10000 /tmp/testfile8.result</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws s3api --endpoint-url ${ENDPOINT_URL} ${command}</arg>
</arguments>
<assign>
<var>${output}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:51:39.455" level="INFO">Running command 'aws s3api --endpoint-url http://s3g:9878 get-object --bucket bucket-67137 --key putobject/f1 --range bytes=-11-10000 /tmp/testfile8.result 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:51:52.788" level="INFO">${rc} = 255</msg>
<msg timestamp="20191025 23:51:52.788" level="INFO">${output} = 
An error occurred (500) when calling the GetObject operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:51:52.789" starttime="20191025 23:51:39.453"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:51:52.790" level="INFO">
An error occurred (500) when calling the GetObject operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:51:52.791" starttime="20191025 23:51:52.789"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:51:52.791" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191025 23:51:52.792" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191025 23:51:52.792" starttime="20191025 23:51:52.791"></status>
</kw>
<status status="FAIL" endtime="20191025 23:51:52.793" starttime="20191025 23:51:39.452"></status>
</kw>
<status status="FAIL" endtime="20191025 23:51:52.793" starttime="20191025 23:51:39.451"></status>
</kw>
<status status="FAIL" endtime="20191025 23:51:52.794" critical="yes" starttime="20191025 23:51:34.192">255 != 0</status>
</test>
<test id="s1-s9-t10" name="Zero byte file">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:51:52.800" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:51:52.807" level="INFO">${rc} = 1</msg>
<msg timestamp="20191025 23:51:52.808" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191025 23:51:52.808" starttime="20191025 23:51:52.798"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191025 23:51:52.809" starttime="20191025 23:51:52.808"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:51:52.812" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:51:53.011" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:51:53.011" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191025 23:51:53.011" starttime="20191025 23:51:52.810"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:51:53.018" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:51:53.551" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:51:53.551" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: mirror.sfo12.us.leaseweb.net
 * upd...</msg>
<status status="PASS" endtime="20191025 23:51:53.551" starttime="20191025 23:51:53.015"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:51:53.553" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: mirror.sfo12.us.leaseweb.net
 * updates: mirror.sfo12.us.leaseweb.net
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191025 23:51:53.553" starttime="20191025 23:51:53.552"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:51:53.554" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:51:53.554" starttime="20191025 23:51:53.553"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:53.555" starttime="20191025 23:51:53.014"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:53.555" starttime="20191025 23:51:53.014"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:53.556" starttime="20191025 23:51:53.012"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:53.556" starttime="20191025 23:51:52.797"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:53.556" starttime="20191025 23:51:52.796"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:51:53.563" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:51:53.571" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:51:53.571" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191025 23:51:53.571" starttime="20191025 23:51:53.561"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:51:53.573" level="INFO">s3g</msg>
<status status="PASS" endtime="20191025 23:51:53.573" starttime="20191025 23:51:53.572"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:51:53.574" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:51:53.575" starttime="20191025 23:51:53.574"></status>
</kw>
<msg timestamp="20191025 23:51:53.575" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191025 23:51:53.575" starttime="20191025 23:51:53.560"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191025 23:51:53.576" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:51:53.576" starttime="20191025 23:51:53.575"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:51:53.580" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:51:53.595" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:51:53.595" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:51:53.595" starttime="20191025 23:51:53.578"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:51:53.596" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:51:53.596" starttime="20191025 23:51:53.595"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:51:53.597" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:51:53.597" starttime="20191025 23:51:53.596"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:53.597" starttime="20191025 23:51:53.577"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:53.598" starttime="20191025 23:51:53.577"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:53.598" starttime="20191025 23:51:53.559"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:53.598" starttime="20191025 23:51:53.558"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:51:53.602" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:51:56.138" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:51:56.138" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:51:56.138" starttime="20191025 23:51:53.600"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:51:56.139" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
awsAccessKey=testuser/s3g@EXAMPLE.COM
awsSecret=bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676</msg>
<status status="PASS" endtime="20191025 23:51:56.140" starttime="20191025 23:51:56.139"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:51:56.140" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:51:56.140" starttime="20191025 23:51:56.140"></status>
</kw>
<msg timestamp="20191025 23:51:56.141" level="INFO">${result} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:51:56.141" starttime="20191025 23:51:53.599"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsAccessKey=).*</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:51:56.142" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:51:56.142" starttime="20191025 23:51:56.141"></status>
</kw>
<kw name="Get Variable Value" library="BuiltIn">
<doc>Returns variable value or ``default`` if the variable does not exist.</doc>
<arguments>
<arg>${accessKey}</arg>
<arg>sdsdasaasdasd</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:51:56.142" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:51:56.143" starttime="20191025 23:51:56.142"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsSecret=).*</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:51:56.143" level="INFO">${secret} = [u'bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676']</msg>
<status status="PASS" endtime="20191025 23:51:56.143" starttime="20191025 23:51:56.143"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${accessKey[0]}</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:51:56.144" level="INFO">${accessKey} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:51:56.144" starttime="20191025 23:51:56.143"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${secret[0]}</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:51:56.145" level="INFO">${secret} = bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676</msg>
<status status="PASS" endtime="20191025 23:51:56.145" starttime="20191025 23:51:56.144"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set default.s3.signature_version s3v4</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:51:56.147" level="INFO">Running command 'aws configure set default.s3.signature_version s3v4 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:51:56.560" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:51:56.561" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:51:56.561" starttime="20191025 23:51:56.145"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:51:56.563" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:51:56.563" starttime="20191025 23:51:56.562"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:51:56.564" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:51:56.564" starttime="20191025 23:51:56.563"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:56.565" starttime="20191025 23:51:56.145"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_access_key_id ${accessKey}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:51:56.569" level="INFO">Running command 'aws configure set aws_access_key_id testuser/s3g@EXAMPLE.COM 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:51:57.071" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:51:57.071" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:51:57.071" starttime="20191025 23:51:56.567"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:51:57.072" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:51:57.073" starttime="20191025 23:51:57.072"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:51:57.073" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:51:57.073" starttime="20191025 23:51:57.073"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:57.074" starttime="20191025 23:51:56.565"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_secret_access_key ${secret}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:51:57.076" level="INFO">Running command 'aws configure set aws_secret_access_key bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:51:57.491" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:51:57.492" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:51:57.492" starttime="20191025 23:51:57.075"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:51:57.493" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:51:57.494" starttime="20191025 23:51:57.493"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:51:57.495" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:51:57.496" starttime="20191025 23:51:57.494"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:57.496" starttime="20191025 23:51:57.074"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set region us-west-1</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:51:57.499" level="INFO">Running command 'aws configure set region us-west-1 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:51:57.954" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:51:57.954" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:51:57.954" starttime="20191025 23:51:57.497"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:51:57.956" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:51:57.956" starttime="20191025 23:51:57.955"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:51:57.957" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:51:57.958" starttime="20191025 23:51:57.957"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:57.958" starttime="20191025 23:51:57.496"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:57.958" starttime="20191025 23:51:53.599"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:57.959" starttime="20191025 23:51:53.598"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'false'</arg>
<arg>Setup dummy credentials for S3</arg>
</arguments>
<status status="PASS" endtime="20191025 23:51:57.960" starttime="20191025 23:51:57.959"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:57.960" starttime="20191025 23:51:53.558"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:57.960" starttime="20191025 23:51:53.556"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${BUCKET}' == 'generated'</arg>
<arg>Create bucket</arg>
</arguments>
<status status="PASS" endtime="20191025 23:51:57.961" starttime="20191025 23:51:57.961"></status>
</kw>
<status status="PASS" endtime="20191025 23:51:57.962" starttime="20191025 23:51:52.796"></status>
</kw>
<kw name="Execute AWSS3APICli and checkrc" library="commonawslib">
<arguments>
<arg>get-object --bucket ${BUCKET} --key putobject/zerobyte --range bytes=0-0 /tmp/testfile2.result</arg>
<arg>255</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Execute and checkrc" library="commonlib">
<arguments>
<arg>aws s3api --endpoint-url ${ENDPOINT_URL} ${command}</arg>
<arg>${expected_error_code}</arg>
</arguments>
<assign>
<var>${output}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:51:57.966" level="INFO">Running command 'aws s3api --endpoint-url http://s3g:9878 get-object --bucket bucket-67137 --key putobject/zerobyte --range bytes=0-0 /tmp/testfile2.result 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:52:03.885" level="INFO">${rc} = 255</msg>
<msg timestamp="20191025 23:52:03.885" level="INFO">${output} = 
An error occurred (500) when calling the GetObject operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:52:03.886" starttime="20191025 23:51:57.964"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:52:03.888" level="INFO">
An error occurred (500) when calling the GetObject operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:52:03.888" starttime="20191025 23:52:03.887"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
</arguments>
<msg timestamp="20191025 23:52:03.889" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:52:03.889" starttime="20191025 23:52:03.888"></status>
</kw>
<msg timestamp="20191025 23:52:03.890" level="INFO">${output} = 
An error occurred (500) when calling the GetObject operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:52:03.890" starttime="20191025 23:51:57.963"></status>
</kw>
<msg timestamp="20191025 23:52:03.891" level="INFO">${result} = 
An error occurred (500) when calling the GetObject operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:52:03.891" starttime="20191025 23:51:57.962"></status>
</kw>
<kw name="Should Contain" library="BuiltIn">
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<arguments>
<arg>${result}</arg>
<arg>InvalidRange</arg>
</arguments>
<msg timestamp="20191025 23:52:03.892" level="FAIL">'
An error occurred (500) when calling the GetObject operation (reached max retries: 4): Internal Server Error' does not contain 'InvalidRange'</msg>
<status status="FAIL" endtime="20191025 23:52:03.892" starttime="20191025 23:52:03.891"></status>
</kw>
<status status="FAIL" endtime="20191025 23:52:03.893" critical="yes" starttime="20191025 23:51:52.794">'
An error occurred (500) when calling the GetObject operation (reached max retries: 4): Internal Server Error' does not contain 'InvalidRange'</status>
</test>
<doc>S3 gateway test with aws cli</doc>
<status status="FAIL" endtime="20191025 23:52:03.897" starttime="20191025 23:49:40.918"></status>
</suite>
<suite source="/opt/hadoop/smoketest/s3/webui.robot" id="s1-s10" name="Webui">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:52:03.924" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:52:03.932" level="INFO">${rc} = 1</msg>
<msg timestamp="20191025 23:52:03.932" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191025 23:52:03.932" starttime="20191025 23:52:03.922"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191025 23:52:03.934" starttime="20191025 23:52:03.933"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:52:03.936" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:52:04.136" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:52:04.137" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191025 23:52:04.137" starttime="20191025 23:52:03.934"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:52:04.143" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:52:04.682" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:52:04.682" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: mirror.sfo12.us.leaseweb.net
 * upd...</msg>
<status status="PASS" endtime="20191025 23:52:04.682" starttime="20191025 23:52:04.141"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:52:04.684" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: mirror.sfo12.us.leaseweb.net
 * extras: mirror.sfo12.us.leaseweb.net
 * updates: mirror.sfo12.us.leaseweb.net
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191025 23:52:04.684" starttime="20191025 23:52:04.683"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:52:04.685" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:52:04.686" starttime="20191025 23:52:04.685"></status>
</kw>
<status status="PASS" endtime="20191025 23:52:04.686" starttime="20191025 23:52:04.140"></status>
</kw>
<status status="PASS" endtime="20191025 23:52:04.687" starttime="20191025 23:52:04.139"></status>
</kw>
<status status="PASS" endtime="20191025 23:52:04.687" starttime="20191025 23:52:04.138"></status>
</kw>
<status status="PASS" endtime="20191025 23:52:04.687" starttime="20191025 23:52:03.921"></status>
</kw>
<status status="PASS" endtime="20191025 23:52:04.687" starttime="20191025 23:52:03.921"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:52:04.695" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:52:04.701" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:52:04.702" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191025 23:52:04.702" starttime="20191025 23:52:04.692"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:52:04.703" level="INFO">s3g</msg>
<status status="PASS" endtime="20191025 23:52:04.704" starttime="20191025 23:52:04.702"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:52:04.704" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:52:04.705" starttime="20191025 23:52:04.704"></status>
</kw>
<msg timestamp="20191025 23:52:04.705" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191025 23:52:04.705" starttime="20191025 23:52:04.691"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191025 23:52:04.708" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:52:04.709" starttime="20191025 23:52:04.706"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:52:04.713" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:52:04.740" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:52:04.741" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:52:04.741" starttime="20191025 23:52:04.711"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:52:04.743" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:52:04.743" starttime="20191025 23:52:04.742"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:52:04.744" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:52:04.745" starttime="20191025 23:52:04.743"></status>
</kw>
<status status="PASS" endtime="20191025 23:52:04.745" starttime="20191025 23:52:04.710"></status>
</kw>
<status status="PASS" endtime="20191025 23:52:04.745" starttime="20191025 23:52:04.709"></status>
</kw>
<status status="PASS" endtime="20191025 23:52:04.746" starttime="20191025 23:52:04.691"></status>
</kw>
<status status="PASS" endtime="20191025 23:52:04.746" starttime="20191025 23:52:04.690"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:52:04.751" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:52:07.438" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:52:07.438" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:52:07.438" starttime="20191025 23:52:04.749"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:52:07.440" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
awsAccessKey=testuser/s3g@EXAMPLE.COM
awsSecret=bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676</msg>
<status status="PASS" endtime="20191025 23:52:07.441" starttime="20191025 23:52:07.439"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:52:07.442" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:52:07.442" starttime="20191025 23:52:07.441"></status>
</kw>
<msg timestamp="20191025 23:52:07.443" level="INFO">${result} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191025 23:52:07.443" starttime="20191025 23:52:04.748"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsAccessKey=).*</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:52:07.445" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:52:07.445" starttime="20191025 23:52:07.443"></status>
</kw>
<kw name="Get Variable Value" library="BuiltIn">
<doc>Returns variable value or ``default`` if the variable does not exist.</doc>
<arguments>
<arg>${accessKey}</arg>
<arg>sdsdasaasdasd</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:52:07.447" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191025 23:52:07.447" starttime="20191025 23:52:07.446"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsSecret=).*</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:52:07.448" level="INFO">${secret} = [u'bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676']</msg>
<status status="PASS" endtime="20191025 23:52:07.448" starttime="20191025 23:52:07.447"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${accessKey[0]}</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191025 23:52:07.449" level="INFO">${accessKey} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191025 23:52:07.449" starttime="20191025 23:52:07.448"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${secret[0]}</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191025 23:52:07.450" level="INFO">${secret} = bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676</msg>
<status status="PASS" endtime="20191025 23:52:07.450" starttime="20191025 23:52:07.450"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set default.s3.signature_version s3v4</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:52:07.454" level="INFO">Running command 'aws configure set default.s3.signature_version s3v4 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:52:07.906" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:52:07.907" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:52:07.907" starttime="20191025 23:52:07.452"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:52:07.909" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:52:07.909" starttime="20191025 23:52:07.908"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:52:07.910" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:52:07.910" starttime="20191025 23:52:07.909"></status>
</kw>
<status status="PASS" endtime="20191025 23:52:07.911" starttime="20191025 23:52:07.451"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_access_key_id ${accessKey}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:52:07.915" level="INFO">Running command 'aws configure set aws_access_key_id testuser/s3g@EXAMPLE.COM 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:52:08.428" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:52:08.429" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:52:08.429" starttime="20191025 23:52:07.912"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:52:08.430" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:52:08.430" starttime="20191025 23:52:08.429"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:52:08.431" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:52:08.431" starttime="20191025 23:52:08.430"></status>
</kw>
<status status="PASS" endtime="20191025 23:52:08.431" starttime="20191025 23:52:07.911"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_secret_access_key ${secret}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:52:08.434" level="INFO">Running command 'aws configure set aws_secret_access_key bf6eb3acb36f2a620e7037fd33f6c03cdf43b28877914864267408dc67422676 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:52:08.863" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:52:08.863" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:52:08.863" starttime="20191025 23:52:08.432"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:52:08.865" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:52:08.866" starttime="20191025 23:52:08.864"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:52:08.867" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:52:08.867" starttime="20191025 23:52:08.866"></status>
</kw>
<status status="PASS" endtime="20191025 23:52:08.868" starttime="20191025 23:52:08.431"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set region us-west-1</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:52:08.872" level="INFO">Running command 'aws configure set region us-west-1 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:52:09.331" level="INFO">${rc} = 0</msg>
<msg timestamp="20191025 23:52:09.331" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191025 23:52:09.331" starttime="20191025 23:52:08.869"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:52:09.332" level="INFO"></msg>
<status status="PASS" endtime="20191025 23:52:09.333" starttime="20191025 23:52:09.332"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:52:09.333" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191025 23:52:09.333" starttime="20191025 23:52:09.333"></status>
</kw>
<status status="PASS" endtime="20191025 23:52:09.334" starttime="20191025 23:52:08.868"></status>
</kw>
<status status="PASS" endtime="20191025 23:52:09.334" starttime="20191025 23:52:04.748"></status>
</kw>
<status status="PASS" endtime="20191025 23:52:09.334" starttime="20191025 23:52:04.746"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'false'</arg>
<arg>Setup dummy credentials for S3</arg>
</arguments>
<status status="PASS" endtime="20191025 23:52:09.335" starttime="20191025 23:52:09.334"></status>
</kw>
<status status="PASS" endtime="20191025 23:52:09.335" starttime="20191025 23:52:04.689"></status>
</kw>
<status status="PASS" endtime="20191025 23:52:09.335" starttime="20191025 23:52:04.688"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${BUCKET}' == 'generated'</arg>
<arg>Create bucket</arg>
</arguments>
<kw name="Create bucket" library="commonawslib">
<kw name="Generate Random String" library="String">
<doc>Generates a string with a desired ``length`` from the given ``chars``.</doc>
<arguments>
<arg>5</arg>
<arg>[NUMBERS]</arg>
</arguments>
<assign>
<var>${postfix}</var>
</assign>
<msg timestamp="20191025 23:52:09.337" level="INFO">${postfix} = 68797</msg>
<status status="PASS" endtime="20191025 23:52:09.337" starttime="20191025 23:52:09.336"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${BUCKET}</arg>
<arg>bucket-${postfix}</arg>
</arguments>
<msg timestamp="20191025 23:52:09.338" level="INFO">${BUCKET} = bucket-68797</msg>
<status status="PASS" endtime="20191025 23:52:09.338" starttime="20191025 23:52:09.337"></status>
</kw>
<kw name="Execute AWSS3APICli" library="commonawslib">
<arguments>
<arg>create-bucket --bucket ${BUCKET}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws s3api --endpoint-url ${ENDPOINT_URL} ${command}</arg>
</arguments>
<assign>
<var>${output}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191025 23:52:09.341" level="INFO">Running command 'aws s3api --endpoint-url http://s3g:9878 create-bucket --bucket bucket-68797 2&gt;&amp;1'.</msg>
<msg timestamp="20191025 23:52:17.185" level="INFO">${rc} = 255</msg>
<msg timestamp="20191025 23:52:17.186" level="INFO">${output} = 
An error occurred (500) when calling the CreateBucket operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:52:17.186" starttime="20191025 23:52:09.339"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191025 23:52:17.187" level="INFO">
An error occurred (500) when calling the CreateBucket operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191025 23:52:17.187" starttime="20191025 23:52:17.186"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191025 23:52:17.188" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191025 23:52:17.189" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191025 23:52:17.189" starttime="20191025 23:52:17.187"></status>
</kw>
<status status="FAIL" endtime="20191025 23:52:17.189" starttime="20191025 23:52:09.338"></status>
</kw>
<status status="FAIL" endtime="20191025 23:52:17.190" starttime="20191025 23:52:09.338"></status>
</kw>
<status status="FAIL" endtime="20191025 23:52:17.190" starttime="20191025 23:52:09.336"></status>
</kw>
<status status="FAIL" endtime="20191025 23:52:17.190" starttime="20191025 23:52:09.335"></status>
</kw>
<status status="FAIL" endtime="20191025 23:52:17.190" starttime="20191025 23:52:03.920"></status>
</kw>
<test id="s1-s10-t1" name="S3 Gateway Web UI">
<status status="FAIL" endtime="20191025 23:52:17.191" critical="yes" starttime="20191025 23:52:17.190">Parent suite setup failed:
255 != 0</status>
</test>
<doc>S3 gateway web ui test</doc>
<status status="FAIL" endtime="20191025 23:52:17.192" starttime="20191025 23:52:03.907">Suite setup failed:
255 != 0</status>
</suite>
<status status="FAIL" endtime="20191025 23:52:17.199" starttime="20191025 23:43:19.332"></status>
</suite>
<statistics>
<total>
<stat fail="34" pass="3">Critical Tests</stat>
<stat fail="34" pass="3">All Tests</stat>
</total>
<tag>
</tag>
<suite>
<stat fail="34" id="s1" name="ozonesecure-s3" pass="3">ozonesecure-s3</stat>
<stat fail="1" id="s1-s1" name="Awss3" pass="0">ozonesecure-s3.Awss3</stat>
<stat fail="1" id="s1-s2" name="Bucketcreate" pass="0">ozonesecure-s3.Bucketcreate</stat>
<stat fail="1" id="s1-s3" name="Buckethead" pass="0">ozonesecure-s3.Buckethead</stat>
<stat fail="1" id="s1-s4" name="Bucketlist" pass="0">ozonesecure-s3.Bucketlist</stat>
<stat fail="11" id="s1-s5" name="MultipartUpload" pass="1">ozonesecure-s3.MultipartUpload</stat>
<stat fail="3" id="s1-s6" name="Objectcopy" pass="1">ozonesecure-s3.Objectcopy</stat>
<stat fail="4" id="s1-s7" name="Objectdelete" pass="1">ozonesecure-s3.Objectdelete</stat>
<stat fail="1" id="s1-s8" name="Objectmultidelete" pass="0">ozonesecure-s3.Objectmultidelete</stat>
<stat fail="10" id="s1-s9" name="Objectputget" pass="0">ozonesecure-s3.Objectputget</stat>
<stat fail="1" id="s1-s10" name="Webui" pass="0">ozonesecure-s3.Webui</stat>
</suite>
</statistics>
<errors>
</errors>
</robot>
