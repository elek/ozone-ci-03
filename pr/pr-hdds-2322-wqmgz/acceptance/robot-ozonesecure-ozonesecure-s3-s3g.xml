<?xml version="1.0" encoding="UTF-8"?>
<robot rpa="false" generated="20191028 05:20:21.854" generator="Robot 3.1.2 (Python 2.7.5 on linux2)">
<suite source="/opt/hadoop/smoketest/s3" id="s1" name="ozonesecure-s3">
<suite source="/opt/hadoop/smoketest/s3/awss3.robot" id="s1-s1" name="Awss3">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:20:21.928" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:20:21.935" level="INFO">${rc} = 1</msg>
<msg timestamp="20191028 05:20:21.935" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191028 05:20:21.935" starttime="20191028 05:20:21.926"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191028 05:20:21.937" starttime="20191028 05:20:21.936"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:20:21.939" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:20:22.180" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:20:22.181" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191028 05:20:22.181" starttime="20191028 05:20:21.937"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:20:22.187" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:20:55.325" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:20:55.325" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Determining fastest mirrors
 * base: mirror.sfo12.us.leaseweb.net
 * epel: d2lzkl7pfhq30w.cloudfront.net
 * extras: mirrors.xtom.com
 * updates: mirror.fileplanet.co...</msg>
<status status="PASS" endtime="20191028 05:20:55.325" starttime="20191028 05:20:22.184"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:20:55.327" level="INFO">Loaded plugins: fastestmirror, ovl
Determining fastest mirrors
 * base: mirror.sfo12.us.leaseweb.net
 * epel: d2lzkl7pfhq30w.cloudfront.net
 * extras: mirrors.xtom.com
 * updates: mirror.fileplanet.com
Resolving Dependencies
--&gt; Running transaction check
---&gt; Package awscli.noarch 0:1.14.28-5.el7_5.1 will be installed
--&gt; Processing Dependency: python-s3transfer &gt;= 0.1.9 for package: awscli-1.14.28-5.el7_5.1.noarch
--&gt; Processing Dependency: python-docutils &gt;= 0.10 for package: awscli-1.14.28-5.el7_5.1.noarch
--&gt; Processing Dependency: python-cryptography &gt;= 1.7.2 for package: awscli-1.14.28-5.el7_5.1.noarch
--&gt; Processing Dependency: PyYAML &gt;= 3.10 for package: awscli-1.14.28-5.el7_5.1.noarch
--&gt; Running transaction check
---&gt; Package PyYAML.x86_64 0:3.10-11.el7 will be installed
--&gt; Processing Dependency: libyaml-0.so.2()(64bit) for package: PyYAML-3.10-11.el7.x86_64
---&gt; Package python-docutils.noarch 0:0.11-0.3.20130715svn7687.el7 will be installed
--&gt; Processing Dependency: python-imaging for package: python-docutils-0.11-0.3.20130715svn7687.el7.noarch
---&gt; Package python-s3transfer.noarch 0:0.1.13-1.el7.0.1 will be installed
--&gt; Processing Dependency: python-dateutil &gt;= 1.4 for package: python-s3transfer-0.1.13-1.el7.0.1.noarch
---&gt; Package python2-cryptography.x86_64 0:1.7.2-2.el7 will be installed
--&gt; Processing Dependency: python-six &gt;= 1.4.1 for package: python2-cryptography-1.7.2-2.el7.x86_64
--&gt; Processing Dependency: python-pyasn1 &gt;= 0.1.8 for package: python2-cryptography-1.7.2-2.el7.x86_64
--&gt; Processing Dependency: python-idna &gt;= 2.0 for package: python2-cryptography-1.7.2-2.el7.x86_64
--&gt; Processing Dependency: python-cffi &gt;= 1.4.1 for package: python2-cryptography-1.7.2-2.el7.x86_64
--&gt; Processing Dependency: python-enum34 for package: python2-cryptography-1.7.2-2.el7.x86_64
--&gt; Processing Dependency: openssl for package: python2-cryptography-1.7.2-2.el7.x86_64
--&gt; Running transaction check
---&gt; Package libyaml.x86_64 0:0.1.4-11.el7_0 will be installed
---&gt; Package openssl.x86_64 1:1.0.2k-19.el7 will be installed
--&gt; Processing Dependency: openssl-libs(x86-64) = 1:1.0.2k-19.el7 for package: 1:openssl-1.0.2k-19.el7.x86_64
--&gt; Processing Dependency: make for package: 1:openssl-1.0.2k-19.el7.x86_64
---&gt; Package python-cffi.x86_64 0:1.6.0-5.el7 will be installed
--&gt; Processing Dependency: python-pycparser for package: python-cffi-1.6.0-5.el7.x86_64
---&gt; Package python-dateutil.noarch 0:1.5-7.el7 will be installed
---&gt; Package python-enum34.noarch 0:1.0.4-1.el7 will be installed
---&gt; Package python-idna.noarch 0:2.4-1.el7 will be installed
---&gt; Package python-pillow.x86_64 0:2.0.0-19.gitd1c6db8.el7 will be installed
--&gt; Processing Dependency: libtiff.so.5(LIBTIFF_4.0)(64bit) for package: python-pillow-2.0.0-19.gitd1c6db8.el7.x86_64
--&gt; Processing Dependency: libwebp.so.4()(64bit) for package: python-pillow-2.0.0-19.gitd1c6db8.el7.x86_64
--&gt; Processing Dependency: libtiff.so.5()(64bit) for package: python-pillow-2.0.0-19.gitd1c6db8.el7.x86_64
---&gt; Package python-six.noarch 0:1.9.0-2.el7 will be installed
---&gt; Package python2-pyasn1.noarch 0:0.1.9-7.el7 will be installed
--&gt; Running transaction check
---&gt; Package libtiff.x86_64 0:4.0.3-32.el7 will be installed
--&gt; Processing Dependency: libjbig.so.2.0()(64bit) for package: libtiff-4.0.3-32.el7.x86_64
---&gt; Package libwebp.x86_64 0:0.3.0-7.el7 will be installed
---&gt; Package make.x86_64 1:3.82-24.el7 will be installed
---&gt; Package openssl-libs.x86_64 1:1.0.2k-16.el7 will be updated
---&gt; Package openssl-libs.x86_64 1:1.0.2k-19.el7 will be an update
---&gt; Package python-pycparser.noarch 0:2.14-1.el7 will be installed
--&gt; Processing Dependency: python-ply for package: python-pycparser-2.14-1.el7.noarch
--&gt; Running transaction check
---&gt; Package jbigkit-libs.x86_64 0:2.0-11.el7 will be installed
---&gt; Package python-ply.noarch 0:3.4-11.el7 will be installed
--&gt; Finished Dependency Resolution

Dependencies Resolved

================================================================================
 Package                Arch     Version                           Repository
                                                                           Size
================================================================================
Installing:
 awscli                 noarch   1.14.28-5.el7_5.1                 base   1.0 M
Installing for dependencies:
 PyYAML                 x86_64   3.10-11.el7                       base   153 k
 jbigkit-libs           x86_64   2.0-11.el7                        base    46 k
 libtiff                x86_64   4.0.3-32.el7                      base   171 k
 libwebp                x86_64   0.3.0-7.el7                       base   170 k
 libyaml                x86_64   0.1.4-11.el7_0                    base    55 k
 make                   x86_64   1:3.82-24.el7                     base   421 k
 openssl                x86_64   1:1.0.2k-19.el7                   base   493 k
 python-cffi            x86_64   1.6.0-5.el7                       base   218 k
 python-dateutil        noarch   1.5-7.el7                         base    85 k
 python-docutils        noarch   0.11-0.3.20130715svn7687.el7      base   1.5 M
 python-enum34          noarch   1.0.4-1.el7                       base    52 k
 python-idna            noarch   2.4-1.el7                         base    94 k
 python-pillow          x86_64   2.0.0-19.gitd1c6db8.el7           base   438 k
 python-ply             noarch   3.4-11.el7                        base   123 k
 python-pycparser       noarch   2.14-1.el7                        base   104 k
 python-s3transfer      noarch   0.1.13-1.el7.0.1                  base   2.9 M
 python-six             noarch   1.9.0-2.el7                       base    29 k
 python2-cryptography   x86_64   1.7.2-2.el7                       base   502 k
 python2-pyasn1         noarch   0.1.9-7.el7                       base   100 k
Updating for dependencies:
 openssl-libs           x86_64   1:1.0.2k-19.el7                   base   1.2 M

Transaction Summary
================================================================================
Install  1 Package  (+19 Dependent packages)
Upgrade             (  1 Dependent package)

Total download size: 9.9 M
Downloading packages:
Delta RPMs disabled because /usr/bin/applydeltarpm not installed.
--------------------------------------------------------------------------------
Total                                              9.4 MB/s | 9.9 MB  00:01     
Running transaction check
Running transaction test
Transaction test succeeded
Running transaction
  Updating   : 1:openssl-libs-1.0.2k-19.el7.x86_64                         1/22 
  Installing : python2-pyasn1-0.1.9-7.el7.noarch                           2/22 
  Installing : libyaml-0.1.4-11.el7_0.x86_64                               3/22 
  Installing : PyYAML-3.10-11.el7.x86_64                                   4/22 
  Installing : jbigkit-libs-2.0-11.el7.x86_64                              5/22 
  Installing : libtiff-4.0.3-32.el7.x86_64                                 6/22 
  Installing : python-ply-3.4-11.el7.noarch                                7/22 
  Installing : python-pycparser-2.14-1.el7.noarch                          8/22 
  Installing : python-cffi-1.6.0-5.el7.x86_64                              9/22 
  Installing : python-idna-2.4-1.el7.noarch                               10/22 
  Installing : python-six-1.9.0-2.el7.noarch                              11/22 
  Installing : 1:make-3.82-24.el7.x86_64                                  12/22 
  Installing : 1:openssl-1.0.2k-19.el7.x86_64                             13/22 
  Installing : python-dateutil-1.5-7.el7.noarch                           14/22 
  Installing : python-enum34-1.0.4-1.el7.noarch                           15/22 
  Installing : python2-cryptography-1.7.2-2.el7.x86_64                    16/22 
  Installing : libwebp-0.3.0-7.el7.x86_64                                 17/22 
  Installing : python-pillow-2.0.0-19.gitd1c6db8.el7.x86_64               18/22 
  Installing : python-docutils-0.11-0.3.20130715svn7687.el7.noarch        19/22 
  Installing : python-s3transfer-0.1.13-1.el7.0.1.noarch                  20/22 
  Installing : awscli-1.14.28-5.el7_5.1.noarch                            21/22 
  Cleanup    : 1:openssl-libs-1.0.2k-16.el7.x86_64                        22/22 
  Verifying  : libwebp-0.3.0-7.el7.x86_64                                  1/22 
  Verifying  : python-enum34-1.0.4-1.el7.noarch                            2/22 
  Verifying  : python-docutils-0.11-0.3.20130715svn7687.el7.noarch         3/22 
  Verifying  : 1:openssl-libs-1.0.2k-19.el7.x86_64                         4/22 
  Verifying  : python-dateutil-1.5-7.el7.noarch                            5/22 
  Verifying  : 1:make-3.82-24.el7.x86_64                                   6/22 
  Verifying  : python-six-1.9.0-2.el7.noarch                               7/22 
  Verifying  : python-s3transfer-0.1.13-1.el7.0.1.noarch                   8/22 
  Verifying  : python-idna-2.4-1.el7.noarch                                9/22 
  Verifying  : python-ply-3.4-11.el7.noarch                               10/22 
  Verifying  : 1:openssl-1.0.2k-19.el7.x86_64                             11/22 
  Verifying  : python-cffi-1.6.0-5.el7.x86_64                             12/22 
  Verifying  : awscli-1.14.28-5.el7_5.1.noarch                            13/22 
  Verifying  : python-pillow-2.0.0-19.gitd1c6db8.el7.x86_64               14/22 
  Verifying  : jbigkit-libs-2.0-11.el7.x86_64                             15/22 
  Verifying  : python-pycparser-2.14-1.el7.noarch                         16/22 
  Verifying  : libyaml-0.1.4-11.el7_0.x86_64                              17/22 
  Verifying  : libtiff-4.0.3-32.el7.x86_64                                18/22 
  Verifying  : python2-pyasn1-0.1.9-7.el7.noarch                          19/22 
  Verifying  : PyYAML-3.10-11.el7.x86_64                                  20/22 
  Verifying  : python2-cryptography-1.7.2-2.el7.x86_64                    21/22 
  Verifying  : 1:openssl-libs-1.0.2k-16.el7.x86_64                        22/22 

Installed:
  awscli.noarch 0:1.14.28-5.el7_5.1                                             

Dependency Installed:
  PyYAML.x86_64 0:3.10-11.el7                                                   
  jbigkit-libs.x86_64 0:2.0-11.el7                                              
  libtiff.x86_64 0:4.0.3-32.el7                                                 
  libwebp.x86_64 0:0.3.0-7.el7                                                  
  libyaml.x86_64 0:0.1.4-11.el7_0                                               
  make.x86_64 1:3.82-24.el7                                                     
  openssl.x86_64 1:1.0.2k-19.el7                                                
  python-cffi.x86_64 0:1.6.0-5.el7                                              
  python-dateutil.noarch 0:1.5-7.el7                                            
  python-docutils.noarch 0:0.11-0.3.20130715svn7687.el7                         
  python-enum34.noarch 0:1.0.4-1.el7                                            
  python-idna.noarch 0:2.4-1.el7                                                
  python-pillow.x86_64 0:2.0.0-19.gitd1c6db8.el7                                
  python-ply.noarch 0:3.4-11.el7                                                
  python-pycparser.noarch 0:2.14-1.el7                                          
  python-s3transfer.noarch 0:0.1.13-1.el7.0.1                                   
  python-six.noarch 0:1.9.0-2.el7                                               
  python2-cryptography.x86_64 0:1.7.2-2.el7                                     
  python2-pyasn1.noarch 0:0.1.9-7.el7                                           

Dependency Updated:
  openssl-libs.x86_64 1:1.0.2k-19.el7                                           

Complete!</msg>
<status status="PASS" endtime="20191028 05:20:55.328" starttime="20191028 05:20:55.326"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:20:55.329" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:20:55.329" starttime="20191028 05:20:55.328"></status>
</kw>
<status status="PASS" endtime="20191028 05:20:55.330" starttime="20191028 05:20:22.184"></status>
</kw>
<status status="PASS" endtime="20191028 05:20:55.330" starttime="20191028 05:20:22.183"></status>
</kw>
<status status="PASS" endtime="20191028 05:20:55.330" starttime="20191028 05:20:22.182"></status>
</kw>
<status status="PASS" endtime="20191028 05:20:55.331" starttime="20191028 05:20:21.926"></status>
</kw>
<status status="PASS" endtime="20191028 05:20:55.331" starttime="20191028 05:20:21.925"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:20:55.338" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:20:55.345" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:20:55.345" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191028 05:20:55.345" starttime="20191028 05:20:55.335"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:20:55.347" level="INFO">s3g</msg>
<status status="PASS" endtime="20191028 05:20:55.347" starttime="20191028 05:20:55.346"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:20:55.348" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:20:55.349" starttime="20191028 05:20:55.348"></status>
</kw>
<msg timestamp="20191028 05:20:55.349" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191028 05:20:55.349" starttime="20191028 05:20:55.335"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191028 05:20:55.352" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191028 05:20:55.353" starttime="20191028 05:20:55.350"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:20:55.358" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:20:55.416" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:20:55.417" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:20:55.417" starttime="20191028 05:20:55.355"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:20:55.420" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:20:55.420" starttime="20191028 05:20:55.418"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:20:55.421" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:20:55.422" starttime="20191028 05:20:55.420"></status>
</kw>
<status status="PASS" endtime="20191028 05:20:55.423" starttime="20191028 05:20:55.354"></status>
</kw>
<status status="PASS" endtime="20191028 05:20:55.423" starttime="20191028 05:20:55.353"></status>
</kw>
<status status="PASS" endtime="20191028 05:20:55.423" starttime="20191028 05:20:55.334"></status>
</kw>
<status status="PASS" endtime="20191028 05:20:55.424" starttime="20191028 05:20:55.333"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:20:55.430" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:20:58.169" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:20:58.169" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191028 05:20:58.169" starttime="20191028 05:20:55.428"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:20:58.171" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
awsAccessKey=testuser/s3g@EXAMPLE.COM
awsSecret=3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a</msg>
<status status="PASS" endtime="20191028 05:20:58.172" starttime="20191028 05:20:58.170"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:20:58.173" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:20:58.173" starttime="20191028 05:20:58.172"></status>
</kw>
<msg timestamp="20191028 05:20:58.174" level="INFO">${result} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191028 05:20:58.174" starttime="20191028 05:20:55.427"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsAccessKey=).*</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191028 05:20:58.176" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191028 05:20:58.176" starttime="20191028 05:20:58.174"></status>
</kw>
<kw name="Get Variable Value" library="BuiltIn">
<doc>Returns variable value or ``default`` if the variable does not exist.</doc>
<arguments>
<arg>${accessKey}</arg>
<arg>sdsdasaasdasd</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191028 05:20:58.177" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191028 05:20:58.177" starttime="20191028 05:20:58.176"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsSecret=).*</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191028 05:20:58.179" level="INFO">${secret} = [u'3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a']</msg>
<status status="PASS" endtime="20191028 05:20:58.179" starttime="20191028 05:20:58.178"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${accessKey[0]}</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191028 05:20:58.180" level="INFO">${accessKey} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191028 05:20:58.180" starttime="20191028 05:20:58.179"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${secret[0]}</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191028 05:20:58.181" level="INFO">${secret} = 3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a</msg>
<status status="PASS" endtime="20191028 05:20:58.181" starttime="20191028 05:20:58.181"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set default.s3.signature_version s3v4</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:20:58.185" level="INFO">Running command 'aws configure set default.s3.signature_version s3v4 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:20:58.884" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:20:58.884" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:20:58.884" starttime="20191028 05:20:58.183"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:20:58.886" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:20:58.886" starttime="20191028 05:20:58.885"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:20:58.886" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:20:58.887" starttime="20191028 05:20:58.886"></status>
</kw>
<status status="PASS" endtime="20191028 05:20:58.887" starttime="20191028 05:20:58.182"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_access_key_id ${accessKey}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:20:58.890" level="INFO">Running command 'aws configure set aws_access_key_id testuser/s3g@EXAMPLE.COM 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:20:59.327" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:20:59.327" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:20:59.327" starttime="20191028 05:20:58.888"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:20:59.329" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:20:59.329" starttime="20191028 05:20:59.328"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:20:59.330" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:20:59.330" starttime="20191028 05:20:59.329"></status>
</kw>
<status status="PASS" endtime="20191028 05:20:59.330" starttime="20191028 05:20:58.887"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_secret_access_key ${secret}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:20:59.333" level="INFO">Running command 'aws configure set aws_secret_access_key 3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:20:59.827" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:20:59.827" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:20:59.828" starttime="20191028 05:20:59.331"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:20:59.829" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:20:59.830" starttime="20191028 05:20:59.828"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:20:59.831" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:20:59.831" starttime="20191028 05:20:59.830"></status>
</kw>
<status status="PASS" endtime="20191028 05:20:59.832" starttime="20191028 05:20:59.331"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set region us-west-1</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:20:59.835" level="INFO">Running command 'aws configure set region us-west-1 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:21:00.289" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:21:00.289" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:21:00.289" starttime="20191028 05:20:59.833"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:21:00.291" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:21:00.291" starttime="20191028 05:21:00.290"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:21:00.292" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:21:00.292" starttime="20191028 05:21:00.291"></status>
</kw>
<status status="PASS" endtime="20191028 05:21:00.293" starttime="20191028 05:20:59.832"></status>
</kw>
<status status="PASS" endtime="20191028 05:21:00.293" starttime="20191028 05:20:55.426"></status>
</kw>
<status status="PASS" endtime="20191028 05:21:00.293" starttime="20191028 05:20:55.424"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'false'</arg>
<arg>Setup dummy credentials for S3</arg>
</arguments>
<status status="PASS" endtime="20191028 05:21:00.294" starttime="20191028 05:21:00.294"></status>
</kw>
<status status="PASS" endtime="20191028 05:21:00.295" starttime="20191028 05:20:55.332"></status>
</kw>
<status status="PASS" endtime="20191028 05:21:00.295" starttime="20191028 05:20:55.331"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${BUCKET}' == 'generated'</arg>
<arg>Create bucket</arg>
</arguments>
<kw name="Create bucket" library="commonawslib">
<kw name="Generate Random String" library="String">
<doc>Generates a string with a desired ``length`` from the given ``chars``.</doc>
<arguments>
<arg>5</arg>
<arg>[NUMBERS]</arg>
</arguments>
<assign>
<var>${postfix}</var>
</assign>
<msg timestamp="20191028 05:21:00.298" level="INFO">${postfix} = 37973</msg>
<status status="PASS" endtime="20191028 05:21:00.298" starttime="20191028 05:21:00.297"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${BUCKET}</arg>
<arg>bucket-${postfix}</arg>
</arguments>
<msg timestamp="20191028 05:21:00.299" level="INFO">${BUCKET} = bucket-37973</msg>
<status status="PASS" endtime="20191028 05:21:00.299" starttime="20191028 05:21:00.298"></status>
</kw>
<kw name="Execute AWSS3APICli" library="commonawslib">
<arguments>
<arg>create-bucket --bucket ${BUCKET}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws s3api --endpoint-url ${ENDPOINT_URL} ${command}</arg>
</arguments>
<assign>
<var>${output}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:21:00.304" level="INFO">Running command 'aws s3api --endpoint-url http://s3g:9878 create-bucket --bucket bucket-37973 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:21:11.406" level="INFO">${rc} = 255</msg>
<msg timestamp="20191028 05:21:11.406" level="INFO">${output} = 
An error occurred (500) when calling the CreateBucket operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191028 05:21:11.406" starttime="20191028 05:21:00.301"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:21:11.407" level="INFO">
An error occurred (500) when calling the CreateBucket operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191028 05:21:11.408" starttime="20191028 05:21:11.407"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:21:11.408" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191028 05:21:11.409" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191028 05:21:11.409" starttime="20191028 05:21:11.408"></status>
</kw>
<status status="FAIL" endtime="20191028 05:21:11.410" starttime="20191028 05:21:00.300"></status>
</kw>
<status status="FAIL" endtime="20191028 05:21:11.410" starttime="20191028 05:21:00.300"></status>
</kw>
<status status="FAIL" endtime="20191028 05:21:11.410" starttime="20191028 05:21:00.296"></status>
</kw>
<status status="FAIL" endtime="20191028 05:21:11.410" starttime="20191028 05:21:00.295"></status>
</kw>
<status status="FAIL" endtime="20191028 05:21:11.411" starttime="20191028 05:20:21.925"></status>
</kw>
<test id="s1-s1-t1" name="File upload and directory list">
<status status="FAIL" endtime="20191028 05:21:11.412" critical="yes" starttime="20191028 05:21:11.411">Parent suite setup failed:
255 != 0</status>
</test>
<doc>S3 gateway test with aws cli</doc>
<status status="FAIL" endtime="20191028 05:21:11.413" starttime="20191028 05:20:21.918">Suite setup failed:
255 != 0</status>
</suite>
<suite source="/opt/hadoop/smoketest/s3/bucketcreate.robot" id="s1-s2" name="Bucketcreate">
<test id="s1-s2-t1" name="Create bucket which already exists">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:21:11.429" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:21:11.435" level="INFO">${rc} = 1</msg>
<msg timestamp="20191028 05:21:11.436" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191028 05:21:11.436" starttime="20191028 05:21:11.427"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191028 05:21:11.437" starttime="20191028 05:21:11.436"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:21:11.439" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:21:11.630" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:21:11.630" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191028 05:21:11.630" starttime="20191028 05:21:11.437"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:21:11.636" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:21:12.087" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:21:12.087" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: d2lzkl7pfhq30w.cloudfront.net
 * extras: mirrors.xtom.com
 * updates: mirro...</msg>
<status status="PASS" endtime="20191028 05:21:12.087" starttime="20191028 05:21:11.634"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:21:12.089" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: d2lzkl7pfhq30w.cloudfront.net
 * extras: mirrors.xtom.com
 * updates: mirror.fileplanet.com
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191028 05:21:12.090" starttime="20191028 05:21:12.088"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:21:12.091" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:21:12.091" starttime="20191028 05:21:12.090"></status>
</kw>
<status status="PASS" endtime="20191028 05:21:12.091" starttime="20191028 05:21:11.633"></status>
</kw>
<status status="PASS" endtime="20191028 05:21:12.092" starttime="20191028 05:21:11.632"></status>
</kw>
<status status="PASS" endtime="20191028 05:21:12.092" starttime="20191028 05:21:11.631"></status>
</kw>
<status status="PASS" endtime="20191028 05:21:12.092" starttime="20191028 05:21:11.427"></status>
</kw>
<status status="PASS" endtime="20191028 05:21:12.092" starttime="20191028 05:21:11.426"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:21:12.100" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:21:12.107" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:21:12.107" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191028 05:21:12.107" starttime="20191028 05:21:12.098"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:21:12.109" level="INFO">s3g</msg>
<status status="PASS" endtime="20191028 05:21:12.109" starttime="20191028 05:21:12.108"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:21:12.110" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:21:12.110" starttime="20191028 05:21:12.109"></status>
</kw>
<msg timestamp="20191028 05:21:12.111" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191028 05:21:12.111" starttime="20191028 05:21:12.097"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191028 05:21:12.114" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191028 05:21:12.115" starttime="20191028 05:21:12.111"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:21:12.119" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:21:12.137" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:21:12.138" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:21:12.138" starttime="20191028 05:21:12.117"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:21:12.140" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:21:12.140" starttime="20191028 05:21:12.138"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:21:12.141" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:21:12.141" starttime="20191028 05:21:12.140"></status>
</kw>
<status status="PASS" endtime="20191028 05:21:12.142" starttime="20191028 05:21:12.116"></status>
</kw>
<status status="PASS" endtime="20191028 05:21:12.142" starttime="20191028 05:21:12.115"></status>
</kw>
<status status="PASS" endtime="20191028 05:21:12.142" starttime="20191028 05:21:12.096"></status>
</kw>
<status status="PASS" endtime="20191028 05:21:12.142" starttime="20191028 05:21:12.095"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:21:12.148" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:21:14.807" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:21:14.808" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191028 05:21:14.808" starttime="20191028 05:21:12.145"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:21:14.810" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
awsAccessKey=testuser/s3g@EXAMPLE.COM
awsSecret=3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a</msg>
<status status="PASS" endtime="20191028 05:21:14.810" starttime="20191028 05:21:14.809"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:21:14.811" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:21:14.811" starttime="20191028 05:21:14.810"></status>
</kw>
<msg timestamp="20191028 05:21:14.812" level="INFO">${result} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191028 05:21:14.812" starttime="20191028 05:21:12.144"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsAccessKey=).*</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191028 05:21:14.813" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191028 05:21:14.814" starttime="20191028 05:21:14.813"></status>
</kw>
<kw name="Get Variable Value" library="BuiltIn">
<doc>Returns variable value or ``default`` if the variable does not exist.</doc>
<arguments>
<arg>${accessKey}</arg>
<arg>sdsdasaasdasd</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191028 05:21:14.815" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191028 05:21:14.815" starttime="20191028 05:21:14.814"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsSecret=).*</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191028 05:21:14.816" level="INFO">${secret} = [u'3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a']</msg>
<status status="PASS" endtime="20191028 05:21:14.816" starttime="20191028 05:21:14.815"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${accessKey[0]}</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191028 05:21:14.818" level="INFO">${accessKey} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191028 05:21:14.818" starttime="20191028 05:21:14.817"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${secret[0]}</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191028 05:21:14.819" level="INFO">${secret} = 3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a</msg>
<status status="PASS" endtime="20191028 05:21:14.819" starttime="20191028 05:21:14.818"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set default.s3.signature_version s3v4</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:21:14.823" level="INFO">Running command 'aws configure set default.s3.signature_version s3v4 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:21:15.243" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:21:15.243" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:21:15.244" starttime="20191028 05:21:14.820"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:21:15.245" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:21:15.246" starttime="20191028 05:21:15.245"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:21:15.247" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:21:15.247" starttime="20191028 05:21:15.246"></status>
</kw>
<status status="PASS" endtime="20191028 05:21:15.247" starttime="20191028 05:21:14.819"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_access_key_id ${accessKey}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:21:15.251" level="INFO">Running command 'aws configure set aws_access_key_id testuser/s3g@EXAMPLE.COM 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:21:15.721" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:21:15.721" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:21:15.721" starttime="20191028 05:21:15.249"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:21:15.723" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:21:15.723" starttime="20191028 05:21:15.722"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:21:15.724" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:21:15.725" starttime="20191028 05:21:15.724"></status>
</kw>
<status status="PASS" endtime="20191028 05:21:15.725" starttime="20191028 05:21:15.248"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_secret_access_key ${secret}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:21:15.730" level="INFO">Running command 'aws configure set aws_secret_access_key 3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:21:16.205" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:21:16.206" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:21:16.206" starttime="20191028 05:21:15.727"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:21:16.208" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:21:16.208" starttime="20191028 05:21:16.207"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:21:16.209" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:21:16.209" starttime="20191028 05:21:16.208"></status>
</kw>
<status status="PASS" endtime="20191028 05:21:16.210" starttime="20191028 05:21:15.726"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set region us-west-1</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:21:16.213" level="INFO">Running command 'aws configure set region us-west-1 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:21:16.684" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:21:16.684" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:21:16.684" starttime="20191028 05:21:16.211"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:21:16.686" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:21:16.686" starttime="20191028 05:21:16.685"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:21:16.688" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:21:16.688" starttime="20191028 05:21:16.686"></status>
</kw>
<status status="PASS" endtime="20191028 05:21:16.689" starttime="20191028 05:21:16.210"></status>
</kw>
<status status="PASS" endtime="20191028 05:21:16.689" starttime="20191028 05:21:12.144"></status>
</kw>
<status status="PASS" endtime="20191028 05:21:16.689" starttime="20191028 05:21:12.143"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'false'</arg>
<arg>Setup dummy credentials for S3</arg>
</arguments>
<status status="PASS" endtime="20191028 05:21:16.690" starttime="20191028 05:21:16.690"></status>
</kw>
<status status="PASS" endtime="20191028 05:21:16.691" starttime="20191028 05:21:12.094"></status>
</kw>
<status status="PASS" endtime="20191028 05:21:16.691" starttime="20191028 05:21:12.093"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${BUCKET}' == 'generated'</arg>
<arg>Create bucket</arg>
</arguments>
<kw name="Create bucket" library="commonawslib">
<kw name="Generate Random String" library="String">
<doc>Generates a string with a desired ``length`` from the given ``chars``.</doc>
<arguments>
<arg>5</arg>
<arg>[NUMBERS]</arg>
</arguments>
<assign>
<var>${postfix}</var>
</assign>
<msg timestamp="20191028 05:21:16.694" level="INFO">${postfix} = 23851</msg>
<status status="PASS" endtime="20191028 05:21:16.694" starttime="20191028 05:21:16.693"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${BUCKET}</arg>
<arg>bucket-${postfix}</arg>
</arguments>
<msg timestamp="20191028 05:21:16.695" level="INFO">${BUCKET} = bucket-23851</msg>
<status status="PASS" endtime="20191028 05:21:16.695" starttime="20191028 05:21:16.694"></status>
</kw>
<kw name="Execute AWSS3APICli" library="commonawslib">
<arguments>
<arg>create-bucket --bucket ${BUCKET}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws s3api --endpoint-url ${ENDPOINT_URL} ${command}</arg>
</arguments>
<assign>
<var>${output}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:21:16.700" level="INFO">Running command 'aws s3api --endpoint-url http://s3g:9878 create-bucket --bucket bucket-23851 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:21:27.214" level="INFO">${rc} = 255</msg>
<msg timestamp="20191028 05:21:27.215" level="INFO">${output} = 
An error occurred (500) when calling the CreateBucket operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191028 05:21:27.215" starttime="20191028 05:21:16.698"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:21:27.217" level="INFO">
An error occurred (500) when calling the CreateBucket operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191028 05:21:27.217" starttime="20191028 05:21:27.216"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:21:27.218" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191028 05:21:27.219" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191028 05:21:27.219" starttime="20191028 05:21:27.217"></status>
</kw>
<status status="FAIL" endtime="20191028 05:21:27.219" starttime="20191028 05:21:16.696"></status>
</kw>
<status status="FAIL" endtime="20191028 05:21:27.220" starttime="20191028 05:21:16.696"></status>
</kw>
<status status="FAIL" endtime="20191028 05:21:27.220" starttime="20191028 05:21:16.692"></status>
</kw>
<status status="FAIL" endtime="20191028 05:21:27.220" starttime="20191028 05:21:16.691"></status>
</kw>
<status status="FAIL" endtime="20191028 05:21:27.221" starttime="20191028 05:21:11.425"></status>
</kw>
<status status="FAIL" endtime="20191028 05:21:27.221" critical="yes" starttime="20191028 05:21:11.424">Setup failed:
255 != 0</status>
</test>
<doc>S3 gateway test with aws cli</doc>
<status status="FAIL" endtime="20191028 05:21:27.222" starttime="20191028 05:21:11.414"></status>
</suite>
<suite source="/opt/hadoop/smoketest/s3/buckethead.robot" id="s1-s3" name="Buckethead">
<test id="s1-s3-t1" name="Head Bucket not existent">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:21:27.243" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:21:27.249" level="INFO">${rc} = 1</msg>
<msg timestamp="20191028 05:21:27.249" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191028 05:21:27.250" starttime="20191028 05:21:27.241"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191028 05:21:27.251" starttime="20191028 05:21:27.250"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:21:27.253" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:21:27.475" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:21:27.475" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191028 05:21:27.475" starttime="20191028 05:21:27.251"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:21:27.482" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:21:27.972" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:21:27.972" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: d2lzkl7pfhq30w.cloudfront.net
 * extras: mirrors.xtom.com
 * updates: mirro...</msg>
<status status="PASS" endtime="20191028 05:21:27.972" starttime="20191028 05:21:27.479"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:21:27.974" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: d2lzkl7pfhq30w.cloudfront.net
 * extras: mirrors.xtom.com
 * updates: mirror.fileplanet.com
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191028 05:21:27.974" starttime="20191028 05:21:27.973"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:21:27.975" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:21:27.975" starttime="20191028 05:21:27.974"></status>
</kw>
<status status="PASS" endtime="20191028 05:21:27.975" starttime="20191028 05:21:27.479"></status>
</kw>
<status status="PASS" endtime="20191028 05:21:27.976" starttime="20191028 05:21:27.478"></status>
</kw>
<status status="PASS" endtime="20191028 05:21:27.976" starttime="20191028 05:21:27.476"></status>
</kw>
<status status="PASS" endtime="20191028 05:21:27.976" starttime="20191028 05:21:27.240"></status>
</kw>
<status status="PASS" endtime="20191028 05:21:27.976" starttime="20191028 05:21:27.239"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:21:27.983" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:21:27.989" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:21:27.989" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191028 05:21:27.989" starttime="20191028 05:21:27.981"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:21:27.991" level="INFO">s3g</msg>
<status status="PASS" endtime="20191028 05:21:27.991" starttime="20191028 05:21:27.990"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:21:27.992" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:21:27.992" starttime="20191028 05:21:27.991"></status>
</kw>
<msg timestamp="20191028 05:21:27.992" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191028 05:21:27.993" starttime="20191028 05:21:27.980"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191028 05:21:27.995" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191028 05:21:27.996" starttime="20191028 05:21:27.993"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:21:28.000" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:21:28.029" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:21:28.029" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:21:28.029" starttime="20191028 05:21:27.998"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:21:28.031" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:21:28.031" starttime="20191028 05:21:28.030"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:21:28.032" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:21:28.032" starttime="20191028 05:21:28.031"></status>
</kw>
<status status="PASS" endtime="20191028 05:21:28.033" starttime="20191028 05:21:27.997"></status>
</kw>
<status status="PASS" endtime="20191028 05:21:28.033" starttime="20191028 05:21:27.996"></status>
</kw>
<status status="PASS" endtime="20191028 05:21:28.033" starttime="20191028 05:21:27.979"></status>
</kw>
<status status="PASS" endtime="20191028 05:21:28.033" starttime="20191028 05:21:27.978"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:21:28.038" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:21:30.578" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:21:30.578" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191028 05:21:30.578" starttime="20191028 05:21:28.036"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:21:30.579" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
awsAccessKey=testuser/s3g@EXAMPLE.COM
awsSecret=3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a</msg>
<status status="PASS" endtime="20191028 05:21:30.579" starttime="20191028 05:21:30.579"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:21:30.581" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:21:30.581" starttime="20191028 05:21:30.580"></status>
</kw>
<msg timestamp="20191028 05:21:30.581" level="INFO">${result} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191028 05:21:30.581" starttime="20191028 05:21:28.035"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsAccessKey=).*</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191028 05:21:30.582" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191028 05:21:30.582" starttime="20191028 05:21:30.581"></status>
</kw>
<kw name="Get Variable Value" library="BuiltIn">
<doc>Returns variable value or ``default`` if the variable does not exist.</doc>
<arguments>
<arg>${accessKey}</arg>
<arg>sdsdasaasdasd</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191028 05:21:30.583" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191028 05:21:30.583" starttime="20191028 05:21:30.582"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsSecret=).*</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191028 05:21:30.583" level="INFO">${secret} = [u'3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a']</msg>
<status status="PASS" endtime="20191028 05:21:30.583" starttime="20191028 05:21:30.583"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${accessKey[0]}</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191028 05:21:30.584" level="INFO">${accessKey} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191028 05:21:30.584" starttime="20191028 05:21:30.584"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${secret[0]}</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191028 05:21:30.585" level="INFO">${secret} = 3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a</msg>
<status status="PASS" endtime="20191028 05:21:30.585" starttime="20191028 05:21:30.584"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set default.s3.signature_version s3v4</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:21:30.587" level="INFO">Running command 'aws configure set default.s3.signature_version s3v4 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:21:31.014" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:21:31.014" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:21:31.015" starttime="20191028 05:21:30.586"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:21:31.016" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:21:31.016" starttime="20191028 05:21:31.015"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:21:31.017" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:21:31.018" starttime="20191028 05:21:31.017"></status>
</kw>
<status status="PASS" endtime="20191028 05:21:31.018" starttime="20191028 05:21:30.585"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_access_key_id ${accessKey}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:21:31.022" level="INFO">Running command 'aws configure set aws_access_key_id testuser/s3g@EXAMPLE.COM 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:21:31.429" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:21:31.429" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:21:31.429" starttime="20191028 05:21:31.019"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:21:31.430" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:21:31.430" starttime="20191028 05:21:31.429"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:21:31.431" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:21:31.431" starttime="20191028 05:21:31.431"></status>
</kw>
<status status="PASS" endtime="20191028 05:21:31.432" starttime="20191028 05:21:31.018"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_secret_access_key ${secret}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:21:31.434" level="INFO">Running command 'aws configure set aws_secret_access_key 3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:21:31.915" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:21:31.915" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:21:31.915" starttime="20191028 05:21:31.433"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:21:31.916" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:21:31.916" starttime="20191028 05:21:31.916"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:21:31.917" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:21:31.917" starttime="20191028 05:21:31.916"></status>
</kw>
<status status="PASS" endtime="20191028 05:21:31.917" starttime="20191028 05:21:31.432"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set region us-west-1</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:21:31.920" level="INFO">Running command 'aws configure set region us-west-1 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:21:32.345" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:21:32.345" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:21:32.345" starttime="20191028 05:21:31.918"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:21:32.347" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:21:32.347" starttime="20191028 05:21:32.346"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:21:32.348" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:21:32.348" starttime="20191028 05:21:32.348"></status>
</kw>
<status status="PASS" endtime="20191028 05:21:32.349" starttime="20191028 05:21:31.918"></status>
</kw>
<status status="PASS" endtime="20191028 05:21:32.349" starttime="20191028 05:21:28.034"></status>
</kw>
<status status="PASS" endtime="20191028 05:21:32.349" starttime="20191028 05:21:28.033"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'false'</arg>
<arg>Setup dummy credentials for S3</arg>
</arguments>
<status status="PASS" endtime="20191028 05:21:32.351" starttime="20191028 05:21:32.350"></status>
</kw>
<status status="PASS" endtime="20191028 05:21:32.351" starttime="20191028 05:21:27.978"></status>
</kw>
<status status="PASS" endtime="20191028 05:21:32.351" starttime="20191028 05:21:27.977"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${BUCKET}' == 'generated'</arg>
<arg>Create bucket</arg>
</arguments>
<kw name="Create bucket" library="commonawslib">
<kw name="Generate Random String" library="String">
<doc>Generates a string with a desired ``length`` from the given ``chars``.</doc>
<arguments>
<arg>5</arg>
<arg>[NUMBERS]</arg>
</arguments>
<assign>
<var>${postfix}</var>
</assign>
<msg timestamp="20191028 05:21:32.354" level="INFO">${postfix} = 51169</msg>
<status status="PASS" endtime="20191028 05:21:32.354" starttime="20191028 05:21:32.353"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${BUCKET}</arg>
<arg>bucket-${postfix}</arg>
</arguments>
<msg timestamp="20191028 05:21:32.355" level="INFO">${BUCKET} = bucket-51169</msg>
<status status="PASS" endtime="20191028 05:21:32.355" starttime="20191028 05:21:32.354"></status>
</kw>
<kw name="Execute AWSS3APICli" library="commonawslib">
<arguments>
<arg>create-bucket --bucket ${BUCKET}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws s3api --endpoint-url ${ENDPOINT_URL} ${command}</arg>
</arguments>
<assign>
<var>${output}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:21:32.360" level="INFO">Running command 'aws s3api --endpoint-url http://s3g:9878 create-bucket --bucket bucket-51169 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:21:43.801" level="INFO">${rc} = 255</msg>
<msg timestamp="20191028 05:21:43.801" level="INFO">${output} = 
An error occurred (500) when calling the CreateBucket operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191028 05:21:43.802" starttime="20191028 05:21:32.357"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:21:43.805" level="INFO">
An error occurred (500) when calling the CreateBucket operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191028 05:21:43.805" starttime="20191028 05:21:43.803"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:21:43.806" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191028 05:21:43.807" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191028 05:21:43.807" starttime="20191028 05:21:43.805"></status>
</kw>
<status status="FAIL" endtime="20191028 05:21:43.807" starttime="20191028 05:21:32.356"></status>
</kw>
<status status="FAIL" endtime="20191028 05:21:43.808" starttime="20191028 05:21:32.356"></status>
</kw>
<status status="FAIL" endtime="20191028 05:21:43.808" starttime="20191028 05:21:32.352"></status>
</kw>
<status status="FAIL" endtime="20191028 05:21:43.808" starttime="20191028 05:21:32.351"></status>
</kw>
<status status="FAIL" endtime="20191028 05:21:43.809" starttime="20191028 05:21:27.238"></status>
</kw>
<status status="FAIL" endtime="20191028 05:21:43.809" critical="yes" starttime="20191028 05:21:27.237">Setup failed:
255 != 0</status>
</test>
<doc>S3 gateway test with aws cli</doc>
<status status="FAIL" endtime="20191028 05:21:43.811" starttime="20191028 05:21:27.225"></status>
</suite>
<suite source="/opt/hadoop/smoketest/s3/bucketlist.robot" id="s1-s4" name="Bucketlist">
<test id="s1-s4-t1" name="List buckets">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:21:43.833" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:21:43.840" level="INFO">${rc} = 1</msg>
<msg timestamp="20191028 05:21:43.840" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191028 05:21:43.840" starttime="20191028 05:21:43.830"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191028 05:21:43.842" starttime="20191028 05:21:43.841"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:21:43.845" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:21:44.038" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:21:44.038" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191028 05:21:44.038" starttime="20191028 05:21:43.843"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:21:44.044" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:21:44.506" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:21:44.506" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: d2lzkl7pfhq30w.cloudfront.net
 * extras: mirrors.xtom.com
 * updates: mirro...</msg>
<status status="PASS" endtime="20191028 05:21:44.506" starttime="20191028 05:21:44.042"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:21:44.508" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: d2lzkl7pfhq30w.cloudfront.net
 * extras: mirrors.xtom.com
 * updates: mirror.fileplanet.com
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191028 05:21:44.508" starttime="20191028 05:21:44.507"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:21:44.509" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:21:44.509" starttime="20191028 05:21:44.509"></status>
</kw>
<status status="PASS" endtime="20191028 05:21:44.510" starttime="20191028 05:21:44.041"></status>
</kw>
<status status="PASS" endtime="20191028 05:21:44.510" starttime="20191028 05:21:44.040"></status>
</kw>
<status status="PASS" endtime="20191028 05:21:44.511" starttime="20191028 05:21:44.039"></status>
</kw>
<status status="PASS" endtime="20191028 05:21:44.511" starttime="20191028 05:21:43.828"></status>
</kw>
<status status="PASS" endtime="20191028 05:21:44.511" starttime="20191028 05:21:43.827"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:21:44.518" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:21:44.525" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:21:44.525" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191028 05:21:44.525" starttime="20191028 05:21:44.516"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:21:44.527" level="INFO">s3g</msg>
<status status="PASS" endtime="20191028 05:21:44.527" starttime="20191028 05:21:44.526"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:21:44.528" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:21:44.529" starttime="20191028 05:21:44.528"></status>
</kw>
<msg timestamp="20191028 05:21:44.529" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191028 05:21:44.529" starttime="20191028 05:21:44.515"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191028 05:21:44.533" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191028 05:21:44.533" starttime="20191028 05:21:44.530"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:21:44.538" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:21:44.556" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:21:44.556" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:21:44.556" starttime="20191028 05:21:44.536"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:21:44.557" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:21:44.558" starttime="20191028 05:21:44.557"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:21:44.559" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:21:44.559" starttime="20191028 05:21:44.558"></status>
</kw>
<status status="PASS" endtime="20191028 05:21:44.559" starttime="20191028 05:21:44.534"></status>
</kw>
<status status="PASS" endtime="20191028 05:21:44.559" starttime="20191028 05:21:44.533"></status>
</kw>
<status status="PASS" endtime="20191028 05:21:44.560" starttime="20191028 05:21:44.514"></status>
</kw>
<status status="PASS" endtime="20191028 05:21:44.560" starttime="20191028 05:21:44.513"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:21:44.565" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:21:47.374" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:21:47.374" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191028 05:21:47.374" starttime="20191028 05:21:44.563"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:21:47.376" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
awsAccessKey=testuser/s3g@EXAMPLE.COM
awsSecret=3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a</msg>
<status status="PASS" endtime="20191028 05:21:47.377" starttime="20191028 05:21:47.375"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:21:47.379" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:21:47.379" starttime="20191028 05:21:47.377"></status>
</kw>
<msg timestamp="20191028 05:21:47.380" level="INFO">${result} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191028 05:21:47.380" starttime="20191028 05:21:44.562"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsAccessKey=).*</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191028 05:21:47.381" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191028 05:21:47.381" starttime="20191028 05:21:47.380"></status>
</kw>
<kw name="Get Variable Value" library="BuiltIn">
<doc>Returns variable value or ``default`` if the variable does not exist.</doc>
<arguments>
<arg>${accessKey}</arg>
<arg>sdsdasaasdasd</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191028 05:21:47.383" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191028 05:21:47.383" starttime="20191028 05:21:47.382"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsSecret=).*</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191028 05:21:47.384" level="INFO">${secret} = [u'3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a']</msg>
<status status="PASS" endtime="20191028 05:21:47.384" starttime="20191028 05:21:47.383"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${accessKey[0]}</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191028 05:21:47.385" level="INFO">${accessKey} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191028 05:21:47.385" starttime="20191028 05:21:47.384"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${secret[0]}</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191028 05:21:47.387" level="INFO">${secret} = 3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a</msg>
<status status="PASS" endtime="20191028 05:21:47.387" starttime="20191028 05:21:47.386"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set default.s3.signature_version s3v4</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:21:47.393" level="INFO">Running command 'aws configure set default.s3.signature_version s3v4 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:21:47.818" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:21:47.819" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:21:47.819" starttime="20191028 05:21:47.389"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:21:47.821" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:21:47.821" starttime="20191028 05:21:47.820"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:21:47.822" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:21:47.822" starttime="20191028 05:21:47.821"></status>
</kw>
<status status="PASS" endtime="20191028 05:21:47.823" starttime="20191028 05:21:47.388"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_access_key_id ${accessKey}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:21:47.827" level="INFO">Running command 'aws configure set aws_access_key_id testuser/s3g@EXAMPLE.COM 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:21:48.318" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:21:48.318" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:21:48.318" starttime="20191028 05:21:47.824"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:21:48.320" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:21:48.320" starttime="20191028 05:21:48.319"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:21:48.321" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:21:48.322" starttime="20191028 05:21:48.321"></status>
</kw>
<status status="PASS" endtime="20191028 05:21:48.322" starttime="20191028 05:21:47.823"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_secret_access_key ${secret}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:21:48.327" level="INFO">Running command 'aws configure set aws_secret_access_key 3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:21:48.789" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:21:48.790" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:21:48.790" starttime="20191028 05:21:48.324"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:21:48.792" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:21:48.792" starttime="20191028 05:21:48.791"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:21:48.793" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:21:48.793" starttime="20191028 05:21:48.792"></status>
</kw>
<status status="PASS" endtime="20191028 05:21:48.794" starttime="20191028 05:21:48.323"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set region us-west-1</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:21:48.797" level="INFO">Running command 'aws configure set region us-west-1 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:21:49.285" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:21:49.286" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:21:49.286" starttime="20191028 05:21:48.795"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:21:49.287" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:21:49.287" starttime="20191028 05:21:49.286"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:21:49.288" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:21:49.288" starttime="20191028 05:21:49.287"></status>
</kw>
<status status="PASS" endtime="20191028 05:21:49.288" starttime="20191028 05:21:48.794"></status>
</kw>
<status status="PASS" endtime="20191028 05:21:49.288" starttime="20191028 05:21:44.561"></status>
</kw>
<status status="PASS" endtime="20191028 05:21:49.289" starttime="20191028 05:21:44.560"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'false'</arg>
<arg>Setup dummy credentials for S3</arg>
</arguments>
<status status="PASS" endtime="20191028 05:21:49.289" starttime="20191028 05:21:49.289"></status>
</kw>
<status status="PASS" endtime="20191028 05:21:49.289" starttime="20191028 05:21:44.512"></status>
</kw>
<status status="PASS" endtime="20191028 05:21:49.290" starttime="20191028 05:21:44.511"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${BUCKET}' == 'generated'</arg>
<arg>Create bucket</arg>
</arguments>
<kw name="Create bucket" library="commonawslib">
<kw name="Generate Random String" library="String">
<doc>Generates a string with a desired ``length`` from the given ``chars``.</doc>
<arguments>
<arg>5</arg>
<arg>[NUMBERS]</arg>
</arguments>
<assign>
<var>${postfix}</var>
</assign>
<msg timestamp="20191028 05:21:49.291" level="INFO">${postfix} = 08932</msg>
<status status="PASS" endtime="20191028 05:21:49.291" starttime="20191028 05:21:49.291"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${BUCKET}</arg>
<arg>bucket-${postfix}</arg>
</arguments>
<msg timestamp="20191028 05:21:49.292" level="INFO">${BUCKET} = bucket-08932</msg>
<status status="PASS" endtime="20191028 05:21:49.292" starttime="20191028 05:21:49.292"></status>
</kw>
<kw name="Execute AWSS3APICli" library="commonawslib">
<arguments>
<arg>create-bucket --bucket ${BUCKET}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws s3api --endpoint-url ${ENDPOINT_URL} ${command}</arg>
</arguments>
<assign>
<var>${output}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:21:49.295" level="INFO">Running command 'aws s3api --endpoint-url http://s3g:9878 create-bucket --bucket bucket-08932 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:22:00.290" level="INFO">${rc} = 255</msg>
<msg timestamp="20191028 05:22:00.290" level="INFO">${output} = 
An error occurred (500) when calling the CreateBucket operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191028 05:22:00.290" starttime="20191028 05:21:49.294"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:22:00.292" level="INFO">
An error occurred (500) when calling the CreateBucket operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191028 05:22:00.293" starttime="20191028 05:22:00.291"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:22:00.294" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191028 05:22:00.295" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191028 05:22:00.295" starttime="20191028 05:22:00.294"></status>
</kw>
<status status="FAIL" endtime="20191028 05:22:00.295" starttime="20191028 05:21:49.293"></status>
</kw>
<status status="FAIL" endtime="20191028 05:22:00.296" starttime="20191028 05:21:49.292"></status>
</kw>
<status status="FAIL" endtime="20191028 05:22:00.296" starttime="20191028 05:21:49.290"></status>
</kw>
<status status="FAIL" endtime="20191028 05:22:00.296" starttime="20191028 05:21:49.290"></status>
</kw>
<status status="FAIL" endtime="20191028 05:22:00.297" starttime="20191028 05:21:43.827"></status>
</kw>
<status status="FAIL" endtime="20191028 05:22:00.297" critical="yes" starttime="20191028 05:21:43.826">Setup failed:
255 != 0</status>
</test>
<doc>S3 gateway test with aws cli</doc>
<status status="FAIL" endtime="20191028 05:22:00.298" starttime="20191028 05:21:43.813"></status>
</suite>
<suite source="/opt/hadoop/smoketest/s3/MultipartUpload.robot" id="s1-s5" name="MultipartUpload">
<test id="s1-s5-t1" name="Test Multipart Upload">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:22:00.317" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:22:00.324" level="INFO">${rc} = 1</msg>
<msg timestamp="20191028 05:22:00.324" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191028 05:22:00.324" starttime="20191028 05:22:00.315"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191028 05:22:00.326" starttime="20191028 05:22:00.325"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:22:00.328" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:22:00.513" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:22:00.513" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191028 05:22:00.513" starttime="20191028 05:22:00.326"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:22:00.520" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:22:01.030" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:22:01.030" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: d2lzkl7pfhq30w.cloudfront.net
 * extras: mirrors.xtom.com
 * updates: mirro...</msg>
<status status="PASS" endtime="20191028 05:22:01.031" starttime="20191028 05:22:00.517"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:22:01.033" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: d2lzkl7pfhq30w.cloudfront.net
 * extras: mirrors.xtom.com
 * updates: mirror.fileplanet.com
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191028 05:22:01.033" starttime="20191028 05:22:01.032"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:22:01.034" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:22:01.034" starttime="20191028 05:22:01.033"></status>
</kw>
<status status="PASS" endtime="20191028 05:22:01.035" starttime="20191028 05:22:00.516"></status>
</kw>
<status status="PASS" endtime="20191028 05:22:01.035" starttime="20191028 05:22:00.515"></status>
</kw>
<status status="PASS" endtime="20191028 05:22:01.035" starttime="20191028 05:22:00.514"></status>
</kw>
<status status="PASS" endtime="20191028 05:22:01.035" starttime="20191028 05:22:00.314"></status>
</kw>
<status status="PASS" endtime="20191028 05:22:01.036" starttime="20191028 05:22:00.314"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:22:01.043" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:22:01.050" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:22:01.050" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191028 05:22:01.050" starttime="20191028 05:22:01.041"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:22:01.052" level="INFO">s3g</msg>
<status status="PASS" endtime="20191028 05:22:01.053" starttime="20191028 05:22:01.051"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:22:01.054" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:22:01.054" starttime="20191028 05:22:01.053"></status>
</kw>
<msg timestamp="20191028 05:22:01.054" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191028 05:22:01.055" starttime="20191028 05:22:01.040"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191028 05:22:01.058" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191028 05:22:01.058" starttime="20191028 05:22:01.055"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:22:01.063" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:22:01.107" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:22:01.107" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:22:01.107" starttime="20191028 05:22:01.061"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:22:01.109" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:22:01.109" starttime="20191028 05:22:01.108"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:22:01.110" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:22:01.110" starttime="20191028 05:22:01.109"></status>
</kw>
<status status="PASS" endtime="20191028 05:22:01.110" starttime="20191028 05:22:01.059"></status>
</kw>
<status status="PASS" endtime="20191028 05:22:01.111" starttime="20191028 05:22:01.058"></status>
</kw>
<status status="PASS" endtime="20191028 05:22:01.111" starttime="20191028 05:22:01.039"></status>
</kw>
<status status="PASS" endtime="20191028 05:22:01.111" starttime="20191028 05:22:01.038"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:22:01.117" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:22:04.004" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:22:04.005" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191028 05:22:04.005" starttime="20191028 05:22:01.114"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:22:04.008" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
awsAccessKey=testuser/s3g@EXAMPLE.COM
awsSecret=3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a</msg>
<status status="PASS" endtime="20191028 05:22:04.008" starttime="20191028 05:22:04.006"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:22:04.009" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:22:04.009" starttime="20191028 05:22:04.008"></status>
</kw>
<msg timestamp="20191028 05:22:04.010" level="INFO">${result} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191028 05:22:04.010" starttime="20191028 05:22:01.113"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsAccessKey=).*</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191028 05:22:04.012" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191028 05:22:04.012" starttime="20191028 05:22:04.011"></status>
</kw>
<kw name="Get Variable Value" library="BuiltIn">
<doc>Returns variable value or ``default`` if the variable does not exist.</doc>
<arguments>
<arg>${accessKey}</arg>
<arg>sdsdasaasdasd</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191028 05:22:04.013" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191028 05:22:04.013" starttime="20191028 05:22:04.012"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsSecret=).*</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191028 05:22:04.014" level="INFO">${secret} = [u'3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a']</msg>
<status status="PASS" endtime="20191028 05:22:04.015" starttime="20191028 05:22:04.014"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${accessKey[0]}</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191028 05:22:04.016" level="INFO">${accessKey} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191028 05:22:04.016" starttime="20191028 05:22:04.015"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${secret[0]}</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191028 05:22:04.017" level="INFO">${secret} = 3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a</msg>
<status status="PASS" endtime="20191028 05:22:04.017" starttime="20191028 05:22:04.016"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set default.s3.signature_version s3v4</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:22:04.021" level="INFO">Running command 'aws configure set default.s3.signature_version s3v4 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:22:04.502" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:22:04.502" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:22:04.502" starttime="20191028 05:22:04.019"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:22:04.504" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:22:04.505" starttime="20191028 05:22:04.503"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:22:04.506" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:22:04.506" starttime="20191028 05:22:04.505"></status>
</kw>
<status status="PASS" endtime="20191028 05:22:04.506" starttime="20191028 05:22:04.018"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_access_key_id ${accessKey}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:22:04.511" level="INFO">Running command 'aws configure set aws_access_key_id testuser/s3g@EXAMPLE.COM 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:22:05.008" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:22:05.009" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:22:05.009" starttime="20191028 05:22:04.508"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:22:05.011" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:22:05.011" starttime="20191028 05:22:05.010"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:22:05.012" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:22:05.012" starttime="20191028 05:22:05.011"></status>
</kw>
<status status="PASS" endtime="20191028 05:22:05.013" starttime="20191028 05:22:04.507"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_secret_access_key ${secret}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:22:05.017" level="INFO">Running command 'aws configure set aws_secret_access_key 3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:22:05.497" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:22:05.497" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:22:05.497" starttime="20191028 05:22:05.014"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:22:05.498" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:22:05.499" starttime="20191028 05:22:05.498"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:22:05.500" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:22:05.500" starttime="20191028 05:22:05.499"></status>
</kw>
<status status="PASS" endtime="20191028 05:22:05.501" starttime="20191028 05:22:05.013"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set region us-west-1</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:22:05.504" level="INFO">Running command 'aws configure set region us-west-1 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:22:05.971" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:22:05.971" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:22:05.971" starttime="20191028 05:22:05.502"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:22:05.973" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:22:05.973" starttime="20191028 05:22:05.972"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:22:05.974" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:22:05.975" starttime="20191028 05:22:05.974"></status>
</kw>
<status status="PASS" endtime="20191028 05:22:05.975" starttime="20191028 05:22:05.501"></status>
</kw>
<status status="PASS" endtime="20191028 05:22:05.975" starttime="20191028 05:22:01.113"></status>
</kw>
<status status="PASS" endtime="20191028 05:22:05.976" starttime="20191028 05:22:01.112"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'false'</arg>
<arg>Setup dummy credentials for S3</arg>
</arguments>
<status status="PASS" endtime="20191028 05:22:05.977" starttime="20191028 05:22:05.976"></status>
</kw>
<status status="PASS" endtime="20191028 05:22:05.977" starttime="20191028 05:22:01.037"></status>
</kw>
<status status="PASS" endtime="20191028 05:22:05.977" starttime="20191028 05:22:01.036"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${BUCKET}' == 'generated'</arg>
<arg>Create bucket</arg>
</arguments>
<kw name="Create bucket" library="commonawslib">
<kw name="Generate Random String" library="String">
<doc>Generates a string with a desired ``length`` from the given ``chars``.</doc>
<arguments>
<arg>5</arg>
<arg>[NUMBERS]</arg>
</arguments>
<assign>
<var>${postfix}</var>
</assign>
<msg timestamp="20191028 05:22:05.981" level="INFO">${postfix} = 69731</msg>
<status status="PASS" endtime="20191028 05:22:05.981" starttime="20191028 05:22:05.980"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${BUCKET}</arg>
<arg>bucket-${postfix}</arg>
</arguments>
<msg timestamp="20191028 05:22:05.982" level="INFO">${BUCKET} = bucket-69731</msg>
<status status="PASS" endtime="20191028 05:22:05.982" starttime="20191028 05:22:05.981"></status>
</kw>
<kw name="Execute AWSS3APICli" library="commonawslib">
<arguments>
<arg>create-bucket --bucket ${BUCKET}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws s3api --endpoint-url ${ENDPOINT_URL} ${command}</arg>
</arguments>
<assign>
<var>${output}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:22:05.987" level="INFO">Running command 'aws s3api --endpoint-url http://s3g:9878 create-bucket --bucket bucket-69731 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:22:17.094" level="INFO">${rc} = 255</msg>
<msg timestamp="20191028 05:22:17.094" level="INFO">${output} = 
An error occurred (500) when calling the CreateBucket operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191028 05:22:17.094" starttime="20191028 05:22:05.984"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:22:17.097" level="INFO">
An error occurred (500) when calling the CreateBucket operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191028 05:22:17.097" starttime="20191028 05:22:17.095"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:22:17.098" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191028 05:22:17.099" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191028 05:22:17.099" starttime="20191028 05:22:17.097"></status>
</kw>
<status status="FAIL" endtime="20191028 05:22:17.099" starttime="20191028 05:22:05.983"></status>
</kw>
<status status="FAIL" endtime="20191028 05:22:17.100" starttime="20191028 05:22:05.982"></status>
</kw>
<status status="FAIL" endtime="20191028 05:22:17.100" starttime="20191028 05:22:05.979"></status>
</kw>
<status status="FAIL" endtime="20191028 05:22:17.100" starttime="20191028 05:22:05.978"></status>
</kw>
<status status="FAIL" endtime="20191028 05:22:17.100" starttime="20191028 05:22:00.313"></status>
</kw>
<status status="FAIL" endtime="20191028 05:22:17.101" critical="yes" starttime="20191028 05:22:00.312">Setup failed:
255 != 0</status>
</test>
<test id="s1-s5-t2" name="Test Multipart Upload Complete">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:22:17.107" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:22:17.114" level="INFO">${rc} = 1</msg>
<msg timestamp="20191028 05:22:17.114" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191028 05:22:17.114" starttime="20191028 05:22:17.105"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191028 05:22:17.116" starttime="20191028 05:22:17.115"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:22:17.119" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:22:17.325" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:22:17.325" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191028 05:22:17.325" starttime="20191028 05:22:17.117"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:22:17.330" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:22:17.865" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:22:17.865" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: d2lzkl7pfhq30w.cloudfront.net
 * extras: mirrors.xtom.com
 * updates: mirro...</msg>
<status status="PASS" endtime="20191028 05:22:17.866" starttime="20191028 05:22:17.328"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:22:17.867" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: d2lzkl7pfhq30w.cloudfront.net
 * extras: mirrors.xtom.com
 * updates: mirror.fileplanet.com
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191028 05:22:17.868" starttime="20191028 05:22:17.866"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:22:17.869" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:22:17.869" starttime="20191028 05:22:17.868"></status>
</kw>
<status status="PASS" endtime="20191028 05:22:17.869" starttime="20191028 05:22:17.328"></status>
</kw>
<status status="PASS" endtime="20191028 05:22:17.870" starttime="20191028 05:22:17.327"></status>
</kw>
<status status="PASS" endtime="20191028 05:22:17.870" starttime="20191028 05:22:17.326"></status>
</kw>
<status status="PASS" endtime="20191028 05:22:17.870" starttime="20191028 05:22:17.104"></status>
</kw>
<status status="PASS" endtime="20191028 05:22:17.871" starttime="20191028 05:22:17.104"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:22:17.878" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:22:17.884" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:22:17.884" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191028 05:22:17.885" starttime="20191028 05:22:17.875"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:22:17.886" level="INFO">s3g</msg>
<status status="PASS" endtime="20191028 05:22:17.886" starttime="20191028 05:22:17.885"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:22:17.887" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:22:17.888" starttime="20191028 05:22:17.887"></status>
</kw>
<msg timestamp="20191028 05:22:17.888" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191028 05:22:17.888" starttime="20191028 05:22:17.875"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191028 05:22:17.890" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191028 05:22:17.890" starttime="20191028 05:22:17.889"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:22:17.896" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:22:17.935" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:22:17.935" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:22:17.935" starttime="20191028 05:22:17.893"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:22:17.937" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:22:17.937" starttime="20191028 05:22:17.936"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:22:17.938" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:22:17.938" starttime="20191028 05:22:17.937"></status>
</kw>
<status status="PASS" endtime="20191028 05:22:17.939" starttime="20191028 05:22:17.891"></status>
</kw>
<status status="PASS" endtime="20191028 05:22:17.939" starttime="20191028 05:22:17.891"></status>
</kw>
<status status="PASS" endtime="20191028 05:22:17.939" starttime="20191028 05:22:17.874"></status>
</kw>
<status status="PASS" endtime="20191028 05:22:17.939" starttime="20191028 05:22:17.873"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:22:17.944" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:22:20.671" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:22:20.672" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191028 05:22:20.672" starttime="20191028 05:22:17.942"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:22:20.673" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
awsAccessKey=testuser/s3g@EXAMPLE.COM
awsSecret=3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a</msg>
<status status="PASS" endtime="20191028 05:22:20.673" starttime="20191028 05:22:20.672"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:22:20.674" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:22:20.674" starttime="20191028 05:22:20.674"></status>
</kw>
<msg timestamp="20191028 05:22:20.675" level="INFO">${result} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191028 05:22:20.675" starttime="20191028 05:22:17.941"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsAccessKey=).*</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191028 05:22:20.676" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191028 05:22:20.676" starttime="20191028 05:22:20.675"></status>
</kw>
<kw name="Get Variable Value" library="BuiltIn">
<doc>Returns variable value or ``default`` if the variable does not exist.</doc>
<arguments>
<arg>${accessKey}</arg>
<arg>sdsdasaasdasd</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191028 05:22:20.677" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191028 05:22:20.677" starttime="20191028 05:22:20.676"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsSecret=).*</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191028 05:22:20.678" level="INFO">${secret} = [u'3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a']</msg>
<status status="PASS" endtime="20191028 05:22:20.678" starttime="20191028 05:22:20.677"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${accessKey[0]}</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191028 05:22:20.679" level="INFO">${accessKey} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191028 05:22:20.679" starttime="20191028 05:22:20.678"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${secret[0]}</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191028 05:22:20.680" level="INFO">${secret} = 3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a</msg>
<status status="PASS" endtime="20191028 05:22:20.680" starttime="20191028 05:22:20.679"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set default.s3.signature_version s3v4</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:22:20.683" level="INFO">Running command 'aws configure set default.s3.signature_version s3v4 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:22:21.187" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:22:21.187" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:22:21.188" starttime="20191028 05:22:20.681"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:22:21.189" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:22:21.190" starttime="20191028 05:22:21.188"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:22:21.191" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:22:21.191" starttime="20191028 05:22:21.190"></status>
</kw>
<status status="PASS" endtime="20191028 05:22:21.192" starttime="20191028 05:22:20.680"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_access_key_id ${accessKey}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:22:21.195" level="INFO">Running command 'aws configure set aws_access_key_id testuser/s3g@EXAMPLE.COM 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:22:21.686" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:22:21.687" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:22:21.687" starttime="20191028 05:22:21.193"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:22:21.689" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:22:21.689" starttime="20191028 05:22:21.688"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:22:21.690" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:22:21.690" starttime="20191028 05:22:21.689"></status>
</kw>
<status status="PASS" endtime="20191028 05:22:21.691" starttime="20191028 05:22:21.192"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_secret_access_key ${secret}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:22:21.694" level="INFO">Running command 'aws configure set aws_secret_access_key 3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:22:22.148" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:22:22.148" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:22:22.148" starttime="20191028 05:22:21.692"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:22:22.150" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:22:22.150" starttime="20191028 05:22:22.149"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:22:22.151" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:22:22.151" starttime="20191028 05:22:22.150"></status>
</kw>
<status status="PASS" endtime="20191028 05:22:22.152" starttime="20191028 05:22:21.691"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set region us-west-1</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:22:22.155" level="INFO">Running command 'aws configure set region us-west-1 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:22:22.608" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:22:22.608" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:22:22.608" starttime="20191028 05:22:22.153"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:22:22.610" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:22:22.610" starttime="20191028 05:22:22.609"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:22:22.613" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:22:22.613" starttime="20191028 05:22:22.611"></status>
</kw>
<status status="PASS" endtime="20191028 05:22:22.614" starttime="20191028 05:22:22.152"></status>
</kw>
<status status="PASS" endtime="20191028 05:22:22.614" starttime="20191028 05:22:17.941"></status>
</kw>
<status status="PASS" endtime="20191028 05:22:22.614" starttime="20191028 05:22:17.940"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'false'</arg>
<arg>Setup dummy credentials for S3</arg>
</arguments>
<status status="PASS" endtime="20191028 05:22:22.615" starttime="20191028 05:22:22.614"></status>
</kw>
<status status="PASS" endtime="20191028 05:22:22.615" starttime="20191028 05:22:17.872"></status>
</kw>
<status status="PASS" endtime="20191028 05:22:22.616" starttime="20191028 05:22:17.871"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${BUCKET}' == 'generated'</arg>
<arg>Create bucket</arg>
</arguments>
<status status="PASS" endtime="20191028 05:22:22.617" starttime="20191028 05:22:22.616"></status>
</kw>
<status status="PASS" endtime="20191028 05:22:22.617" starttime="20191028 05:22:17.103"></status>
</kw>
<kw name="Execute AWSS3APICli" library="commonawslib">
<arguments>
<arg>create-multipart-upload --bucket ${BUCKET} --key multipartKey1</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws s3api --endpoint-url ${ENDPOINT_URL} ${command}</arg>
</arguments>
<assign>
<var>${output}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:22:22.622" level="INFO">Running command 'aws s3api --endpoint-url http://s3g:9878 create-multipart-upload --bucket bucket-69731 --key multipartKey1 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:22:30.960" level="INFO">${rc} = 255</msg>
<msg timestamp="20191028 05:22:30.960" level="INFO">${output} = 
An error occurred (500) when calling the CreateMultipartUpload operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191028 05:22:30.960" starttime="20191028 05:22:22.620"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:22:30.962" level="INFO">
An error occurred (500) when calling the CreateMultipartUpload operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191028 05:22:30.962" starttime="20191028 05:22:30.961"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:22:30.963" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191028 05:22:30.963" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191028 05:22:30.964" starttime="20191028 05:22:30.962"></status>
</kw>
<status status="FAIL" endtime="20191028 05:22:30.964" starttime="20191028 05:22:22.619"></status>
</kw>
<status status="FAIL" endtime="20191028 05:22:30.964" starttime="20191028 05:22:22.618"></status>
</kw>
<status status="FAIL" endtime="20191028 05:22:30.965" critical="yes" starttime="20191028 05:22:17.102">255 != 0</status>
</test>
<test id="s1-s5-t3" name="Test Multipart Upload Complete Entity too small">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:22:30.971" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:22:30.977" level="INFO">${rc} = 1</msg>
<msg timestamp="20191028 05:22:30.978" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191028 05:22:30.978" starttime="20191028 05:22:30.969"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191028 05:22:30.979" starttime="20191028 05:22:30.978"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:22:30.981" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:22:31.220" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:22:31.221" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191028 05:22:31.221" starttime="20191028 05:22:30.980"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:22:31.226" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:22:31.730" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:22:31.730" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: d2lzkl7pfhq30w.cloudfront.net
 * extras: mirrors.xtom.com
 * updates: mirro...</msg>
<status status="PASS" endtime="20191028 05:22:31.730" starttime="20191028 05:22:31.224"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:22:31.732" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: d2lzkl7pfhq30w.cloudfront.net
 * extras: mirrors.xtom.com
 * updates: mirror.fileplanet.com
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191028 05:22:31.732" starttime="20191028 05:22:31.731"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:22:31.733" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:22:31.734" starttime="20191028 05:22:31.732"></status>
</kw>
<status status="PASS" endtime="20191028 05:22:31.734" starttime="20191028 05:22:31.224"></status>
</kw>
<status status="PASS" endtime="20191028 05:22:31.735" starttime="20191028 05:22:31.223"></status>
</kw>
<status status="PASS" endtime="20191028 05:22:31.735" starttime="20191028 05:22:31.222"></status>
</kw>
<status status="PASS" endtime="20191028 05:22:31.735" starttime="20191028 05:22:30.968"></status>
</kw>
<status status="PASS" endtime="20191028 05:22:31.735" starttime="20191028 05:22:30.967"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:22:31.743" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:22:31.749" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:22:31.749" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191028 05:22:31.749" starttime="20191028 05:22:31.740"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:22:31.752" level="INFO">s3g</msg>
<status status="PASS" endtime="20191028 05:22:31.752" starttime="20191028 05:22:31.750"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:22:31.753" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:22:31.753" starttime="20191028 05:22:31.752"></status>
</kw>
<msg timestamp="20191028 05:22:31.754" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191028 05:22:31.754" starttime="20191028 05:22:31.739"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191028 05:22:31.755" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191028 05:22:31.755" starttime="20191028 05:22:31.754"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:22:31.759" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:22:31.778" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:22:31.778" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:22:31.778" starttime="20191028 05:22:31.757"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:22:31.779" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:22:31.779" starttime="20191028 05:22:31.778"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:22:31.780" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:22:31.780" starttime="20191028 05:22:31.779"></status>
</kw>
<status status="PASS" endtime="20191028 05:22:31.781" starttime="20191028 05:22:31.756"></status>
</kw>
<status status="PASS" endtime="20191028 05:22:31.781" starttime="20191028 05:22:31.755"></status>
</kw>
<status status="PASS" endtime="20191028 05:22:31.781" starttime="20191028 05:22:31.739"></status>
</kw>
<status status="PASS" endtime="20191028 05:22:31.781" starttime="20191028 05:22:31.738"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:22:31.785" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:22:34.605" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:22:34.606" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191028 05:22:34.606" starttime="20191028 05:22:31.783"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:22:34.607" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
awsAccessKey=testuser/s3g@EXAMPLE.COM
awsSecret=3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a</msg>
<status status="PASS" endtime="20191028 05:22:34.607" starttime="20191028 05:22:34.606"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:22:34.608" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:22:34.608" starttime="20191028 05:22:34.608"></status>
</kw>
<msg timestamp="20191028 05:22:34.609" level="INFO">${result} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191028 05:22:34.609" starttime="20191028 05:22:31.783"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsAccessKey=).*</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191028 05:22:34.610" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191028 05:22:34.610" starttime="20191028 05:22:34.609"></status>
</kw>
<kw name="Get Variable Value" library="BuiltIn">
<doc>Returns variable value or ``default`` if the variable does not exist.</doc>
<arguments>
<arg>${accessKey}</arg>
<arg>sdsdasaasdasd</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191028 05:22:34.611" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191028 05:22:34.611" starttime="20191028 05:22:34.610"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsSecret=).*</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191028 05:22:34.612" level="INFO">${secret} = [u'3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a']</msg>
<status status="PASS" endtime="20191028 05:22:34.612" starttime="20191028 05:22:34.611"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${accessKey[0]}</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191028 05:22:34.613" level="INFO">${accessKey} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191028 05:22:34.613" starttime="20191028 05:22:34.612"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${secret[0]}</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191028 05:22:34.614" level="INFO">${secret} = 3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a</msg>
<status status="PASS" endtime="20191028 05:22:34.614" starttime="20191028 05:22:34.613"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set default.s3.signature_version s3v4</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:22:34.617" level="INFO">Running command 'aws configure set default.s3.signature_version s3v4 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:22:35.115" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:22:35.115" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:22:35.115" starttime="20191028 05:22:34.615"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:22:35.117" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:22:35.117" starttime="20191028 05:22:35.116"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:22:35.118" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:22:35.119" starttime="20191028 05:22:35.118"></status>
</kw>
<status status="PASS" endtime="20191028 05:22:35.119" starttime="20191028 05:22:34.614"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_access_key_id ${accessKey}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:22:35.123" level="INFO">Running command 'aws configure set aws_access_key_id testuser/s3g@EXAMPLE.COM 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:22:35.586" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:22:35.587" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:22:35.587" starttime="20191028 05:22:35.121"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:22:35.589" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:22:35.589" starttime="20191028 05:22:35.588"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:22:35.590" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:22:35.590" starttime="20191028 05:22:35.589"></status>
</kw>
<status status="PASS" endtime="20191028 05:22:35.591" starttime="20191028 05:22:35.119"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_secret_access_key ${secret}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:22:35.595" level="INFO">Running command 'aws configure set aws_secret_access_key 3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:22:36.061" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:22:36.061" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:22:36.061" starttime="20191028 05:22:35.592"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:22:36.064" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:22:36.065" starttime="20191028 05:22:36.062"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:22:36.066" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:22:36.066" starttime="20191028 05:22:36.065"></status>
</kw>
<status status="PASS" endtime="20191028 05:22:36.066" starttime="20191028 05:22:35.591"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set region us-west-1</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:22:36.070" level="INFO">Running command 'aws configure set region us-west-1 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:22:36.535" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:22:36.535" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:22:36.535" starttime="20191028 05:22:36.068"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:22:36.538" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:22:36.538" starttime="20191028 05:22:36.536"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:22:36.539" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:22:36.539" starttime="20191028 05:22:36.538"></status>
</kw>
<status status="PASS" endtime="20191028 05:22:36.540" starttime="20191028 05:22:36.067"></status>
</kw>
<status status="PASS" endtime="20191028 05:22:36.540" starttime="20191028 05:22:31.782"></status>
</kw>
<status status="PASS" endtime="20191028 05:22:36.540" starttime="20191028 05:22:31.781"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'false'</arg>
<arg>Setup dummy credentials for S3</arg>
</arguments>
<status status="PASS" endtime="20191028 05:22:36.542" starttime="20191028 05:22:36.541"></status>
</kw>
<status status="PASS" endtime="20191028 05:22:36.542" starttime="20191028 05:22:31.737"></status>
</kw>
<status status="PASS" endtime="20191028 05:22:36.542" starttime="20191028 05:22:31.736"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${BUCKET}' == 'generated'</arg>
<arg>Create bucket</arg>
</arguments>
<status status="PASS" endtime="20191028 05:22:36.544" starttime="20191028 05:22:36.543"></status>
</kw>
<status status="PASS" endtime="20191028 05:22:36.544" starttime="20191028 05:22:30.967"></status>
</kw>
<kw name="Execute AWSS3APICli" library="commonawslib">
<arguments>
<arg>create-multipart-upload --bucket ${BUCKET} --key multipartKey2</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws s3api --endpoint-url ${ENDPOINT_URL} ${command}</arg>
</arguments>
<assign>
<var>${output}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:22:36.549" level="INFO">Running command 'aws s3api --endpoint-url http://s3g:9878 create-multipart-upload --bucket bucket-69731 --key multipartKey2 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:22:40.306" level="INFO">${rc} = 255</msg>
<msg timestamp="20191028 05:22:40.306" level="INFO">${output} = 
An error occurred (500) when calling the CreateMultipartUpload operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191028 05:22:40.306" starttime="20191028 05:22:36.547"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:22:40.308" level="INFO">
An error occurred (500) when calling the CreateMultipartUpload operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191028 05:22:40.308" starttime="20191028 05:22:40.307"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:22:40.309" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191028 05:22:40.310" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191028 05:22:40.310" starttime="20191028 05:22:40.308"></status>
</kw>
<status status="FAIL" endtime="20191028 05:22:40.310" starttime="20191028 05:22:36.546"></status>
</kw>
<status status="FAIL" endtime="20191028 05:22:40.311" starttime="20191028 05:22:36.544"></status>
</kw>
<status status="FAIL" endtime="20191028 05:22:40.311" critical="yes" starttime="20191028 05:22:30.965">255 != 0</status>
</test>
<test id="s1-s5-t4" name="Test Multipart Upload Complete Invalid part">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:22:40.317" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:22:40.324" level="INFO">${rc} = 1</msg>
<msg timestamp="20191028 05:22:40.325" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191028 05:22:40.325" starttime="20191028 05:22:40.315"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191028 05:22:40.327" starttime="20191028 05:22:40.326"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:22:40.329" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:22:40.508" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:22:40.508" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191028 05:22:40.509" starttime="20191028 05:22:40.327"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:22:40.515" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:22:40.977" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:22:40.977" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: d2lzkl7pfhq30w.cloudfront.net
 * extras: mirrors.xtom.com
 * updates: mirro...</msg>
<status status="PASS" endtime="20191028 05:22:40.977" starttime="20191028 05:22:40.513"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:22:40.979" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: d2lzkl7pfhq30w.cloudfront.net
 * extras: mirrors.xtom.com
 * updates: mirror.fileplanet.com
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191028 05:22:40.980" starttime="20191028 05:22:40.978"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:22:40.981" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:22:40.981" starttime="20191028 05:22:40.980"></status>
</kw>
<status status="PASS" endtime="20191028 05:22:40.981" starttime="20191028 05:22:40.512"></status>
</kw>
<status status="PASS" endtime="20191028 05:22:40.982" starttime="20191028 05:22:40.511"></status>
</kw>
<status status="PASS" endtime="20191028 05:22:40.982" starttime="20191028 05:22:40.509"></status>
</kw>
<status status="PASS" endtime="20191028 05:22:40.982" starttime="20191028 05:22:40.314"></status>
</kw>
<status status="PASS" endtime="20191028 05:22:40.982" starttime="20191028 05:22:40.314"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:22:40.989" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:22:40.996" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:22:40.996" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191028 05:22:40.996" starttime="20191028 05:22:40.987"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:22:40.999" level="INFO">s3g</msg>
<status status="PASS" endtime="20191028 05:22:40.999" starttime="20191028 05:22:40.997"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:22:41.001" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:22:41.001" starttime="20191028 05:22:41.000"></status>
</kw>
<msg timestamp="20191028 05:22:41.001" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191028 05:22:41.002" starttime="20191028 05:22:40.986"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191028 05:22:41.003" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191028 05:22:41.003" starttime="20191028 05:22:41.002"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:22:41.008" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:22:41.024" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:22:41.025" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:22:41.025" starttime="20191028 05:22:41.006"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:22:41.026" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:22:41.027" starttime="20191028 05:22:41.025"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:22:41.027" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:22:41.028" starttime="20191028 05:22:41.027"></status>
</kw>
<status status="PASS" endtime="20191028 05:22:41.028" starttime="20191028 05:22:41.005"></status>
</kw>
<status status="PASS" endtime="20191028 05:22:41.029" starttime="20191028 05:22:41.004"></status>
</kw>
<status status="PASS" endtime="20191028 05:22:41.029" starttime="20191028 05:22:40.985"></status>
</kw>
<status status="PASS" endtime="20191028 05:22:41.029" starttime="20191028 05:22:40.984"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:22:41.034" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:22:43.794" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:22:43.794" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191028 05:22:43.794" starttime="20191028 05:22:41.032"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:22:43.795" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
awsAccessKey=testuser/s3g@EXAMPLE.COM
awsSecret=3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a</msg>
<status status="PASS" endtime="20191028 05:22:43.796" starttime="20191028 05:22:43.795"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:22:43.796" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:22:43.797" starttime="20191028 05:22:43.796"></status>
</kw>
<msg timestamp="20191028 05:22:43.797" level="INFO">${result} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191028 05:22:43.797" starttime="20191028 05:22:41.031"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsAccessKey=).*</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191028 05:22:43.798" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191028 05:22:43.798" starttime="20191028 05:22:43.797"></status>
</kw>
<kw name="Get Variable Value" library="BuiltIn">
<doc>Returns variable value or ``default`` if the variable does not exist.</doc>
<arguments>
<arg>${accessKey}</arg>
<arg>sdsdasaasdasd</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191028 05:22:43.799" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191028 05:22:43.799" starttime="20191028 05:22:43.798"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsSecret=).*</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191028 05:22:43.800" level="INFO">${secret} = [u'3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a']</msg>
<status status="PASS" endtime="20191028 05:22:43.800" starttime="20191028 05:22:43.799"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${accessKey[0]}</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191028 05:22:43.801" level="INFO">${accessKey} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191028 05:22:43.801" starttime="20191028 05:22:43.800"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${secret[0]}</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191028 05:22:43.801" level="INFO">${secret} = 3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a</msg>
<status status="PASS" endtime="20191028 05:22:43.801" starttime="20191028 05:22:43.801"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set default.s3.signature_version s3v4</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:22:43.804" level="INFO">Running command 'aws configure set default.s3.signature_version s3v4 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:22:44.298" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:22:44.299" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:22:44.299" starttime="20191028 05:22:43.802"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:22:44.301" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:22:44.301" starttime="20191028 05:22:44.300"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:22:44.302" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:22:44.302" starttime="20191028 05:22:44.301"></status>
</kw>
<status status="PASS" endtime="20191028 05:22:44.303" starttime="20191028 05:22:43.802"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_access_key_id ${accessKey}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:22:44.307" level="INFO">Running command 'aws configure set aws_access_key_id testuser/s3g@EXAMPLE.COM 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:22:44.764" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:22:44.765" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:22:44.765" starttime="20191028 05:22:44.304"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:22:44.767" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:22:44.767" starttime="20191028 05:22:44.766"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:22:44.768" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:22:44.768" starttime="20191028 05:22:44.767"></status>
</kw>
<status status="PASS" endtime="20191028 05:22:44.769" starttime="20191028 05:22:44.303"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_secret_access_key ${secret}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:22:44.773" level="INFO">Running command 'aws configure set aws_secret_access_key 3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:22:45.252" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:22:45.252" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:22:45.252" starttime="20191028 05:22:44.771"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:22:45.255" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:22:45.255" starttime="20191028 05:22:45.253"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:22:45.256" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:22:45.256" starttime="20191028 05:22:45.255"></status>
</kw>
<status status="PASS" endtime="20191028 05:22:45.257" starttime="20191028 05:22:44.769"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set region us-west-1</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:22:45.260" level="INFO">Running command 'aws configure set region us-west-1 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:22:45.701" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:22:45.701" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:22:45.701" starttime="20191028 05:22:45.258"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:22:45.703" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:22:45.703" starttime="20191028 05:22:45.702"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:22:45.704" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:22:45.705" starttime="20191028 05:22:45.704"></status>
</kw>
<status status="PASS" endtime="20191028 05:22:45.705" starttime="20191028 05:22:45.257"></status>
</kw>
<status status="PASS" endtime="20191028 05:22:45.706" starttime="20191028 05:22:41.030"></status>
</kw>
<status status="PASS" endtime="20191028 05:22:45.706" starttime="20191028 05:22:41.029"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'false'</arg>
<arg>Setup dummy credentials for S3</arg>
</arguments>
<status status="PASS" endtime="20191028 05:22:45.707" starttime="20191028 05:22:45.706"></status>
</kw>
<status status="PASS" endtime="20191028 05:22:45.707" starttime="20191028 05:22:40.984"></status>
</kw>
<status status="PASS" endtime="20191028 05:22:45.708" starttime="20191028 05:22:40.983"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${BUCKET}' == 'generated'</arg>
<arg>Create bucket</arg>
</arguments>
<status status="PASS" endtime="20191028 05:22:45.709" starttime="20191028 05:22:45.708"></status>
</kw>
<status status="PASS" endtime="20191028 05:22:45.709" starttime="20191028 05:22:40.313"></status>
</kw>
<kw name="Execute AWSS3APICli" library="commonawslib">
<arguments>
<arg>create-multipart-upload --bucket ${BUCKET} --key multipartKey3</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws s3api --endpoint-url ${ENDPOINT_URL} ${command}</arg>
</arguments>
<assign>
<var>${output}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:22:45.714" level="INFO">Running command 'aws s3api --endpoint-url http://s3g:9878 create-multipart-upload --bucket bucket-69731 --key multipartKey3 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:22:53.873" level="INFO">${rc} = 255</msg>
<msg timestamp="20191028 05:22:53.874" level="INFO">${output} = 
An error occurred (500) when calling the CreateMultipartUpload operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191028 05:22:53.874" starttime="20191028 05:22:45.712"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:22:53.875" level="INFO">
An error occurred (500) when calling the CreateMultipartUpload operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191028 05:22:53.875" starttime="20191028 05:22:53.874"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:22:53.876" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191028 05:22:53.876" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191028 05:22:53.876" starttime="20191028 05:22:53.875"></status>
</kw>
<status status="FAIL" endtime="20191028 05:22:53.877" starttime="20191028 05:22:45.711"></status>
</kw>
<status status="FAIL" endtime="20191028 05:22:53.877" starttime="20191028 05:22:45.710"></status>
</kw>
<status status="FAIL" endtime="20191028 05:22:53.877" critical="yes" starttime="20191028 05:22:40.312">255 != 0</status>
</test>
<test id="s1-s5-t5" name="Test abort Multipart upload">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:22:53.881" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:22:53.889" level="INFO">${rc} = 1</msg>
<msg timestamp="20191028 05:22:53.889" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191028 05:22:53.889" starttime="20191028 05:22:53.880"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191028 05:22:53.892" starttime="20191028 05:22:53.890"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:22:53.894" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:22:54.080" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:22:54.080" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191028 05:22:54.080" starttime="20191028 05:22:53.892"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:22:54.086" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:22:54.507" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:22:54.508" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: d2lzkl7pfhq30w.cloudfront.net
 * extras: mirrors.xtom.com
 * updates: mirro...</msg>
<status status="PASS" endtime="20191028 05:22:54.508" starttime="20191028 05:22:54.084"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:22:54.510" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: d2lzkl7pfhq30w.cloudfront.net
 * extras: mirrors.xtom.com
 * updates: mirror.fileplanet.com
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191028 05:22:54.510" starttime="20191028 05:22:54.509"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:22:54.511" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:22:54.511" starttime="20191028 05:22:54.510"></status>
</kw>
<status status="PASS" endtime="20191028 05:22:54.512" starttime="20191028 05:22:54.083"></status>
</kw>
<status status="PASS" endtime="20191028 05:22:54.512" starttime="20191028 05:22:54.082"></status>
</kw>
<status status="PASS" endtime="20191028 05:22:54.512" starttime="20191028 05:22:54.081"></status>
</kw>
<status status="PASS" endtime="20191028 05:22:54.512" starttime="20191028 05:22:53.879"></status>
</kw>
<status status="PASS" endtime="20191028 05:22:54.513" starttime="20191028 05:22:53.879"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:22:54.520" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:22:54.526" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:22:54.527" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191028 05:22:54.527" starttime="20191028 05:22:54.517"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:22:54.531" level="INFO">s3g</msg>
<status status="PASS" endtime="20191028 05:22:54.531" starttime="20191028 05:22:54.528"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:22:54.532" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:22:54.533" starttime="20191028 05:22:54.532"></status>
</kw>
<msg timestamp="20191028 05:22:54.533" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191028 05:22:54.533" starttime="20191028 05:22:54.516"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191028 05:22:54.535" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191028 05:22:54.535" starttime="20191028 05:22:54.534"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:22:54.540" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:22:54.568" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:22:54.568" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:22:54.568" starttime="20191028 05:22:54.538"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:22:54.570" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:22:54.570" starttime="20191028 05:22:54.569"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:22:54.571" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:22:54.571" starttime="20191028 05:22:54.570"></status>
</kw>
<status status="PASS" endtime="20191028 05:22:54.571" starttime="20191028 05:22:54.536"></status>
</kw>
<status status="PASS" endtime="20191028 05:22:54.572" starttime="20191028 05:22:54.535"></status>
</kw>
<status status="PASS" endtime="20191028 05:22:54.572" starttime="20191028 05:22:54.516"></status>
</kw>
<status status="PASS" endtime="20191028 05:22:54.572" starttime="20191028 05:22:54.515"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:22:54.577" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:22:57.455" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:22:57.456" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191028 05:22:57.456" starttime="20191028 05:22:54.575"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:22:57.458" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
awsAccessKey=testuser/s3g@EXAMPLE.COM
awsSecret=3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a</msg>
<status status="PASS" endtime="20191028 05:22:57.458" starttime="20191028 05:22:57.457"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:22:57.459" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:22:57.459" starttime="20191028 05:22:57.458"></status>
</kw>
<msg timestamp="20191028 05:22:57.460" level="INFO">${result} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191028 05:22:57.460" starttime="20191028 05:22:54.574"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsAccessKey=).*</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191028 05:22:57.461" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191028 05:22:57.462" starttime="20191028 05:22:57.461"></status>
</kw>
<kw name="Get Variable Value" library="BuiltIn">
<doc>Returns variable value or ``default`` if the variable does not exist.</doc>
<arguments>
<arg>${accessKey}</arg>
<arg>sdsdasaasdasd</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191028 05:22:57.462" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191028 05:22:57.463" starttime="20191028 05:22:57.462"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsSecret=).*</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191028 05:22:57.463" level="INFO">${secret} = [u'3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a']</msg>
<status status="PASS" endtime="20191028 05:22:57.463" starttime="20191028 05:22:57.463"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${accessKey[0]}</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191028 05:22:57.464" level="INFO">${accessKey} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191028 05:22:57.464" starttime="20191028 05:22:57.464"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${secret[0]}</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191028 05:22:57.465" level="INFO">${secret} = 3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a</msg>
<status status="PASS" endtime="20191028 05:22:57.465" starttime="20191028 05:22:57.465"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set default.s3.signature_version s3v4</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:22:57.468" level="INFO">Running command 'aws configure set default.s3.signature_version s3v4 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:22:57.945" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:22:57.945" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:22:57.945" starttime="20191028 05:22:57.466"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:22:57.947" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:22:57.948" starttime="20191028 05:22:57.946"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:22:57.949" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:22:57.949" starttime="20191028 05:22:57.948"></status>
</kw>
<status status="PASS" endtime="20191028 05:22:57.949" starttime="20191028 05:22:57.465"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_access_key_id ${accessKey}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:22:57.953" level="INFO">Running command 'aws configure set aws_access_key_id testuser/s3g@EXAMPLE.COM 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:22:58.445" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:22:58.445" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:22:58.445" starttime="20191028 05:22:57.951"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:22:58.447" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:22:58.447" starttime="20191028 05:22:58.446"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:22:58.448" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:22:58.449" starttime="20191028 05:22:58.448"></status>
</kw>
<status status="PASS" endtime="20191028 05:22:58.449" starttime="20191028 05:22:57.950"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_secret_access_key ${secret}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:22:58.453" level="INFO">Running command 'aws configure set aws_secret_access_key 3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:22:58.927" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:22:58.927" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:22:58.927" starttime="20191028 05:22:58.451"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:22:58.929" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:22:58.929" starttime="20191028 05:22:58.928"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:22:58.931" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:22:58.932" starttime="20191028 05:22:58.930"></status>
</kw>
<status status="PASS" endtime="20191028 05:22:58.932" starttime="20191028 05:22:58.450"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set region us-west-1</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:22:58.937" level="INFO">Running command 'aws configure set region us-west-1 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:22:59.397" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:22:59.398" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:22:59.398" starttime="20191028 05:22:58.934"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:22:59.401" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:22:59.401" starttime="20191028 05:22:59.399"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:22:59.402" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:22:59.402" starttime="20191028 05:22:59.401"></status>
</kw>
<status status="PASS" endtime="20191028 05:22:59.403" starttime="20191028 05:22:58.933"></status>
</kw>
<status status="PASS" endtime="20191028 05:22:59.403" starttime="20191028 05:22:54.573"></status>
</kw>
<status status="PASS" endtime="20191028 05:22:59.404" starttime="20191028 05:22:54.572"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'false'</arg>
<arg>Setup dummy credentials for S3</arg>
</arguments>
<status status="PASS" endtime="20191028 05:22:59.405" starttime="20191028 05:22:59.404"></status>
</kw>
<status status="PASS" endtime="20191028 05:22:59.405" starttime="20191028 05:22:54.514"></status>
</kw>
<status status="PASS" endtime="20191028 05:22:59.405" starttime="20191028 05:22:54.513"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${BUCKET}' == 'generated'</arg>
<arg>Create bucket</arg>
</arguments>
<status status="PASS" endtime="20191028 05:22:59.406" starttime="20191028 05:22:59.406"></status>
</kw>
<status status="PASS" endtime="20191028 05:22:59.407" starttime="20191028 05:22:53.878"></status>
</kw>
<kw name="Execute AWSS3APICli" library="commonawslib">
<arguments>
<arg>create-multipart-upload --bucket ${BUCKET} --key multipartKey4 --storage-class REDUCED_REDUNDANCY</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws s3api --endpoint-url ${ENDPOINT_URL} ${command}</arg>
</arguments>
<assign>
<var>${output}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:22:59.412" level="INFO">Running command 'aws s3api --endpoint-url http://s3g:9878 create-multipart-upload --bucket bucket-69731 --key multipartKey4 --storage-class REDUCED_REDUNDANCY 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:23:11.197" level="INFO">${rc} = 255</msg>
<msg timestamp="20191028 05:23:11.197" level="INFO">${output} = 
An error occurred (500) when calling the CreateMultipartUpload operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191028 05:23:11.197" starttime="20191028 05:22:59.409"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:23:11.199" level="INFO">
An error occurred (500) when calling the CreateMultipartUpload operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191028 05:23:11.199" starttime="20191028 05:23:11.198"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:23:11.200" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191028 05:23:11.201" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191028 05:23:11.201" starttime="20191028 05:23:11.200"></status>
</kw>
<status status="FAIL" endtime="20191028 05:23:11.202" starttime="20191028 05:22:59.408"></status>
</kw>
<status status="FAIL" endtime="20191028 05:23:11.202" starttime="20191028 05:22:59.407"></status>
</kw>
<status status="FAIL" endtime="20191028 05:23:11.203" critical="yes" starttime="20191028 05:22:53.878">255 != 0</status>
</test>
<test id="s1-s5-t6" name="Test abort Multipart upload with invalid uploadId">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:23:11.209" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:23:11.216" level="INFO">${rc} = 1</msg>
<msg timestamp="20191028 05:23:11.217" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191028 05:23:11.217" starttime="20191028 05:23:11.207"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191028 05:23:11.219" starttime="20191028 05:23:11.218"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:23:11.222" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:23:11.418" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:23:11.419" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191028 05:23:11.419" starttime="20191028 05:23:11.219"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:23:11.425" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:23:11.880" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:23:11.880" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: d2lzkl7pfhq30w.cloudfront.net
 * extras: mirrors.xtom.com
 * updates: mirro...</msg>
<status status="PASS" endtime="20191028 05:23:11.881" starttime="20191028 05:23:11.423"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:23:11.882" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: d2lzkl7pfhq30w.cloudfront.net
 * extras: mirrors.xtom.com
 * updates: mirror.fileplanet.com
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191028 05:23:11.882" starttime="20191028 05:23:11.881"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:23:11.883" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:23:11.883" starttime="20191028 05:23:11.883"></status>
</kw>
<status status="PASS" endtime="20191028 05:23:11.884" starttime="20191028 05:23:11.422"></status>
</kw>
<status status="PASS" endtime="20191028 05:23:11.884" starttime="20191028 05:23:11.421"></status>
</kw>
<status status="PASS" endtime="20191028 05:23:11.884" starttime="20191028 05:23:11.420"></status>
</kw>
<status status="PASS" endtime="20191028 05:23:11.884" starttime="20191028 05:23:11.206"></status>
</kw>
<status status="PASS" endtime="20191028 05:23:11.884" starttime="20191028 05:23:11.206"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:23:11.890" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:23:11.895" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:23:11.896" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191028 05:23:11.896" starttime="20191028 05:23:11.888"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:23:11.897" level="INFO">s3g</msg>
<status status="PASS" endtime="20191028 05:23:11.898" starttime="20191028 05:23:11.896"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:23:11.898" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:23:11.898" starttime="20191028 05:23:11.898"></status>
</kw>
<msg timestamp="20191028 05:23:11.899" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191028 05:23:11.899" starttime="20191028 05:23:11.887"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191028 05:23:11.900" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191028 05:23:11.900" starttime="20191028 05:23:11.899"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:23:11.903" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:23:11.941" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:23:11.941" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:23:11.942" starttime="20191028 05:23:11.902"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:23:11.943" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:23:11.943" starttime="20191028 05:23:11.942"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:23:11.944" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:23:11.945" starttime="20191028 05:23:11.944"></status>
</kw>
<status status="PASS" endtime="20191028 05:23:11.945" starttime="20191028 05:23:11.901"></status>
</kw>
<status status="PASS" endtime="20191028 05:23:11.945" starttime="20191028 05:23:11.900"></status>
</kw>
<status status="PASS" endtime="20191028 05:23:11.946" starttime="20191028 05:23:11.887"></status>
</kw>
<status status="PASS" endtime="20191028 05:23:11.946" starttime="20191028 05:23:11.886"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:23:11.951" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:23:14.636" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:23:14.636" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191028 05:23:14.637" starttime="20191028 05:23:11.949"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:23:14.638" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
awsAccessKey=testuser/s3g@EXAMPLE.COM
awsSecret=3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a</msg>
<status status="PASS" endtime="20191028 05:23:14.638" starttime="20191028 05:23:14.637"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:23:14.639" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:23:14.639" starttime="20191028 05:23:14.638"></status>
</kw>
<msg timestamp="20191028 05:23:14.639" level="INFO">${result} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191028 05:23:14.639" starttime="20191028 05:23:11.948"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsAccessKey=).*</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191028 05:23:14.640" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191028 05:23:14.640" starttime="20191028 05:23:14.639"></status>
</kw>
<kw name="Get Variable Value" library="BuiltIn">
<doc>Returns variable value or ``default`` if the variable does not exist.</doc>
<arguments>
<arg>${accessKey}</arg>
<arg>sdsdasaasdasd</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191028 05:23:14.641" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191028 05:23:14.641" starttime="20191028 05:23:14.640"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsSecret=).*</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191028 05:23:14.642" level="INFO">${secret} = [u'3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a']</msg>
<status status="PASS" endtime="20191028 05:23:14.642" starttime="20191028 05:23:14.641"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${accessKey[0]}</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191028 05:23:14.642" level="INFO">${accessKey} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191028 05:23:14.642" starttime="20191028 05:23:14.642"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${secret[0]}</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191028 05:23:14.643" level="INFO">${secret} = 3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a</msg>
<status status="PASS" endtime="20191028 05:23:14.643" starttime="20191028 05:23:14.643"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set default.s3.signature_version s3v4</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:23:14.646" level="INFO">Running command 'aws configure set default.s3.signature_version s3v4 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:23:15.149" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:23:15.149" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:23:15.149" starttime="20191028 05:23:14.644"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:23:15.151" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:23:15.152" starttime="20191028 05:23:15.150"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:23:15.153" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:23:15.153" starttime="20191028 05:23:15.152"></status>
</kw>
<status status="PASS" endtime="20191028 05:23:15.153" starttime="20191028 05:23:14.643"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_access_key_id ${accessKey}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:23:15.158" level="INFO">Running command 'aws configure set aws_access_key_id testuser/s3g@EXAMPLE.COM 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:23:15.658" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:23:15.658" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:23:15.659" starttime="20191028 05:23:15.155"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:23:15.661" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:23:15.661" starttime="20191028 05:23:15.660"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:23:15.662" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:23:15.662" starttime="20191028 05:23:15.661"></status>
</kw>
<status status="PASS" endtime="20191028 05:23:15.663" starttime="20191028 05:23:15.154"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_secret_access_key ${secret}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:23:15.667" level="INFO">Running command 'aws configure set aws_secret_access_key 3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:23:16.126" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:23:16.126" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:23:16.126" starttime="20191028 05:23:15.665"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:23:16.128" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:23:16.128" starttime="20191028 05:23:16.127"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:23:16.130" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:23:16.131" starttime="20191028 05:23:16.129"></status>
</kw>
<status status="PASS" endtime="20191028 05:23:16.131" starttime="20191028 05:23:15.663"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set region us-west-1</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:23:16.135" level="INFO">Running command 'aws configure set region us-west-1 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:23:16.638" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:23:16.638" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:23:16.638" starttime="20191028 05:23:16.132"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:23:16.640" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:23:16.640" starttime="20191028 05:23:16.639"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:23:16.642" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:23:16.642" starttime="20191028 05:23:16.641"></status>
</kw>
<status status="PASS" endtime="20191028 05:23:16.643" starttime="20191028 05:23:16.131"></status>
</kw>
<status status="PASS" endtime="20191028 05:23:16.643" starttime="20191028 05:23:11.947"></status>
</kw>
<status status="PASS" endtime="20191028 05:23:16.643" starttime="20191028 05:23:11.946"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'false'</arg>
<arg>Setup dummy credentials for S3</arg>
</arguments>
<status status="PASS" endtime="20191028 05:23:16.645" starttime="20191028 05:23:16.644"></status>
</kw>
<status status="PASS" endtime="20191028 05:23:16.645" starttime="20191028 05:23:11.886"></status>
</kw>
<status status="PASS" endtime="20191028 05:23:16.645" starttime="20191028 05:23:11.885"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${BUCKET}' == 'generated'</arg>
<arg>Create bucket</arg>
</arguments>
<status status="PASS" endtime="20191028 05:23:16.646" starttime="20191028 05:23:16.646"></status>
</kw>
<status status="PASS" endtime="20191028 05:23:16.647" starttime="20191028 05:23:11.205"></status>
</kw>
<kw name="Execute AWSS3APICli and checkrc" library="commonawslib">
<arguments>
<arg>abort-multipart-upload --bucket ${BUCKET} --key multipartKey5 --upload-id "random"</arg>
<arg>255</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Execute and checkrc" library="commonlib">
<arguments>
<arg>aws s3api --endpoint-url ${ENDPOINT_URL} ${command}</arg>
<arg>${expected_error_code}</arg>
</arguments>
<assign>
<var>${output}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:23:16.652" level="INFO">Running command 'aws s3api --endpoint-url http://s3g:9878 abort-multipart-upload --bucket bucket-69731 --key multipartKey5 --upload-id "random" 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:23:23.793" level="INFO">${rc} = 255</msg>
<msg timestamp="20191028 05:23:23.793" level="INFO">${output} = 
An error occurred (500) when calling the AbortMultipartUpload operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191028 05:23:23.793" starttime="20191028 05:23:16.650"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:23:23.795" level="INFO">
An error occurred (500) when calling the AbortMultipartUpload operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191028 05:23:23.795" starttime="20191028 05:23:23.794"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
</arguments>
<msg timestamp="20191028 05:23:23.796" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:23:23.797" starttime="20191028 05:23:23.796"></status>
</kw>
<msg timestamp="20191028 05:23:23.797" level="INFO">${output} = 
An error occurred (500) when calling the AbortMultipartUpload operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191028 05:23:23.797" starttime="20191028 05:23:16.648"></status>
</kw>
<msg timestamp="20191028 05:23:23.798" level="INFO">${result} = 
An error occurred (500) when calling the AbortMultipartUpload operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191028 05:23:23.798" starttime="20191028 05:23:16.647"></status>
</kw>
<status status="PASS" endtime="20191028 05:23:23.798" critical="yes" starttime="20191028 05:23:11.203"></status>
</test>
<test id="s1-s5-t7" name="Upload part with Incorrect uploadID">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:23:23.805" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:23:23.813" level="INFO">${rc} = 1</msg>
<msg timestamp="20191028 05:23:23.813" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191028 05:23:23.813" starttime="20191028 05:23:23.803"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191028 05:23:23.816" starttime="20191028 05:23:23.814"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:23:23.818" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:23:24.009" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:23:24.009" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191028 05:23:24.009" starttime="20191028 05:23:23.816"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:23:24.016" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:23:24.522" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:23:24.523" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: d2lzkl7pfhq30w.cloudfront.net
 * extras: mirrors.xtom.com
 * updates: mirro...</msg>
<status status="PASS" endtime="20191028 05:23:24.523" starttime="20191028 05:23:24.013"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:23:24.524" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: d2lzkl7pfhq30w.cloudfront.net
 * extras: mirrors.xtom.com
 * updates: mirror.fileplanet.com
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191028 05:23:24.524" starttime="20191028 05:23:24.523"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:23:24.525" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:23:24.526" starttime="20191028 05:23:24.525"></status>
</kw>
<status status="PASS" endtime="20191028 05:23:24.526" starttime="20191028 05:23:24.012"></status>
</kw>
<status status="PASS" endtime="20191028 05:23:24.526" starttime="20191028 05:23:24.011"></status>
</kw>
<status status="PASS" endtime="20191028 05:23:24.526" starttime="20191028 05:23:24.010"></status>
</kw>
<status status="PASS" endtime="20191028 05:23:24.527" starttime="20191028 05:23:23.802"></status>
</kw>
<status status="PASS" endtime="20191028 05:23:24.527" starttime="20191028 05:23:23.801"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:23:24.533" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:23:24.540" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:23:24.540" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191028 05:23:24.540" starttime="20191028 05:23:24.531"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:23:24.542" level="INFO">s3g</msg>
<status status="PASS" endtime="20191028 05:23:24.542" starttime="20191028 05:23:24.541"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:23:24.543" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:23:24.543" starttime="20191028 05:23:24.542"></status>
</kw>
<msg timestamp="20191028 05:23:24.544" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191028 05:23:24.544" starttime="20191028 05:23:24.530"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191028 05:23:24.545" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191028 05:23:24.545" starttime="20191028 05:23:24.544"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:23:24.550" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:23:24.578" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:23:24.579" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:23:24.579" starttime="20191028 05:23:24.548"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:23:24.581" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:23:24.581" starttime="20191028 05:23:24.580"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:23:24.582" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:23:24.582" starttime="20191028 05:23:24.581"></status>
</kw>
<status status="PASS" endtime="20191028 05:23:24.583" starttime="20191028 05:23:24.547"></status>
</kw>
<status status="PASS" endtime="20191028 05:23:24.583" starttime="20191028 05:23:24.546"></status>
</kw>
<status status="PASS" endtime="20191028 05:23:24.584" starttime="20191028 05:23:24.529"></status>
</kw>
<status status="PASS" endtime="20191028 05:23:24.584" starttime="20191028 05:23:24.529"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:23:24.589" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:23:27.328" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:23:27.328" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191028 05:23:27.328" starttime="20191028 05:23:24.587"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:23:27.330" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
awsAccessKey=testuser/s3g@EXAMPLE.COM
awsSecret=3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a</msg>
<status status="PASS" endtime="20191028 05:23:27.330" starttime="20191028 05:23:27.329"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:23:27.331" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:23:27.331" starttime="20191028 05:23:27.331"></status>
</kw>
<msg timestamp="20191028 05:23:27.332" level="INFO">${result} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191028 05:23:27.332" starttime="20191028 05:23:24.586"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsAccessKey=).*</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191028 05:23:27.333" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191028 05:23:27.333" starttime="20191028 05:23:27.332"></status>
</kw>
<kw name="Get Variable Value" library="BuiltIn">
<doc>Returns variable value or ``default`` if the variable does not exist.</doc>
<arguments>
<arg>${accessKey}</arg>
<arg>sdsdasaasdasd</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191028 05:23:27.334" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191028 05:23:27.334" starttime="20191028 05:23:27.334"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsSecret=).*</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191028 05:23:27.335" level="INFO">${secret} = [u'3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a']</msg>
<status status="PASS" endtime="20191028 05:23:27.336" starttime="20191028 05:23:27.335"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${accessKey[0]}</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191028 05:23:27.337" level="INFO">${accessKey} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191028 05:23:27.337" starttime="20191028 05:23:27.336"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${secret[0]}</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191028 05:23:27.338" level="INFO">${secret} = 3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a</msg>
<status status="PASS" endtime="20191028 05:23:27.338" starttime="20191028 05:23:27.337"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set default.s3.signature_version s3v4</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:23:27.341" level="INFO">Running command 'aws configure set default.s3.signature_version s3v4 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:23:27.837" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:23:27.837" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:23:27.837" starttime="20191028 05:23:27.339"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:23:27.839" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:23:27.839" starttime="20191028 05:23:27.838"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:23:27.840" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:23:27.841" starttime="20191028 05:23:27.840"></status>
</kw>
<status status="PASS" endtime="20191028 05:23:27.841" starttime="20191028 05:23:27.338"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_access_key_id ${accessKey}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:23:27.845" level="INFO">Running command 'aws configure set aws_access_key_id testuser/s3g@EXAMPLE.COM 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:23:28.346" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:23:28.346" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:23:28.346" starttime="20191028 05:23:27.842"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:23:28.348" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:23:28.348" starttime="20191028 05:23:28.347"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:23:28.349" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:23:28.349" starttime="20191028 05:23:28.348"></status>
</kw>
<status status="PASS" endtime="20191028 05:23:28.350" starttime="20191028 05:23:27.841"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_secret_access_key ${secret}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:23:28.354" level="INFO">Running command 'aws configure set aws_secret_access_key 3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:23:28.856" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:23:28.856" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:23:28.856" starttime="20191028 05:23:28.351"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:23:28.859" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:23:28.859" starttime="20191028 05:23:28.857"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:23:28.860" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:23:28.861" starttime="20191028 05:23:28.860"></status>
</kw>
<status status="PASS" endtime="20191028 05:23:28.861" starttime="20191028 05:23:28.350"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set region us-west-1</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:23:28.865" level="INFO">Running command 'aws configure set region us-west-1 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:23:29.298" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:23:29.298" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:23:29.298" starttime="20191028 05:23:28.863"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:23:29.299" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:23:29.300" starttime="20191028 05:23:29.299"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:23:29.300" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:23:29.301" starttime="20191028 05:23:29.300"></status>
</kw>
<status status="PASS" endtime="20191028 05:23:29.301" starttime="20191028 05:23:28.862"></status>
</kw>
<status status="PASS" endtime="20191028 05:23:29.301" starttime="20191028 05:23:24.585"></status>
</kw>
<status status="PASS" endtime="20191028 05:23:29.301" starttime="20191028 05:23:24.584"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'false'</arg>
<arg>Setup dummy credentials for S3</arg>
</arguments>
<status status="PASS" endtime="20191028 05:23:29.302" starttime="20191028 05:23:29.302"></status>
</kw>
<status status="PASS" endtime="20191028 05:23:29.303" starttime="20191028 05:23:24.528"></status>
</kw>
<status status="PASS" endtime="20191028 05:23:29.303" starttime="20191028 05:23:24.527"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${BUCKET}' == 'generated'</arg>
<arg>Create bucket</arg>
</arguments>
<status status="PASS" endtime="20191028 05:23:29.304" starttime="20191028 05:23:29.303"></status>
</kw>
<status status="PASS" endtime="20191028 05:23:29.304" starttime="20191028 05:23:23.801"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>echo "Multipart upload" &gt; /tmp/testfile</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:23:29.307" level="INFO">Running command 'echo "Multipart upload" &gt; /tmp/testfile'.</msg>
<msg timestamp="20191028 05:23:29.312" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:23:29.312" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:23:29.312" starttime="20191028 05:23:29.305"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:23:29.313" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:23:29.313" starttime="20191028 05:23:29.313"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:23:29.314" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:23:29.314" starttime="20191028 05:23:29.314"></status>
</kw>
<status status="PASS" endtime="20191028 05:23:29.315" starttime="20191028 05:23:29.304"></status>
</kw>
<kw name="Execute AWSS3APICli and checkrc" library="commonawslib">
<arguments>
<arg>upload-part --bucket ${BUCKET} --key multipartKey --part-number 1 --body /tmp/testfile --upload-id "random"</arg>
<arg>255</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Execute and checkrc" library="commonlib">
<arguments>
<arg>aws s3api --endpoint-url ${ENDPOINT_URL} ${command}</arg>
<arg>${expected_error_code}</arg>
</arguments>
<assign>
<var>${output}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:23:29.319" level="INFO">Running command 'aws s3api --endpoint-url http://s3g:9878 upload-part --bucket bucket-69731 --key multipartKey --part-number 1 --body /tmp/testfile --upload-id "random" 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:23:35.717" level="INFO">${rc} = 255</msg>
<msg timestamp="20191028 05:23:35.717" level="INFO">${output} = 
An error occurred (500) when calling the UploadPart operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191028 05:23:35.717" starttime="20191028 05:23:29.317"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:23:35.718" level="INFO">
An error occurred (500) when calling the UploadPart operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191028 05:23:35.718" starttime="20191028 05:23:35.718"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
</arguments>
<msg timestamp="20191028 05:23:35.719" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:23:35.719" starttime="20191028 05:23:35.719"></status>
</kw>
<msg timestamp="20191028 05:23:35.720" level="INFO">${output} = 
An error occurred (500) when calling the UploadPart operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191028 05:23:35.720" starttime="20191028 05:23:29.316"></status>
</kw>
<msg timestamp="20191028 05:23:35.720" level="INFO">${result} = 
An error occurred (500) when calling the UploadPart operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191028 05:23:35.720" starttime="20191028 05:23:29.315"></status>
</kw>
<kw name="Should Contain" library="BuiltIn">
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<arguments>
<arg>${result}</arg>
<arg>NoSuchUpload</arg>
</arguments>
<msg timestamp="20191028 05:23:35.721" level="FAIL">'
An error occurred (500) when calling the UploadPart operation (reached max retries: 4): Internal Server Error' does not contain 'NoSuchUpload'</msg>
<status status="FAIL" endtime="20191028 05:23:35.721" starttime="20191028 05:23:35.720"></status>
</kw>
<status status="FAIL" endtime="20191028 05:23:35.722" critical="yes" starttime="20191028 05:23:23.799">'
An error occurred (500) when calling the UploadPart operation (reached max retries: 4): Internal Server Error' does not contain 'NoSuchUpload'</status>
</test>
<test id="s1-s5-t8" name="Test list parts">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:23:35.726" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:23:35.734" level="INFO">${rc} = 1</msg>
<msg timestamp="20191028 05:23:35.734" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191028 05:23:35.734" starttime="20191028 05:23:35.724"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191028 05:23:35.736" starttime="20191028 05:23:35.735"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:23:35.739" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:23:35.932" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:23:35.932" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191028 05:23:35.933" starttime="20191028 05:23:35.737"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:23:35.939" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:23:36.443" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:23:36.443" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: d2lzkl7pfhq30w.cloudfront.net
 * extras: mirrors.xtom.com
 * updates: mirro...</msg>
<status status="PASS" endtime="20191028 05:23:36.444" starttime="20191028 05:23:35.936"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:23:36.445" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: d2lzkl7pfhq30w.cloudfront.net
 * extras: mirrors.xtom.com
 * updates: mirror.fileplanet.com
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191028 05:23:36.446" starttime="20191028 05:23:36.444"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:23:36.447" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:23:36.447" starttime="20191028 05:23:36.446"></status>
</kw>
<status status="PASS" endtime="20191028 05:23:36.448" starttime="20191028 05:23:35.936"></status>
</kw>
<status status="PASS" endtime="20191028 05:23:36.448" starttime="20191028 05:23:35.935"></status>
</kw>
<status status="PASS" endtime="20191028 05:23:36.448" starttime="20191028 05:23:35.933"></status>
</kw>
<status status="PASS" endtime="20191028 05:23:36.448" starttime="20191028 05:23:35.724"></status>
</kw>
<status status="PASS" endtime="20191028 05:23:36.449" starttime="20191028 05:23:35.724"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:23:36.457" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:23:36.463" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:23:36.464" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191028 05:23:36.464" starttime="20191028 05:23:36.454"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:23:36.466" level="INFO">s3g</msg>
<status status="PASS" endtime="20191028 05:23:36.466" starttime="20191028 05:23:36.465"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:23:36.467" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:23:36.467" starttime="20191028 05:23:36.466"></status>
</kw>
<msg timestamp="20191028 05:23:36.468" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191028 05:23:36.468" starttime="20191028 05:23:36.453"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191028 05:23:36.469" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191028 05:23:36.470" starttime="20191028 05:23:36.468"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:23:36.474" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:23:36.502" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:23:36.502" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:23:36.502" starttime="20191028 05:23:36.472"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:23:36.504" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:23:36.504" starttime="20191028 05:23:36.503"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:23:36.505" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:23:36.505" starttime="20191028 05:23:36.504"></status>
</kw>
<status status="PASS" endtime="20191028 05:23:36.506" starttime="20191028 05:23:36.471"></status>
</kw>
<status status="PASS" endtime="20191028 05:23:36.506" starttime="20191028 05:23:36.470"></status>
</kw>
<status status="PASS" endtime="20191028 05:23:36.507" starttime="20191028 05:23:36.453"></status>
</kw>
<status status="PASS" endtime="20191028 05:23:36.507" starttime="20191028 05:23:36.451"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:23:36.512" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:23:39.420" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:23:39.420" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191028 05:23:39.421" starttime="20191028 05:23:36.510"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:23:39.422" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
awsAccessKey=testuser/s3g@EXAMPLE.COM
awsSecret=3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a</msg>
<status status="PASS" endtime="20191028 05:23:39.422" starttime="20191028 05:23:39.421"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:23:39.423" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:23:39.423" starttime="20191028 05:23:39.422"></status>
</kw>
<msg timestamp="20191028 05:23:39.424" level="INFO">${result} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191028 05:23:39.424" starttime="20191028 05:23:36.509"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsAccessKey=).*</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191028 05:23:39.425" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191028 05:23:39.425" starttime="20191028 05:23:39.424"></status>
</kw>
<kw name="Get Variable Value" library="BuiltIn">
<doc>Returns variable value or ``default`` if the variable does not exist.</doc>
<arguments>
<arg>${accessKey}</arg>
<arg>sdsdasaasdasd</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191028 05:23:39.426" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191028 05:23:39.426" starttime="20191028 05:23:39.425"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsSecret=).*</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191028 05:23:39.427" level="INFO">${secret} = [u'3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a']</msg>
<status status="PASS" endtime="20191028 05:23:39.427" starttime="20191028 05:23:39.426"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${accessKey[0]}</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191028 05:23:39.428" level="INFO">${accessKey} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191028 05:23:39.428" starttime="20191028 05:23:39.427"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${secret[0]}</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191028 05:23:39.429" level="INFO">${secret} = 3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a</msg>
<status status="PASS" endtime="20191028 05:23:39.429" starttime="20191028 05:23:39.428"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set default.s3.signature_version s3v4</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:23:39.432" level="INFO">Running command 'aws configure set default.s3.signature_version s3v4 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:23:39.855" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:23:39.855" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:23:39.855" starttime="20191028 05:23:39.430"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:23:39.857" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:23:39.857" starttime="20191028 05:23:39.856"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:23:39.858" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:23:39.858" starttime="20191028 05:23:39.857"></status>
</kw>
<status status="PASS" endtime="20191028 05:23:39.858" starttime="20191028 05:23:39.429"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_access_key_id ${accessKey}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:23:39.862" level="INFO">Running command 'aws configure set aws_access_key_id testuser/s3g@EXAMPLE.COM 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:23:40.345" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:23:40.345" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:23:40.345" starttime="20191028 05:23:39.860"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:23:40.347" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:23:40.348" starttime="20191028 05:23:40.346"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:23:40.349" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:23:40.349" starttime="20191028 05:23:40.348"></status>
</kw>
<status status="PASS" endtime="20191028 05:23:40.350" starttime="20191028 05:23:39.859"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_secret_access_key ${secret}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:23:40.354" level="INFO">Running command 'aws configure set aws_secret_access_key 3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:23:40.797" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:23:40.797" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:23:40.797" starttime="20191028 05:23:40.351"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:23:40.799" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:23:40.799" starttime="20191028 05:23:40.798"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:23:40.800" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:23:40.800" starttime="20191028 05:23:40.799"></status>
</kw>
<status status="PASS" endtime="20191028 05:23:40.801" starttime="20191028 05:23:40.350"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set region us-west-1</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:23:40.804" level="INFO">Running command 'aws configure set region us-west-1 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:23:41.291" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:23:41.292" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:23:41.292" starttime="20191028 05:23:40.802"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:23:41.294" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:23:41.294" starttime="20191028 05:23:41.293"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:23:41.295" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:23:41.295" starttime="20191028 05:23:41.294"></status>
</kw>
<status status="PASS" endtime="20191028 05:23:41.296" starttime="20191028 05:23:40.801"></status>
</kw>
<status status="PASS" endtime="20191028 05:23:41.296" starttime="20191028 05:23:36.508"></status>
</kw>
<status status="PASS" endtime="20191028 05:23:41.296" starttime="20191028 05:23:36.507"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'false'</arg>
<arg>Setup dummy credentials for S3</arg>
</arguments>
<status status="PASS" endtime="20191028 05:23:41.298" starttime="20191028 05:23:41.297"></status>
</kw>
<status status="PASS" endtime="20191028 05:23:41.298" starttime="20191028 05:23:36.450"></status>
</kw>
<status status="PASS" endtime="20191028 05:23:41.298" starttime="20191028 05:23:36.449"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${BUCKET}' == 'generated'</arg>
<arg>Create bucket</arg>
</arguments>
<status status="PASS" endtime="20191028 05:23:41.300" starttime="20191028 05:23:41.299"></status>
</kw>
<status status="PASS" endtime="20191028 05:23:41.300" starttime="20191028 05:23:35.723"></status>
</kw>
<kw name="Execute AWSS3APICli" library="commonawslib">
<arguments>
<arg>create-multipart-upload --bucket ${BUCKET} --key multipartKey5</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws s3api --endpoint-url ${ENDPOINT_URL} ${command}</arg>
</arguments>
<assign>
<var>${output}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:23:41.305" level="INFO">Running command 'aws s3api --endpoint-url http://s3g:9878 create-multipart-upload --bucket bucket-69731 --key multipartKey5 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:23:50.403" level="INFO">${rc} = 255</msg>
<msg timestamp="20191028 05:23:50.403" level="INFO">${output} = 
An error occurred (500) when calling the CreateMultipartUpload operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191028 05:23:50.404" starttime="20191028 05:23:41.303"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:23:50.406" level="INFO">
An error occurred (500) when calling the CreateMultipartUpload operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191028 05:23:50.406" starttime="20191028 05:23:50.405"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:23:50.407" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191028 05:23:50.408" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191028 05:23:50.408" starttime="20191028 05:23:50.406"></status>
</kw>
<status status="FAIL" endtime="20191028 05:23:50.409" starttime="20191028 05:23:41.302"></status>
</kw>
<status status="FAIL" endtime="20191028 05:23:50.409" starttime="20191028 05:23:41.300"></status>
</kw>
<status status="FAIL" endtime="20191028 05:23:50.410" critical="yes" starttime="20191028 05:23:35.722">255 != 0</status>
</test>
<test id="s1-s5-t9" name="Test Multipart Upload with the simplified aws s3 cp API">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:23:50.416" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:23:50.423" level="INFO">${rc} = 1</msg>
<msg timestamp="20191028 05:23:50.423" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191028 05:23:50.423" starttime="20191028 05:23:50.414"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191028 05:23:50.425" starttime="20191028 05:23:50.424"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:23:50.428" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:23:50.618" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:23:50.618" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191028 05:23:50.618" starttime="20191028 05:23:50.426"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:23:50.625" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:23:51.119" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:23:51.120" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: d2lzkl7pfhq30w.cloudfront.net
 * extras: mirrors.xtom.com
 * updates: mirro...</msg>
<status status="PASS" endtime="20191028 05:23:51.120" starttime="20191028 05:23:50.622"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:23:51.122" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: d2lzkl7pfhq30w.cloudfront.net
 * extras: mirrors.xtom.com
 * updates: mirror.fileplanet.com
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191028 05:23:51.122" starttime="20191028 05:23:51.121"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:23:51.123" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:23:51.124" starttime="20191028 05:23:51.123"></status>
</kw>
<status status="PASS" endtime="20191028 05:23:51.124" starttime="20191028 05:23:50.621"></status>
</kw>
<status status="PASS" endtime="20191028 05:23:51.125" starttime="20191028 05:23:50.620"></status>
</kw>
<status status="PASS" endtime="20191028 05:23:51.125" starttime="20191028 05:23:50.619"></status>
</kw>
<status status="PASS" endtime="20191028 05:23:51.125" starttime="20191028 05:23:50.413"></status>
</kw>
<status status="PASS" endtime="20191028 05:23:51.125" starttime="20191028 05:23:50.412"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:23:51.134" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:23:51.141" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:23:51.141" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191028 05:23:51.141" starttime="20191028 05:23:51.131"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:23:51.143" level="INFO">s3g</msg>
<status status="PASS" endtime="20191028 05:23:51.143" starttime="20191028 05:23:51.142"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:23:51.144" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:23:51.144" starttime="20191028 05:23:51.143"></status>
</kw>
<msg timestamp="20191028 05:23:51.145" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191028 05:23:51.145" starttime="20191028 05:23:51.131"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191028 05:23:51.147" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191028 05:23:51.147" starttime="20191028 05:23:51.145"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:23:51.152" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:23:51.184" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:23:51.184" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:23:51.184" starttime="20191028 05:23:51.150"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:23:51.186" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:23:51.186" starttime="20191028 05:23:51.185"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:23:51.187" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:23:51.187" starttime="20191028 05:23:51.186"></status>
</kw>
<status status="PASS" endtime="20191028 05:23:51.188" starttime="20191028 05:23:51.148"></status>
</kw>
<status status="PASS" endtime="20191028 05:23:51.188" starttime="20191028 05:23:51.147"></status>
</kw>
<status status="PASS" endtime="20191028 05:23:51.188" starttime="20191028 05:23:51.129"></status>
</kw>
<status status="PASS" endtime="20191028 05:23:51.188" starttime="20191028 05:23:51.128"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:23:51.193" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:23:53.872" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:23:53.872" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191028 05:23:53.872" starttime="20191028 05:23:51.191"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:23:53.874" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
awsAccessKey=testuser/s3g@EXAMPLE.COM
awsSecret=3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a</msg>
<status status="PASS" endtime="20191028 05:23:53.875" starttime="20191028 05:23:53.873"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:23:53.876" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:23:53.876" starttime="20191028 05:23:53.875"></status>
</kw>
<msg timestamp="20191028 05:23:53.877" level="INFO">${result} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191028 05:23:53.877" starttime="20191028 05:23:51.190"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsAccessKey=).*</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191028 05:23:53.878" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191028 05:23:53.878" starttime="20191028 05:23:53.877"></status>
</kw>
<kw name="Get Variable Value" library="BuiltIn">
<doc>Returns variable value or ``default`` if the variable does not exist.</doc>
<arguments>
<arg>${accessKey}</arg>
<arg>sdsdasaasdasd</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191028 05:23:53.880" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191028 05:23:53.880" starttime="20191028 05:23:53.879"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsSecret=).*</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191028 05:23:53.881" level="INFO">${secret} = [u'3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a']</msg>
<status status="PASS" endtime="20191028 05:23:53.881" starttime="20191028 05:23:53.880"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${accessKey[0]}</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191028 05:23:53.883" level="INFO">${accessKey} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191028 05:23:53.883" starttime="20191028 05:23:53.882"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${secret[0]}</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191028 05:23:53.884" level="INFO">${secret} = 3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a</msg>
<status status="PASS" endtime="20191028 05:23:53.884" starttime="20191028 05:23:53.883"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set default.s3.signature_version s3v4</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:23:53.888" level="INFO">Running command 'aws configure set default.s3.signature_version s3v4 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:23:54.363" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:23:54.363" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:23:54.363" starttime="20191028 05:23:53.885"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:23:54.366" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:23:54.366" starttime="20191028 05:23:54.364"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:23:54.367" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:23:54.367" starttime="20191028 05:23:54.366"></status>
</kw>
<status status="PASS" endtime="20191028 05:23:54.368" starttime="20191028 05:23:53.884"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_access_key_id ${accessKey}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:23:54.372" level="INFO">Running command 'aws configure set aws_access_key_id testuser/s3g@EXAMPLE.COM 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:23:54.867" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:23:54.867" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:23:54.867" starttime="20191028 05:23:54.369"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:23:54.870" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:23:54.870" starttime="20191028 05:23:54.868"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:23:54.871" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:23:54.871" starttime="20191028 05:23:54.870"></status>
</kw>
<status status="PASS" endtime="20191028 05:23:54.872" starttime="20191028 05:23:54.368"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_secret_access_key ${secret}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:23:54.876" level="INFO">Running command 'aws configure set aws_secret_access_key 3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:23:55.350" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:23:55.351" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:23:55.351" starttime="20191028 05:23:54.873"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:23:55.353" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:23:55.353" starttime="20191028 05:23:55.352"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:23:55.354" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:23:55.354" starttime="20191028 05:23:55.353"></status>
</kw>
<status status="PASS" endtime="20191028 05:23:55.354" starttime="20191028 05:23:54.872"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set region us-west-1</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:23:55.358" level="INFO">Running command 'aws configure set region us-west-1 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:23:55.797" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:23:55.797" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:23:55.797" starttime="20191028 05:23:55.356"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:23:55.799" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:23:55.799" starttime="20191028 05:23:55.798"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:23:55.799" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:23:55.800" starttime="20191028 05:23:55.799"></status>
</kw>
<status status="PASS" endtime="20191028 05:23:55.800" starttime="20191028 05:23:55.355"></status>
</kw>
<status status="PASS" endtime="20191028 05:23:55.800" starttime="20191028 05:23:51.190"></status>
</kw>
<status status="PASS" endtime="20191028 05:23:55.800" starttime="20191028 05:23:51.189"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'false'</arg>
<arg>Setup dummy credentials for S3</arg>
</arguments>
<status status="PASS" endtime="20191028 05:23:55.801" starttime="20191028 05:23:55.801"></status>
</kw>
<status status="PASS" endtime="20191028 05:23:55.802" starttime="20191028 05:23:51.127"></status>
</kw>
<status status="PASS" endtime="20191028 05:23:55.802" starttime="20191028 05:23:51.126"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${BUCKET}' == 'generated'</arg>
<arg>Create bucket</arg>
</arguments>
<status status="PASS" endtime="20191028 05:23:55.803" starttime="20191028 05:23:55.802"></status>
</kw>
<status status="PASS" endtime="20191028 05:23:55.803" starttime="20191028 05:23:50.412"></status>
</kw>
<kw name="Create Random file">
<arguments>
<arg>22</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>dd if=/dev/urandom of=/tmp/part1 bs=1048576 count=${size_in_megabytes}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:23:55.807" level="INFO">Running command 'dd if=/dev/urandom of=/tmp/part1 bs=1048576 count=22 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:23:56.007" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:23:56.007" level="INFO">${output} = 22+0 records in
22+0 records out
23068672 bytes (23 MB) copied, 0.192204 s, 120 MB/s</msg>
<status status="PASS" endtime="20191028 05:23:56.007" starttime="20191028 05:23:55.805"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:23:56.009" level="INFO">22+0 records in
22+0 records out
23068672 bytes (23 MB) copied, 0.192204 s, 120 MB/s</msg>
<status status="PASS" endtime="20191028 05:23:56.009" starttime="20191028 05:23:56.008"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:23:56.010" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:23:56.011" starttime="20191028 05:23:56.010"></status>
</kw>
<status status="PASS" endtime="20191028 05:23:56.011" starttime="20191028 05:23:55.804"></status>
</kw>
<status status="PASS" endtime="20191028 05:23:56.012" starttime="20191028 05:23:55.803"></status>
</kw>
<kw name="Execute AWSS3Cli" library="commonawslib">
<arguments>
<arg>cp /tmp/part1 s3://${BUCKET}/mpyawscli</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws s3 --endpoint-url ${ENDPOINT_URL} ${command}</arg>
</arguments>
<assign>
<var>${output}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:23:56.017" level="INFO">Running command 'aws s3 --endpoint-url http://s3g:9878 cp /tmp/part1 s3://bucket-69731/mpyawscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:24:04.454" level="INFO">${rc} = 1</msg>
<msg timestamp="20191028 05:24:04.454" level="INFO">${output} = upload failed: ../../tmp/part1 to s3://bucket-69731/mpyawscli An error occurred (500) when calling the CreateMultipartUpload operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191028 05:24:04.455" starttime="20191028 05:23:56.015"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:24:04.456" level="INFO">upload failed: ../../tmp/part1 to s3://bucket-69731/mpyawscli An error occurred (500) when calling the CreateMultipartUpload operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191028 05:24:04.457" starttime="20191028 05:24:04.455"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:24:04.458" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191028 05:24:04.458" level="FAIL">1 != 0</msg>
<status status="FAIL" endtime="20191028 05:24:04.459" starttime="20191028 05:24:04.457"></status>
</kw>
<status status="FAIL" endtime="20191028 05:24:04.459" starttime="20191028 05:23:56.013"></status>
</kw>
<status status="FAIL" endtime="20191028 05:24:04.459" starttime="20191028 05:23:56.012"></status>
</kw>
<status status="FAIL" endtime="20191028 05:24:04.460" critical="yes" starttime="20191028 05:23:50.410">1 != 0</status>
</test>
<test id="s1-s5-t10" name="Test Multipart Upload Put With Copy">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:24:04.466" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:24:04.474" level="INFO">${rc} = 1</msg>
<msg timestamp="20191028 05:24:04.474" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191028 05:24:04.474" starttime="20191028 05:24:04.464"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191028 05:24:04.476" starttime="20191028 05:24:04.475"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:24:04.478" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:24:04.671" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:24:04.671" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191028 05:24:04.672" starttime="20191028 05:24:04.476"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:24:04.679" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:24:05.180" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:24:05.181" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: d2lzkl7pfhq30w.cloudfront.net
 * extras: mirrors.xtom.com
 * updates: mirro...</msg>
<status status="PASS" endtime="20191028 05:24:05.181" starttime="20191028 05:24:04.677"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:24:05.183" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: d2lzkl7pfhq30w.cloudfront.net
 * extras: mirrors.xtom.com
 * updates: mirror.fileplanet.com
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191028 05:24:05.183" starttime="20191028 05:24:05.182"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:24:05.184" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:24:05.184" starttime="20191028 05:24:05.183"></status>
</kw>
<status status="PASS" endtime="20191028 05:24:05.185" starttime="20191028 05:24:04.675"></status>
</kw>
<status status="PASS" endtime="20191028 05:24:05.185" starttime="20191028 05:24:04.674"></status>
</kw>
<status status="PASS" endtime="20191028 05:24:05.185" starttime="20191028 05:24:04.673"></status>
</kw>
<status status="PASS" endtime="20191028 05:24:05.186" starttime="20191028 05:24:04.463"></status>
</kw>
<status status="PASS" endtime="20191028 05:24:05.186" starttime="20191028 05:24:04.463"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:24:05.193" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:24:05.200" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:24:05.200" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191028 05:24:05.200" starttime="20191028 05:24:05.191"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:24:05.202" level="INFO">s3g</msg>
<status status="PASS" endtime="20191028 05:24:05.202" starttime="20191028 05:24:05.201"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:24:05.204" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:24:05.204" starttime="20191028 05:24:05.203"></status>
</kw>
<msg timestamp="20191028 05:24:05.204" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191028 05:24:05.205" starttime="20191028 05:24:05.190"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191028 05:24:05.206" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191028 05:24:05.206" starttime="20191028 05:24:05.205"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:24:05.211" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:24:05.242" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:24:05.242" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:24:05.243" starttime="20191028 05:24:05.209"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:24:05.244" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:24:05.244" starttime="20191028 05:24:05.243"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:24:05.245" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:24:05.246" starttime="20191028 05:24:05.245"></status>
</kw>
<status status="PASS" endtime="20191028 05:24:05.246" starttime="20191028 05:24:05.208"></status>
</kw>
<status status="PASS" endtime="20191028 05:24:05.246" starttime="20191028 05:24:05.207"></status>
</kw>
<status status="PASS" endtime="20191028 05:24:05.247" starttime="20191028 05:24:05.189"></status>
</kw>
<status status="PASS" endtime="20191028 05:24:05.247" starttime="20191028 05:24:05.188"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:24:05.252" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:24:07.907" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:24:07.907" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191028 05:24:07.907" starttime="20191028 05:24:05.250"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:24:07.909" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
awsAccessKey=testuser/s3g@EXAMPLE.COM
awsSecret=3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a</msg>
<status status="PASS" endtime="20191028 05:24:07.910" starttime="20191028 05:24:07.908"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:24:07.911" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:24:07.911" starttime="20191028 05:24:07.910"></status>
</kw>
<msg timestamp="20191028 05:24:07.912" level="INFO">${result} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191028 05:24:07.912" starttime="20191028 05:24:05.249"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsAccessKey=).*</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191028 05:24:07.913" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191028 05:24:07.913" starttime="20191028 05:24:07.912"></status>
</kw>
<kw name="Get Variable Value" library="BuiltIn">
<doc>Returns variable value or ``default`` if the variable does not exist.</doc>
<arguments>
<arg>${accessKey}</arg>
<arg>sdsdasaasdasd</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191028 05:24:07.915" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191028 05:24:07.915" starttime="20191028 05:24:07.914"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsSecret=).*</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191028 05:24:07.916" level="INFO">${secret} = [u'3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a']</msg>
<status status="PASS" endtime="20191028 05:24:07.916" starttime="20191028 05:24:07.915"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${accessKey[0]}</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191028 05:24:07.918" level="INFO">${accessKey} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191028 05:24:07.918" starttime="20191028 05:24:07.917"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${secret[0]}</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191028 05:24:07.919" level="INFO">${secret} = 3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a</msg>
<status status="PASS" endtime="20191028 05:24:07.919" starttime="20191028 05:24:07.918"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set default.s3.signature_version s3v4</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:24:07.923" level="INFO">Running command 'aws configure set default.s3.signature_version s3v4 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:24:08.405" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:24:08.405" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:24:08.406" starttime="20191028 05:24:07.920"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:24:08.408" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:24:08.408" starttime="20191028 05:24:08.407"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:24:08.409" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:24:08.409" starttime="20191028 05:24:08.408"></status>
</kw>
<status status="PASS" endtime="20191028 05:24:08.410" starttime="20191028 05:24:07.919"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_access_key_id ${accessKey}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:24:08.414" level="INFO">Running command 'aws configure set aws_access_key_id testuser/s3g@EXAMPLE.COM 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:24:08.900" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:24:08.900" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:24:08.900" starttime="20191028 05:24:08.411"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:24:08.902" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:24:08.902" starttime="20191028 05:24:08.901"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:24:08.903" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:24:08.904" starttime="20191028 05:24:08.903"></status>
</kw>
<status status="PASS" endtime="20191028 05:24:08.904" starttime="20191028 05:24:08.410"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_secret_access_key ${secret}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:24:08.908" level="INFO">Running command 'aws configure set aws_secret_access_key 3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:24:09.391" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:24:09.391" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:24:09.391" starttime="20191028 05:24:08.905"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:24:09.393" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:24:09.393" starttime="20191028 05:24:09.392"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:24:09.394" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:24:09.394" starttime="20191028 05:24:09.393"></status>
</kw>
<status status="PASS" endtime="20191028 05:24:09.395" starttime="20191028 05:24:08.904"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set region us-west-1</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:24:09.400" level="INFO">Running command 'aws configure set region us-west-1 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:24:09.947" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:24:09.947" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:24:09.947" starttime="20191028 05:24:09.397"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:24:09.949" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:24:09.949" starttime="20191028 05:24:09.948"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:24:09.950" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:24:09.950" starttime="20191028 05:24:09.949"></status>
</kw>
<status status="PASS" endtime="20191028 05:24:09.951" starttime="20191028 05:24:09.396"></status>
</kw>
<status status="PASS" endtime="20191028 05:24:09.951" starttime="20191028 05:24:05.248"></status>
</kw>
<status status="PASS" endtime="20191028 05:24:09.951" starttime="20191028 05:24:05.247"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'false'</arg>
<arg>Setup dummy credentials for S3</arg>
</arguments>
<status status="PASS" endtime="20191028 05:24:09.952" starttime="20191028 05:24:09.951"></status>
</kw>
<status status="PASS" endtime="20191028 05:24:09.952" starttime="20191028 05:24:05.187"></status>
</kw>
<status status="PASS" endtime="20191028 05:24:09.953" starttime="20191028 05:24:05.186"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${BUCKET}' == 'generated'</arg>
<arg>Create bucket</arg>
</arguments>
<status status="PASS" endtime="20191028 05:24:09.953" starttime="20191028 05:24:09.953"></status>
</kw>
<status status="PASS" endtime="20191028 05:24:09.954" starttime="20191028 05:24:04.462"></status>
</kw>
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Create Random file</arg>
<arg>5</arg>
</arguments>
<kw name="Create Random file">
<arguments>
<arg>5</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>dd if=/dev/urandom of=/tmp/part1 bs=1048576 count=${size_in_megabytes}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:24:09.958" level="INFO">Running command 'dd if=/dev/urandom of=/tmp/part1 bs=1048576 count=5 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:24:10.030" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:24:10.030" level="INFO">${output} = 5+0 records in
5+0 records out
5242880 bytes (5.2 MB) copied, 0.0554396 s, 94.6 MB/s</msg>
<status status="PASS" endtime="20191028 05:24:10.031" starttime="20191028 05:24:09.956"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:24:10.032" level="INFO">5+0 records in
5+0 records out
5242880 bytes (5.2 MB) copied, 0.0554396 s, 94.6 MB/s</msg>
<status status="PASS" endtime="20191028 05:24:10.033" starttime="20191028 05:24:10.032"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:24:10.034" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:24:10.034" starttime="20191028 05:24:10.033"></status>
</kw>
<status status="PASS" endtime="20191028 05:24:10.035" starttime="20191028 05:24:09.955"></status>
</kw>
<status status="PASS" endtime="20191028 05:24:10.035" starttime="20191028 05:24:09.954"></status>
</kw>
<status status="PASS" endtime="20191028 05:24:10.035" starttime="20191028 05:24:09.954"></status>
</kw>
<kw name="Execute AWSS3APICli" library="commonawslib">
<arguments>
<arg>put-object --bucket ${BUCKET} --key copytest/source --body /tmp/part1</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws s3api --endpoint-url ${ENDPOINT_URL} ${command}</arg>
</arguments>
<assign>
<var>${output}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:24:10.041" level="INFO">Running command 'aws s3api --endpoint-url http://s3g:9878 put-object --bucket bucket-69731 --key copytest/source --body /tmp/part1 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:24:20.461" level="INFO">${rc} = 255</msg>
<msg timestamp="20191028 05:24:20.461" level="INFO">${output} = 
('Connection aborted.', error(32, 'Broken pipe'))</msg>
<status status="PASS" endtime="20191028 05:24:20.461" starttime="20191028 05:24:10.038"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:24:20.463" level="INFO">
('Connection aborted.', error(32, 'Broken pipe'))</msg>
<status status="PASS" endtime="20191028 05:24:20.463" starttime="20191028 05:24:20.462"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:24:20.464" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191028 05:24:20.465" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191028 05:24:20.465" starttime="20191028 05:24:20.464"></status>
</kw>
<status status="FAIL" endtime="20191028 05:24:20.466" starttime="20191028 05:24:10.037"></status>
</kw>
<status status="FAIL" endtime="20191028 05:24:20.466" starttime="20191028 05:24:10.036"></status>
</kw>
<status status="FAIL" endtime="20191028 05:24:20.467" critical="yes" starttime="20191028 05:24:04.461">255 != 0</status>
</test>
<test id="s1-s5-t11" name="Test Multipart Upload Put With Copy and range">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:24:20.475" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:24:20.482" level="INFO">${rc} = 1</msg>
<msg timestamp="20191028 05:24:20.482" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191028 05:24:20.482" starttime="20191028 05:24:20.471"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191028 05:24:20.485" starttime="20191028 05:24:20.483"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:24:20.487" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:24:20.658" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:24:20.658" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191028 05:24:20.658" starttime="20191028 05:24:20.485"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:24:20.664" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:24:21.216" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:24:21.216" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: d2lzkl7pfhq30w.cloudfront.net
 * extras: mirrors.xtom.com
 * updates: mirro...</msg>
<status status="PASS" endtime="20191028 05:24:21.216" starttime="20191028 05:24:20.662"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:24:21.218" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: d2lzkl7pfhq30w.cloudfront.net
 * extras: mirrors.xtom.com
 * updates: mirror.fileplanet.com
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191028 05:24:21.219" starttime="20191028 05:24:21.217"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:24:21.220" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:24:21.220" starttime="20191028 05:24:21.219"></status>
</kw>
<status status="PASS" endtime="20191028 05:24:21.220" starttime="20191028 05:24:20.661"></status>
</kw>
<status status="PASS" endtime="20191028 05:24:21.221" starttime="20191028 05:24:20.660"></status>
</kw>
<status status="PASS" endtime="20191028 05:24:21.221" starttime="20191028 05:24:20.659"></status>
</kw>
<status status="PASS" endtime="20191028 05:24:21.221" starttime="20191028 05:24:20.470"></status>
</kw>
<status status="PASS" endtime="20191028 05:24:21.221" starttime="20191028 05:24:20.469"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:24:21.229" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:24:21.236" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:24:21.236" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191028 05:24:21.236" starttime="20191028 05:24:21.226"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:24:21.238" level="INFO">s3g</msg>
<status status="PASS" endtime="20191028 05:24:21.238" starttime="20191028 05:24:21.237"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:24:21.239" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:24:21.239" starttime="20191028 05:24:21.239"></status>
</kw>
<msg timestamp="20191028 05:24:21.240" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191028 05:24:21.240" starttime="20191028 05:24:21.225"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191028 05:24:21.242" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191028 05:24:21.242" starttime="20191028 05:24:21.241"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:24:21.247" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:24:21.296" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:24:21.297" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:24:21.297" starttime="20191028 05:24:21.245"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:24:21.299" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:24:21.299" starttime="20191028 05:24:21.298"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:24:21.300" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:24:21.300" starttime="20191028 05:24:21.299"></status>
</kw>
<status status="PASS" endtime="20191028 05:24:21.301" starttime="20191028 05:24:21.243"></status>
</kw>
<status status="PASS" endtime="20191028 05:24:21.301" starttime="20191028 05:24:21.242"></status>
</kw>
<status status="PASS" endtime="20191028 05:24:21.302" starttime="20191028 05:24:21.225"></status>
</kw>
<status status="PASS" endtime="20191028 05:24:21.302" starttime="20191028 05:24:21.224"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:24:21.307" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:24:23.918" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:24:23.918" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191028 05:24:23.918" starttime="20191028 05:24:21.305"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:24:23.920" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
awsAccessKey=testuser/s3g@EXAMPLE.COM
awsSecret=3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a</msg>
<status status="PASS" endtime="20191028 05:24:23.920" starttime="20191028 05:24:23.919"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:24:23.921" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:24:23.921" starttime="20191028 05:24:23.921"></status>
</kw>
<msg timestamp="20191028 05:24:23.922" level="INFO">${result} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191028 05:24:23.922" starttime="20191028 05:24:21.304"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsAccessKey=).*</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191028 05:24:23.924" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191028 05:24:23.924" starttime="20191028 05:24:23.923"></status>
</kw>
<kw name="Get Variable Value" library="BuiltIn">
<doc>Returns variable value or ``default`` if the variable does not exist.</doc>
<arguments>
<arg>${accessKey}</arg>
<arg>sdsdasaasdasd</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191028 05:24:23.926" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191028 05:24:23.926" starttime="20191028 05:24:23.925"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsSecret=).*</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191028 05:24:23.927" level="INFO">${secret} = [u'3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a']</msg>
<status status="PASS" endtime="20191028 05:24:23.927" starttime="20191028 05:24:23.926"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${accessKey[0]}</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191028 05:24:23.928" level="INFO">${accessKey} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191028 05:24:23.928" starttime="20191028 05:24:23.927"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${secret[0]}</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191028 05:24:23.929" level="INFO">${secret} = 3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a</msg>
<status status="PASS" endtime="20191028 05:24:23.929" starttime="20191028 05:24:23.928"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set default.s3.signature_version s3v4</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:24:23.933" level="INFO">Running command 'aws configure set default.s3.signature_version s3v4 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:24:24.374" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:24:24.375" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:24:24.375" starttime="20191028 05:24:23.930"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:24:24.377" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:24:24.377" starttime="20191028 05:24:24.376"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:24:24.378" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:24:24.378" starttime="20191028 05:24:24.377"></status>
</kw>
<status status="PASS" endtime="20191028 05:24:24.379" starttime="20191028 05:24:23.930"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_access_key_id ${accessKey}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:24:24.383" level="INFO">Running command 'aws configure set aws_access_key_id testuser/s3g@EXAMPLE.COM 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:24:24.850" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:24:24.851" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:24:24.851" starttime="20191028 05:24:24.380"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:24:24.853" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:24:24.853" starttime="20191028 05:24:24.852"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:24:24.854" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:24:24.854" starttime="20191028 05:24:24.853"></status>
</kw>
<status status="PASS" endtime="20191028 05:24:24.855" starttime="20191028 05:24:24.379"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_secret_access_key ${secret}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:24:24.859" level="INFO">Running command 'aws configure set aws_secret_access_key 3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:24:25.318" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:24:25.318" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:24:25.318" starttime="20191028 05:24:24.856"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:24:25.320" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:24:25.320" starttime="20191028 05:24:25.319"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:24:25.322" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:24:25.322" starttime="20191028 05:24:25.321"></status>
</kw>
<status status="PASS" endtime="20191028 05:24:25.322" starttime="20191028 05:24:24.855"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set region us-west-1</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:24:25.326" level="INFO">Running command 'aws configure set region us-west-1 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:24:25.747" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:24:25.748" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:24:25.748" starttime="20191028 05:24:25.324"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:24:25.750" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:24:25.750" starttime="20191028 05:24:25.749"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:24:25.751" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:24:25.751" starttime="20191028 05:24:25.750"></status>
</kw>
<status status="PASS" endtime="20191028 05:24:25.752" starttime="20191028 05:24:25.323"></status>
</kw>
<status status="PASS" endtime="20191028 05:24:25.752" starttime="20191028 05:24:21.303"></status>
</kw>
<status status="PASS" endtime="20191028 05:24:25.752" starttime="20191028 05:24:21.302"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'false'</arg>
<arg>Setup dummy credentials for S3</arg>
</arguments>
<status status="PASS" endtime="20191028 05:24:25.754" starttime="20191028 05:24:25.753"></status>
</kw>
<status status="PASS" endtime="20191028 05:24:25.754" starttime="20191028 05:24:21.223"></status>
</kw>
<status status="PASS" endtime="20191028 05:24:25.754" starttime="20191028 05:24:21.222"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${BUCKET}' == 'generated'</arg>
<arg>Create bucket</arg>
</arguments>
<status status="PASS" endtime="20191028 05:24:25.755" starttime="20191028 05:24:25.754"></status>
</kw>
<status status="PASS" endtime="20191028 05:24:25.755" starttime="20191028 05:24:20.469"></status>
</kw>
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Create Random file</arg>
<arg>10</arg>
</arguments>
<kw name="Create Random file">
<arguments>
<arg>10</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>dd if=/dev/urandom of=/tmp/part1 bs=1048576 count=${size_in_megabytes}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:24:25.761" level="INFO">Running command 'dd if=/dev/urandom of=/tmp/part1 bs=1048576 count=10 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:24:25.864" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:24:25.864" level="INFO">${output} = 10+0 records in
10+0 records out
10485760 bytes (10 MB) copied, 0.0945698 s, 111 MB/s</msg>
<status status="PASS" endtime="20191028 05:24:25.864" starttime="20191028 05:24:25.758"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:24:25.866" level="INFO">10+0 records in
10+0 records out
10485760 bytes (10 MB) copied, 0.0945698 s, 111 MB/s</msg>
<status status="PASS" endtime="20191028 05:24:25.866" starttime="20191028 05:24:25.865"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:24:25.867" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:24:25.868" starttime="20191028 05:24:25.867"></status>
</kw>
<status status="PASS" endtime="20191028 05:24:25.868" starttime="20191028 05:24:25.757"></status>
</kw>
<status status="PASS" endtime="20191028 05:24:25.869" starttime="20191028 05:24:25.757"></status>
</kw>
<status status="PASS" endtime="20191028 05:24:25.869" starttime="20191028 05:24:25.756"></status>
</kw>
<kw name="Execute AWSS3APICli" library="commonawslib">
<arguments>
<arg>put-object --bucket ${BUCKET} --key copyrange/source --body /tmp/part1</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws s3api --endpoint-url ${ENDPOINT_URL} ${command}</arg>
</arguments>
<assign>
<var>${output}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:24:25.874" level="INFO">Running command 'aws s3api --endpoint-url http://s3g:9878 put-object --bucket bucket-69731 --key copyrange/source --body /tmp/part1 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:24:36.171" level="INFO">${rc} = 255</msg>
<msg timestamp="20191028 05:24:36.171" level="INFO">${output} = 
('Connection aborted.', error(32, 'Broken pipe'))</msg>
<status status="PASS" endtime="20191028 05:24:36.171" starttime="20191028 05:24:25.871"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:24:36.173" level="INFO">
('Connection aborted.', error(32, 'Broken pipe'))</msg>
<status status="PASS" endtime="20191028 05:24:36.173" starttime="20191028 05:24:36.172"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:24:36.175" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191028 05:24:36.176" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191028 05:24:36.176" starttime="20191028 05:24:36.174"></status>
</kw>
<status status="FAIL" endtime="20191028 05:24:36.177" starttime="20191028 05:24:25.870"></status>
</kw>
<status status="FAIL" endtime="20191028 05:24:36.177" starttime="20191028 05:24:25.869"></status>
</kw>
<status status="FAIL" endtime="20191028 05:24:36.178" critical="yes" starttime="20191028 05:24:20.467">255 != 0</status>
</test>
<test id="s1-s5-t12" name="Test Multipart Upload list">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:24:36.184" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:24:36.189" level="INFO">${rc} = 1</msg>
<msg timestamp="20191028 05:24:36.189" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191028 05:24:36.190" starttime="20191028 05:24:36.182"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191028 05:24:36.191" starttime="20191028 05:24:36.190"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:24:36.194" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:24:36.382" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:24:36.382" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191028 05:24:36.382" starttime="20191028 05:24:36.192"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:24:36.388" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:24:36.854" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:24:36.855" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: d2lzkl7pfhq30w.cloudfront.net
 * extras: mirrors.xtom.com
 * updates: mirro...</msg>
<status status="PASS" endtime="20191028 05:24:36.855" starttime="20191028 05:24:36.386"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:24:36.857" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: d2lzkl7pfhq30w.cloudfront.net
 * extras: mirrors.xtom.com
 * updates: mirror.fileplanet.com
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191028 05:24:36.857" starttime="20191028 05:24:36.856"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:24:36.858" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:24:36.858" starttime="20191028 05:24:36.857"></status>
</kw>
<status status="PASS" endtime="20191028 05:24:36.859" starttime="20191028 05:24:36.385"></status>
</kw>
<status status="PASS" endtime="20191028 05:24:36.859" starttime="20191028 05:24:36.384"></status>
</kw>
<status status="PASS" endtime="20191028 05:24:36.859" starttime="20191028 05:24:36.383"></status>
</kw>
<status status="PASS" endtime="20191028 05:24:36.860" starttime="20191028 05:24:36.181"></status>
</kw>
<status status="PASS" endtime="20191028 05:24:36.860" starttime="20191028 05:24:36.181"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:24:36.867" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:24:36.874" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:24:36.874" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191028 05:24:36.874" starttime="20191028 05:24:36.865"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:24:36.876" level="INFO">s3g</msg>
<status status="PASS" endtime="20191028 05:24:36.876" starttime="20191028 05:24:36.875"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:24:36.877" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:24:36.878" starttime="20191028 05:24:36.877"></status>
</kw>
<msg timestamp="20191028 05:24:36.878" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191028 05:24:36.878" starttime="20191028 05:24:36.864"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191028 05:24:36.880" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191028 05:24:36.880" starttime="20191028 05:24:36.879"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:24:36.886" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:24:36.916" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:24:36.916" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:24:36.916" starttime="20191028 05:24:36.883"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:24:36.918" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:24:36.918" starttime="20191028 05:24:36.917"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:24:36.919" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:24:36.920" starttime="20191028 05:24:36.919"></status>
</kw>
<status status="PASS" endtime="20191028 05:24:36.920" starttime="20191028 05:24:36.882"></status>
</kw>
<status status="PASS" endtime="20191028 05:24:36.920" starttime="20191028 05:24:36.881"></status>
</kw>
<status status="PASS" endtime="20191028 05:24:36.920" starttime="20191028 05:24:36.863"></status>
</kw>
<status status="PASS" endtime="20191028 05:24:36.921" starttime="20191028 05:24:36.862"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:24:36.926" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:24:39.607" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:24:39.607" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191028 05:24:39.607" starttime="20191028 05:24:36.923"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:24:39.609" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
awsAccessKey=testuser/s3g@EXAMPLE.COM
awsSecret=3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a</msg>
<status status="PASS" endtime="20191028 05:24:39.610" starttime="20191028 05:24:39.608"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:24:39.611" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:24:39.611" starttime="20191028 05:24:39.610"></status>
</kw>
<msg timestamp="20191028 05:24:39.612" level="INFO">${result} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191028 05:24:39.612" starttime="20191028 05:24:36.923"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsAccessKey=).*</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191028 05:24:39.613" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191028 05:24:39.613" starttime="20191028 05:24:39.612"></status>
</kw>
<kw name="Get Variable Value" library="BuiltIn">
<doc>Returns variable value or ``default`` if the variable does not exist.</doc>
<arguments>
<arg>${accessKey}</arg>
<arg>sdsdasaasdasd</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191028 05:24:39.614" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191028 05:24:39.614" starttime="20191028 05:24:39.613"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsSecret=).*</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191028 05:24:39.616" level="INFO">${secret} = [u'3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a']</msg>
<status status="PASS" endtime="20191028 05:24:39.616" starttime="20191028 05:24:39.615"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${accessKey[0]}</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191028 05:24:39.617" level="INFO">${accessKey} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191028 05:24:39.617" starttime="20191028 05:24:39.616"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${secret[0]}</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191028 05:24:39.618" level="INFO">${secret} = 3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a</msg>
<status status="PASS" endtime="20191028 05:24:39.618" starttime="20191028 05:24:39.617"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set default.s3.signature_version s3v4</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:24:39.622" level="INFO">Running command 'aws configure set default.s3.signature_version s3v4 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:24:40.143" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:24:40.143" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:24:40.143" starttime="20191028 05:24:39.620"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:24:40.145" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:24:40.145" starttime="20191028 05:24:40.144"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:24:40.146" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:24:40.147" starttime="20191028 05:24:40.146"></status>
</kw>
<status status="PASS" endtime="20191028 05:24:40.147" starttime="20191028 05:24:39.619"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_access_key_id ${accessKey}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:24:40.152" level="INFO">Running command 'aws configure set aws_access_key_id testuser/s3g@EXAMPLE.COM 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:24:40.659" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:24:40.659" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:24:40.659" starttime="20191028 05:24:40.149"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:24:40.661" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:24:40.661" starttime="20191028 05:24:40.660"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:24:40.662" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:24:40.663" starttime="20191028 05:24:40.662"></status>
</kw>
<status status="PASS" endtime="20191028 05:24:40.663" starttime="20191028 05:24:40.148"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_secret_access_key ${secret}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:24:40.667" level="INFO">Running command 'aws configure set aws_secret_access_key 3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:24:41.163" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:24:41.163" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:24:41.163" starttime="20191028 05:24:40.665"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:24:41.165" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:24:41.165" starttime="20191028 05:24:41.164"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:24:41.166" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:24:41.167" starttime="20191028 05:24:41.166"></status>
</kw>
<status status="PASS" endtime="20191028 05:24:41.167" starttime="20191028 05:24:40.664"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set region us-west-1</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:24:41.171" level="INFO">Running command 'aws configure set region us-west-1 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:24:41.655" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:24:41.656" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:24:41.656" starttime="20191028 05:24:41.169"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:24:41.658" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:24:41.658" starttime="20191028 05:24:41.657"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:24:41.659" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:24:41.660" starttime="20191028 05:24:41.658"></status>
</kw>
<status status="PASS" endtime="20191028 05:24:41.661" starttime="20191028 05:24:41.168"></status>
</kw>
<status status="PASS" endtime="20191028 05:24:41.661" starttime="20191028 05:24:36.922"></status>
</kw>
<status status="PASS" endtime="20191028 05:24:41.661" starttime="20191028 05:24:36.921"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'false'</arg>
<arg>Setup dummy credentials for S3</arg>
</arguments>
<status status="PASS" endtime="20191028 05:24:41.662" starttime="20191028 05:24:41.662"></status>
</kw>
<status status="PASS" endtime="20191028 05:24:41.663" starttime="20191028 05:24:36.861"></status>
</kw>
<status status="PASS" endtime="20191028 05:24:41.663" starttime="20191028 05:24:36.860"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${BUCKET}' == 'generated'</arg>
<arg>Create bucket</arg>
</arguments>
<status status="PASS" endtime="20191028 05:24:41.664" starttime="20191028 05:24:41.663"></status>
</kw>
<status status="PASS" endtime="20191028 05:24:41.664" starttime="20191028 05:24:36.180"></status>
</kw>
<kw name="Execute AWSS3APICli" library="commonawslib">
<arguments>
<arg>create-multipart-upload --bucket ${BUCKET} --key listtest/key1</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws s3api --endpoint-url ${ENDPOINT_URL} ${command}</arg>
</arguments>
<assign>
<var>${output}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:24:41.669" level="INFO">Running command 'aws s3api --endpoint-url http://s3g:9878 create-multipart-upload --bucket bucket-69731 --key listtest/key1 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:24:47.805" level="INFO">${rc} = 255</msg>
<msg timestamp="20191028 05:24:47.806" level="INFO">${output} = 
An error occurred (500) when calling the CreateMultipartUpload operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191028 05:24:47.806" starttime="20191028 05:24:41.667"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:24:47.808" level="INFO">
An error occurred (500) when calling the CreateMultipartUpload operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191028 05:24:47.808" starttime="20191028 05:24:47.807"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:24:47.809" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191028 05:24:47.810" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191028 05:24:47.810" starttime="20191028 05:24:47.808"></status>
</kw>
<status status="FAIL" endtime="20191028 05:24:47.810" starttime="20191028 05:24:41.666"></status>
</kw>
<status status="FAIL" endtime="20191028 05:24:47.811" starttime="20191028 05:24:41.665"></status>
</kw>
<status status="FAIL" endtime="20191028 05:24:47.811" critical="yes" starttime="20191028 05:24:36.179">255 != 0</status>
</test>
<doc>S3 gateway test with aws cli</doc>
<status status="FAIL" endtime="20191028 05:24:47.816" starttime="20191028 05:22:00.301"></status>
</suite>
<suite source="/opt/hadoop/smoketest/s3/objectcopy.robot" id="s1-s6" name="Objectcopy">
<test id="s1-s6-t1" name="Copy Object Happy Scenario">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:24:47.844" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:24:47.851" level="INFO">${rc} = 1</msg>
<msg timestamp="20191028 05:24:47.852" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191028 05:24:47.852" starttime="20191028 05:24:47.842"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191028 05:24:47.853" starttime="20191028 05:24:47.852"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:24:47.856" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:24:48.047" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:24:48.048" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191028 05:24:48.048" starttime="20191028 05:24:47.854"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:24:48.054" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:24:48.563" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:24:48.563" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: d2lzkl7pfhq30w.cloudfront.net
 * extras: mirrors.xtom.com
 * updates: mirro...</msg>
<status status="PASS" endtime="20191028 05:24:48.563" starttime="20191028 05:24:48.051"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:24:48.565" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: d2lzkl7pfhq30w.cloudfront.net
 * extras: mirrors.xtom.com
 * updates: mirror.fileplanet.com
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191028 05:24:48.565" starttime="20191028 05:24:48.564"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:24:48.566" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:24:48.567" starttime="20191028 05:24:48.566"></status>
</kw>
<status status="PASS" endtime="20191028 05:24:48.567" starttime="20191028 05:24:48.051"></status>
</kw>
<status status="PASS" endtime="20191028 05:24:48.568" starttime="20191028 05:24:48.050"></status>
</kw>
<status status="PASS" endtime="20191028 05:24:48.568" starttime="20191028 05:24:48.049"></status>
</kw>
<status status="PASS" endtime="20191028 05:24:48.568" starttime="20191028 05:24:47.841"></status>
</kw>
<status status="PASS" endtime="20191028 05:24:48.568" starttime="20191028 05:24:47.840"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:24:48.576" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:24:48.582" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:24:48.583" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191028 05:24:48.583" starttime="20191028 05:24:48.573"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:24:48.585" level="INFO">s3g</msg>
<status status="PASS" endtime="20191028 05:24:48.585" starttime="20191028 05:24:48.584"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:24:48.586" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:24:48.586" starttime="20191028 05:24:48.585"></status>
</kw>
<msg timestamp="20191028 05:24:48.587" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191028 05:24:48.587" starttime="20191028 05:24:48.572"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191028 05:24:48.590" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191028 05:24:48.590" starttime="20191028 05:24:48.587"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:24:48.594" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:24:48.610" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:24:48.611" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:24:48.611" starttime="20191028 05:24:48.592"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:24:48.612" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:24:48.612" starttime="20191028 05:24:48.611"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:24:48.613" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:24:48.613" starttime="20191028 05:24:48.613"></status>
</kw>
<status status="PASS" endtime="20191028 05:24:48.614" starttime="20191028 05:24:48.591"></status>
</kw>
<status status="PASS" endtime="20191028 05:24:48.614" starttime="20191028 05:24:48.590"></status>
</kw>
<status status="PASS" endtime="20191028 05:24:48.614" starttime="20191028 05:24:48.571"></status>
</kw>
<status status="PASS" endtime="20191028 05:24:48.614" starttime="20191028 05:24:48.571"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:24:48.619" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:24:51.340" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:24:51.340" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191028 05:24:51.340" starttime="20191028 05:24:48.617"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:24:51.342" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
awsAccessKey=testuser/s3g@EXAMPLE.COM
awsSecret=3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a</msg>
<status status="PASS" endtime="20191028 05:24:51.342" starttime="20191028 05:24:51.341"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:24:51.343" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:24:51.343" starttime="20191028 05:24:51.343"></status>
</kw>
<msg timestamp="20191028 05:24:51.344" level="INFO">${result} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191028 05:24:51.344" starttime="20191028 05:24:48.616"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsAccessKey=).*</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191028 05:24:51.345" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191028 05:24:51.345" starttime="20191028 05:24:51.344"></status>
</kw>
<kw name="Get Variable Value" library="BuiltIn">
<doc>Returns variable value or ``default`` if the variable does not exist.</doc>
<arguments>
<arg>${accessKey}</arg>
<arg>sdsdasaasdasd</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191028 05:24:51.346" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191028 05:24:51.346" starttime="20191028 05:24:51.345"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsSecret=).*</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191028 05:24:51.347" level="INFO">${secret} = [u'3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a']</msg>
<status status="PASS" endtime="20191028 05:24:51.347" starttime="20191028 05:24:51.346"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${accessKey[0]}</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191028 05:24:51.348" level="INFO">${accessKey} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191028 05:24:51.348" starttime="20191028 05:24:51.347"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${secret[0]}</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191028 05:24:51.349" level="INFO">${secret} = 3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a</msg>
<status status="PASS" endtime="20191028 05:24:51.349" starttime="20191028 05:24:51.349"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set default.s3.signature_version s3v4</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:24:51.352" level="INFO">Running command 'aws configure set default.s3.signature_version s3v4 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:24:51.855" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:24:51.855" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:24:51.855" starttime="20191028 05:24:51.350"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:24:51.857" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:24:51.857" starttime="20191028 05:24:51.856"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:24:51.858" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:24:51.858" starttime="20191028 05:24:51.857"></status>
</kw>
<status status="PASS" endtime="20191028 05:24:51.859" starttime="20191028 05:24:51.350"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_access_key_id ${accessKey}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:24:51.862" level="INFO">Running command 'aws configure set aws_access_key_id testuser/s3g@EXAMPLE.COM 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:24:52.292" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:24:52.292" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:24:52.292" starttime="20191028 05:24:51.860"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:24:52.294" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:24:52.295" starttime="20191028 05:24:52.293"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:24:52.296" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:24:52.296" starttime="20191028 05:24:52.295"></status>
</kw>
<status status="PASS" endtime="20191028 05:24:52.296" starttime="20191028 05:24:51.859"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_secret_access_key ${secret}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:24:52.300" level="INFO">Running command 'aws configure set aws_secret_access_key 3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:24:52.794" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:24:52.794" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:24:52.795" starttime="20191028 05:24:52.298"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:24:52.797" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:24:52.797" starttime="20191028 05:24:52.796"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:24:52.798" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:24:52.798" starttime="20191028 05:24:52.797"></status>
</kw>
<status status="PASS" endtime="20191028 05:24:52.799" starttime="20191028 05:24:52.297"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set region us-west-1</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:24:52.803" level="INFO">Running command 'aws configure set region us-west-1 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:24:53.315" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:24:53.316" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:24:53.316" starttime="20191028 05:24:52.800"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:24:53.318" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:24:53.318" starttime="20191028 05:24:53.317"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:24:53.319" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:24:53.320" starttime="20191028 05:24:53.318"></status>
</kw>
<status status="PASS" endtime="20191028 05:24:53.320" starttime="20191028 05:24:52.799"></status>
</kw>
<status status="PASS" endtime="20191028 05:24:53.320" starttime="20191028 05:24:48.616"></status>
</kw>
<status status="PASS" endtime="20191028 05:24:53.321" starttime="20191028 05:24:48.615"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'false'</arg>
<arg>Setup dummy credentials for S3</arg>
</arguments>
<status status="PASS" endtime="20191028 05:24:53.322" starttime="20191028 05:24:53.321"></status>
</kw>
<status status="PASS" endtime="20191028 05:24:53.322" starttime="20191028 05:24:48.570"></status>
</kw>
<status status="PASS" endtime="20191028 05:24:53.323" starttime="20191028 05:24:48.569"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${BUCKET}' == 'generated'</arg>
<arg>Create bucket</arg>
</arguments>
<kw name="Create bucket" library="commonawslib">
<kw name="Generate Random String" library="String">
<doc>Generates a string with a desired ``length`` from the given ``chars``.</doc>
<arguments>
<arg>5</arg>
<arg>[NUMBERS]</arg>
</arguments>
<assign>
<var>${postfix}</var>
</assign>
<msg timestamp="20191028 05:24:53.326" level="INFO">${postfix} = 24669</msg>
<status status="PASS" endtime="20191028 05:24:53.326" starttime="20191028 05:24:53.325"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${BUCKET}</arg>
<arg>bucket-${postfix}</arg>
</arguments>
<msg timestamp="20191028 05:24:53.327" level="INFO">${BUCKET} = bucket-24669</msg>
<status status="PASS" endtime="20191028 05:24:53.327" starttime="20191028 05:24:53.326"></status>
</kw>
<kw name="Execute AWSS3APICli" library="commonawslib">
<arguments>
<arg>create-bucket --bucket ${BUCKET}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws s3api --endpoint-url ${ENDPOINT_URL} ${command}</arg>
</arguments>
<assign>
<var>${output}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:24:53.332" level="INFO">Running command 'aws s3api --endpoint-url http://s3g:9878 create-bucket --bucket bucket-24669 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:25:01.970" level="INFO">${rc} = 255</msg>
<msg timestamp="20191028 05:25:01.971" level="INFO">${output} = 
An error occurred (500) when calling the CreateBucket operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191028 05:25:01.971" starttime="20191028 05:24:53.330"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:25:01.974" level="INFO">
An error occurred (500) when calling the CreateBucket operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191028 05:25:01.974" starttime="20191028 05:25:01.972"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:25:01.976" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191028 05:25:01.976" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191028 05:25:01.976" starttime="20191028 05:25:01.975"></status>
</kw>
<status status="FAIL" endtime="20191028 05:25:01.977" starttime="20191028 05:24:53.329"></status>
</kw>
<status status="FAIL" endtime="20191028 05:25:01.977" starttime="20191028 05:24:53.328"></status>
</kw>
<status status="FAIL" endtime="20191028 05:25:01.978" starttime="20191028 05:24:53.324"></status>
</kw>
<status status="FAIL" endtime="20191028 05:25:01.978" starttime="20191028 05:24:53.323"></status>
</kw>
<status status="FAIL" endtime="20191028 05:25:01.978" starttime="20191028 05:24:47.839"></status>
</kw>
<status status="FAIL" endtime="20191028 05:25:01.979" critical="yes" starttime="20191028 05:24:47.838">Setup failed:
255 != 0</status>
</test>
<test id="s1-s6-t2" name="Copy Object Where Bucket is not available">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:25:01.986" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:25:01.992" level="INFO">${rc} = 1</msg>
<msg timestamp="20191028 05:25:01.993" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191028 05:25:01.993" starttime="20191028 05:25:01.983"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191028 05:25:01.995" starttime="20191028 05:25:01.994"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:25:01.997" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:25:02.193" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:25:02.193" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191028 05:25:02.193" starttime="20191028 05:25:01.995"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:25:02.200" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:25:02.689" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:25:02.689" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: d2lzkl7pfhq30w.cloudfront.net
 * extras: mirrors.xtom.com
 * updates: mirro...</msg>
<status status="PASS" endtime="20191028 05:25:02.689" starttime="20191028 05:25:02.197"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:25:02.691" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: d2lzkl7pfhq30w.cloudfront.net
 * extras: mirrors.xtom.com
 * updates: mirror.fileplanet.com
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191028 05:25:02.691" starttime="20191028 05:25:02.690"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:25:02.691" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:25:02.691" starttime="20191028 05:25:02.691"></status>
</kw>
<status status="PASS" endtime="20191028 05:25:02.692" starttime="20191028 05:25:02.196"></status>
</kw>
<status status="PASS" endtime="20191028 05:25:02.692" starttime="20191028 05:25:02.196"></status>
</kw>
<status status="PASS" endtime="20191028 05:25:02.692" starttime="20191028 05:25:02.194"></status>
</kw>
<status status="PASS" endtime="20191028 05:25:02.692" starttime="20191028 05:25:01.982"></status>
</kw>
<status status="PASS" endtime="20191028 05:25:02.692" starttime="20191028 05:25:01.982"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:25:02.697" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:25:02.704" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:25:02.704" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191028 05:25:02.704" starttime="20191028 05:25:02.695"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:25:02.705" level="INFO">s3g</msg>
<status status="PASS" endtime="20191028 05:25:02.705" starttime="20191028 05:25:02.704"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:25:02.705" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:25:02.706" starttime="20191028 05:25:02.705"></status>
</kw>
<msg timestamp="20191028 05:25:02.706" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191028 05:25:02.706" starttime="20191028 05:25:02.695"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191028 05:25:02.707" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191028 05:25:02.707" starttime="20191028 05:25:02.706"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:25:02.711" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:25:02.754" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:25:02.754" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:25:02.754" starttime="20191028 05:25:02.709"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:25:02.756" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:25:02.756" starttime="20191028 05:25:02.755"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:25:02.757" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:25:02.758" starttime="20191028 05:25:02.756"></status>
</kw>
<status status="PASS" endtime="20191028 05:25:02.758" starttime="20191028 05:25:02.708"></status>
</kw>
<status status="PASS" endtime="20191028 05:25:02.758" starttime="20191028 05:25:02.707"></status>
</kw>
<status status="PASS" endtime="20191028 05:25:02.759" starttime="20191028 05:25:02.694"></status>
</kw>
<status status="PASS" endtime="20191028 05:25:02.759" starttime="20191028 05:25:02.694"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:25:02.764" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:25:05.559" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:25:05.559" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191028 05:25:05.559" starttime="20191028 05:25:02.762"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:25:05.561" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
awsAccessKey=testuser/s3g@EXAMPLE.COM
awsSecret=3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a</msg>
<status status="PASS" endtime="20191028 05:25:05.561" starttime="20191028 05:25:05.560"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:25:05.562" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:25:05.562" starttime="20191028 05:25:05.562"></status>
</kw>
<msg timestamp="20191028 05:25:05.563" level="INFO">${result} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191028 05:25:05.563" starttime="20191028 05:25:02.761"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsAccessKey=).*</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191028 05:25:05.564" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191028 05:25:05.564" starttime="20191028 05:25:05.563"></status>
</kw>
<kw name="Get Variable Value" library="BuiltIn">
<doc>Returns variable value or ``default`` if the variable does not exist.</doc>
<arguments>
<arg>${accessKey}</arg>
<arg>sdsdasaasdasd</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191028 05:25:05.565" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191028 05:25:05.566" starttime="20191028 05:25:05.565"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsSecret=).*</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191028 05:25:05.567" level="INFO">${secret} = [u'3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a']</msg>
<status status="PASS" endtime="20191028 05:25:05.567" starttime="20191028 05:25:05.566"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${accessKey[0]}</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191028 05:25:05.568" level="INFO">${accessKey} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191028 05:25:05.568" starttime="20191028 05:25:05.567"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${secret[0]}</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191028 05:25:05.569" level="INFO">${secret} = 3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a</msg>
<status status="PASS" endtime="20191028 05:25:05.569" starttime="20191028 05:25:05.568"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set default.s3.signature_version s3v4</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:25:05.572" level="INFO">Running command 'aws configure set default.s3.signature_version s3v4 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:25:06.030" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:25:06.030" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:25:06.030" starttime="20191028 05:25:05.570"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:25:06.032" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:25:06.032" starttime="20191028 05:25:06.031"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:25:06.033" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:25:06.033" starttime="20191028 05:25:06.032"></status>
</kw>
<status status="PASS" endtime="20191028 05:25:06.034" starttime="20191028 05:25:05.569"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_access_key_id ${accessKey}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:25:06.038" level="INFO">Running command 'aws configure set aws_access_key_id testuser/s3g@EXAMPLE.COM 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:25:06.526" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:25:06.526" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:25:06.526" starttime="20191028 05:25:06.035"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:25:06.528" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:25:06.528" starttime="20191028 05:25:06.527"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:25:06.529" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:25:06.530" starttime="20191028 05:25:06.529"></status>
</kw>
<status status="PASS" endtime="20191028 05:25:06.530" starttime="20191028 05:25:06.034"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_secret_access_key ${secret}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:25:06.534" level="INFO">Running command 'aws configure set aws_secret_access_key 3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:25:07.012" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:25:07.012" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:25:07.012" starttime="20191028 05:25:06.532"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:25:07.014" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:25:07.015" starttime="20191028 05:25:07.013"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:25:07.016" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:25:07.016" starttime="20191028 05:25:07.015"></status>
</kw>
<status status="PASS" endtime="20191028 05:25:07.016" starttime="20191028 05:25:06.531"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set region us-west-1</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:25:07.021" level="INFO">Running command 'aws configure set region us-west-1 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:25:07.504" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:25:07.505" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:25:07.505" starttime="20191028 05:25:07.018"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:25:07.507" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:25:07.507" starttime="20191028 05:25:07.506"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:25:07.508" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:25:07.510" starttime="20191028 05:25:07.508"></status>
</kw>
<status status="PASS" endtime="20191028 05:25:07.510" starttime="20191028 05:25:07.017"></status>
</kw>
<status status="PASS" endtime="20191028 05:25:07.511" starttime="20191028 05:25:02.760"></status>
</kw>
<status status="PASS" endtime="20191028 05:25:07.511" starttime="20191028 05:25:02.759"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'false'</arg>
<arg>Setup dummy credentials for S3</arg>
</arguments>
<status status="PASS" endtime="20191028 05:25:07.512" starttime="20191028 05:25:07.511"></status>
</kw>
<status status="PASS" endtime="20191028 05:25:07.512" starttime="20191028 05:25:02.693"></status>
</kw>
<status status="PASS" endtime="20191028 05:25:07.513" starttime="20191028 05:25:02.693"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${BUCKET}' == 'generated'</arg>
<arg>Create bucket</arg>
</arguments>
<status status="PASS" endtime="20191028 05:25:07.514" starttime="20191028 05:25:07.513"></status>
</kw>
<status status="PASS" endtime="20191028 05:25:07.514" starttime="20191028 05:25:01.981"></status>
</kw>
<kw name="Execute AWSS3APICli and checkrc" library="commonawslib">
<arguments>
<arg>copy-object --bucket dfdfdfdfdfnonexistent --key copyobject/f1 --copy-source ${BUCKET}/copyobject/f1</arg>
<arg>255</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Execute and checkrc" library="commonlib">
<arguments>
<arg>aws s3api --endpoint-url ${ENDPOINT_URL} ${command}</arg>
<arg>${expected_error_code}</arg>
</arguments>
<assign>
<var>${output}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:25:07.519" level="INFO">Running command 'aws s3api --endpoint-url http://s3g:9878 copy-object --bucket dfdfdfdfdfnonexistent --key copyobject/f1 --copy-source bucket-24669/copyobject/f1 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:25:12.275" level="INFO">${rc} = 255</msg>
<msg timestamp="20191028 05:25:12.275" level="INFO">${output} = 
An error occurred (500) when calling the CopyObject operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191028 05:25:12.275" starttime="20191028 05:25:07.517"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:25:12.277" level="INFO">
An error occurred (500) when calling the CopyObject operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191028 05:25:12.278" starttime="20191028 05:25:12.276"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
</arguments>
<msg timestamp="20191028 05:25:12.279" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:25:12.279" starttime="20191028 05:25:12.278"></status>
</kw>
<msg timestamp="20191028 05:25:12.280" level="INFO">${output} = 
An error occurred (500) when calling the CopyObject operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191028 05:25:12.280" starttime="20191028 05:25:07.516"></status>
</kw>
<msg timestamp="20191028 05:25:12.281" level="INFO">${result} = 
An error occurred (500) when calling the CopyObject operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191028 05:25:12.281" starttime="20191028 05:25:07.514"></status>
</kw>
<kw name="Should Contain" library="BuiltIn">
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<arguments>
<arg>${result}</arg>
<arg>NoSuchBucket</arg>
</arguments>
<msg timestamp="20191028 05:25:12.282" level="FAIL">'
An error occurred (500) when calling the CopyObject operation (reached max retries: 4): Internal Server Error' does not contain 'NoSuchBucket'</msg>
<status status="FAIL" endtime="20191028 05:25:12.283" starttime="20191028 05:25:12.281"></status>
</kw>
<status status="FAIL" endtime="20191028 05:25:12.283" critical="yes" starttime="20191028 05:25:01.980">'
An error occurred (500) when calling the CopyObject operation (reached max retries: 4): Internal Server Error' does not contain 'NoSuchBucket'</status>
</test>
<test id="s1-s6-t3" name="Copy Object Where both source and dest are same with change to storageclass">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:25:12.292" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:25:12.301" level="INFO">${rc} = 1</msg>
<msg timestamp="20191028 05:25:12.301" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191028 05:25:12.301" starttime="20191028 05:25:12.289"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191028 05:25:12.303" starttime="20191028 05:25:12.302"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:25:12.306" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:25:12.501" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:25:12.501" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191028 05:25:12.501" starttime="20191028 05:25:12.303"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:25:12.507" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:25:12.973" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:25:12.973" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: d2lzkl7pfhq30w.cloudfront.net
 * extras: mirrors.xtom.com
 * updates: mirro...</msg>
<status status="PASS" endtime="20191028 05:25:12.973" starttime="20191028 05:25:12.505"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:25:12.975" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: d2lzkl7pfhq30w.cloudfront.net
 * extras: mirrors.xtom.com
 * updates: mirror.fileplanet.com
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191028 05:25:12.975" starttime="20191028 05:25:12.974"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:25:12.976" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:25:12.977" starttime="20191028 05:25:12.976"></status>
</kw>
<status status="PASS" endtime="20191028 05:25:12.977" starttime="20191028 05:25:12.504"></status>
</kw>
<status status="PASS" endtime="20191028 05:25:12.977" starttime="20191028 05:25:12.504"></status>
</kw>
<status status="PASS" endtime="20191028 05:25:12.978" starttime="20191028 05:25:12.502"></status>
</kw>
<status status="PASS" endtime="20191028 05:25:12.978" starttime="20191028 05:25:12.288"></status>
</kw>
<status status="PASS" endtime="20191028 05:25:12.978" starttime="20191028 05:25:12.287"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:25:12.986" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:25:12.993" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:25:12.993" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191028 05:25:12.993" starttime="20191028 05:25:12.983"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:25:12.995" level="INFO">s3g</msg>
<status status="PASS" endtime="20191028 05:25:12.995" starttime="20191028 05:25:12.994"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:25:12.996" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:25:12.996" starttime="20191028 05:25:12.995"></status>
</kw>
<msg timestamp="20191028 05:25:12.997" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191028 05:25:12.997" starttime="20191028 05:25:12.982"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191028 05:25:12.998" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191028 05:25:12.999" starttime="20191028 05:25:12.997"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:25:13.003" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:25:13.024" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:25:13.024" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:25:13.024" starttime="20191028 05:25:13.001"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:25:13.026" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:25:13.026" starttime="20191028 05:25:13.025"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:25:13.027" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:25:13.027" starttime="20191028 05:25:13.026"></status>
</kw>
<status status="PASS" endtime="20191028 05:25:13.028" starttime="20191028 05:25:13.000"></status>
</kw>
<status status="PASS" endtime="20191028 05:25:13.028" starttime="20191028 05:25:12.999"></status>
</kw>
<status status="PASS" endtime="20191028 05:25:13.028" starttime="20191028 05:25:12.982"></status>
</kw>
<status status="PASS" endtime="20191028 05:25:13.029" starttime="20191028 05:25:12.980"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:25:13.034" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:25:15.924" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:25:15.924" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191028 05:25:15.924" starttime="20191028 05:25:13.032"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:25:15.926" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
awsAccessKey=testuser/s3g@EXAMPLE.COM
awsSecret=3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a</msg>
<status status="PASS" endtime="20191028 05:25:15.927" starttime="20191028 05:25:15.925"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:25:15.928" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:25:15.928" starttime="20191028 05:25:15.927"></status>
</kw>
<msg timestamp="20191028 05:25:15.928" level="INFO">${result} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191028 05:25:15.929" starttime="20191028 05:25:13.031"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsAccessKey=).*</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191028 05:25:15.930" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191028 05:25:15.930" starttime="20191028 05:25:15.929"></status>
</kw>
<kw name="Get Variable Value" library="BuiltIn">
<doc>Returns variable value or ``default`` if the variable does not exist.</doc>
<arguments>
<arg>${accessKey}</arg>
<arg>sdsdasaasdasd</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191028 05:25:15.931" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191028 05:25:15.932" starttime="20191028 05:25:15.930"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsSecret=).*</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191028 05:25:15.933" level="INFO">${secret} = [u'3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a']</msg>
<status status="PASS" endtime="20191028 05:25:15.933" starttime="20191028 05:25:15.932"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${accessKey[0]}</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191028 05:25:15.934" level="INFO">${accessKey} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191028 05:25:15.934" starttime="20191028 05:25:15.933"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${secret[0]}</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191028 05:25:15.935" level="INFO">${secret} = 3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a</msg>
<status status="PASS" endtime="20191028 05:25:15.935" starttime="20191028 05:25:15.934"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set default.s3.signature_version s3v4</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:25:15.939" level="INFO">Running command 'aws configure set default.s3.signature_version s3v4 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:25:16.399" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:25:16.399" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:25:16.399" starttime="20191028 05:25:15.937"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:25:16.401" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:25:16.401" starttime="20191028 05:25:16.400"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:25:16.402" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:25:16.402" starttime="20191028 05:25:16.401"></status>
</kw>
<status status="PASS" endtime="20191028 05:25:16.403" starttime="20191028 05:25:15.936"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_access_key_id ${accessKey}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:25:16.407" level="INFO">Running command 'aws configure set aws_access_key_id testuser/s3g@EXAMPLE.COM 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:25:16.891" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:25:16.891" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:25:16.891" starttime="20191028 05:25:16.404"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:25:16.892" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:25:16.892" starttime="20191028 05:25:16.892"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:25:16.893" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:25:16.893" starttime="20191028 05:25:16.893"></status>
</kw>
<status status="PASS" endtime="20191028 05:25:16.894" starttime="20191028 05:25:16.403"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_secret_access_key ${secret}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:25:16.897" level="INFO">Running command 'aws configure set aws_secret_access_key 3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:25:17.391" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:25:17.391" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:25:17.391" starttime="20191028 05:25:16.895"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:25:17.393" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:25:17.393" starttime="20191028 05:25:17.392"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:25:17.395" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:25:17.395" starttime="20191028 05:25:17.394"></status>
</kw>
<status status="PASS" endtime="20191028 05:25:17.395" starttime="20191028 05:25:16.894"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set region us-west-1</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:25:17.399" level="INFO">Running command 'aws configure set region us-west-1 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:25:17.913" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:25:17.914" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:25:17.914" starttime="20191028 05:25:17.397"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:25:17.916" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:25:17.916" starttime="20191028 05:25:17.915"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:25:17.917" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:25:17.917" starttime="20191028 05:25:17.916"></status>
</kw>
<status status="PASS" endtime="20191028 05:25:17.918" starttime="20191028 05:25:17.396"></status>
</kw>
<status status="PASS" endtime="20191028 05:25:17.918" starttime="20191028 05:25:13.030"></status>
</kw>
<status status="PASS" endtime="20191028 05:25:17.918" starttime="20191028 05:25:13.029"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'false'</arg>
<arg>Setup dummy credentials for S3</arg>
</arguments>
<status status="PASS" endtime="20191028 05:25:17.919" starttime="20191028 05:25:17.919"></status>
</kw>
<status status="PASS" endtime="20191028 05:25:17.920" starttime="20191028 05:25:12.980"></status>
</kw>
<status status="PASS" endtime="20191028 05:25:17.920" starttime="20191028 05:25:12.979"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${BUCKET}' == 'generated'</arg>
<arg>Create bucket</arg>
</arguments>
<status status="PASS" endtime="20191028 05:25:17.921" starttime="20191028 05:25:17.920"></status>
</kw>
<status status="PASS" endtime="20191028 05:25:17.921" starttime="20191028 05:25:12.285"></status>
</kw>
<kw name="Execute AWSS3APICli" library="commonawslib">
<arguments>
<arg>copy-object --storage-class REDUCED_REDUNDANCY --bucket ${DESTBUCKET} --key copyobject/f1 --copy-source ${DESTBUCKET}/copyobject/f1</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws s3api --endpoint-url ${ENDPOINT_URL} ${command}</arg>
</arguments>
<assign>
<var>${output}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:25:17.926" level="INFO">Running command 'aws s3api --endpoint-url http://s3g:9878 copy-object --storage-class REDUCED_REDUNDANCY --bucket generated1 --key copyobject/f1 --copy-source generated1/copyobject/f1 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:25:18.683" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:25:18.683" level="INFO">${output} = {
    "CopyObjectResult": {
        "LastModified": "2019-10-28T05:25:18.561Z", 
        "ETag": "971756c3-e23b-4acf-b2c9-f960ca8b1740"
    }
}</msg>
<status status="PASS" endtime="20191028 05:25:18.683" starttime="20191028 05:25:17.924"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:25:18.686" level="INFO">{
    "CopyObjectResult": {
        "LastModified": "2019-10-28T05:25:18.561Z", 
        "ETag": "971756c3-e23b-4acf-b2c9-f960ca8b1740"
    }
}</msg>
<status status="PASS" endtime="20191028 05:25:18.686" starttime="20191028 05:25:18.684"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:25:18.687" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:25:18.687" starttime="20191028 05:25:18.686"></status>
</kw>
<msg timestamp="20191028 05:25:18.688" level="INFO">${output} = {
    "CopyObjectResult": {
        "LastModified": "2019-10-28T05:25:18.561Z", 
        "ETag": "971756c3-e23b-4acf-b2c9-f960ca8b1740"
    }
}</msg>
<status status="PASS" endtime="20191028 05:25:18.688" starttime="20191028 05:25:17.923"></status>
</kw>
<msg timestamp="20191028 05:25:18.688" level="INFO">${result} = {
    "CopyObjectResult": {
        "LastModified": "2019-10-28T05:25:18.561Z", 
        "ETag": "971756c3-e23b-4acf-b2c9-f960ca8b1740"
    }
}</msg>
<status status="PASS" endtime="20191028 05:25:18.689" starttime="20191028 05:25:17.922"></status>
</kw>
<kw name="Should Contain" library="BuiltIn">
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<arguments>
<arg>${result}</arg>
<arg>ETag</arg>
</arguments>
<status status="PASS" endtime="20191028 05:25:18.690" starttime="20191028 05:25:18.689"></status>
</kw>
<status status="PASS" endtime="20191028 05:25:18.690" critical="yes" starttime="20191028 05:25:12.284"></status>
</test>
<test id="s1-s6-t4" name="Copy Object Where Key not available">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:25:18.697" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:25:18.704" level="INFO">${rc} = 1</msg>
<msg timestamp="20191028 05:25:18.704" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191028 05:25:18.705" starttime="20191028 05:25:18.694"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191028 05:25:18.707" starttime="20191028 05:25:18.705"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:25:18.709" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:25:18.894" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:25:18.894" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191028 05:25:18.894" starttime="20191028 05:25:18.707"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:25:18.900" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:25:19.364" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:25:19.365" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: d2lzkl7pfhq30w.cloudfront.net
 * extras: mirrors.xtom.com
 * updates: mirro...</msg>
<status status="PASS" endtime="20191028 05:25:19.365" starttime="20191028 05:25:18.898"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:25:19.366" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: d2lzkl7pfhq30w.cloudfront.net
 * extras: mirrors.xtom.com
 * updates: mirror.fileplanet.com
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191028 05:25:19.366" starttime="20191028 05:25:19.365"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:25:19.368" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:25:19.368" starttime="20191028 05:25:19.367"></status>
</kw>
<status status="PASS" endtime="20191028 05:25:19.368" starttime="20191028 05:25:18.897"></status>
</kw>
<status status="PASS" endtime="20191028 05:25:19.369" starttime="20191028 05:25:18.896"></status>
</kw>
<status status="PASS" endtime="20191028 05:25:19.369" starttime="20191028 05:25:18.895"></status>
</kw>
<status status="PASS" endtime="20191028 05:25:19.369" starttime="20191028 05:25:18.694"></status>
</kw>
<status status="PASS" endtime="20191028 05:25:19.369" starttime="20191028 05:25:18.693"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:25:19.377" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:25:19.384" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:25:19.385" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191028 05:25:19.385" starttime="20191028 05:25:19.375"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:25:19.387" level="INFO">s3g</msg>
<status status="PASS" endtime="20191028 05:25:19.388" starttime="20191028 05:25:19.386"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:25:19.389" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:25:19.389" starttime="20191028 05:25:19.388"></status>
</kw>
<msg timestamp="20191028 05:25:19.390" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191028 05:25:19.390" starttime="20191028 05:25:19.373"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191028 05:25:19.392" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191028 05:25:19.392" starttime="20191028 05:25:19.390"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:25:19.397" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:25:19.412" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:25:19.412" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:25:19.412" starttime="20191028 05:25:19.395"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:25:19.414" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:25:19.414" starttime="20191028 05:25:19.413"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:25:19.415" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:25:19.415" starttime="20191028 05:25:19.414"></status>
</kw>
<status status="PASS" endtime="20191028 05:25:19.416" starttime="20191028 05:25:19.393"></status>
</kw>
<status status="PASS" endtime="20191028 05:25:19.416" starttime="20191028 05:25:19.392"></status>
</kw>
<status status="PASS" endtime="20191028 05:25:19.416" starttime="20191028 05:25:19.372"></status>
</kw>
<status status="PASS" endtime="20191028 05:25:19.416" starttime="20191028 05:25:19.371"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:25:19.421" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:25:22.059" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:25:22.059" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191028 05:25:22.059" starttime="20191028 05:25:19.419"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:25:22.061" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
awsAccessKey=testuser/s3g@EXAMPLE.COM
awsSecret=3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a</msg>
<status status="PASS" endtime="20191028 05:25:22.061" starttime="20191028 05:25:22.060"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:25:22.062" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:25:22.063" starttime="20191028 05:25:22.061"></status>
</kw>
<msg timestamp="20191028 05:25:22.063" level="INFO">${result} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191028 05:25:22.063" starttime="20191028 05:25:19.418"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsAccessKey=).*</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191028 05:25:22.065" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191028 05:25:22.065" starttime="20191028 05:25:22.064"></status>
</kw>
<kw name="Get Variable Value" library="BuiltIn">
<doc>Returns variable value or ``default`` if the variable does not exist.</doc>
<arguments>
<arg>${accessKey}</arg>
<arg>sdsdasaasdasd</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191028 05:25:22.066" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191028 05:25:22.066" starttime="20191028 05:25:22.065"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsSecret=).*</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191028 05:25:22.067" level="INFO">${secret} = [u'3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a']</msg>
<status status="PASS" endtime="20191028 05:25:22.068" starttime="20191028 05:25:22.067"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${accessKey[0]}</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191028 05:25:22.069" level="INFO">${accessKey} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191028 05:25:22.069" starttime="20191028 05:25:22.068"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${secret[0]}</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191028 05:25:22.070" level="INFO">${secret} = 3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a</msg>
<status status="PASS" endtime="20191028 05:25:22.070" starttime="20191028 05:25:22.069"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set default.s3.signature_version s3v4</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:25:22.074" level="INFO">Running command 'aws configure set default.s3.signature_version s3v4 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:25:22.537" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:25:22.537" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:25:22.537" starttime="20191028 05:25:22.072"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:25:22.540" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:25:22.540" starttime="20191028 05:25:22.538"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:25:22.541" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:25:22.541" starttime="20191028 05:25:22.540"></status>
</kw>
<status status="PASS" endtime="20191028 05:25:22.542" starttime="20191028 05:25:22.071"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_access_key_id ${accessKey}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:25:22.546" level="INFO">Running command 'aws configure set aws_access_key_id testuser/s3g@EXAMPLE.COM 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:25:22.997" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:25:22.997" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:25:22.997" starttime="20191028 05:25:22.543"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:25:22.999" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:25:22.999" starttime="20191028 05:25:22.998"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:25:23.000" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:25:23.001" starttime="20191028 05:25:23.000"></status>
</kw>
<status status="PASS" endtime="20191028 05:25:23.001" starttime="20191028 05:25:22.542"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_secret_access_key ${secret}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:25:23.006" level="INFO">Running command 'aws configure set aws_secret_access_key 3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:25:23.456" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:25:23.456" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:25:23.456" starttime="20191028 05:25:23.002"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:25:23.458" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:25:23.459" starttime="20191028 05:25:23.457"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:25:23.460" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:25:23.460" starttime="20191028 05:25:23.459"></status>
</kw>
<status status="PASS" endtime="20191028 05:25:23.461" starttime="20191028 05:25:23.001"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set region us-west-1</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:25:23.465" level="INFO">Running command 'aws configure set region us-west-1 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:25:23.920" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:25:23.920" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:25:23.920" starttime="20191028 05:25:23.462"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:25:23.922" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:25:23.922" starttime="20191028 05:25:23.921"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:25:23.924" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:25:23.924" starttime="20191028 05:25:23.923"></status>
</kw>
<status status="PASS" endtime="20191028 05:25:23.924" starttime="20191028 05:25:23.461"></status>
</kw>
<status status="PASS" endtime="20191028 05:25:23.925" starttime="20191028 05:25:19.417"></status>
</kw>
<status status="PASS" endtime="20191028 05:25:23.925" starttime="20191028 05:25:19.416"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'false'</arg>
<arg>Setup dummy credentials for S3</arg>
</arguments>
<status status="PASS" endtime="20191028 05:25:23.926" starttime="20191028 05:25:23.925"></status>
</kw>
<status status="PASS" endtime="20191028 05:25:23.927" starttime="20191028 05:25:19.371"></status>
</kw>
<status status="PASS" endtime="20191028 05:25:23.927" starttime="20191028 05:25:19.370"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${BUCKET}' == 'generated'</arg>
<arg>Create bucket</arg>
</arguments>
<status status="PASS" endtime="20191028 05:25:23.928" starttime="20191028 05:25:23.927"></status>
</kw>
<status status="PASS" endtime="20191028 05:25:23.928" starttime="20191028 05:25:18.692"></status>
</kw>
<kw name="Execute AWSS3APICli and checkrc" library="commonawslib">
<arguments>
<arg>copy-object --bucket ${DESTBUCKET} --key copyobject/f1 --copy-source ${BUCKET}/nonnonexistentkey</arg>
<arg>255</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Execute and checkrc" library="commonlib">
<arguments>
<arg>aws s3api --endpoint-url ${ENDPOINT_URL} ${command}</arg>
<arg>${expected_error_code}</arg>
</arguments>
<assign>
<var>${output}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:25:23.933" level="INFO">Running command 'aws s3api --endpoint-url http://s3g:9878 copy-object --bucket generated1 --key copyobject/f1 --copy-source bucket-24669/nonnonexistentkey 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:25:32.727" level="INFO">${rc} = 255</msg>
<msg timestamp="20191028 05:25:32.727" level="INFO">${output} = 
An error occurred (500) when calling the CopyObject operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191028 05:25:32.728" starttime="20191028 05:25:23.931"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:25:32.730" level="INFO">
An error occurred (500) when calling the CopyObject operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191028 05:25:32.730" starttime="20191028 05:25:32.728"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
</arguments>
<msg timestamp="20191028 05:25:32.731" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:25:32.731" starttime="20191028 05:25:32.730"></status>
</kw>
<msg timestamp="20191028 05:25:32.732" level="INFO">${output} = 
An error occurred (500) when calling the CopyObject operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191028 05:25:32.732" starttime="20191028 05:25:23.930"></status>
</kw>
<msg timestamp="20191028 05:25:32.733" level="INFO">${result} = 
An error occurred (500) when calling the CopyObject operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191028 05:25:32.733" starttime="20191028 05:25:23.929"></status>
</kw>
<kw name="Should Contain" library="BuiltIn">
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<arguments>
<arg>${result}</arg>
<arg>NoSuchKey</arg>
</arguments>
<msg timestamp="20191028 05:25:32.734" level="FAIL">'
An error occurred (500) when calling the CopyObject operation (reached max retries: 4): Internal Server Error' does not contain 'NoSuchKey'</msg>
<status status="FAIL" endtime="20191028 05:25:32.734" starttime="20191028 05:25:32.733"></status>
</kw>
<status status="FAIL" endtime="20191028 05:25:32.735" critical="yes" starttime="20191028 05:25:18.691">'
An error occurred (500) when calling the CopyObject operation (reached max retries: 4): Internal Server Error' does not contain 'NoSuchKey'</status>
</test>
<doc>S3 gateway test with aws cli</doc>
<status status="FAIL" endtime="20191028 05:25:32.737" starttime="20191028 05:24:47.826"></status>
</suite>
<suite source="/opt/hadoop/smoketest/s3/objectdelete.robot" id="s1-s7" name="Objectdelete">
<test id="s1-s7-t1" name="Delete file with s3api">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:25:32.781" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:25:32.788" level="INFO">${rc} = 1</msg>
<msg timestamp="20191028 05:25:32.788" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191028 05:25:32.788" starttime="20191028 05:25:32.778"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191028 05:25:32.790" starttime="20191028 05:25:32.789"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:25:32.792" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:25:32.971" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:25:32.972" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191028 05:25:32.972" starttime="20191028 05:25:32.790"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:25:32.979" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:25:33.507" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:25:33.507" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: d2lzkl7pfhq30w.cloudfront.net
 * extras: mirrors.xtom.com
 * updates: mirro...</msg>
<status status="PASS" endtime="20191028 05:25:33.508" starttime="20191028 05:25:32.976"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:25:33.510" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: d2lzkl7pfhq30w.cloudfront.net
 * extras: mirrors.xtom.com
 * updates: mirror.fileplanet.com
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191028 05:25:33.510" starttime="20191028 05:25:33.509"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:25:33.511" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:25:33.511" starttime="20191028 05:25:33.510"></status>
</kw>
<status status="PASS" endtime="20191028 05:25:33.512" starttime="20191028 05:25:32.975"></status>
</kw>
<status status="PASS" endtime="20191028 05:25:33.512" starttime="20191028 05:25:32.974"></status>
</kw>
<status status="PASS" endtime="20191028 05:25:33.513" starttime="20191028 05:25:32.973"></status>
</kw>
<status status="PASS" endtime="20191028 05:25:33.513" starttime="20191028 05:25:32.776"></status>
</kw>
<status status="PASS" endtime="20191028 05:25:33.513" starttime="20191028 05:25:32.775"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:25:33.521" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:25:33.528" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:25:33.528" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191028 05:25:33.528" starttime="20191028 05:25:33.518"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:25:33.530" level="INFO">s3g</msg>
<status status="PASS" endtime="20191028 05:25:33.530" starttime="20191028 05:25:33.529"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:25:33.531" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:25:33.532" starttime="20191028 05:25:33.531"></status>
</kw>
<msg timestamp="20191028 05:25:33.532" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191028 05:25:33.532" starttime="20191028 05:25:33.517"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191028 05:25:33.536" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191028 05:25:33.536" starttime="20191028 05:25:33.533"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:25:33.541" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:25:33.571" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:25:33.571" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:25:33.571" starttime="20191028 05:25:33.539"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:25:33.573" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:25:33.573" starttime="20191028 05:25:33.572"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:25:33.574" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:25:33.574" starttime="20191028 05:25:33.573"></status>
</kw>
<status status="PASS" endtime="20191028 05:25:33.575" starttime="20191028 05:25:33.537"></status>
</kw>
<status status="PASS" endtime="20191028 05:25:33.575" starttime="20191028 05:25:33.536"></status>
</kw>
<status status="PASS" endtime="20191028 05:25:33.575" starttime="20191028 05:25:33.516"></status>
</kw>
<status status="PASS" endtime="20191028 05:25:33.575" starttime="20191028 05:25:33.515"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:25:33.581" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:25:36.246" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:25:36.246" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191028 05:25:36.246" starttime="20191028 05:25:33.578"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:25:36.248" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
awsAccessKey=testuser/s3g@EXAMPLE.COM
awsSecret=3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a</msg>
<status status="PASS" endtime="20191028 05:25:36.249" starttime="20191028 05:25:36.247"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:25:36.251" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:25:36.251" starttime="20191028 05:25:36.249"></status>
</kw>
<msg timestamp="20191028 05:25:36.252" level="INFO">${result} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191028 05:25:36.252" starttime="20191028 05:25:33.577"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsAccessKey=).*</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191028 05:25:36.253" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191028 05:25:36.254" starttime="20191028 05:25:36.252"></status>
</kw>
<kw name="Get Variable Value" library="BuiltIn">
<doc>Returns variable value or ``default`` if the variable does not exist.</doc>
<arguments>
<arg>${accessKey}</arg>
<arg>sdsdasaasdasd</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191028 05:25:36.255" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191028 05:25:36.255" starttime="20191028 05:25:36.254"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsSecret=).*</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191028 05:25:36.256" level="INFO">${secret} = [u'3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a']</msg>
<status status="PASS" endtime="20191028 05:25:36.256" starttime="20191028 05:25:36.256"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${accessKey[0]}</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191028 05:25:36.258" level="INFO">${accessKey} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191028 05:25:36.258" starttime="20191028 05:25:36.257"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${secret[0]}</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191028 05:25:36.259" level="INFO">${secret} = 3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a</msg>
<status status="PASS" endtime="20191028 05:25:36.259" starttime="20191028 05:25:36.258"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set default.s3.signature_version s3v4</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:25:36.263" level="INFO">Running command 'aws configure set default.s3.signature_version s3v4 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:25:36.676" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:25:36.676" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:25:36.676" starttime="20191028 05:25:36.260"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:25:36.678" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:25:36.678" starttime="20191028 05:25:36.677"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:25:36.679" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:25:36.680" starttime="20191028 05:25:36.679"></status>
</kw>
<status status="PASS" endtime="20191028 05:25:36.680" starttime="20191028 05:25:36.260"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_access_key_id ${accessKey}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:25:36.685" level="INFO">Running command 'aws configure set aws_access_key_id testuser/s3g@EXAMPLE.COM 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:25:37.120" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:25:37.120" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:25:37.120" starttime="20191028 05:25:36.682"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:25:37.122" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:25:37.122" starttime="20191028 05:25:37.121"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:25:37.124" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:25:37.124" starttime="20191028 05:25:37.123"></status>
</kw>
<status status="PASS" endtime="20191028 05:25:37.124" starttime="20191028 05:25:36.681"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_secret_access_key ${secret}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:25:37.128" level="INFO">Running command 'aws configure set aws_secret_access_key 3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:25:37.621" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:25:37.621" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:25:37.621" starttime="20191028 05:25:37.126"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:25:37.623" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:25:37.623" starttime="20191028 05:25:37.622"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:25:37.624" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:25:37.625" starttime="20191028 05:25:37.624"></status>
</kw>
<status status="PASS" endtime="20191028 05:25:37.625" starttime="20191028 05:25:37.125"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set region us-west-1</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:25:37.629" level="INFO">Running command 'aws configure set region us-west-1 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:25:38.092" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:25:38.092" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:25:38.092" starttime="20191028 05:25:37.626"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:25:38.094" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:25:38.094" starttime="20191028 05:25:38.093"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:25:38.095" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:25:38.095" starttime="20191028 05:25:38.094"></status>
</kw>
<status status="PASS" endtime="20191028 05:25:38.096" starttime="20191028 05:25:37.626"></status>
</kw>
<status status="PASS" endtime="20191028 05:25:38.096" starttime="20191028 05:25:33.577"></status>
</kw>
<status status="PASS" endtime="20191028 05:25:38.096" starttime="20191028 05:25:33.576"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'false'</arg>
<arg>Setup dummy credentials for S3</arg>
</arguments>
<status status="PASS" endtime="20191028 05:25:38.098" starttime="20191028 05:25:38.097"></status>
</kw>
<status status="PASS" endtime="20191028 05:25:38.098" starttime="20191028 05:25:33.515"></status>
</kw>
<status status="PASS" endtime="20191028 05:25:38.098" starttime="20191028 05:25:33.513"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${BUCKET}' == 'generated'</arg>
<arg>Create bucket</arg>
</arguments>
<kw name="Create bucket" library="commonawslib">
<kw name="Generate Random String" library="String">
<doc>Generates a string with a desired ``length`` from the given ``chars``.</doc>
<arguments>
<arg>5</arg>
<arg>[NUMBERS]</arg>
</arguments>
<assign>
<var>${postfix}</var>
</assign>
<msg timestamp="20191028 05:25:38.102" level="INFO">${postfix} = 30398</msg>
<status status="PASS" endtime="20191028 05:25:38.102" starttime="20191028 05:25:38.101"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${BUCKET}</arg>
<arg>bucket-${postfix}</arg>
</arguments>
<msg timestamp="20191028 05:25:38.103" level="INFO">${BUCKET} = bucket-30398</msg>
<status status="PASS" endtime="20191028 05:25:38.103" starttime="20191028 05:25:38.102"></status>
</kw>
<kw name="Execute AWSS3APICli" library="commonawslib">
<arguments>
<arg>create-bucket --bucket ${BUCKET}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws s3api --endpoint-url ${ENDPOINT_URL} ${command}</arg>
</arguments>
<assign>
<var>${output}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:25:38.108" level="INFO">Running command 'aws s3api --endpoint-url http://s3g:9878 create-bucket --bucket bucket-30398 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:25:48.504" level="INFO">${rc} = 255</msg>
<msg timestamp="20191028 05:25:48.504" level="INFO">${output} = 
An error occurred (500) when calling the CreateBucket operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191028 05:25:48.505" starttime="20191028 05:25:38.106"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:25:48.507" level="INFO">
An error occurred (500) when calling the CreateBucket operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191028 05:25:48.508" starttime="20191028 05:25:48.506"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:25:48.509" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191028 05:25:48.510" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191028 05:25:48.510" starttime="20191028 05:25:48.509"></status>
</kw>
<status status="FAIL" endtime="20191028 05:25:48.511" starttime="20191028 05:25:38.104"></status>
</kw>
<status status="FAIL" endtime="20191028 05:25:48.511" starttime="20191028 05:25:38.104"></status>
</kw>
<status status="FAIL" endtime="20191028 05:25:48.512" starttime="20191028 05:25:38.100"></status>
</kw>
<status status="FAIL" endtime="20191028 05:25:48.512" starttime="20191028 05:25:38.099"></status>
</kw>
<status status="FAIL" endtime="20191028 05:25:48.512" starttime="20191028 05:25:32.774"></status>
</kw>
<status status="FAIL" endtime="20191028 05:25:48.513" critical="yes" starttime="20191028 05:25:32.773">Setup failed:
255 != 0</status>
</test>
<test id="s1-s7-t2" name="Delete file with s3api, file doesn't exist">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:25:48.519" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:25:48.527" level="INFO">${rc} = 1</msg>
<msg timestamp="20191028 05:25:48.527" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191028 05:25:48.527" starttime="20191028 05:25:48.517"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191028 05:25:48.530" starttime="20191028 05:25:48.528"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:25:48.533" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:25:48.722" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:25:48.722" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191028 05:25:48.722" starttime="20191028 05:25:48.530"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:25:48.729" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:25:49.195" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:25:49.195" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: d2lzkl7pfhq30w.cloudfront.net
 * extras: mirrors.xtom.com
 * updates: mirro...</msg>
<status status="PASS" endtime="20191028 05:25:49.196" starttime="20191028 05:25:48.726"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:25:49.197" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: d2lzkl7pfhq30w.cloudfront.net
 * extras: mirrors.xtom.com
 * updates: mirror.fileplanet.com
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191028 05:25:49.198" starttime="20191028 05:25:49.196"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:25:49.199" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:25:49.199" starttime="20191028 05:25:49.198"></status>
</kw>
<status status="PASS" endtime="20191028 05:25:49.200" starttime="20191028 05:25:48.725"></status>
</kw>
<status status="PASS" endtime="20191028 05:25:49.200" starttime="20191028 05:25:48.724"></status>
</kw>
<status status="PASS" endtime="20191028 05:25:49.200" starttime="20191028 05:25:48.723"></status>
</kw>
<status status="PASS" endtime="20191028 05:25:49.200" starttime="20191028 05:25:48.516"></status>
</kw>
<status status="PASS" endtime="20191028 05:25:49.201" starttime="20191028 05:25:48.515"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:25:49.208" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:25:49.214" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:25:49.214" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191028 05:25:49.214" starttime="20191028 05:25:49.206"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:25:49.216" level="INFO">s3g</msg>
<status status="PASS" endtime="20191028 05:25:49.216" starttime="20191028 05:25:49.215"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:25:49.217" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:25:49.217" starttime="20191028 05:25:49.216"></status>
</kw>
<msg timestamp="20191028 05:25:49.218" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191028 05:25:49.218" starttime="20191028 05:25:49.205"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191028 05:25:49.219" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191028 05:25:49.220" starttime="20191028 05:25:49.218"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:25:49.225" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:25:49.265" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:25:49.265" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:25:49.265" starttime="20191028 05:25:49.222"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:25:49.267" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:25:49.267" starttime="20191028 05:25:49.266"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:25:49.268" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:25:49.268" starttime="20191028 05:25:49.267"></status>
</kw>
<status status="PASS" endtime="20191028 05:25:49.269" starttime="20191028 05:25:49.221"></status>
</kw>
<status status="PASS" endtime="20191028 05:25:49.269" starttime="20191028 05:25:49.220"></status>
</kw>
<status status="PASS" endtime="20191028 05:25:49.269" starttime="20191028 05:25:49.204"></status>
</kw>
<status status="PASS" endtime="20191028 05:25:49.270" starttime="20191028 05:25:49.203"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:25:49.275" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:25:52.091" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:25:52.091" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191028 05:25:52.091" starttime="20191028 05:25:49.273"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:25:52.093" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
awsAccessKey=testuser/s3g@EXAMPLE.COM
awsSecret=3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a</msg>
<status status="PASS" endtime="20191028 05:25:52.093" starttime="20191028 05:25:52.092"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:25:52.094" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:25:52.094" starttime="20191028 05:25:52.093"></status>
</kw>
<msg timestamp="20191028 05:25:52.094" level="INFO">${result} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191028 05:25:52.095" starttime="20191028 05:25:49.272"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsAccessKey=).*</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191028 05:25:52.096" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191028 05:25:52.096" starttime="20191028 05:25:52.095"></status>
</kw>
<kw name="Get Variable Value" library="BuiltIn">
<doc>Returns variable value or ``default`` if the variable does not exist.</doc>
<arguments>
<arg>${accessKey}</arg>
<arg>sdsdasaasdasd</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191028 05:25:52.097" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191028 05:25:52.097" starttime="20191028 05:25:52.096"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsSecret=).*</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191028 05:25:52.098" level="INFO">${secret} = [u'3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a']</msg>
<status status="PASS" endtime="20191028 05:25:52.098" starttime="20191028 05:25:52.097"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${accessKey[0]}</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191028 05:25:52.099" level="INFO">${accessKey} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191028 05:25:52.099" starttime="20191028 05:25:52.098"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${secret[0]}</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191028 05:25:52.100" level="INFO">${secret} = 3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a</msg>
<status status="PASS" endtime="20191028 05:25:52.100" starttime="20191028 05:25:52.099"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set default.s3.signature_version s3v4</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:25:52.103" level="INFO">Running command 'aws configure set default.s3.signature_version s3v4 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:25:52.582" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:25:52.582" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:25:52.582" starttime="20191028 05:25:52.101"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:25:52.584" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:25:52.584" starttime="20191028 05:25:52.583"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:25:52.585" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:25:52.586" starttime="20191028 05:25:52.585"></status>
</kw>
<status status="PASS" endtime="20191028 05:25:52.586" starttime="20191028 05:25:52.100"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_access_key_id ${accessKey}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:25:52.590" level="INFO">Running command 'aws configure set aws_access_key_id testuser/s3g@EXAMPLE.COM 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:25:53.080" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:25:53.080" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:25:53.080" starttime="20191028 05:25:52.588"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:25:53.082" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:25:53.082" starttime="20191028 05:25:53.081"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:25:53.083" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:25:53.084" starttime="20191028 05:25:53.083"></status>
</kw>
<status status="PASS" endtime="20191028 05:25:53.084" starttime="20191028 05:25:52.587"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_secret_access_key ${secret}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:25:53.088" level="INFO">Running command 'aws configure set aws_secret_access_key 3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:25:53.599" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:25:53.599" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:25:53.599" starttime="20191028 05:25:53.086"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:25:53.601" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:25:53.601" starttime="20191028 05:25:53.600"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:25:53.603" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:25:53.603" starttime="20191028 05:25:53.602"></status>
</kw>
<status status="PASS" endtime="20191028 05:25:53.603" starttime="20191028 05:25:53.084"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set region us-west-1</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:25:53.607" level="INFO">Running command 'aws configure set region us-west-1 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:25:54.061" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:25:54.061" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:25:54.061" starttime="20191028 05:25:53.605"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:25:54.063" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:25:54.064" starttime="20191028 05:25:54.062"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:25:54.065" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:25:54.066" starttime="20191028 05:25:54.064"></status>
</kw>
<status status="PASS" endtime="20191028 05:25:54.067" starttime="20191028 05:25:53.604"></status>
</kw>
<status status="PASS" endtime="20191028 05:25:54.067" starttime="20191028 05:25:49.271"></status>
</kw>
<status status="PASS" endtime="20191028 05:25:54.067" starttime="20191028 05:25:49.270"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'false'</arg>
<arg>Setup dummy credentials for S3</arg>
</arguments>
<status status="PASS" endtime="20191028 05:25:54.068" starttime="20191028 05:25:54.068"></status>
</kw>
<status status="PASS" endtime="20191028 05:25:54.069" starttime="20191028 05:25:49.202"></status>
</kw>
<status status="PASS" endtime="20191028 05:25:54.069" starttime="20191028 05:25:49.201"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${BUCKET}' == 'generated'</arg>
<arg>Create bucket</arg>
</arguments>
<status status="PASS" endtime="20191028 05:25:54.070" starttime="20191028 05:25:54.069"></status>
</kw>
<status status="PASS" endtime="20191028 05:25:54.070" starttime="20191028 05:25:48.515"></status>
</kw>
<kw name="Execute AWSS3Cli" library="commonawslib">
<arguments>
<arg>ls s3://${BUCKET}/</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws s3 --endpoint-url ${ENDPOINT_URL} ${command}</arg>
</arguments>
<assign>
<var>${output}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:25:54.076" level="INFO">Running command 'aws s3 --endpoint-url http://s3g:9878 ls s3://bucket-30398/ 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:26:01.280" level="INFO">${rc} = 255</msg>
<msg timestamp="20191028 05:26:01.281" level="INFO">${output} = 
An error occurred (500) when calling the ListObjects operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191028 05:26:01.281" starttime="20191028 05:25:54.073"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:26:01.283" level="INFO">
An error occurred (500) when calling the ListObjects operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191028 05:26:01.283" starttime="20191028 05:26:01.282"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:26:01.284" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191028 05:26:01.285" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191028 05:26:01.285" starttime="20191028 05:26:01.283"></status>
</kw>
<status status="FAIL" endtime="20191028 05:26:01.286" starttime="20191028 05:25:54.072"></status>
</kw>
<status status="FAIL" endtime="20191028 05:26:01.286" starttime="20191028 05:25:54.071"></status>
</kw>
<status status="FAIL" endtime="20191028 05:26:01.287" critical="yes" starttime="20191028 05:25:48.513">255 != 0</status>
</test>
<test id="s1-s7-t3" name="Delete dir with s3api">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:26:01.293" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:26:01.301" level="INFO">${rc} = 1</msg>
<msg timestamp="20191028 05:26:01.301" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191028 05:26:01.302" starttime="20191028 05:26:01.291"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191028 05:26:01.304" starttime="20191028 05:26:01.303"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:26:01.307" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:26:01.520" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:26:01.520" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191028 05:26:01.520" starttime="20191028 05:26:01.304"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:26:01.527" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:26:02.036" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:26:02.036" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: d2lzkl7pfhq30w.cloudfront.net
 * extras: mirrors.xtom.com
 * updates: mirro...</msg>
<status status="PASS" endtime="20191028 05:26:02.036" starttime="20191028 05:26:01.524"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:26:02.037" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: d2lzkl7pfhq30w.cloudfront.net
 * extras: mirrors.xtom.com
 * updates: mirror.fileplanet.com
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191028 05:26:02.037" starttime="20191028 05:26:02.037"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:26:02.038" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:26:02.038" starttime="20191028 05:26:02.038"></status>
</kw>
<status status="PASS" endtime="20191028 05:26:02.039" starttime="20191028 05:26:01.523"></status>
</kw>
<status status="PASS" endtime="20191028 05:26:02.039" starttime="20191028 05:26:01.523"></status>
</kw>
<status status="PASS" endtime="20191028 05:26:02.039" starttime="20191028 05:26:01.521"></status>
</kw>
<status status="PASS" endtime="20191028 05:26:02.039" starttime="20191028 05:26:01.290"></status>
</kw>
<status status="PASS" endtime="20191028 05:26:02.039" starttime="20191028 05:26:01.290"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:26:02.044" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:26:02.051" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:26:02.052" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191028 05:26:02.052" starttime="20191028 05:26:02.042"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:26:02.054" level="INFO">s3g</msg>
<status status="PASS" endtime="20191028 05:26:02.054" starttime="20191028 05:26:02.053"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:26:02.056" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:26:02.056" starttime="20191028 05:26:02.054"></status>
</kw>
<msg timestamp="20191028 05:26:02.057" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191028 05:26:02.057" starttime="20191028 05:26:02.042"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191028 05:26:02.058" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191028 05:26:02.058" starttime="20191028 05:26:02.057"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:26:02.063" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:26:02.082" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:26:02.082" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:26:02.082" starttime="20191028 05:26:02.061"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:26:02.084" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:26:02.084" starttime="20191028 05:26:02.083"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:26:02.085" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:26:02.085" starttime="20191028 05:26:02.084"></status>
</kw>
<status status="PASS" endtime="20191028 05:26:02.086" starttime="20191028 05:26:02.060"></status>
</kw>
<status status="PASS" endtime="20191028 05:26:02.086" starttime="20191028 05:26:02.059"></status>
</kw>
<status status="PASS" endtime="20191028 05:26:02.086" starttime="20191028 05:26:02.041"></status>
</kw>
<status status="PASS" endtime="20191028 05:26:02.086" starttime="20191028 05:26:02.041"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:26:02.091" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:26:04.822" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:26:04.822" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191028 05:26:04.822" starttime="20191028 05:26:02.089"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:26:04.824" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
awsAccessKey=testuser/s3g@EXAMPLE.COM
awsSecret=3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a</msg>
<status status="PASS" endtime="20191028 05:26:04.825" starttime="20191028 05:26:04.823"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:26:04.825" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:26:04.826" starttime="20191028 05:26:04.825"></status>
</kw>
<msg timestamp="20191028 05:26:04.826" level="INFO">${result} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191028 05:26:04.826" starttime="20191028 05:26:02.088"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsAccessKey=).*</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191028 05:26:04.828" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191028 05:26:04.828" starttime="20191028 05:26:04.827"></status>
</kw>
<kw name="Get Variable Value" library="BuiltIn">
<doc>Returns variable value or ``default`` if the variable does not exist.</doc>
<arguments>
<arg>${accessKey}</arg>
<arg>sdsdasaasdasd</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191028 05:26:04.829" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191028 05:26:04.829" starttime="20191028 05:26:04.828"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsSecret=).*</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191028 05:26:04.830" level="INFO">${secret} = [u'3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a']</msg>
<status status="PASS" endtime="20191028 05:26:04.830" starttime="20191028 05:26:04.829"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${accessKey[0]}</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191028 05:26:04.831" level="INFO">${accessKey} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191028 05:26:04.831" starttime="20191028 05:26:04.830"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${secret[0]}</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191028 05:26:04.833" level="INFO">${secret} = 3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a</msg>
<status status="PASS" endtime="20191028 05:26:04.833" starttime="20191028 05:26:04.832"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set default.s3.signature_version s3v4</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:26:04.836" level="INFO">Running command 'aws configure set default.s3.signature_version s3v4 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:26:05.269" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:26:05.269" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:26:05.270" starttime="20191028 05:26:04.834"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:26:05.271" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:26:05.272" starttime="20191028 05:26:05.270"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:26:05.273" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:26:05.273" starttime="20191028 05:26:05.272"></status>
</kw>
<status status="PASS" endtime="20191028 05:26:05.274" starttime="20191028 05:26:04.833"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_access_key_id ${accessKey}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:26:05.278" level="INFO">Running command 'aws configure set aws_access_key_id testuser/s3g@EXAMPLE.COM 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:26:05.718" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:26:05.718" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:26:05.719" starttime="20191028 05:26:05.275"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:26:05.721" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:26:05.721" starttime="20191028 05:26:05.720"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:26:05.722" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:26:05.722" starttime="20191028 05:26:05.721"></status>
</kw>
<status status="PASS" endtime="20191028 05:26:05.723" starttime="20191028 05:26:05.274"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_secret_access_key ${secret}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:26:05.727" level="INFO">Running command 'aws configure set aws_secret_access_key 3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:26:06.204" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:26:06.204" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:26:06.204" starttime="20191028 05:26:05.724"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:26:06.206" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:26:06.207" starttime="20191028 05:26:06.205"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:26:06.209" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:26:06.209" starttime="20191028 05:26:06.207"></status>
</kw>
<status status="PASS" endtime="20191028 05:26:06.210" starttime="20191028 05:26:05.723"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set region us-west-1</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:26:06.214" level="INFO">Running command 'aws configure set region us-west-1 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:26:06.696" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:26:06.696" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:26:06.696" starttime="20191028 05:26:06.211"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:26:06.698" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:26:06.698" starttime="20191028 05:26:06.697"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:26:06.700" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:26:06.700" starttime="20191028 05:26:06.699"></status>
</kw>
<status status="PASS" endtime="20191028 05:26:06.700" starttime="20191028 05:26:06.210"></status>
</kw>
<status status="PASS" endtime="20191028 05:26:06.701" starttime="20191028 05:26:02.088"></status>
</kw>
<status status="PASS" endtime="20191028 05:26:06.701" starttime="20191028 05:26:02.087"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'false'</arg>
<arg>Setup dummy credentials for S3</arg>
</arguments>
<status status="PASS" endtime="20191028 05:26:06.703" starttime="20191028 05:26:06.702"></status>
</kw>
<status status="PASS" endtime="20191028 05:26:06.703" starttime="20191028 05:26:02.040"></status>
</kw>
<status status="PASS" endtime="20191028 05:26:06.703" starttime="20191028 05:26:02.039"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${BUCKET}' == 'generated'</arg>
<arg>Create bucket</arg>
</arguments>
<status status="PASS" endtime="20191028 05:26:06.704" starttime="20191028 05:26:06.704"></status>
</kw>
<status status="PASS" endtime="20191028 05:26:06.705" starttime="20191028 05:26:01.289"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>date &gt; /tmp/testfile</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:26:06.709" level="INFO">Running command 'date &gt; /tmp/testfile'.</msg>
<msg timestamp="20191028 05:26:06.715" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:26:06.715" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:26:06.715" starttime="20191028 05:26:06.706"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:26:06.717" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:26:06.718" starttime="20191028 05:26:06.716"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:26:06.719" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:26:06.719" starttime="20191028 05:26:06.718"></status>
</kw>
<status status="PASS" endtime="20191028 05:26:06.720" starttime="20191028 05:26:06.705"></status>
</kw>
<kw name="Execute AWSS3Cli" library="commonawslib">
<arguments>
<arg>cp /tmp/testfile s3://${BUCKET}/deletetestapidir/f1</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws s3 --endpoint-url ${ENDPOINT_URL} ${command}</arg>
</arguments>
<assign>
<var>${output}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:26:06.725" level="INFO">Running command 'aws s3 --endpoint-url http://s3g:9878 cp /tmp/testfile s3://bucket-30398/deletetestapidir/f1 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:26:14.390" level="INFO">${rc} = 1</msg>
<msg timestamp="20191028 05:26:14.391" level="INFO">${output} = Completed 29 Bytes/29 Bytes (4 Bytes/s) with 1 file(s) remainingupload failed: ../../tmp/testfile to s3://bucket-30398/deletetestapidir/f1 An error occurred (500) when calling the PutObject operation...</msg>
<status status="PASS" endtime="20191028 05:26:14.391" starttime="20191028 05:26:06.723"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:26:14.393" level="INFO">Completed 29 Bytes/29 Bytes (4 Bytes/s) with 1 file(s) remainingupload failed: ../../tmp/testfile to s3://bucket-30398/deletetestapidir/f1 An error occurred (500) when calling the PutObject operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191028 05:26:14.393" starttime="20191028 05:26:14.392"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:26:14.395" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191028 05:26:14.395" level="FAIL">1 != 0</msg>
<status status="FAIL" endtime="20191028 05:26:14.396" starttime="20191028 05:26:14.394"></status>
</kw>
<status status="FAIL" endtime="20191028 05:26:14.396" starttime="20191028 05:26:06.721"></status>
</kw>
<status status="FAIL" endtime="20191028 05:26:14.396" starttime="20191028 05:26:06.720"></status>
</kw>
<status status="FAIL" endtime="20191028 05:26:14.397" critical="yes" starttime="20191028 05:26:01.287">1 != 0</status>
</test>
<test id="s1-s7-t4" name="Delete file with s3api, file doesn't exist, prefix of a real file">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:26:14.405" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:26:14.413" level="INFO">${rc} = 1</msg>
<msg timestamp="20191028 05:26:14.413" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191028 05:26:14.413" starttime="20191028 05:26:14.403"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191028 05:26:14.415" starttime="20191028 05:26:14.414"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:26:14.418" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:26:14.616" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:26:14.617" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191028 05:26:14.617" starttime="20191028 05:26:14.416"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:26:14.623" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:26:15.122" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:26:15.122" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: d2lzkl7pfhq30w.cloudfront.net
 * extras: mirrors.xtom.com
 * updates: mirro...</msg>
<status status="PASS" endtime="20191028 05:26:15.122" starttime="20191028 05:26:14.621"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:26:15.124" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: d2lzkl7pfhq30w.cloudfront.net
 * extras: mirrors.xtom.com
 * updates: mirror.fileplanet.com
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191028 05:26:15.124" starttime="20191028 05:26:15.123"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:26:15.125" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:26:15.125" starttime="20191028 05:26:15.124"></status>
</kw>
<status status="PASS" endtime="20191028 05:26:15.126" starttime="20191028 05:26:14.620"></status>
</kw>
<status status="PASS" endtime="20191028 05:26:15.126" starttime="20191028 05:26:14.619"></status>
</kw>
<status status="PASS" endtime="20191028 05:26:15.126" starttime="20191028 05:26:14.618"></status>
</kw>
<status status="PASS" endtime="20191028 05:26:15.126" starttime="20191028 05:26:14.402"></status>
</kw>
<status status="PASS" endtime="20191028 05:26:15.126" starttime="20191028 05:26:14.401"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:26:15.134" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:26:15.141" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:26:15.142" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191028 05:26:15.142" starttime="20191028 05:26:15.132"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:26:15.144" level="INFO">s3g</msg>
<status status="PASS" endtime="20191028 05:26:15.144" starttime="20191028 05:26:15.143"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:26:15.145" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:26:15.146" starttime="20191028 05:26:15.144"></status>
</kw>
<msg timestamp="20191028 05:26:15.146" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191028 05:26:15.147" starttime="20191028 05:26:15.131"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191028 05:26:15.148" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191028 05:26:15.148" starttime="20191028 05:26:15.147"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:26:15.154" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:26:15.190" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:26:15.191" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:26:15.191" starttime="20191028 05:26:15.151"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:26:15.192" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:26:15.193" starttime="20191028 05:26:15.192"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:26:15.194" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:26:15.194" starttime="20191028 05:26:15.193"></status>
</kw>
<status status="PASS" endtime="20191028 05:26:15.194" starttime="20191028 05:26:15.150"></status>
</kw>
<status status="PASS" endtime="20191028 05:26:15.194" starttime="20191028 05:26:15.149"></status>
</kw>
<status status="PASS" endtime="20191028 05:26:15.195" starttime="20191028 05:26:15.129"></status>
</kw>
<status status="PASS" endtime="20191028 05:26:15.195" starttime="20191028 05:26:15.129"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:26:15.200" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:26:17.958" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:26:17.959" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191028 05:26:17.959" starttime="20191028 05:26:15.198"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:26:17.961" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
awsAccessKey=testuser/s3g@EXAMPLE.COM
awsSecret=3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a</msg>
<status status="PASS" endtime="20191028 05:26:17.961" starttime="20191028 05:26:17.960"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:26:17.962" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:26:17.962" starttime="20191028 05:26:17.961"></status>
</kw>
<msg timestamp="20191028 05:26:17.963" level="INFO">${result} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191028 05:26:17.963" starttime="20191028 05:26:15.197"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsAccessKey=).*</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191028 05:26:17.964" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191028 05:26:17.964" starttime="20191028 05:26:17.964"></status>
</kw>
<kw name="Get Variable Value" library="BuiltIn">
<doc>Returns variable value or ``default`` if the variable does not exist.</doc>
<arguments>
<arg>${accessKey}</arg>
<arg>sdsdasaasdasd</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191028 05:26:17.966" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191028 05:26:17.966" starttime="20191028 05:26:17.965"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsSecret=).*</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191028 05:26:17.967" level="INFO">${secret} = [u'3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a']</msg>
<status status="PASS" endtime="20191028 05:26:17.967" starttime="20191028 05:26:17.966"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${accessKey[0]}</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191028 05:26:17.968" level="INFO">${accessKey} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191028 05:26:17.968" starttime="20191028 05:26:17.967"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${secret[0]}</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191028 05:26:17.970" level="INFO">${secret} = 3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a</msg>
<status status="PASS" endtime="20191028 05:26:17.970" starttime="20191028 05:26:17.969"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set default.s3.signature_version s3v4</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:26:17.974" level="INFO">Running command 'aws configure set default.s3.signature_version s3v4 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:26:18.444" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:26:18.444" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:26:18.444" starttime="20191028 05:26:17.971"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:26:18.446" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:26:18.446" starttime="20191028 05:26:18.445"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:26:18.448" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:26:18.448" starttime="20191028 05:26:18.447"></status>
</kw>
<status status="PASS" endtime="20191028 05:26:18.448" starttime="20191028 05:26:17.970"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_access_key_id ${accessKey}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:26:18.453" level="INFO">Running command 'aws configure set aws_access_key_id testuser/s3g@EXAMPLE.COM 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:26:18.941" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:26:18.941" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:26:18.942" starttime="20191028 05:26:18.450"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:26:18.944" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:26:18.944" starttime="20191028 05:26:18.943"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:26:18.945" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:26:18.945" starttime="20191028 05:26:18.944"></status>
</kw>
<status status="PASS" endtime="20191028 05:26:18.946" starttime="20191028 05:26:18.449"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_secret_access_key ${secret}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:26:18.951" level="INFO">Running command 'aws configure set aws_secret_access_key 3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:26:19.436" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:26:19.436" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:26:19.436" starttime="20191028 05:26:18.949"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:26:19.438" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:26:19.439" starttime="20191028 05:26:19.437"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:26:19.440" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:26:19.440" starttime="20191028 05:26:19.439"></status>
</kw>
<status status="PASS" endtime="20191028 05:26:19.441" starttime="20191028 05:26:18.946"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set region us-west-1</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:26:19.445" level="INFO">Running command 'aws configure set region us-west-1 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:26:19.926" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:26:19.926" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:26:19.926" starttime="20191028 05:26:19.442"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:26:19.928" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:26:19.929" starttime="20191028 05:26:19.927"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:26:19.930" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:26:19.930" starttime="20191028 05:26:19.929"></status>
</kw>
<status status="PASS" endtime="20191028 05:26:19.931" starttime="20191028 05:26:19.441"></status>
</kw>
<status status="PASS" endtime="20191028 05:26:19.931" starttime="20191028 05:26:15.196"></status>
</kw>
<status status="PASS" endtime="20191028 05:26:19.931" starttime="20191028 05:26:15.195"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'false'</arg>
<arg>Setup dummy credentials for S3</arg>
</arguments>
<status status="PASS" endtime="20191028 05:26:19.933" starttime="20191028 05:26:19.932"></status>
</kw>
<status status="PASS" endtime="20191028 05:26:19.934" starttime="20191028 05:26:15.128"></status>
</kw>
<status status="PASS" endtime="20191028 05:26:19.934" starttime="20191028 05:26:15.127"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${BUCKET}' == 'generated'</arg>
<arg>Create bucket</arg>
</arguments>
<status status="PASS" endtime="20191028 05:26:19.935" starttime="20191028 05:26:19.934"></status>
</kw>
<status status="PASS" endtime="20191028 05:26:19.935" starttime="20191028 05:26:14.400"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>date &gt; /tmp/testfile</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:26:19.940" level="INFO">Running command 'date &gt; /tmp/testfile'.</msg>
<msg timestamp="20191028 05:26:19.948" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:26:19.948" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:26:19.948" starttime="20191028 05:26:19.937"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:26:19.950" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:26:19.950" starttime="20191028 05:26:19.949"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:26:19.951" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:26:19.951" starttime="20191028 05:26:19.950"></status>
</kw>
<status status="PASS" endtime="20191028 05:26:19.952" starttime="20191028 05:26:19.936"></status>
</kw>
<kw name="Execute AWSS3Cli" library="commonawslib">
<arguments>
<arg>cp /tmp/testfile s3://${BUCKET}/deletetestapiprefix/filefile</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws s3 --endpoint-url ${ENDPOINT_URL} ${command}</arg>
</arguments>
<assign>
<var>${output}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:26:19.957" level="INFO">Running command 'aws s3 --endpoint-url http://s3g:9878 cp /tmp/testfile s3://bucket-30398/deletetestapiprefix/filefile 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:26:26.076" level="INFO">${rc} = 1</msg>
<msg timestamp="20191028 05:26:26.076" level="INFO">${output} = Completed 29 Bytes/29 Bytes (5 Bytes/s) with 1 file(s) remainingupload failed: ../../tmp/testfile to s3://bucket-30398/deletetestapiprefix/filefile An error occurred (500) when calling the PutObject ...</msg>
<status status="PASS" endtime="20191028 05:26:26.076" starttime="20191028 05:26:19.954"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:26:26.078" level="INFO">Completed 29 Bytes/29 Bytes (5 Bytes/s) with 1 file(s) remainingupload failed: ../../tmp/testfile to s3://bucket-30398/deletetestapiprefix/filefile An error occurred (500) when calling the PutObject operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191028 05:26:26.078" starttime="20191028 05:26:26.077"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:26:26.079" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191028 05:26:26.079" level="FAIL">1 != 0</msg>
<status status="FAIL" endtime="20191028 05:26:26.080" starttime="20191028 05:26:26.078"></status>
</kw>
<status status="FAIL" endtime="20191028 05:26:26.080" starttime="20191028 05:26:19.953"></status>
</kw>
<status status="FAIL" endtime="20191028 05:26:26.080" starttime="20191028 05:26:19.952"></status>
</kw>
<status status="FAIL" endtime="20191028 05:26:26.081" critical="yes" starttime="20191028 05:26:14.398">1 != 0</status>
</test>
<test id="s1-s7-t5" name="Delete file with s3api, bucket doesn't exist">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:26:26.089" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:26:26.094" level="INFO">${rc} = 1</msg>
<msg timestamp="20191028 05:26:26.094" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191028 05:26:26.094" starttime="20191028 05:26:26.086"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191028 05:26:26.095" starttime="20191028 05:26:26.095"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:26:26.097" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:26:26.292" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:26:26.292" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191028 05:26:26.292" starttime="20191028 05:26:26.096"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:26:26.298" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:26:26.768" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:26:26.768" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: d2lzkl7pfhq30w.cloudfront.net
 * extras: mirrors.xtom.com
 * updates: mirro...</msg>
<status status="PASS" endtime="20191028 05:26:26.768" starttime="20191028 05:26:26.296"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:26:26.770" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: d2lzkl7pfhq30w.cloudfront.net
 * extras: mirrors.xtom.com
 * updates: mirror.fileplanet.com
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191028 05:26:26.770" starttime="20191028 05:26:26.769"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:26:26.772" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:26:26.773" starttime="20191028 05:26:26.771"></status>
</kw>
<status status="PASS" endtime="20191028 05:26:26.773" starttime="20191028 05:26:26.295"></status>
</kw>
<status status="PASS" endtime="20191028 05:26:26.774" starttime="20191028 05:26:26.294"></status>
</kw>
<status status="PASS" endtime="20191028 05:26:26.774" starttime="20191028 05:26:26.293"></status>
</kw>
<status status="PASS" endtime="20191028 05:26:26.774" starttime="20191028 05:26:26.085"></status>
</kw>
<status status="PASS" endtime="20191028 05:26:26.774" starttime="20191028 05:26:26.084"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:26:26.782" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:26:26.789" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:26:26.789" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191028 05:26:26.790" starttime="20191028 05:26:26.779"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:26:26.791" level="INFO">s3g</msg>
<status status="PASS" endtime="20191028 05:26:26.792" starttime="20191028 05:26:26.790"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:26:26.793" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:26:26.793" starttime="20191028 05:26:26.792"></status>
</kw>
<msg timestamp="20191028 05:26:26.794" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191028 05:26:26.794" starttime="20191028 05:26:26.778"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191028 05:26:26.795" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191028 05:26:26.795" starttime="20191028 05:26:26.794"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:26:26.800" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:26:26.815" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:26:26.815" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:26:26.816" starttime="20191028 05:26:26.798"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:26:26.817" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:26:26.817" starttime="20191028 05:26:26.816"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:26:26.818" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:26:26.819" starttime="20191028 05:26:26.818"></status>
</kw>
<status status="PASS" endtime="20191028 05:26:26.819" starttime="20191028 05:26:26.797"></status>
</kw>
<status status="PASS" endtime="20191028 05:26:26.819" starttime="20191028 05:26:26.796"></status>
</kw>
<status status="PASS" endtime="20191028 05:26:26.820" starttime="20191028 05:26:26.778"></status>
</kw>
<status status="PASS" endtime="20191028 05:26:26.820" starttime="20191028 05:26:26.777"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:26:26.825" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:26:29.725" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:26:29.725" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191028 05:26:29.725" starttime="20191028 05:26:26.822"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:26:29.727" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
awsAccessKey=testuser/s3g@EXAMPLE.COM
awsSecret=3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a</msg>
<status status="PASS" endtime="20191028 05:26:29.727" starttime="20191028 05:26:29.726"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:26:29.728" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:26:29.729" starttime="20191028 05:26:29.728"></status>
</kw>
<msg timestamp="20191028 05:26:29.729" level="INFO">${result} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191028 05:26:29.729" starttime="20191028 05:26:26.822"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsAccessKey=).*</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191028 05:26:29.731" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191028 05:26:29.731" starttime="20191028 05:26:29.730"></status>
</kw>
<kw name="Get Variable Value" library="BuiltIn">
<doc>Returns variable value or ``default`` if the variable does not exist.</doc>
<arguments>
<arg>${accessKey}</arg>
<arg>sdsdasaasdasd</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191028 05:26:29.732" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191028 05:26:29.732" starttime="20191028 05:26:29.731"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsSecret=).*</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191028 05:26:29.733" level="INFO">${secret} = [u'3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a']</msg>
<status status="PASS" endtime="20191028 05:26:29.733" starttime="20191028 05:26:29.733"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${accessKey[0]}</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191028 05:26:29.735" level="INFO">${accessKey} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191028 05:26:29.735" starttime="20191028 05:26:29.734"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${secret[0]}</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191028 05:26:29.736" level="INFO">${secret} = 3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a</msg>
<status status="PASS" endtime="20191028 05:26:29.736" starttime="20191028 05:26:29.735"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set default.s3.signature_version s3v4</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:26:29.741" level="INFO">Running command 'aws configure set default.s3.signature_version s3v4 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:26:30.209" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:26:30.209" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:26:30.209" starttime="20191028 05:26:29.737"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:26:30.211" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:26:30.211" starttime="20191028 05:26:30.210"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:26:30.212" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:26:30.213" starttime="20191028 05:26:30.212"></status>
</kw>
<status status="PASS" endtime="20191028 05:26:30.213" starttime="20191028 05:26:29.736"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_access_key_id ${accessKey}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:26:30.217" level="INFO">Running command 'aws configure set aws_access_key_id testuser/s3g@EXAMPLE.COM 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:26:30.659" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:26:30.659" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:26:30.660" starttime="20191028 05:26:30.215"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:26:30.661" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:26:30.661" starttime="20191028 05:26:30.660"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:26:30.662" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:26:30.662" starttime="20191028 05:26:30.661"></status>
</kw>
<status status="PASS" endtime="20191028 05:26:30.663" starttime="20191028 05:26:30.214"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_secret_access_key ${secret}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:26:30.666" level="INFO">Running command 'aws configure set aws_secret_access_key 3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:26:31.118" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:26:31.119" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:26:31.119" starttime="20191028 05:26:30.664"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:26:31.121" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:26:31.121" starttime="20191028 05:26:31.120"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:26:31.122" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:26:31.123" starttime="20191028 05:26:31.121"></status>
</kw>
<status status="PASS" endtime="20191028 05:26:31.123" starttime="20191028 05:26:30.663"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set region us-west-1</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:26:31.127" level="INFO">Running command 'aws configure set region us-west-1 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:26:31.560" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:26:31.560" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:26:31.560" starttime="20191028 05:26:31.125"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:26:31.562" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:26:31.562" starttime="20191028 05:26:31.561"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:26:31.563" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:26:31.564" starttime="20191028 05:26:31.563"></status>
</kw>
<status status="PASS" endtime="20191028 05:26:31.565" starttime="20191028 05:26:31.123"></status>
</kw>
<status status="PASS" endtime="20191028 05:26:31.565" starttime="20191028 05:26:26.821"></status>
</kw>
<status status="PASS" endtime="20191028 05:26:31.565" starttime="20191028 05:26:26.820"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'false'</arg>
<arg>Setup dummy credentials for S3</arg>
</arguments>
<status status="PASS" endtime="20191028 05:26:31.566" starttime="20191028 05:26:31.565"></status>
</kw>
<status status="PASS" endtime="20191028 05:26:31.567" starttime="20191028 05:26:26.776"></status>
</kw>
<status status="PASS" endtime="20191028 05:26:31.567" starttime="20191028 05:26:26.775"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${BUCKET}' == 'generated'</arg>
<arg>Create bucket</arg>
</arguments>
<status status="PASS" endtime="20191028 05:26:31.568" starttime="20191028 05:26:31.567"></status>
</kw>
<status status="PASS" endtime="20191028 05:26:31.568" starttime="20191028 05:26:26.083"></status>
</kw>
<kw name="Execute AWSS3APICli and checkrc" library="commonawslib">
<arguments>
<arg>delete-object --bucket ${BUCKET}-nosuchbucket --key f1</arg>
<arg>255</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Execute and checkrc" library="commonlib">
<arguments>
<arg>aws s3api --endpoint-url ${ENDPOINT_URL} ${command}</arg>
<arg>${expected_error_code}</arg>
</arguments>
<assign>
<var>${output}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:26:31.573" level="INFO">Running command 'aws s3api --endpoint-url http://s3g:9878 delete-object --bucket bucket-30398-nosuchbucket --key f1 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:26:32.226" level="INFO">${rc} = 255</msg>
<msg timestamp="20191028 05:26:32.226" level="INFO">${output} = 
An error occurred (NoSuchBucket) when calling the DeleteObject operation: The specified bucket does not exist</msg>
<status status="PASS" endtime="20191028 05:26:32.226" starttime="20191028 05:26:31.571"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:26:32.228" level="INFO">
An error occurred (NoSuchBucket) when calling the DeleteObject operation: The specified bucket does not exist</msg>
<status status="PASS" endtime="20191028 05:26:32.228" starttime="20191028 05:26:32.227"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
</arguments>
<msg timestamp="20191028 05:26:32.229" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:26:32.229" starttime="20191028 05:26:32.229"></status>
</kw>
<msg timestamp="20191028 05:26:32.230" level="INFO">${output} = 
An error occurred (NoSuchBucket) when calling the DeleteObject operation: The specified bucket does not exist</msg>
<status status="PASS" endtime="20191028 05:26:32.230" starttime="20191028 05:26:31.570"></status>
</kw>
<msg timestamp="20191028 05:26:32.231" level="INFO">${result} = 
An error occurred (NoSuchBucket) when calling the DeleteObject operation: The specified bucket does not exist</msg>
<status status="PASS" endtime="20191028 05:26:32.231" starttime="20191028 05:26:31.569"></status>
</kw>
<kw name="Should Contain" library="BuiltIn">
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<arguments>
<arg>${result}</arg>
<arg>NoSuchBucket</arg>
</arguments>
<status status="PASS" endtime="20191028 05:26:32.232" starttime="20191028 05:26:32.231"></status>
</kw>
<status status="PASS" endtime="20191028 05:26:32.233" critical="yes" starttime="20191028 05:26:26.081"></status>
</test>
<doc>S3 gateway test with aws cli</doc>
<status status="FAIL" endtime="20191028 05:26:32.235" starttime="20191028 05:25:32.750"></status>
</suite>
<suite source="/opt/hadoop/smoketest/s3/objectmultidelete.robot" id="s1-s8" name="Objectmultidelete">
<test id="s1-s8-t1" name="Delete file with multi delete">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:26:32.282" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:26:32.290" level="INFO">${rc} = 1</msg>
<msg timestamp="20191028 05:26:32.290" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191028 05:26:32.290" starttime="20191028 05:26:32.280"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191028 05:26:32.293" starttime="20191028 05:26:32.291"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:26:32.295" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:26:32.479" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:26:32.479" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191028 05:26:32.480" starttime="20191028 05:26:32.293"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:26:32.486" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:26:32.996" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:26:32.997" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: d2lzkl7pfhq30w.cloudfront.net
 * extras: mirrors.xtom.com
 * updates: mirro...</msg>
<status status="PASS" endtime="20191028 05:26:32.997" starttime="20191028 05:26:32.484"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:26:32.999" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: d2lzkl7pfhq30w.cloudfront.net
 * extras: mirrors.xtom.com
 * updates: mirror.fileplanet.com
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191028 05:26:32.999" starttime="20191028 05:26:32.998"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:26:33.001" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:26:33.001" starttime="20191028 05:26:33.000"></status>
</kw>
<status status="PASS" endtime="20191028 05:26:33.001" starttime="20191028 05:26:32.483"></status>
</kw>
<status status="PASS" endtime="20191028 05:26:33.002" starttime="20191028 05:26:32.482"></status>
</kw>
<status status="PASS" endtime="20191028 05:26:33.002" starttime="20191028 05:26:32.481"></status>
</kw>
<status status="PASS" endtime="20191028 05:26:33.002" starttime="20191028 05:26:32.280"></status>
</kw>
<status status="PASS" endtime="20191028 05:26:33.003" starttime="20191028 05:26:32.280"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:26:33.011" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:26:33.018" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:26:33.018" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191028 05:26:33.019" starttime="20191028 05:26:33.008"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:26:33.021" level="INFO">s3g</msg>
<status status="PASS" endtime="20191028 05:26:33.021" starttime="20191028 05:26:33.020"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:26:33.022" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:26:33.022" starttime="20191028 05:26:33.021"></status>
</kw>
<msg timestamp="20191028 05:26:33.023" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191028 05:26:33.023" starttime="20191028 05:26:33.007"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191028 05:26:33.026" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191028 05:26:33.026" starttime="20191028 05:26:33.023"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:26:33.031" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:26:33.063" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:26:33.064" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:26:33.064" starttime="20191028 05:26:33.029"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:26:33.066" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:26:33.066" starttime="20191028 05:26:33.065"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:26:33.067" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:26:33.067" starttime="20191028 05:26:33.066"></status>
</kw>
<status status="PASS" endtime="20191028 05:26:33.068" starttime="20191028 05:26:33.028"></status>
</kw>
<status status="PASS" endtime="20191028 05:26:33.068" starttime="20191028 05:26:33.027"></status>
</kw>
<status status="PASS" endtime="20191028 05:26:33.068" starttime="20191028 05:26:33.006"></status>
</kw>
<status status="PASS" endtime="20191028 05:26:33.069" starttime="20191028 05:26:33.005"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:26:33.074" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:26:35.915" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:26:35.915" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191028 05:26:35.916" starttime="20191028 05:26:33.072"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:26:35.918" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
awsAccessKey=testuser/s3g@EXAMPLE.COM
awsSecret=3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a</msg>
<status status="PASS" endtime="20191028 05:26:35.918" starttime="20191028 05:26:35.917"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:26:35.919" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:26:35.919" starttime="20191028 05:26:35.918"></status>
</kw>
<msg timestamp="20191028 05:26:35.920" level="INFO">${result} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191028 05:26:35.920" starttime="20191028 05:26:33.071"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsAccessKey=).*</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191028 05:26:35.922" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191028 05:26:35.922" starttime="20191028 05:26:35.921"></status>
</kw>
<kw name="Get Variable Value" library="BuiltIn">
<doc>Returns variable value or ``default`` if the variable does not exist.</doc>
<arguments>
<arg>${accessKey}</arg>
<arg>sdsdasaasdasd</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191028 05:26:35.923" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191028 05:26:35.923" starttime="20191028 05:26:35.922"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsSecret=).*</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191028 05:26:35.924" level="INFO">${secret} = [u'3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a']</msg>
<status status="PASS" endtime="20191028 05:26:35.924" starttime="20191028 05:26:35.923"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${accessKey[0]}</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191028 05:26:35.925" level="INFO">${accessKey} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191028 05:26:35.926" starttime="20191028 05:26:35.925"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${secret[0]}</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191028 05:26:35.927" level="INFO">${secret} = 3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a</msg>
<status status="PASS" endtime="20191028 05:26:35.927" starttime="20191028 05:26:35.926"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set default.s3.signature_version s3v4</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:26:35.931" level="INFO">Running command 'aws configure set default.s3.signature_version s3v4 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:26:36.356" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:26:36.356" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:26:36.356" starttime="20191028 05:26:35.928"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:26:36.358" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:26:36.358" starttime="20191028 05:26:36.357"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:26:36.359" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:26:36.359" starttime="20191028 05:26:36.358"></status>
</kw>
<status status="PASS" endtime="20191028 05:26:36.360" starttime="20191028 05:26:35.927"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_access_key_id ${accessKey}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:26:36.364" level="INFO">Running command 'aws configure set aws_access_key_id testuser/s3g@EXAMPLE.COM 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:26:36.801" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:26:36.802" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:26:36.802" starttime="20191028 05:26:36.361"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:26:36.804" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:26:36.804" starttime="20191028 05:26:36.803"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:26:36.805" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:26:36.806" starttime="20191028 05:26:36.804"></status>
</kw>
<status status="PASS" endtime="20191028 05:26:36.807" starttime="20191028 05:26:36.360"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_secret_access_key ${secret}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:26:36.811" level="INFO">Running command 'aws configure set aws_secret_access_key 3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:26:37.297" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:26:37.297" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:26:37.297" starttime="20191028 05:26:36.808"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:26:37.300" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:26:37.300" starttime="20191028 05:26:37.298"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:26:37.301" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:26:37.301" starttime="20191028 05:26:37.300"></status>
</kw>
<status status="PASS" endtime="20191028 05:26:37.302" starttime="20191028 05:26:36.807"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set region us-west-1</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:26:37.306" level="INFO">Running command 'aws configure set region us-west-1 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:26:37.771" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:26:37.771" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:26:37.771" starttime="20191028 05:26:37.303"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:26:37.773" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:26:37.773" starttime="20191028 05:26:37.772"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:26:37.774" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:26:37.775" starttime="20191028 05:26:37.774"></status>
</kw>
<status status="PASS" endtime="20191028 05:26:37.775" starttime="20191028 05:26:37.302"></status>
</kw>
<status status="PASS" endtime="20191028 05:26:37.776" starttime="20191028 05:26:33.070"></status>
</kw>
<status status="PASS" endtime="20191028 05:26:37.776" starttime="20191028 05:26:33.069"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'false'</arg>
<arg>Setup dummy credentials for S3</arg>
</arguments>
<status status="PASS" endtime="20191028 05:26:37.777" starttime="20191028 05:26:37.776"></status>
</kw>
<status status="PASS" endtime="20191028 05:26:37.777" starttime="20191028 05:26:33.004"></status>
</kw>
<status status="PASS" endtime="20191028 05:26:37.778" starttime="20191028 05:26:33.003"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${BUCKET}' == 'generated'</arg>
<arg>Create bucket</arg>
</arguments>
<kw name="Create bucket" library="commonawslib">
<kw name="Generate Random String" library="String">
<doc>Generates a string with a desired ``length`` from the given ``chars``.</doc>
<arguments>
<arg>5</arg>
<arg>[NUMBERS]</arg>
</arguments>
<assign>
<var>${postfix}</var>
</assign>
<msg timestamp="20191028 05:26:37.780" level="INFO">${postfix} = 81822</msg>
<status status="PASS" endtime="20191028 05:26:37.781" starttime="20191028 05:26:37.780"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${BUCKET}</arg>
<arg>bucket-${postfix}</arg>
</arguments>
<msg timestamp="20191028 05:26:37.782" level="INFO">${BUCKET} = bucket-81822</msg>
<status status="PASS" endtime="20191028 05:26:37.782" starttime="20191028 05:26:37.781"></status>
</kw>
<kw name="Execute AWSS3APICli" library="commonawslib">
<arguments>
<arg>create-bucket --bucket ${BUCKET}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws s3api --endpoint-url ${ENDPOINT_URL} ${command}</arg>
</arguments>
<assign>
<var>${output}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:26:37.787" level="INFO">Running command 'aws s3api --endpoint-url http://s3g:9878 create-bucket --bucket bucket-81822 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:26:40.882" level="INFO">${rc} = 255</msg>
<msg timestamp="20191028 05:26:40.883" level="INFO">${output} = 
An error occurred (500) when calling the CreateBucket operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191028 05:26:40.883" starttime="20191028 05:26:37.784"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:26:40.885" level="INFO">
An error occurred (500) when calling the CreateBucket operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191028 05:26:40.885" starttime="20191028 05:26:40.884"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:26:40.886" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191028 05:26:40.887" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191028 05:26:40.887" starttime="20191028 05:26:40.885"></status>
</kw>
<status status="FAIL" endtime="20191028 05:26:40.888" starttime="20191028 05:26:37.783"></status>
</kw>
<status status="FAIL" endtime="20191028 05:26:40.888" starttime="20191028 05:26:37.782"></status>
</kw>
<status status="FAIL" endtime="20191028 05:26:40.888" starttime="20191028 05:26:37.779"></status>
</kw>
<status status="FAIL" endtime="20191028 05:26:40.889" starttime="20191028 05:26:37.778"></status>
</kw>
<status status="FAIL" endtime="20191028 05:26:40.889" starttime="20191028 05:26:32.279"></status>
</kw>
<status status="FAIL" endtime="20191028 05:26:40.890" critical="yes" starttime="20191028 05:26:32.278">Setup failed:
255 != 0</status>
</test>
<doc>S3 gateway test with aws cli</doc>
<status status="FAIL" endtime="20191028 05:26:40.891" starttime="20191028 05:26:32.241"></status>
</suite>
<suite source="/opt/hadoop/smoketest/s3/objectputget.robot" id="s1-s9" name="Objectputget">
<test id="s1-s9-t1" name="Put object to s3">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:26:40.912" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:26:40.920" level="INFO">${rc} = 1</msg>
<msg timestamp="20191028 05:26:40.920" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191028 05:26:40.920" starttime="20191028 05:26:40.910"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191028 05:26:40.922" starttime="20191028 05:26:40.921"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:26:40.925" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:26:41.126" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:26:41.126" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191028 05:26:41.127" starttime="20191028 05:26:40.923"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:26:41.133" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:26:41.651" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:26:41.652" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: d2lzkl7pfhq30w.cloudfront.net
 * extras: mirrors.xtom.com
 * updates: mirro...</msg>
<status status="PASS" endtime="20191028 05:26:41.652" starttime="20191028 05:26:41.131"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:26:41.654" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: d2lzkl7pfhq30w.cloudfront.net
 * extras: mirrors.xtom.com
 * updates: mirror.fileplanet.com
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191028 05:26:41.654" starttime="20191028 05:26:41.653"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:26:41.655" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:26:41.655" starttime="20191028 05:26:41.654"></status>
</kw>
<status status="PASS" endtime="20191028 05:26:41.656" starttime="20191028 05:26:41.130"></status>
</kw>
<status status="PASS" endtime="20191028 05:26:41.656" starttime="20191028 05:26:41.129"></status>
</kw>
<status status="PASS" endtime="20191028 05:26:41.657" starttime="20191028 05:26:41.128"></status>
</kw>
<status status="PASS" endtime="20191028 05:26:41.657" starttime="20191028 05:26:40.909"></status>
</kw>
<status status="PASS" endtime="20191028 05:26:41.657" starttime="20191028 05:26:40.909"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:26:41.665" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:26:41.670" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:26:41.670" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191028 05:26:41.670" starttime="20191028 05:26:41.662"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:26:41.672" level="INFO">s3g</msg>
<status status="PASS" endtime="20191028 05:26:41.672" starttime="20191028 05:26:41.671"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:26:41.672" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:26:41.673" starttime="20191028 05:26:41.672"></status>
</kw>
<msg timestamp="20191028 05:26:41.673" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191028 05:26:41.673" starttime="20191028 05:26:41.661"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191028 05:26:41.675" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191028 05:26:41.675" starttime="20191028 05:26:41.673"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:26:41.678" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:26:41.704" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:26:41.704" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:26:41.704" starttime="20191028 05:26:41.677"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:26:41.706" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:26:41.706" starttime="20191028 05:26:41.705"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:26:41.708" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:26:41.708" starttime="20191028 05:26:41.707"></status>
</kw>
<status status="PASS" endtime="20191028 05:26:41.709" starttime="20191028 05:26:41.676"></status>
</kw>
<status status="PASS" endtime="20191028 05:26:41.709" starttime="20191028 05:26:41.675"></status>
</kw>
<status status="PASS" endtime="20191028 05:26:41.709" starttime="20191028 05:26:41.661"></status>
</kw>
<status status="PASS" endtime="20191028 05:26:41.709" starttime="20191028 05:26:41.660"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:26:41.714" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:26:44.645" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:26:44.646" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191028 05:26:44.646" starttime="20191028 05:26:41.711"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:26:44.648" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
awsAccessKey=testuser/s3g@EXAMPLE.COM
awsSecret=3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a</msg>
<status status="PASS" endtime="20191028 05:26:44.648" starttime="20191028 05:26:44.647"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:26:44.649" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:26:44.650" starttime="20191028 05:26:44.649"></status>
</kw>
<msg timestamp="20191028 05:26:44.650" level="INFO">${result} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191028 05:26:44.650" starttime="20191028 05:26:41.711"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsAccessKey=).*</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191028 05:26:44.652" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191028 05:26:44.652" starttime="20191028 05:26:44.651"></status>
</kw>
<kw name="Get Variable Value" library="BuiltIn">
<doc>Returns variable value or ``default`` if the variable does not exist.</doc>
<arguments>
<arg>${accessKey}</arg>
<arg>sdsdasaasdasd</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191028 05:26:44.653" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191028 05:26:44.654" starttime="20191028 05:26:44.652"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsSecret=).*</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191028 05:26:44.655" level="INFO">${secret} = [u'3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a']</msg>
<status status="PASS" endtime="20191028 05:26:44.655" starttime="20191028 05:26:44.654"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${accessKey[0]}</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191028 05:26:44.656" level="INFO">${accessKey} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191028 05:26:44.657" starttime="20191028 05:26:44.655"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${secret[0]}</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191028 05:26:44.658" level="INFO">${secret} = 3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a</msg>
<status status="PASS" endtime="20191028 05:26:44.658" starttime="20191028 05:26:44.657"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set default.s3.signature_version s3v4</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:26:44.662" level="INFO">Running command 'aws configure set default.s3.signature_version s3v4 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:26:45.162" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:26:45.162" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:26:45.163" starttime="20191028 05:26:44.659"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:26:45.165" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:26:45.165" starttime="20191028 05:26:45.164"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:26:45.166" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:26:45.166" starttime="20191028 05:26:45.165"></status>
</kw>
<status status="PASS" endtime="20191028 05:26:45.167" starttime="20191028 05:26:44.658"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_access_key_id ${accessKey}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:26:45.171" level="INFO">Running command 'aws configure set aws_access_key_id testuser/s3g@EXAMPLE.COM 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:26:45.636" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:26:45.636" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:26:45.636" starttime="20191028 05:26:45.168"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:26:45.638" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:26:45.638" starttime="20191028 05:26:45.637"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:26:45.640" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:26:45.640" starttime="20191028 05:26:45.639"></status>
</kw>
<status status="PASS" endtime="20191028 05:26:45.640" starttime="20191028 05:26:45.167"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_secret_access_key ${secret}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:26:45.645" level="INFO">Running command 'aws configure set aws_secret_access_key 3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:26:46.121" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:26:46.121" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:26:46.121" starttime="20191028 05:26:45.642"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:26:46.123" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:26:46.123" starttime="20191028 05:26:46.122"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:26:46.125" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:26:46.125" starttime="20191028 05:26:46.124"></status>
</kw>
<status status="PASS" endtime="20191028 05:26:46.125" starttime="20191028 05:26:45.641"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set region us-west-1</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:26:46.129" level="INFO">Running command 'aws configure set region us-west-1 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:26:46.556" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:26:46.557" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:26:46.557" starttime="20191028 05:26:46.127"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:26:46.558" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:26:46.558" starttime="20191028 05:26:46.557"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:26:46.560" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:26:46.561" starttime="20191028 05:26:46.559"></status>
</kw>
<status status="PASS" endtime="20191028 05:26:46.561" starttime="20191028 05:26:46.126"></status>
</kw>
<status status="PASS" endtime="20191028 05:26:46.561" starttime="20191028 05:26:41.710"></status>
</kw>
<status status="PASS" endtime="20191028 05:26:46.562" starttime="20191028 05:26:41.709"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'false'</arg>
<arg>Setup dummy credentials for S3</arg>
</arguments>
<status status="PASS" endtime="20191028 05:26:46.563" starttime="20191028 05:26:46.562"></status>
</kw>
<status status="PASS" endtime="20191028 05:26:46.563" starttime="20191028 05:26:41.659"></status>
</kw>
<status status="PASS" endtime="20191028 05:26:46.563" starttime="20191028 05:26:41.658"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${BUCKET}' == 'generated'</arg>
<arg>Create bucket</arg>
</arguments>
<kw name="Create bucket" library="commonawslib">
<kw name="Generate Random String" library="String">
<doc>Generates a string with a desired ``length`` from the given ``chars``.</doc>
<arguments>
<arg>5</arg>
<arg>[NUMBERS]</arg>
</arguments>
<assign>
<var>${postfix}</var>
</assign>
<msg timestamp="20191028 05:26:46.566" level="INFO">${postfix} = 22587</msg>
<status status="PASS" endtime="20191028 05:26:46.566" starttime="20191028 05:26:46.565"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${BUCKET}</arg>
<arg>bucket-${postfix}</arg>
</arguments>
<msg timestamp="20191028 05:26:46.567" level="INFO">${BUCKET} = bucket-22587</msg>
<status status="PASS" endtime="20191028 05:26:46.568" starttime="20191028 05:26:46.567"></status>
</kw>
<kw name="Execute AWSS3APICli" library="commonawslib">
<arguments>
<arg>create-bucket --bucket ${BUCKET}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws s3api --endpoint-url ${ENDPOINT_URL} ${command}</arg>
</arguments>
<assign>
<var>${output}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:26:46.572" level="INFO">Running command 'aws s3api --endpoint-url http://s3g:9878 create-bucket --bucket bucket-22587 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:26:57.881" level="INFO">${rc} = 255</msg>
<msg timestamp="20191028 05:26:57.881" level="INFO">${output} = 
An error occurred (500) when calling the CreateBucket operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191028 05:26:57.881" starttime="20191028 05:26:46.570"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:26:57.883" level="INFO">
An error occurred (500) when calling the CreateBucket operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191028 05:26:57.884" starttime="20191028 05:26:57.882"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:26:57.885" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191028 05:26:57.885" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191028 05:26:57.886" starttime="20191028 05:26:57.884"></status>
</kw>
<status status="FAIL" endtime="20191028 05:26:57.886" starttime="20191028 05:26:46.569"></status>
</kw>
<status status="FAIL" endtime="20191028 05:26:57.887" starttime="20191028 05:26:46.568"></status>
</kw>
<status status="FAIL" endtime="20191028 05:26:57.887" starttime="20191028 05:26:46.564"></status>
</kw>
<status status="FAIL" endtime="20191028 05:26:57.887" starttime="20191028 05:26:46.564"></status>
</kw>
<status status="FAIL" endtime="20191028 05:26:57.888" starttime="20191028 05:26:40.908"></status>
</kw>
<status status="FAIL" endtime="20191028 05:26:57.888" critical="yes" starttime="20191028 05:26:40.907">Setup failed:
255 != 0</status>
</test>
<test id="s1-s9-t2" name="Get object from s3">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:26:57.896" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:26:57.903" level="INFO">${rc} = 1</msg>
<msg timestamp="20191028 05:26:57.903" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191028 05:26:57.903" starttime="20191028 05:26:57.893"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191028 05:26:57.906" starttime="20191028 05:26:57.904"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:26:57.908" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:26:58.180" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:26:58.180" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191028 05:26:58.180" starttime="20191028 05:26:57.906"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:26:58.187" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:26:58.682" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:26:58.682" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: d2lzkl7pfhq30w.cloudfront.net
 * extras: mirrors.xtom.com
 * updates: mirro...</msg>
<status status="PASS" endtime="20191028 05:26:58.682" starttime="20191028 05:26:58.185"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:26:58.684" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: d2lzkl7pfhq30w.cloudfront.net
 * extras: mirrors.xtom.com
 * updates: mirror.fileplanet.com
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191028 05:26:58.684" starttime="20191028 05:26:58.683"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:26:58.685" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:26:58.686" starttime="20191028 05:26:58.685"></status>
</kw>
<status status="PASS" endtime="20191028 05:26:58.686" starttime="20191028 05:26:58.184"></status>
</kw>
<status status="PASS" endtime="20191028 05:26:58.687" starttime="20191028 05:26:58.183"></status>
</kw>
<status status="PASS" endtime="20191028 05:26:58.687" starttime="20191028 05:26:58.181"></status>
</kw>
<status status="PASS" endtime="20191028 05:26:58.687" starttime="20191028 05:26:57.892"></status>
</kw>
<status status="PASS" endtime="20191028 05:26:58.687" starttime="20191028 05:26:57.892"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:26:58.695" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:26:58.703" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:26:58.703" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191028 05:26:58.703" starttime="20191028 05:26:58.693"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:26:58.705" level="INFO">s3g</msg>
<status status="PASS" endtime="20191028 05:26:58.705" starttime="20191028 05:26:58.704"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:26:58.706" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:26:58.707" starttime="20191028 05:26:58.706"></status>
</kw>
<msg timestamp="20191028 05:26:58.707" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191028 05:26:58.708" starttime="20191028 05:26:58.692"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191028 05:26:58.709" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191028 05:26:58.709" starttime="20191028 05:26:58.708"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:26:58.715" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:26:58.744" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:26:58.745" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:26:58.745" starttime="20191028 05:26:58.712"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:26:58.746" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:26:58.747" starttime="20191028 05:26:58.746"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:26:58.748" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:26:58.748" starttime="20191028 05:26:58.747"></status>
</kw>
<status status="PASS" endtime="20191028 05:26:58.749" starttime="20191028 05:26:58.711"></status>
</kw>
<status status="PASS" endtime="20191028 05:26:58.749" starttime="20191028 05:26:58.710"></status>
</kw>
<status status="PASS" endtime="20191028 05:26:58.749" starttime="20191028 05:26:58.691"></status>
</kw>
<status status="PASS" endtime="20191028 05:26:58.749" starttime="20191028 05:26:58.690"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:26:58.755" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:27:01.577" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:27:01.577" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191028 05:27:01.578" starttime="20191028 05:26:58.753"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:27:01.579" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
awsAccessKey=testuser/s3g@EXAMPLE.COM
awsSecret=3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a</msg>
<status status="PASS" endtime="20191028 05:27:01.580" starttime="20191028 05:27:01.578"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:27:01.581" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:27:01.581" starttime="20191028 05:27:01.580"></status>
</kw>
<msg timestamp="20191028 05:27:01.581" level="INFO">${result} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191028 05:27:01.582" starttime="20191028 05:26:58.752"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsAccessKey=).*</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191028 05:27:01.583" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191028 05:27:01.583" starttime="20191028 05:27:01.582"></status>
</kw>
<kw name="Get Variable Value" library="BuiltIn">
<doc>Returns variable value or ``default`` if the variable does not exist.</doc>
<arguments>
<arg>${accessKey}</arg>
<arg>sdsdasaasdasd</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191028 05:27:01.584" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191028 05:27:01.584" starttime="20191028 05:27:01.583"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsSecret=).*</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191028 05:27:01.585" level="INFO">${secret} = [u'3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a']</msg>
<status status="PASS" endtime="20191028 05:27:01.585" starttime="20191028 05:27:01.585"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${accessKey[0]}</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191028 05:27:01.587" level="INFO">${accessKey} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191028 05:27:01.587" starttime="20191028 05:27:01.586"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${secret[0]}</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191028 05:27:01.588" level="INFO">${secret} = 3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a</msg>
<status status="PASS" endtime="20191028 05:27:01.588" starttime="20191028 05:27:01.587"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set default.s3.signature_version s3v4</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:27:01.592" level="INFO">Running command 'aws configure set default.s3.signature_version s3v4 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:27:02.056" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:27:02.056" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:27:02.056" starttime="20191028 05:27:01.589"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:27:02.058" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:27:02.059" starttime="20191028 05:27:02.057"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:27:02.060" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:27:02.060" starttime="20191028 05:27:02.059"></status>
</kw>
<status status="PASS" endtime="20191028 05:27:02.061" starttime="20191028 05:27:01.588"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_access_key_id ${accessKey}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:27:02.065" level="INFO">Running command 'aws configure set aws_access_key_id testuser/s3g@EXAMPLE.COM 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:27:02.540" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:27:02.541" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:27:02.541" starttime="20191028 05:27:02.062"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:27:02.543" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:27:02.543" starttime="20191028 05:27:02.542"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:27:02.544" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:27:02.544" starttime="20191028 05:27:02.543"></status>
</kw>
<status status="PASS" endtime="20191028 05:27:02.545" starttime="20191028 05:27:02.061"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_secret_access_key ${secret}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:27:02.550" level="INFO">Running command 'aws configure set aws_secret_access_key 3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:27:03.007" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:27:03.007" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:27:03.007" starttime="20191028 05:27:02.547"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:27:03.009" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:27:03.009" starttime="20191028 05:27:03.008"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:27:03.010" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:27:03.010" starttime="20191028 05:27:03.009"></status>
</kw>
<status status="PASS" endtime="20191028 05:27:03.011" starttime="20191028 05:27:02.545"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set region us-west-1</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:27:03.015" level="INFO">Running command 'aws configure set region us-west-1 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:27:03.537" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:27:03.537" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:27:03.537" starttime="20191028 05:27:03.012"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:27:03.539" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:27:03.539" starttime="20191028 05:27:03.538"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:27:03.541" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:27:03.541" starttime="20191028 05:27:03.540"></status>
</kw>
<status status="PASS" endtime="20191028 05:27:03.541" starttime="20191028 05:27:03.011"></status>
</kw>
<status status="PASS" endtime="20191028 05:27:03.542" starttime="20191028 05:26:58.751"></status>
</kw>
<status status="PASS" endtime="20191028 05:27:03.542" starttime="20191028 05:26:58.750"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'false'</arg>
<arg>Setup dummy credentials for S3</arg>
</arguments>
<status status="PASS" endtime="20191028 05:27:03.543" starttime="20191028 05:27:03.543"></status>
</kw>
<status status="PASS" endtime="20191028 05:27:03.544" starttime="20191028 05:26:58.689"></status>
</kw>
<status status="PASS" endtime="20191028 05:27:03.544" starttime="20191028 05:26:58.688"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${BUCKET}' == 'generated'</arg>
<arg>Create bucket</arg>
</arguments>
<status status="PASS" endtime="20191028 05:27:03.545" starttime="20191028 05:27:03.544"></status>
</kw>
<status status="PASS" endtime="20191028 05:27:03.546" starttime="20191028 05:26:57.891"></status>
</kw>
<kw name="Execute AWSS3APICli" library="commonawslib">
<arguments>
<arg>get-object --bucket ${BUCKET} --key putobject/f1 /tmp/testfile.result</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws s3api --endpoint-url ${ENDPOINT_URL} ${command}</arg>
</arguments>
<assign>
<var>${output}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:27:03.551" level="INFO">Running command 'aws s3api --endpoint-url http://s3g:9878 get-object --bucket bucket-22587 --key putobject/f1 /tmp/testfile.result 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:27:13.637" level="INFO">${rc} = 255</msg>
<msg timestamp="20191028 05:27:13.637" level="INFO">${output} = 
An error occurred (500) when calling the GetObject operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191028 05:27:13.637" starttime="20191028 05:27:03.548"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:27:13.638" level="INFO">
An error occurred (500) when calling the GetObject operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191028 05:27:13.639" starttime="20191028 05:27:13.638"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:27:13.639" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191028 05:27:13.640" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191028 05:27:13.640" starttime="20191028 05:27:13.639"></status>
</kw>
<status status="FAIL" endtime="20191028 05:27:13.640" starttime="20191028 05:27:03.547"></status>
</kw>
<status status="FAIL" endtime="20191028 05:27:13.641" starttime="20191028 05:27:03.546"></status>
</kw>
<status status="FAIL" endtime="20191028 05:27:13.641" critical="yes" starttime="20191028 05:26:57.889">255 != 0</status>
</test>
<test id="s1-s9-t3" name="Get Partial object from s3 with both start and endoffset">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:27:13.647" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:27:13.654" level="INFO">${rc} = 1</msg>
<msg timestamp="20191028 05:27:13.655" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191028 05:27:13.655" starttime="20191028 05:27:13.645"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191028 05:27:13.657" starttime="20191028 05:27:13.656"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:27:13.660" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:27:13.830" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:27:13.831" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191028 05:27:13.831" starttime="20191028 05:27:13.658"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:27:13.838" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:27:14.331" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:27:14.331" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: d2lzkl7pfhq30w.cloudfront.net
 * extras: mirrors.xtom.com
 * updates: mirro...</msg>
<status status="PASS" endtime="20191028 05:27:14.331" starttime="20191028 05:27:13.835"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:27:14.333" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: d2lzkl7pfhq30w.cloudfront.net
 * extras: mirrors.xtom.com
 * updates: mirror.fileplanet.com
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191028 05:27:14.333" starttime="20191028 05:27:14.332"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:27:14.335" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:27:14.335" starttime="20191028 05:27:14.334"></status>
</kw>
<status status="PASS" endtime="20191028 05:27:14.336" starttime="20191028 05:27:13.834"></status>
</kw>
<status status="PASS" endtime="20191028 05:27:14.336" starttime="20191028 05:27:13.833"></status>
</kw>
<status status="PASS" endtime="20191028 05:27:14.336" starttime="20191028 05:27:13.832"></status>
</kw>
<status status="PASS" endtime="20191028 05:27:14.337" starttime="20191028 05:27:13.644"></status>
</kw>
<status status="PASS" endtime="20191028 05:27:14.337" starttime="20191028 05:27:13.644"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:27:14.346" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:27:14.352" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:27:14.352" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191028 05:27:14.352" starttime="20191028 05:27:14.342"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:27:14.354" level="INFO">s3g</msg>
<status status="PASS" endtime="20191028 05:27:14.354" starttime="20191028 05:27:14.353"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:27:14.355" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:27:14.355" starttime="20191028 05:27:14.354"></status>
</kw>
<msg timestamp="20191028 05:27:14.356" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191028 05:27:14.356" starttime="20191028 05:27:14.341"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191028 05:27:14.357" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191028 05:27:14.358" starttime="20191028 05:27:14.356"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:27:14.362" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:27:14.380" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:27:14.380" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:27:14.380" starttime="20191028 05:27:14.360"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:27:14.382" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:27:14.382" starttime="20191028 05:27:14.381"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:27:14.384" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:27:14.384" starttime="20191028 05:27:14.383"></status>
</kw>
<status status="PASS" endtime="20191028 05:27:14.384" starttime="20191028 05:27:14.359"></status>
</kw>
<status status="PASS" endtime="20191028 05:27:14.385" starttime="20191028 05:27:14.358"></status>
</kw>
<status status="PASS" endtime="20191028 05:27:14.385" starttime="20191028 05:27:14.341"></status>
</kw>
<status status="PASS" endtime="20191028 05:27:14.385" starttime="20191028 05:27:14.339"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:27:14.391" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:27:17.238" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:27:17.238" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191028 05:27:17.238" starttime="20191028 05:27:14.388"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:27:17.240" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
awsAccessKey=testuser/s3g@EXAMPLE.COM
awsSecret=3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a</msg>
<status status="PASS" endtime="20191028 05:27:17.240" starttime="20191028 05:27:17.239"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:27:17.241" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:27:17.242" starttime="20191028 05:27:17.241"></status>
</kw>
<msg timestamp="20191028 05:27:17.242" level="INFO">${result} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191028 05:27:17.243" starttime="20191028 05:27:14.387"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsAccessKey=).*</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191028 05:27:17.244" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191028 05:27:17.244" starttime="20191028 05:27:17.243"></status>
</kw>
<kw name="Get Variable Value" library="BuiltIn">
<doc>Returns variable value or ``default`` if the variable does not exist.</doc>
<arguments>
<arg>${accessKey}</arg>
<arg>sdsdasaasdasd</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191028 05:27:17.245" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191028 05:27:17.246" starttime="20191028 05:27:17.244"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsSecret=).*</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191028 05:27:17.247" level="INFO">${secret} = [u'3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a']</msg>
<status status="PASS" endtime="20191028 05:27:17.247" starttime="20191028 05:27:17.246"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${accessKey[0]}</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191028 05:27:17.248" level="INFO">${accessKey} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191028 05:27:17.248" starttime="20191028 05:27:17.247"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${secret[0]}</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191028 05:27:17.250" level="INFO">${secret} = 3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a</msg>
<status status="PASS" endtime="20191028 05:27:17.250" starttime="20191028 05:27:17.249"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set default.s3.signature_version s3v4</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:27:17.254" level="INFO">Running command 'aws configure set default.s3.signature_version s3v4 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:27:17.735" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:27:17.735" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:27:17.736" starttime="20191028 05:27:17.251"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:27:17.738" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:27:17.738" starttime="20191028 05:27:17.736"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:27:17.739" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:27:17.739" starttime="20191028 05:27:17.738"></status>
</kw>
<status status="PASS" endtime="20191028 05:27:17.740" starttime="20191028 05:27:17.250"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_access_key_id ${accessKey}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:27:17.744" level="INFO">Running command 'aws configure set aws_access_key_id testuser/s3g@EXAMPLE.COM 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:27:18.180" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:27:18.180" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:27:18.180" starttime="20191028 05:27:17.741"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:27:18.182" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:27:18.182" starttime="20191028 05:27:18.181"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:27:18.183" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:27:18.184" starttime="20191028 05:27:18.183"></status>
</kw>
<status status="PASS" endtime="20191028 05:27:18.184" starttime="20191028 05:27:17.740"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_secret_access_key ${secret}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:27:18.188" level="INFO">Running command 'aws configure set aws_secret_access_key 3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:27:18.581" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:27:18.581" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:27:18.581" starttime="20191028 05:27:18.186"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:27:18.583" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:27:18.583" starttime="20191028 05:27:18.582"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:27:18.585" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:27:18.585" starttime="20191028 05:27:18.584"></status>
</kw>
<status status="PASS" endtime="20191028 05:27:18.585" starttime="20191028 05:27:18.184"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set region us-west-1</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:27:18.589" level="INFO">Running command 'aws configure set region us-west-1 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:27:19.067" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:27:19.067" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:27:19.067" starttime="20191028 05:27:18.587"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:27:19.069" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:27:19.069" starttime="20191028 05:27:19.068"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:27:19.070" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:27:19.071" starttime="20191028 05:27:19.070"></status>
</kw>
<status status="PASS" endtime="20191028 05:27:19.071" starttime="20191028 05:27:18.586"></status>
</kw>
<status status="PASS" endtime="20191028 05:27:19.072" starttime="20191028 05:27:14.387"></status>
</kw>
<status status="PASS" endtime="20191028 05:27:19.072" starttime="20191028 05:27:14.386"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'false'</arg>
<arg>Setup dummy credentials for S3</arg>
</arguments>
<status status="PASS" endtime="20191028 05:27:19.073" starttime="20191028 05:27:19.072"></status>
</kw>
<status status="PASS" endtime="20191028 05:27:19.074" starttime="20191028 05:27:14.339"></status>
</kw>
<status status="PASS" endtime="20191028 05:27:19.074" starttime="20191028 05:27:14.337"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${BUCKET}' == 'generated'</arg>
<arg>Create bucket</arg>
</arguments>
<status status="PASS" endtime="20191028 05:27:19.075" starttime="20191028 05:27:19.074"></status>
</kw>
<status status="PASS" endtime="20191028 05:27:19.076" starttime="20191028 05:27:13.643"></status>
</kw>
<kw name="Execute AWSS3APICli" library="commonawslib">
<arguments>
<arg>get-object --bucket ${BUCKET} --key putobject/f1 --range bytes=0-4 /tmp/testfile1.result</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws s3api --endpoint-url ${ENDPOINT_URL} ${command}</arg>
</arguments>
<assign>
<var>${output}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:27:19.081" level="INFO">Running command 'aws s3api --endpoint-url http://s3g:9878 get-object --bucket bucket-22587 --key putobject/f1 --range bytes=0-4 /tmp/testfile1.result 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:27:31.721" level="INFO">${rc} = 255</msg>
<msg timestamp="20191028 05:27:31.721" level="INFO">${output} = 
An error occurred (500) when calling the GetObject operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191028 05:27:31.721" starttime="20191028 05:27:19.079"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:27:31.723" level="INFO">
An error occurred (500) when calling the GetObject operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191028 05:27:31.723" starttime="20191028 05:27:31.722"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:27:31.724" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191028 05:27:31.725" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191028 05:27:31.725" starttime="20191028 05:27:31.724"></status>
</kw>
<status status="FAIL" endtime="20191028 05:27:31.726" starttime="20191028 05:27:19.077"></status>
</kw>
<status status="FAIL" endtime="20191028 05:27:31.726" starttime="20191028 05:27:19.076"></status>
</kw>
<status status="FAIL" endtime="20191028 05:27:31.727" critical="yes" starttime="20191028 05:27:13.642">255 != 0</status>
</test>
<test id="s1-s9-t4" name="Get Partial object from s3 with both start and endoffset(start offset and endoffset is greater than file size)">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:27:31.734" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:27:31.741" level="INFO">${rc} = 1</msg>
<msg timestamp="20191028 05:27:31.741" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191028 05:27:31.741" starttime="20191028 05:27:31.732"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191028 05:27:31.743" starttime="20191028 05:27:31.742"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:27:31.745" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:27:31.933" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:27:31.933" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191028 05:27:31.933" starttime="20191028 05:27:31.743"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:27:31.940" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:27:32.397" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:27:32.397" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: d2lzkl7pfhq30w.cloudfront.net
 * extras: mirrors.xtom.com
 * updates: mirro...</msg>
<status status="PASS" endtime="20191028 05:27:32.397" starttime="20191028 05:27:31.938"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:27:32.399" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: d2lzkl7pfhq30w.cloudfront.net
 * extras: mirrors.xtom.com
 * updates: mirror.fileplanet.com
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191028 05:27:32.399" starttime="20191028 05:27:32.398"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:27:32.400" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:27:32.400" starttime="20191028 05:27:32.400"></status>
</kw>
<status status="PASS" endtime="20191028 05:27:32.401" starttime="20191028 05:27:31.937"></status>
</kw>
<status status="PASS" endtime="20191028 05:27:32.401" starttime="20191028 05:27:31.936"></status>
</kw>
<status status="PASS" endtime="20191028 05:27:32.401" starttime="20191028 05:27:31.934"></status>
</kw>
<status status="PASS" endtime="20191028 05:27:32.402" starttime="20191028 05:27:31.731"></status>
</kw>
<status status="PASS" endtime="20191028 05:27:32.402" starttime="20191028 05:27:31.730"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:27:32.410" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:27:32.417" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:27:32.417" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191028 05:27:32.417" starttime="20191028 05:27:32.407"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:27:32.419" level="INFO">s3g</msg>
<status status="PASS" endtime="20191028 05:27:32.419" starttime="20191028 05:27:32.418"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:27:32.420" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:27:32.420" starttime="20191028 05:27:32.419"></status>
</kw>
<msg timestamp="20191028 05:27:32.421" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191028 05:27:32.421" starttime="20191028 05:27:32.406"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191028 05:27:32.423" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191028 05:27:32.423" starttime="20191028 05:27:32.421"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:27:32.428" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:27:32.456" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:27:32.456" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:27:32.456" starttime="20191028 05:27:32.425"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:27:32.458" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:27:32.458" starttime="20191028 05:27:32.457"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:27:32.459" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:27:32.459" starttime="20191028 05:27:32.458"></status>
</kw>
<status status="PASS" endtime="20191028 05:27:32.460" starttime="20191028 05:27:32.424"></status>
</kw>
<status status="PASS" endtime="20191028 05:27:32.460" starttime="20191028 05:27:32.423"></status>
</kw>
<status status="PASS" endtime="20191028 05:27:32.460" starttime="20191028 05:27:32.405"></status>
</kw>
<status status="PASS" endtime="20191028 05:27:32.460" starttime="20191028 05:27:32.404"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:27:32.466" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:27:35.233" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:27:35.233" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191028 05:27:35.233" starttime="20191028 05:27:32.463"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:27:35.235" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
awsAccessKey=testuser/s3g@EXAMPLE.COM
awsSecret=3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a</msg>
<status status="PASS" endtime="20191028 05:27:35.235" starttime="20191028 05:27:35.234"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:27:35.236" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:27:35.237" starttime="20191028 05:27:35.236"></status>
</kw>
<msg timestamp="20191028 05:27:35.237" level="INFO">${result} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191028 05:27:35.237" starttime="20191028 05:27:32.463"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsAccessKey=).*</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191028 05:27:35.239" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191028 05:27:35.239" starttime="20191028 05:27:35.238"></status>
</kw>
<kw name="Get Variable Value" library="BuiltIn">
<doc>Returns variable value or ``default`` if the variable does not exist.</doc>
<arguments>
<arg>${accessKey}</arg>
<arg>sdsdasaasdasd</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191028 05:27:35.240" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191028 05:27:35.240" starttime="20191028 05:27:35.239"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsSecret=).*</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191028 05:27:35.241" level="INFO">${secret} = [u'3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a']</msg>
<status status="PASS" endtime="20191028 05:27:35.241" starttime="20191028 05:27:35.240"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${accessKey[0]}</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191028 05:27:35.242" level="INFO">${accessKey} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191028 05:27:35.242" starttime="20191028 05:27:35.241"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${secret[0]}</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191028 05:27:35.244" level="INFO">${secret} = 3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a</msg>
<status status="PASS" endtime="20191028 05:27:35.244" starttime="20191028 05:27:35.243"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set default.s3.signature_version s3v4</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:27:35.247" level="INFO">Running command 'aws configure set default.s3.signature_version s3v4 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:27:35.754" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:27:35.754" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:27:35.754" starttime="20191028 05:27:35.245"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:27:35.756" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:27:35.756" starttime="20191028 05:27:35.755"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:27:35.757" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:27:35.757" starttime="20191028 05:27:35.756"></status>
</kw>
<status status="PASS" endtime="20191028 05:27:35.758" starttime="20191028 05:27:35.244"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_access_key_id ${accessKey}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:27:35.762" level="INFO">Running command 'aws configure set aws_access_key_id testuser/s3g@EXAMPLE.COM 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:27:36.243" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:27:36.243" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:27:36.243" starttime="20191028 05:27:35.760"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:27:36.245" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:27:36.245" starttime="20191028 05:27:36.244"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:27:36.246" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:27:36.247" starttime="20191028 05:27:36.246"></status>
</kw>
<status status="PASS" endtime="20191028 05:27:36.247" starttime="20191028 05:27:35.758"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_secret_access_key ${secret}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:27:36.251" level="INFO">Running command 'aws configure set aws_secret_access_key 3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:27:36.640" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:27:36.640" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:27:36.640" starttime="20191028 05:27:36.249"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:27:36.642" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:27:36.642" starttime="20191028 05:27:36.641"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:27:36.643" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:27:36.643" starttime="20191028 05:27:36.642"></status>
</kw>
<status status="PASS" endtime="20191028 05:27:36.644" starttime="20191028 05:27:36.247"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set region us-west-1</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:27:36.647" level="INFO">Running command 'aws configure set region us-west-1 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:27:37.060" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:27:37.060" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:27:37.060" starttime="20191028 05:27:36.645"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:27:37.062" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:27:37.062" starttime="20191028 05:27:37.061"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:27:37.063" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:27:37.063" starttime="20191028 05:27:37.063"></status>
</kw>
<status status="PASS" endtime="20191028 05:27:37.064" starttime="20191028 05:27:36.644"></status>
</kw>
<status status="PASS" endtime="20191028 05:27:37.064" starttime="20191028 05:27:32.462"></status>
</kw>
<status status="PASS" endtime="20191028 05:27:37.064" starttime="20191028 05:27:32.461"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'false'</arg>
<arg>Setup dummy credentials for S3</arg>
</arguments>
<status status="PASS" endtime="20191028 05:27:37.065" starttime="20191028 05:27:37.065"></status>
</kw>
<status status="PASS" endtime="20191028 05:27:37.066" starttime="20191028 05:27:32.403"></status>
</kw>
<status status="PASS" endtime="20191028 05:27:37.066" starttime="20191028 05:27:32.402"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${BUCKET}' == 'generated'</arg>
<arg>Create bucket</arg>
</arguments>
<status status="PASS" endtime="20191028 05:27:37.067" starttime="20191028 05:27:37.066"></status>
</kw>
<status status="PASS" endtime="20191028 05:27:37.067" starttime="20191028 05:27:31.729"></status>
</kw>
<kw name="Execute AWSS3APICli and checkrc" library="commonawslib">
<arguments>
<arg>get-object --bucket ${BUCKET} --key putobject/f1 --range bytes=10000-10000 /tmp/testfile2.result</arg>
<arg>255</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Execute and checkrc" library="commonlib">
<arguments>
<arg>aws s3api --endpoint-url ${ENDPOINT_URL} ${command}</arg>
<arg>${expected_error_code}</arg>
</arguments>
<assign>
<var>${output}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:27:37.071" level="INFO">Running command 'aws s3api --endpoint-url http://s3g:9878 get-object --bucket bucket-22587 --key putobject/f1 --range bytes=10000-10000 /tmp/testfile2.result 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:27:45.517" level="INFO">${rc} = 255</msg>
<msg timestamp="20191028 05:27:45.517" level="INFO">${output} = 
An error occurred (500) when calling the GetObject operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191028 05:27:45.517" starttime="20191028 05:27:37.069"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:27:45.518" level="INFO">
An error occurred (500) when calling the GetObject operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191028 05:27:45.518" starttime="20191028 05:27:45.518"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
</arguments>
<msg timestamp="20191028 05:27:45.519" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:27:45.519" starttime="20191028 05:27:45.519"></status>
</kw>
<msg timestamp="20191028 05:27:45.520" level="INFO">${output} = 
An error occurred (500) when calling the GetObject operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191028 05:27:45.520" starttime="20191028 05:27:37.068"></status>
</kw>
<msg timestamp="20191028 05:27:45.520" level="INFO">${result} = 
An error occurred (500) when calling the GetObject operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191028 05:27:45.521" starttime="20191028 05:27:37.067"></status>
</kw>
<kw name="Should Contain" library="BuiltIn">
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<arguments>
<arg>${result}</arg>
<arg>InvalidRange</arg>
</arguments>
<msg timestamp="20191028 05:27:45.522" level="FAIL">'
An error occurred (500) when calling the GetObject operation (reached max retries: 4): Internal Server Error' does not contain 'InvalidRange'</msg>
<status status="FAIL" endtime="20191028 05:27:45.522" starttime="20191028 05:27:45.521"></status>
</kw>
<status status="FAIL" endtime="20191028 05:27:45.522" critical="yes" starttime="20191028 05:27:31.728">'
An error occurred (500) when calling the GetObject operation (reached max retries: 4): Internal Server Error' does not contain 'InvalidRange'</status>
</test>
<test id="s1-s9-t5" name="Get Partial object from s3 with both start and endoffset(end offset is greater than file size)">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:27:45.527" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:27:45.534" level="INFO">${rc} = 1</msg>
<msg timestamp="20191028 05:27:45.534" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191028 05:27:45.534" starttime="20191028 05:27:45.525"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191028 05:27:45.535" starttime="20191028 05:27:45.534"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:27:45.537" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:27:45.727" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:27:45.727" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191028 05:27:45.727" starttime="20191028 05:27:45.535"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:27:45.734" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:27:46.202" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:27:46.202" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: d2lzkl7pfhq30w.cloudfront.net
 * extras: mirrors.xtom.com
 * updates: mirro...</msg>
<status status="PASS" endtime="20191028 05:27:46.202" starttime="20191028 05:27:45.732"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:27:46.204" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: d2lzkl7pfhq30w.cloudfront.net
 * extras: mirrors.xtom.com
 * updates: mirror.fileplanet.com
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191028 05:27:46.204" starttime="20191028 05:27:46.203"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:27:46.205" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:27:46.206" starttime="20191028 05:27:46.205"></status>
</kw>
<status status="PASS" endtime="20191028 05:27:46.206" starttime="20191028 05:27:45.731"></status>
</kw>
<status status="PASS" endtime="20191028 05:27:46.207" starttime="20191028 05:27:45.730"></status>
</kw>
<status status="PASS" endtime="20191028 05:27:46.207" starttime="20191028 05:27:45.728"></status>
</kw>
<status status="PASS" endtime="20191028 05:27:46.207" starttime="20191028 05:27:45.525"></status>
</kw>
<status status="PASS" endtime="20191028 05:27:46.207" starttime="20191028 05:27:45.524"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:27:46.216" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:27:46.223" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:27:46.223" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191028 05:27:46.224" starttime="20191028 05:27:46.214"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:27:46.225" level="INFO">s3g</msg>
<status status="PASS" endtime="20191028 05:27:46.226" starttime="20191028 05:27:46.224"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:27:46.226" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:27:46.227" starttime="20191028 05:27:46.226"></status>
</kw>
<msg timestamp="20191028 05:27:46.228" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191028 05:27:46.228" starttime="20191028 05:27:46.211"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191028 05:27:46.229" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191028 05:27:46.229" starttime="20191028 05:27:46.228"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:27:46.234" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:27:46.286" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:27:46.286" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:27:46.286" starttime="20191028 05:27:46.232"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:27:46.288" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:27:46.288" starttime="20191028 05:27:46.287"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:27:46.289" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:27:46.289" starttime="20191028 05:27:46.288"></status>
</kw>
<status status="PASS" endtime="20191028 05:27:46.289" starttime="20191028 05:27:46.231"></status>
</kw>
<status status="PASS" endtime="20191028 05:27:46.289" starttime="20191028 05:27:46.230"></status>
</kw>
<status status="PASS" endtime="20191028 05:27:46.290" starttime="20191028 05:27:46.210"></status>
</kw>
<status status="PASS" endtime="20191028 05:27:46.290" starttime="20191028 05:27:46.210"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:27:46.294" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:27:48.938" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:27:48.938" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191028 05:27:48.938" starttime="20191028 05:27:46.292"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:27:48.940" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
awsAccessKey=testuser/s3g@EXAMPLE.COM
awsSecret=3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a</msg>
<status status="PASS" endtime="20191028 05:27:48.940" starttime="20191028 05:27:48.939"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:27:48.941" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:27:48.941" starttime="20191028 05:27:48.940"></status>
</kw>
<msg timestamp="20191028 05:27:48.941" level="INFO">${result} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191028 05:27:48.942" starttime="20191028 05:27:46.291"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsAccessKey=).*</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191028 05:27:48.943" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191028 05:27:48.943" starttime="20191028 05:27:48.942"></status>
</kw>
<kw name="Get Variable Value" library="BuiltIn">
<doc>Returns variable value or ``default`` if the variable does not exist.</doc>
<arguments>
<arg>${accessKey}</arg>
<arg>sdsdasaasdasd</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191028 05:27:48.944" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191028 05:27:48.944" starttime="20191028 05:27:48.943"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsSecret=).*</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191028 05:27:48.945" level="INFO">${secret} = [u'3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a']</msg>
<status status="PASS" endtime="20191028 05:27:48.945" starttime="20191028 05:27:48.944"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${accessKey[0]}</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191028 05:27:48.946" level="INFO">${accessKey} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191028 05:27:48.946" starttime="20191028 05:27:48.945"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${secret[0]}</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191028 05:27:48.947" level="INFO">${secret} = 3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a</msg>
<status status="PASS" endtime="20191028 05:27:48.947" starttime="20191028 05:27:48.946"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set default.s3.signature_version s3v4</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:27:48.950" level="INFO">Running command 'aws configure set default.s3.signature_version s3v4 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:27:49.471" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:27:49.471" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:27:49.471" starttime="20191028 05:27:48.948"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:27:49.473" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:27:49.473" starttime="20191028 05:27:49.472"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:27:49.474" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:27:49.475" starttime="20191028 05:27:49.474"></status>
</kw>
<status status="PASS" endtime="20191028 05:27:49.475" starttime="20191028 05:27:48.947"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_access_key_id ${accessKey}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:27:49.480" level="INFO">Running command 'aws configure set aws_access_key_id testuser/s3g@EXAMPLE.COM 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:27:49.932" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:27:49.933" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:27:49.933" starttime="20191028 05:27:49.477"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:27:49.935" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:27:49.935" starttime="20191028 05:27:49.934"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:27:49.936" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:27:49.936" starttime="20191028 05:27:49.935"></status>
</kw>
<status status="PASS" endtime="20191028 05:27:49.937" starttime="20191028 05:27:49.476"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_secret_access_key ${secret}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:27:49.942" level="INFO">Running command 'aws configure set aws_secret_access_key 3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:27:50.420" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:27:50.420" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:27:50.421" starttime="20191028 05:27:49.939"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:27:50.423" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:27:50.423" starttime="20191028 05:27:50.422"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:27:50.424" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:27:50.424" starttime="20191028 05:27:50.423"></status>
</kw>
<status status="PASS" endtime="20191028 05:27:50.425" starttime="20191028 05:27:49.937"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set region us-west-1</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:27:50.429" level="INFO">Running command 'aws configure set region us-west-1 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:27:50.910" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:27:50.910" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:27:50.911" starttime="20191028 05:27:50.426"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:27:50.913" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:27:50.913" starttime="20191028 05:27:50.912"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:27:50.914" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:27:50.914" starttime="20191028 05:27:50.913"></status>
</kw>
<status status="PASS" endtime="20191028 05:27:50.915" starttime="20191028 05:27:50.425"></status>
</kw>
<status status="PASS" endtime="20191028 05:27:50.915" starttime="20191028 05:27:46.291"></status>
</kw>
<status status="PASS" endtime="20191028 05:27:50.915" starttime="20191028 05:27:46.290"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'false'</arg>
<arg>Setup dummy credentials for S3</arg>
</arguments>
<status status="PASS" endtime="20191028 05:27:50.917" starttime="20191028 05:27:50.916"></status>
</kw>
<status status="PASS" endtime="20191028 05:27:50.917" starttime="20191028 05:27:46.209"></status>
</kw>
<status status="PASS" endtime="20191028 05:27:50.917" starttime="20191028 05:27:46.208"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${BUCKET}' == 'generated'</arg>
<arg>Create bucket</arg>
</arguments>
<status status="PASS" endtime="20191028 05:27:50.919" starttime="20191028 05:27:50.918"></status>
</kw>
<status status="PASS" endtime="20191028 05:27:50.919" starttime="20191028 05:27:45.524"></status>
</kw>
<kw name="Execute AWSS3APICli" library="commonawslib">
<arguments>
<arg>get-object --bucket ${BUCKET} --key putobject/f1 --range bytes=0-10000 /tmp/testfile2.result</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws s3api --endpoint-url ${ENDPOINT_URL} ${command}</arg>
</arguments>
<assign>
<var>${output}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:27:50.924" level="INFO">Running command 'aws s3api --endpoint-url http://s3g:9878 get-object --bucket bucket-22587 --key putobject/f1 --range bytes=0-10000 /tmp/testfile2.result 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:28:02.788" level="INFO">${rc} = 255</msg>
<msg timestamp="20191028 05:28:02.788" level="INFO">${output} = 
An error occurred (500) when calling the GetObject operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191028 05:28:02.788" starttime="20191028 05:27:50.922"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:28:02.790" level="INFO">
An error occurred (500) when calling the GetObject operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191028 05:28:02.791" starttime="20191028 05:28:02.789"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:28:02.792" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191028 05:28:02.792" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191028 05:28:02.793" starttime="20191028 05:28:02.791"></status>
</kw>
<status status="FAIL" endtime="20191028 05:28:02.793" starttime="20191028 05:27:50.921"></status>
</kw>
<status status="FAIL" endtime="20191028 05:28:02.794" starttime="20191028 05:27:50.920"></status>
</kw>
<status status="FAIL" endtime="20191028 05:28:02.794" critical="yes" starttime="20191028 05:27:45.523">255 != 0</status>
</test>
<test id="s1-s9-t6" name="Get Partial object from s3 with only start offset">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:28:02.801" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:28:02.809" level="INFO">${rc} = 1</msg>
<msg timestamp="20191028 05:28:02.810" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191028 05:28:02.810" starttime="20191028 05:28:02.799"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191028 05:28:02.812" starttime="20191028 05:28:02.811"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:28:02.815" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:28:03.006" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:28:03.007" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191028 05:28:03.007" starttime="20191028 05:28:02.812"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:28:03.013" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:28:03.536" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:28:03.537" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: d2lzkl7pfhq30w.cloudfront.net
 * extras: mirrors.xtom.com
 * updates: mirro...</msg>
<status status="PASS" endtime="20191028 05:28:03.537" starttime="20191028 05:28:03.011"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:28:03.539" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: d2lzkl7pfhq30w.cloudfront.net
 * extras: mirrors.xtom.com
 * updates: mirror.fileplanet.com
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191028 05:28:03.539" starttime="20191028 05:28:03.538"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:28:03.540" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:28:03.540" starttime="20191028 05:28:03.539"></status>
</kw>
<status status="PASS" endtime="20191028 05:28:03.541" starttime="20191028 05:28:03.010"></status>
</kw>
<status status="PASS" endtime="20191028 05:28:03.541" starttime="20191028 05:28:03.009"></status>
</kw>
<status status="PASS" endtime="20191028 05:28:03.541" starttime="20191028 05:28:03.008"></status>
</kw>
<status status="PASS" endtime="20191028 05:28:03.542" starttime="20191028 05:28:02.798"></status>
</kw>
<status status="PASS" endtime="20191028 05:28:03.542" starttime="20191028 05:28:02.797"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:28:03.550" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:28:03.558" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:28:03.558" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191028 05:28:03.558" starttime="20191028 05:28:03.548"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:28:03.560" level="INFO">s3g</msg>
<status status="PASS" endtime="20191028 05:28:03.560" starttime="20191028 05:28:03.559"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:28:03.561" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:28:03.562" starttime="20191028 05:28:03.561"></status>
</kw>
<msg timestamp="20191028 05:28:03.562" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191028 05:28:03.562" starttime="20191028 05:28:03.546"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191028 05:28:03.564" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191028 05:28:03.564" starttime="20191028 05:28:03.563"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:28:03.569" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:28:03.598" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:28:03.598" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:28:03.598" starttime="20191028 05:28:03.567"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:28:03.600" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:28:03.600" starttime="20191028 05:28:03.599"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:28:03.601" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:28:03.602" starttime="20191028 05:28:03.601"></status>
</kw>
<status status="PASS" endtime="20191028 05:28:03.602" starttime="20191028 05:28:03.566"></status>
</kw>
<status status="PASS" endtime="20191028 05:28:03.602" starttime="20191028 05:28:03.565"></status>
</kw>
<status status="PASS" endtime="20191028 05:28:03.603" starttime="20191028 05:28:03.545"></status>
</kw>
<status status="PASS" endtime="20191028 05:28:03.603" starttime="20191028 05:28:03.544"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:28:03.608" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:28:06.401" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:28:06.402" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191028 05:28:06.402" starttime="20191028 05:28:03.606"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:28:06.404" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
awsAccessKey=testuser/s3g@EXAMPLE.COM
awsSecret=3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a</msg>
<status status="PASS" endtime="20191028 05:28:06.404" starttime="20191028 05:28:06.403"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:28:06.405" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:28:06.406" starttime="20191028 05:28:06.405"></status>
</kw>
<msg timestamp="20191028 05:28:06.406" level="INFO">${result} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191028 05:28:06.406" starttime="20191028 05:28:03.605"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsAccessKey=).*</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191028 05:28:06.408" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191028 05:28:06.408" starttime="20191028 05:28:06.407"></status>
</kw>
<kw name="Get Variable Value" library="BuiltIn">
<doc>Returns variable value or ``default`` if the variable does not exist.</doc>
<arguments>
<arg>${accessKey}</arg>
<arg>sdsdasaasdasd</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191028 05:28:06.409" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191028 05:28:06.409" starttime="20191028 05:28:06.408"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsSecret=).*</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191028 05:28:06.410" level="INFO">${secret} = [u'3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a']</msg>
<status status="PASS" endtime="20191028 05:28:06.410" starttime="20191028 05:28:06.409"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${accessKey[0]}</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191028 05:28:06.412" level="INFO">${accessKey} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191028 05:28:06.412" starttime="20191028 05:28:06.411"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${secret[0]}</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191028 05:28:06.413" level="INFO">${secret} = 3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a</msg>
<status status="PASS" endtime="20191028 05:28:06.413" starttime="20191028 05:28:06.412"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set default.s3.signature_version s3v4</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:28:06.417" level="INFO">Running command 'aws configure set default.s3.signature_version s3v4 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:28:06.838" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:28:06.838" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:28:06.838" starttime="20191028 05:28:06.414"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:28:06.840" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:28:06.841" starttime="20191028 05:28:06.839"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:28:06.842" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:28:06.842" starttime="20191028 05:28:06.841"></status>
</kw>
<status status="PASS" endtime="20191028 05:28:06.842" starttime="20191028 05:28:06.413"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_access_key_id ${accessKey}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:28:06.846" level="INFO">Running command 'aws configure set aws_access_key_id testuser/s3g@EXAMPLE.COM 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:28:07.286" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:28:07.286" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:28:07.286" starttime="20191028 05:28:06.844"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:28:07.288" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:28:07.288" starttime="20191028 05:28:07.287"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:28:07.289" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:28:07.290" starttime="20191028 05:28:07.289"></status>
</kw>
<status status="PASS" endtime="20191028 05:28:07.290" starttime="20191028 05:28:06.843"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_secret_access_key ${secret}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:28:07.295" level="INFO">Running command 'aws configure set aws_secret_access_key 3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:28:07.790" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:28:07.791" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:28:07.791" starttime="20191028 05:28:07.292"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:28:07.793" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:28:07.793" starttime="20191028 05:28:07.792"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:28:07.794" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:28:07.795" starttime="20191028 05:28:07.794"></status>
</kw>
<status status="PASS" endtime="20191028 05:28:07.795" starttime="20191028 05:28:07.291"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set region us-west-1</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:28:07.799" level="INFO">Running command 'aws configure set region us-west-1 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:28:08.290" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:28:08.290" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:28:08.290" starttime="20191028 05:28:07.797"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:28:08.292" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:28:08.292" starttime="20191028 05:28:08.291"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:28:08.293" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:28:08.293" starttime="20191028 05:28:08.292"></status>
</kw>
<status status="PASS" endtime="20191028 05:28:08.294" starttime="20191028 05:28:07.796"></status>
</kw>
<status status="PASS" endtime="20191028 05:28:08.294" starttime="20191028 05:28:03.604"></status>
</kw>
<status status="PASS" endtime="20191028 05:28:08.294" starttime="20191028 05:28:03.603"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'false'</arg>
<arg>Setup dummy credentials for S3</arg>
</arguments>
<status status="PASS" endtime="20191028 05:28:08.296" starttime="20191028 05:28:08.295"></status>
</kw>
<status status="PASS" endtime="20191028 05:28:08.296" starttime="20191028 05:28:03.543"></status>
</kw>
<status status="PASS" endtime="20191028 05:28:08.296" starttime="20191028 05:28:03.542"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${BUCKET}' == 'generated'</arg>
<arg>Create bucket</arg>
</arguments>
<status status="PASS" endtime="20191028 05:28:08.297" starttime="20191028 05:28:08.297"></status>
</kw>
<status status="PASS" endtime="20191028 05:28:08.298" starttime="20191028 05:28:02.796"></status>
</kw>
<kw name="Execute AWSS3APICli" library="commonawslib">
<arguments>
<arg>get-object --bucket ${BUCKET} --key putobject/f1 --range bytes=0- /tmp/testfile3.result</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws s3api --endpoint-url ${ENDPOINT_URL} ${command}</arg>
</arguments>
<assign>
<var>${output}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:28:08.303" level="INFO">Running command 'aws s3api --endpoint-url http://s3g:9878 get-object --bucket bucket-22587 --key putobject/f1 --range bytes=0- /tmp/testfile3.result 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:28:12.428" level="INFO">${rc} = 255</msg>
<msg timestamp="20191028 05:28:12.429" level="INFO">${output} = 
An error occurred (500) when calling the GetObject operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191028 05:28:12.429" starttime="20191028 05:28:08.301"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:28:12.431" level="INFO">
An error occurred (500) when calling the GetObject operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191028 05:28:12.431" starttime="20191028 05:28:12.430"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:28:12.432" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191028 05:28:12.433" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191028 05:28:12.433" starttime="20191028 05:28:12.431"></status>
</kw>
<status status="FAIL" endtime="20191028 05:28:12.434" starttime="20191028 05:28:08.299"></status>
</kw>
<status status="FAIL" endtime="20191028 05:28:12.434" starttime="20191028 05:28:08.298"></status>
</kw>
<status status="FAIL" endtime="20191028 05:28:12.435" critical="yes" starttime="20191028 05:28:02.795">255 != 0</status>
</test>
<test id="s1-s9-t7" name="Get Partial object from s3 with both start and endoffset which are equal">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:28:12.441" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:28:12.449" level="INFO">${rc} = 1</msg>
<msg timestamp="20191028 05:28:12.449" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191028 05:28:12.449" starttime="20191028 05:28:12.439"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191028 05:28:12.452" starttime="20191028 05:28:12.450"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:28:12.454" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:28:12.649" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:28:12.649" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191028 05:28:12.649" starttime="20191028 05:28:12.452"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:28:12.655" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:28:13.125" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:28:13.126" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: d2lzkl7pfhq30w.cloudfront.net
 * extras: mirrors.xtom.com
 * updates: mirro...</msg>
<status status="PASS" endtime="20191028 05:28:13.126" starttime="20191028 05:28:12.653"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:28:13.128" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: d2lzkl7pfhq30w.cloudfront.net
 * extras: mirrors.xtom.com
 * updates: mirror.fileplanet.com
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191028 05:28:13.128" starttime="20191028 05:28:13.127"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:28:13.129" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:28:13.130" starttime="20191028 05:28:13.129"></status>
</kw>
<status status="PASS" endtime="20191028 05:28:13.130" starttime="20191028 05:28:12.652"></status>
</kw>
<status status="PASS" endtime="20191028 05:28:13.131" starttime="20191028 05:28:12.651"></status>
</kw>
<status status="PASS" endtime="20191028 05:28:13.131" starttime="20191028 05:28:12.650"></status>
</kw>
<status status="PASS" endtime="20191028 05:28:13.131" starttime="20191028 05:28:12.438"></status>
</kw>
<status status="PASS" endtime="20191028 05:28:13.131" starttime="20191028 05:28:12.438"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:28:13.140" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:28:13.147" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:28:13.147" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191028 05:28:13.147" starttime="20191028 05:28:13.137"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:28:13.149" level="INFO">s3g</msg>
<status status="PASS" endtime="20191028 05:28:13.149" starttime="20191028 05:28:13.148"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:28:13.150" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:28:13.150" starttime="20191028 05:28:13.150"></status>
</kw>
<msg timestamp="20191028 05:28:13.151" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191028 05:28:13.151" starttime="20191028 05:28:13.136"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191028 05:28:13.153" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191028 05:28:13.153" starttime="20191028 05:28:13.152"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:28:13.158" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:28:13.187" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:28:13.187" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:28:13.188" starttime="20191028 05:28:13.156"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:28:13.189" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:28:13.190" starttime="20191028 05:28:13.188"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:28:13.191" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:28:13.191" starttime="20191028 05:28:13.190"></status>
</kw>
<status status="PASS" endtime="20191028 05:28:13.191" starttime="20191028 05:28:13.154"></status>
</kw>
<status status="PASS" endtime="20191028 05:28:13.192" starttime="20191028 05:28:13.153"></status>
</kw>
<status status="PASS" endtime="20191028 05:28:13.192" starttime="20191028 05:28:13.135"></status>
</kw>
<status status="PASS" endtime="20191028 05:28:13.192" starttime="20191028 05:28:13.134"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:28:13.198" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:28:16.073" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:28:16.073" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191028 05:28:16.074" starttime="20191028 05:28:13.195"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:28:16.076" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
awsAccessKey=testuser/s3g@EXAMPLE.COM
awsSecret=3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a</msg>
<status status="PASS" endtime="20191028 05:28:16.076" starttime="20191028 05:28:16.075"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:28:16.077" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:28:16.077" starttime="20191028 05:28:16.076"></status>
</kw>
<msg timestamp="20191028 05:28:16.078" level="INFO">${result} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191028 05:28:16.078" starttime="20191028 05:28:13.194"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsAccessKey=).*</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191028 05:28:16.079" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191028 05:28:16.079" starttime="20191028 05:28:16.078"></status>
</kw>
<kw name="Get Variable Value" library="BuiltIn">
<doc>Returns variable value or ``default`` if the variable does not exist.</doc>
<arguments>
<arg>${accessKey}</arg>
<arg>sdsdasaasdasd</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191028 05:28:16.081" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191028 05:28:16.081" starttime="20191028 05:28:16.080"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsSecret=).*</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191028 05:28:16.082" level="INFO">${secret} = [u'3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a']</msg>
<status status="PASS" endtime="20191028 05:28:16.082" starttime="20191028 05:28:16.081"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${accessKey[0]}</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191028 05:28:16.084" level="INFO">${accessKey} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191028 05:28:16.084" starttime="20191028 05:28:16.083"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${secret[0]}</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191028 05:28:16.085" level="INFO">${secret} = 3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a</msg>
<status status="PASS" endtime="20191028 05:28:16.085" starttime="20191028 05:28:16.084"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set default.s3.signature_version s3v4</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:28:16.089" level="INFO">Running command 'aws configure set default.s3.signature_version s3v4 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:28:16.567" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:28:16.568" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:28:16.568" starttime="20191028 05:28:16.086"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:28:16.570" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:28:16.570" starttime="20191028 05:28:16.569"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:28:16.571" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:28:16.571" starttime="20191028 05:28:16.570"></status>
</kw>
<status status="PASS" endtime="20191028 05:28:16.572" starttime="20191028 05:28:16.085"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_access_key_id ${accessKey}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:28:16.576" level="INFO">Running command 'aws configure set aws_access_key_id testuser/s3g@EXAMPLE.COM 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:28:17.067" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:28:17.067" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:28:17.068" starttime="20191028 05:28:16.573"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:28:17.069" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:28:17.070" starttime="20191028 05:28:17.069"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:28:17.071" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:28:17.071" starttime="20191028 05:28:17.070"></status>
</kw>
<status status="PASS" endtime="20191028 05:28:17.072" starttime="20191028 05:28:16.572"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_secret_access_key ${secret}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:28:17.075" level="INFO">Running command 'aws configure set aws_secret_access_key 3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:28:17.542" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:28:17.543" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:28:17.543" starttime="20191028 05:28:17.073"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:28:17.546" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:28:17.546" starttime="20191028 05:28:17.544"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:28:17.547" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:28:17.548" starttime="20191028 05:28:17.547"></status>
</kw>
<status status="PASS" endtime="20191028 05:28:17.548" starttime="20191028 05:28:17.072"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set region us-west-1</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:28:17.552" level="INFO">Running command 'aws configure set region us-west-1 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:28:18.011" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:28:18.011" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:28:18.011" starttime="20191028 05:28:17.549"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:28:18.013" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:28:18.013" starttime="20191028 05:28:18.012"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:28:18.014" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:28:18.015" starttime="20191028 05:28:18.014"></status>
</kw>
<status status="PASS" endtime="20191028 05:28:18.015" starttime="20191028 05:28:17.548"></status>
</kw>
<status status="PASS" endtime="20191028 05:28:18.016" starttime="20191028 05:28:13.194"></status>
</kw>
<status status="PASS" endtime="20191028 05:28:18.016" starttime="20191028 05:28:13.193"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'false'</arg>
<arg>Setup dummy credentials for S3</arg>
</arguments>
<status status="PASS" endtime="20191028 05:28:18.017" starttime="20191028 05:28:18.016"></status>
</kw>
<status status="PASS" endtime="20191028 05:28:18.018" starttime="20191028 05:28:13.133"></status>
</kw>
<status status="PASS" endtime="20191028 05:28:18.018" starttime="20191028 05:28:13.132"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${BUCKET}' == 'generated'</arg>
<arg>Create bucket</arg>
</arguments>
<status status="PASS" endtime="20191028 05:28:18.019" starttime="20191028 05:28:18.018"></status>
</kw>
<status status="PASS" endtime="20191028 05:28:18.019" starttime="20191028 05:28:12.437"></status>
</kw>
<kw name="Execute AWSS3APICli" library="commonawslib">
<arguments>
<arg>get-object --bucket ${BUCKET} --key putobject/f1 --range bytes=0-0 /tmp/testfile4.result</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws s3api --endpoint-url ${ENDPOINT_URL} ${command}</arg>
</arguments>
<assign>
<var>${output}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:28:18.025" level="INFO">Running command 'aws s3api --endpoint-url http://s3g:9878 get-object --bucket bucket-22587 --key putobject/f1 --range bytes=0-0 /tmp/testfile4.result 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:28:24.739" level="INFO">${rc} = 255</msg>
<msg timestamp="20191028 05:28:24.739" level="INFO">${output} = 
An error occurred (500) when calling the GetObject operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191028 05:28:24.739" starttime="20191028 05:28:18.022"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:28:24.742" level="INFO">
An error occurred (500) when calling the GetObject operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191028 05:28:24.742" starttime="20191028 05:28:24.740"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:28:24.743" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191028 05:28:24.744" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191028 05:28:24.744" starttime="20191028 05:28:24.742"></status>
</kw>
<status status="FAIL" endtime="20191028 05:28:24.744" starttime="20191028 05:28:18.021"></status>
</kw>
<status status="FAIL" endtime="20191028 05:28:24.745" starttime="20191028 05:28:18.020"></status>
</kw>
<status status="FAIL" endtime="20191028 05:28:24.745" critical="yes" starttime="20191028 05:28:12.435">255 != 0</status>
</test>
<test id="s1-s9-t8" name="Get Partial object from s3 to get last n bytes">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:28:24.753" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:28:24.760" level="INFO">${rc} = 1</msg>
<msg timestamp="20191028 05:28:24.760" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191028 05:28:24.760" starttime="20191028 05:28:24.750"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191028 05:28:24.762" starttime="20191028 05:28:24.761"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:28:24.765" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:28:24.949" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:28:24.949" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191028 05:28:24.949" starttime="20191028 05:28:24.763"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:28:24.955" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:28:25.438" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:28:25.438" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: d2lzkl7pfhq30w.cloudfront.net
 * extras: mirrors.xtom.com
 * updates: mirro...</msg>
<status status="PASS" endtime="20191028 05:28:25.438" starttime="20191028 05:28:24.953"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:28:25.440" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: d2lzkl7pfhq30w.cloudfront.net
 * extras: mirrors.xtom.com
 * updates: mirror.fileplanet.com
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191028 05:28:25.441" starttime="20191028 05:28:25.439"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:28:25.442" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:28:25.442" starttime="20191028 05:28:25.441"></status>
</kw>
<status status="PASS" endtime="20191028 05:28:25.442" starttime="20191028 05:28:24.952"></status>
</kw>
<status status="PASS" endtime="20191028 05:28:25.443" starttime="20191028 05:28:24.951"></status>
</kw>
<status status="PASS" endtime="20191028 05:28:25.443" starttime="20191028 05:28:24.950"></status>
</kw>
<status status="PASS" endtime="20191028 05:28:25.443" starttime="20191028 05:28:24.749"></status>
</kw>
<status status="PASS" endtime="20191028 05:28:25.443" starttime="20191028 05:28:24.749"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:28:25.451" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:28:25.458" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:28:25.458" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191028 05:28:25.458" starttime="20191028 05:28:25.449"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:28:25.461" level="INFO">s3g</msg>
<status status="PASS" endtime="20191028 05:28:25.461" starttime="20191028 05:28:25.459"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:28:25.462" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:28:25.463" starttime="20191028 05:28:25.462"></status>
</kw>
<msg timestamp="20191028 05:28:25.463" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191028 05:28:25.463" starttime="20191028 05:28:25.448"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191028 05:28:25.465" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191028 05:28:25.465" starttime="20191028 05:28:25.464"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:28:25.470" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:28:25.488" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:28:25.488" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:28:25.489" starttime="20191028 05:28:25.468"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:28:25.491" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:28:25.491" starttime="20191028 05:28:25.490"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:28:25.492" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:28:25.493" starttime="20191028 05:28:25.491"></status>
</kw>
<status status="PASS" endtime="20191028 05:28:25.493" starttime="20191028 05:28:25.466"></status>
</kw>
<status status="PASS" endtime="20191028 05:28:25.494" starttime="20191028 05:28:25.466"></status>
</kw>
<status status="PASS" endtime="20191028 05:28:25.494" starttime="20191028 05:28:25.447"></status>
</kw>
<status status="PASS" endtime="20191028 05:28:25.494" starttime="20191028 05:28:25.446"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:28:25.500" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:28:28.176" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:28:28.176" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191028 05:28:28.177" starttime="20191028 05:28:25.498"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:28:28.178" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
awsAccessKey=testuser/s3g@EXAMPLE.COM
awsSecret=3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a</msg>
<status status="PASS" endtime="20191028 05:28:28.178" starttime="20191028 05:28:28.177"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:28:28.179" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:28:28.180" starttime="20191028 05:28:28.179"></status>
</kw>
<msg timestamp="20191028 05:28:28.180" level="INFO">${result} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191028 05:28:28.180" starttime="20191028 05:28:25.497"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsAccessKey=).*</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191028 05:28:28.181" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191028 05:28:28.181" starttime="20191028 05:28:28.181"></status>
</kw>
<kw name="Get Variable Value" library="BuiltIn">
<doc>Returns variable value or ``default`` if the variable does not exist.</doc>
<arguments>
<arg>${accessKey}</arg>
<arg>sdsdasaasdasd</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191028 05:28:28.183" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191028 05:28:28.183" starttime="20191028 05:28:28.182"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsSecret=).*</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191028 05:28:28.184" level="INFO">${secret} = [u'3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a']</msg>
<status status="PASS" endtime="20191028 05:28:28.184" starttime="20191028 05:28:28.183"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${accessKey[0]}</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191028 05:28:28.185" level="INFO">${accessKey} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191028 05:28:28.185" starttime="20191028 05:28:28.184"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${secret[0]}</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191028 05:28:28.186" level="INFO">${secret} = 3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a</msg>
<status status="PASS" endtime="20191028 05:28:28.186" starttime="20191028 05:28:28.185"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set default.s3.signature_version s3v4</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:28:28.189" level="INFO">Running command 'aws configure set default.s3.signature_version s3v4 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:28:28.694" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:28:28.694" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:28:28.694" starttime="20191028 05:28:28.187"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:28:28.695" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:28:28.696" starttime="20191028 05:28:28.695"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:28:28.696" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:28:28.697" starttime="20191028 05:28:28.696"></status>
</kw>
<status status="PASS" endtime="20191028 05:28:28.697" starttime="20191028 05:28:28.186"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_access_key_id ${accessKey}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:28:28.700" level="INFO">Running command 'aws configure set aws_access_key_id testuser/s3g@EXAMPLE.COM 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:28:29.178" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:28:29.179" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:28:29.179" starttime="20191028 05:28:28.698"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:28:29.181" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:28:29.181" starttime="20191028 05:28:29.180"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:28:29.182" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:28:29.182" starttime="20191028 05:28:29.181"></status>
</kw>
<status status="PASS" endtime="20191028 05:28:29.183" starttime="20191028 05:28:28.697"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_secret_access_key ${secret}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:28:29.187" level="INFO">Running command 'aws configure set aws_secret_access_key 3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:28:29.667" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:28:29.668" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:28:29.668" starttime="20191028 05:28:29.184"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:28:29.669" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:28:29.669" starttime="20191028 05:28:29.668"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:28:29.671" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:28:29.671" starttime="20191028 05:28:29.670"></status>
</kw>
<status status="PASS" endtime="20191028 05:28:29.672" starttime="20191028 05:28:29.183"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set region us-west-1</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:28:29.675" level="INFO">Running command 'aws configure set region us-west-1 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:28:30.143" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:28:30.143" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:28:30.143" starttime="20191028 05:28:29.673"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:28:30.145" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:28:30.145" starttime="20191028 05:28:30.144"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:28:30.146" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:28:30.146" starttime="20191028 05:28:30.145"></status>
</kw>
<status status="PASS" endtime="20191028 05:28:30.147" starttime="20191028 05:28:29.672"></status>
</kw>
<status status="PASS" endtime="20191028 05:28:30.147" starttime="20191028 05:28:25.496"></status>
</kw>
<status status="PASS" endtime="20191028 05:28:30.147" starttime="20191028 05:28:25.495"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'false'</arg>
<arg>Setup dummy credentials for S3</arg>
</arguments>
<status status="PASS" endtime="20191028 05:28:30.149" starttime="20191028 05:28:30.148"></status>
</kw>
<status status="PASS" endtime="20191028 05:28:30.149" starttime="20191028 05:28:25.445"></status>
</kw>
<status status="PASS" endtime="20191028 05:28:30.149" starttime="20191028 05:28:25.444"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${BUCKET}' == 'generated'</arg>
<arg>Create bucket</arg>
</arguments>
<status status="PASS" endtime="20191028 05:28:30.150" starttime="20191028 05:28:30.150"></status>
</kw>
<status status="PASS" endtime="20191028 05:28:30.151" starttime="20191028 05:28:24.748"></status>
</kw>
<kw name="Execute AWSS3APICli" library="commonawslib">
<arguments>
<arg>get-object --bucket ${BUCKET} --key putobject/f1 --range bytes=-4 /tmp/testfile6.result</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws s3api --endpoint-url ${ENDPOINT_URL} ${command}</arg>
</arguments>
<assign>
<var>${output}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:28:30.156" level="INFO">Running command 'aws s3api --endpoint-url http://s3g:9878 get-object --bucket bucket-22587 --key putobject/f1 --range bytes=-4 /tmp/testfile6.result 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:28:39.824" level="INFO">${rc} = 255</msg>
<msg timestamp="20191028 05:28:39.825" level="INFO">${output} = 
An error occurred (500) when calling the GetObject operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191028 05:28:39.825" starttime="20191028 05:28:30.153"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:28:39.827" level="INFO">
An error occurred (500) when calling the GetObject operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191028 05:28:39.827" starttime="20191028 05:28:39.826"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:28:39.828" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191028 05:28:39.829" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191028 05:28:39.829" starttime="20191028 05:28:39.828"></status>
</kw>
<status status="FAIL" endtime="20191028 05:28:39.830" starttime="20191028 05:28:30.152"></status>
</kw>
<status status="FAIL" endtime="20191028 05:28:39.830" starttime="20191028 05:28:30.151"></status>
</kw>
<status status="FAIL" endtime="20191028 05:28:39.831" critical="yes" starttime="20191028 05:28:24.746">255 != 0</status>
</test>
<test id="s1-s9-t9" name="Incorrect values for end and start offset">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:28:39.838" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:28:39.845" level="INFO">${rc} = 1</msg>
<msg timestamp="20191028 05:28:39.845" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191028 05:28:39.846" starttime="20191028 05:28:39.835"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191028 05:28:39.848" starttime="20191028 05:28:39.846"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:28:39.850" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:28:40.078" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:28:40.079" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191028 05:28:40.079" starttime="20191028 05:28:39.848"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:28:40.085" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:28:40.578" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:28:40.579" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: d2lzkl7pfhq30w.cloudfront.net
 * extras: mirrors.xtom.com
 * updates: mirro...</msg>
<status status="PASS" endtime="20191028 05:28:40.579" starttime="20191028 05:28:40.083"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:28:40.581" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: d2lzkl7pfhq30w.cloudfront.net
 * extras: mirrors.xtom.com
 * updates: mirror.fileplanet.com
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191028 05:28:40.581" starttime="20191028 05:28:40.580"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:28:40.582" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:28:40.582" starttime="20191028 05:28:40.581"></status>
</kw>
<status status="PASS" endtime="20191028 05:28:40.583" starttime="20191028 05:28:40.082"></status>
</kw>
<status status="PASS" endtime="20191028 05:28:40.583" starttime="20191028 05:28:40.081"></status>
</kw>
<status status="PASS" endtime="20191028 05:28:40.584" starttime="20191028 05:28:40.080"></status>
</kw>
<status status="PASS" endtime="20191028 05:28:40.584" starttime="20191028 05:28:39.835"></status>
</kw>
<status status="PASS" endtime="20191028 05:28:40.584" starttime="20191028 05:28:39.834"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:28:40.593" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:28:40.600" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:28:40.600" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191028 05:28:40.601" starttime="20191028 05:28:40.590"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:28:40.604" level="INFO">s3g</msg>
<status status="PASS" endtime="20191028 05:28:40.604" starttime="20191028 05:28:40.602"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:28:40.605" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:28:40.605" starttime="20191028 05:28:40.604"></status>
</kw>
<msg timestamp="20191028 05:28:40.606" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191028 05:28:40.606" starttime="20191028 05:28:40.589"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191028 05:28:40.608" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191028 05:28:40.608" starttime="20191028 05:28:40.607"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:28:40.613" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:28:40.642" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:28:40.642" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:28:40.642" starttime="20191028 05:28:40.611"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:28:40.644" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:28:40.644" starttime="20191028 05:28:40.643"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:28:40.645" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:28:40.646" starttime="20191028 05:28:40.645"></status>
</kw>
<status status="PASS" endtime="20191028 05:28:40.647" starttime="20191028 05:28:40.609"></status>
</kw>
<status status="PASS" endtime="20191028 05:28:40.647" starttime="20191028 05:28:40.608"></status>
</kw>
<status status="PASS" endtime="20191028 05:28:40.647" starttime="20191028 05:28:40.588"></status>
</kw>
<status status="PASS" endtime="20191028 05:28:40.648" starttime="20191028 05:28:40.587"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:28:40.656" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:28:43.549" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:28:43.549" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191028 05:28:43.549" starttime="20191028 05:28:40.652"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:28:43.550" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
awsAccessKey=testuser/s3g@EXAMPLE.COM
awsSecret=3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a</msg>
<status status="PASS" endtime="20191028 05:28:43.551" starttime="20191028 05:28:43.550"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:28:43.551" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:28:43.551" starttime="20191028 05:28:43.551"></status>
</kw>
<msg timestamp="20191028 05:28:43.552" level="INFO">${result} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191028 05:28:43.552" starttime="20191028 05:28:40.651"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsAccessKey=).*</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191028 05:28:43.553" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191028 05:28:43.553" starttime="20191028 05:28:43.552"></status>
</kw>
<kw name="Get Variable Value" library="BuiltIn">
<doc>Returns variable value or ``default`` if the variable does not exist.</doc>
<arguments>
<arg>${accessKey}</arg>
<arg>sdsdasaasdasd</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191028 05:28:43.554" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191028 05:28:43.554" starttime="20191028 05:28:43.553"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsSecret=).*</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191028 05:28:43.554" level="INFO">${secret} = [u'3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a']</msg>
<status status="PASS" endtime="20191028 05:28:43.554" starttime="20191028 05:28:43.554"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${accessKey[0]}</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191028 05:28:43.555" level="INFO">${accessKey} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191028 05:28:43.555" starttime="20191028 05:28:43.555"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${secret[0]}</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191028 05:28:43.556" level="INFO">${secret} = 3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a</msg>
<status status="PASS" endtime="20191028 05:28:43.556" starttime="20191028 05:28:43.555"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set default.s3.signature_version s3v4</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:28:43.559" level="INFO">Running command 'aws configure set default.s3.signature_version s3v4 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:28:44.012" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:28:44.012" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:28:44.013" starttime="20191028 05:28:43.557"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:28:44.015" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:28:44.015" starttime="20191028 05:28:44.014"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:28:44.016" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:28:44.016" starttime="20191028 05:28:44.015"></status>
</kw>
<status status="PASS" endtime="20191028 05:28:44.017" starttime="20191028 05:28:43.556"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_access_key_id ${accessKey}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:28:44.021" level="INFO">Running command 'aws configure set aws_access_key_id testuser/s3g@EXAMPLE.COM 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:28:44.496" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:28:44.497" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:28:44.497" starttime="20191028 05:28:44.018"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:28:44.499" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:28:44.499" starttime="20191028 05:28:44.498"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:28:44.500" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:28:44.501" starttime="20191028 05:28:44.500"></status>
</kw>
<status status="PASS" endtime="20191028 05:28:44.501" starttime="20191028 05:28:44.017"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_secret_access_key ${secret}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:28:44.506" level="INFO">Running command 'aws configure set aws_secret_access_key 3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:28:45.061" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:28:45.061" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:28:45.061" starttime="20191028 05:28:44.503"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:28:45.063" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:28:45.064" starttime="20191028 05:28:45.062"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:28:45.066" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:28:45.067" starttime="20191028 05:28:45.064"></status>
</kw>
<status status="PASS" endtime="20191028 05:28:45.067" starttime="20191028 05:28:44.502"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set region us-west-1</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:28:45.071" level="INFO">Running command 'aws configure set region us-west-1 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:28:45.546" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:28:45.547" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:28:45.547" starttime="20191028 05:28:45.068"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:28:45.548" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:28:45.548" starttime="20191028 05:28:45.547"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:28:45.548" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:28:45.549" starttime="20191028 05:28:45.548"></status>
</kw>
<status status="PASS" endtime="20191028 05:28:45.549" starttime="20191028 05:28:45.067"></status>
</kw>
<status status="PASS" endtime="20191028 05:28:45.549" starttime="20191028 05:28:40.650"></status>
</kw>
<status status="PASS" endtime="20191028 05:28:45.549" starttime="20191028 05:28:40.648"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'false'</arg>
<arg>Setup dummy credentials for S3</arg>
</arguments>
<status status="PASS" endtime="20191028 05:28:45.550" starttime="20191028 05:28:45.550"></status>
</kw>
<status status="PASS" endtime="20191028 05:28:45.550" starttime="20191028 05:28:40.586"></status>
</kw>
<status status="PASS" endtime="20191028 05:28:45.550" starttime="20191028 05:28:40.585"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${BUCKET}' == 'generated'</arg>
<arg>Create bucket</arg>
</arguments>
<status status="PASS" endtime="20191028 05:28:45.551" starttime="20191028 05:28:45.551"></status>
</kw>
<status status="PASS" endtime="20191028 05:28:45.551" starttime="20191028 05:28:39.833"></status>
</kw>
<kw name="Execute AWSS3APICli" library="commonawslib">
<arguments>
<arg>get-object --bucket ${BUCKET} --key putobject/f1 --range bytes=-11-10000 /tmp/testfile8.result</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws s3api --endpoint-url ${ENDPOINT_URL} ${command}</arg>
</arguments>
<assign>
<var>${output}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:28:45.555" level="INFO">Running command 'aws s3api --endpoint-url http://s3g:9878 get-object --bucket bucket-22587 --key putobject/f1 --range bytes=-11-10000 /tmp/testfile8.result 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:28:56.260" level="INFO">${rc} = 255</msg>
<msg timestamp="20191028 05:28:56.260" level="INFO">${output} = 
An error occurred (500) when calling the GetObject operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191028 05:28:56.260" starttime="20191028 05:28:45.553"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:28:56.262" level="INFO">
An error occurred (500) when calling the GetObject operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191028 05:28:56.262" starttime="20191028 05:28:56.261"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:28:56.263" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191028 05:28:56.264" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191028 05:28:56.264" starttime="20191028 05:28:56.263"></status>
</kw>
<status status="FAIL" endtime="20191028 05:28:56.265" starttime="20191028 05:28:45.552"></status>
</kw>
<status status="FAIL" endtime="20191028 05:28:56.265" starttime="20191028 05:28:45.552"></status>
</kw>
<status status="FAIL" endtime="20191028 05:28:56.266" critical="yes" starttime="20191028 05:28:39.832">255 != 0</status>
</test>
<test id="s1-s9-t10" name="Zero byte file">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:28:56.272" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:28:56.281" level="INFO">${rc} = 1</msg>
<msg timestamp="20191028 05:28:56.281" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191028 05:28:56.281" starttime="20191028 05:28:56.270"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191028 05:28:56.283" starttime="20191028 05:28:56.282"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:28:56.285" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:28:56.482" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:28:56.482" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191028 05:28:56.482" starttime="20191028 05:28:56.283"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:28:56.489" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:28:56.961" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:28:56.961" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: d2lzkl7pfhq30w.cloudfront.net
 * extras: mirrors.xtom.com
 * updates: mirro...</msg>
<status status="PASS" endtime="20191028 05:28:56.961" starttime="20191028 05:28:56.486"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:28:56.963" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: d2lzkl7pfhq30w.cloudfront.net
 * extras: mirrors.xtom.com
 * updates: mirror.fileplanet.com
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191028 05:28:56.963" starttime="20191028 05:28:56.962"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:28:56.964" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:28:56.964" starttime="20191028 05:28:56.963"></status>
</kw>
<status status="PASS" endtime="20191028 05:28:56.965" starttime="20191028 05:28:56.485"></status>
</kw>
<status status="PASS" endtime="20191028 05:28:56.965" starttime="20191028 05:28:56.485"></status>
</kw>
<status status="PASS" endtime="20191028 05:28:56.965" starttime="20191028 05:28:56.483"></status>
</kw>
<status status="PASS" endtime="20191028 05:28:56.966" starttime="20191028 05:28:56.269"></status>
</kw>
<status status="PASS" endtime="20191028 05:28:56.966" starttime="20191028 05:28:56.269"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:28:56.973" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:28:56.980" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:28:56.980" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191028 05:28:56.980" starttime="20191028 05:28:56.971"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:28:56.983" level="INFO">s3g</msg>
<status status="PASS" endtime="20191028 05:28:56.983" starttime="20191028 05:28:56.981"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:28:56.984" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:28:56.984" starttime="20191028 05:28:56.984"></status>
</kw>
<msg timestamp="20191028 05:28:56.985" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191028 05:28:56.985" starttime="20191028 05:28:56.970"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191028 05:28:56.986" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191028 05:28:56.987" starttime="20191028 05:28:56.985"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:28:56.991" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:28:57.019" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:28:57.019" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:28:57.019" starttime="20191028 05:28:56.989"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:28:57.021" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:28:57.021" starttime="20191028 05:28:57.020"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:28:57.022" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:28:57.023" starttime="20191028 05:28:57.022"></status>
</kw>
<status status="PASS" endtime="20191028 05:28:57.023" starttime="20191028 05:28:56.988"></status>
</kw>
<status status="PASS" endtime="20191028 05:28:57.024" starttime="20191028 05:28:56.987"></status>
</kw>
<status status="PASS" endtime="20191028 05:28:57.024" starttime="20191028 05:28:56.969"></status>
</kw>
<status status="PASS" endtime="20191028 05:28:57.024" starttime="20191028 05:28:56.968"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:28:57.030" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:28:59.901" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:28:59.901" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191028 05:28:59.901" starttime="20191028 05:28:57.027"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:28:59.903" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
awsAccessKey=testuser/s3g@EXAMPLE.COM
awsSecret=3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a</msg>
<status status="PASS" endtime="20191028 05:28:59.903" starttime="20191028 05:28:59.902"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:28:59.904" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:28:59.904" starttime="20191028 05:28:59.903"></status>
</kw>
<msg timestamp="20191028 05:28:59.904" level="INFO">${result} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191028 05:28:59.904" starttime="20191028 05:28:57.026"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsAccessKey=).*</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191028 05:28:59.906" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191028 05:28:59.906" starttime="20191028 05:28:59.905"></status>
</kw>
<kw name="Get Variable Value" library="BuiltIn">
<doc>Returns variable value or ``default`` if the variable does not exist.</doc>
<arguments>
<arg>${accessKey}</arg>
<arg>sdsdasaasdasd</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191028 05:28:59.907" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191028 05:28:59.907" starttime="20191028 05:28:59.906"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsSecret=).*</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191028 05:28:59.908" level="INFO">${secret} = [u'3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a']</msg>
<status status="PASS" endtime="20191028 05:28:59.908" starttime="20191028 05:28:59.907"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${accessKey[0]}</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191028 05:28:59.909" level="INFO">${accessKey} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191028 05:28:59.909" starttime="20191028 05:28:59.908"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${secret[0]}</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191028 05:28:59.910" level="INFO">${secret} = 3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a</msg>
<status status="PASS" endtime="20191028 05:28:59.910" starttime="20191028 05:28:59.909"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set default.s3.signature_version s3v4</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:28:59.913" level="INFO">Running command 'aws configure set default.s3.signature_version s3v4 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:29:00.418" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:29:00.418" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:29:00.419" starttime="20191028 05:28:59.911"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:29:00.421" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:29:00.421" starttime="20191028 05:29:00.420"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:29:00.422" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:29:00.422" starttime="20191028 05:29:00.421"></status>
</kw>
<status status="PASS" endtime="20191028 05:29:00.423" starttime="20191028 05:28:59.910"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_access_key_id ${accessKey}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:29:00.427" level="INFO">Running command 'aws configure set aws_access_key_id testuser/s3g@EXAMPLE.COM 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:29:00.868" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:29:00.868" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:29:00.868" starttime="20191028 05:29:00.424"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:29:00.870" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:29:00.870" starttime="20191028 05:29:00.869"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:29:00.871" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:29:00.871" starttime="20191028 05:29:00.870"></status>
</kw>
<status status="PASS" endtime="20191028 05:29:00.872" starttime="20191028 05:29:00.423"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_secret_access_key ${secret}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:29:00.876" level="INFO">Running command 'aws configure set aws_secret_access_key 3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:29:01.375" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:29:01.375" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:29:01.375" starttime="20191028 05:29:00.873"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:29:01.377" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:29:01.377" starttime="20191028 05:29:01.376"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:29:01.380" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:29:01.380" starttime="20191028 05:29:01.378"></status>
</kw>
<status status="PASS" endtime="20191028 05:29:01.380" starttime="20191028 05:29:00.872"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set region us-west-1</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:29:01.384" level="INFO">Running command 'aws configure set region us-west-1 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:29:01.763" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:29:01.763" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:29:01.763" starttime="20191028 05:29:01.382"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:29:01.764" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:29:01.764" starttime="20191028 05:29:01.764"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:29:01.765" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:29:01.765" starttime="20191028 05:29:01.765"></status>
</kw>
<status status="PASS" endtime="20191028 05:29:01.766" starttime="20191028 05:29:01.381"></status>
</kw>
<status status="PASS" endtime="20191028 05:29:01.766" starttime="20191028 05:28:57.026"></status>
</kw>
<status status="PASS" endtime="20191028 05:29:01.766" starttime="20191028 05:28:57.025"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'false'</arg>
<arg>Setup dummy credentials for S3</arg>
</arguments>
<status status="PASS" endtime="20191028 05:29:01.766" starttime="20191028 05:29:01.766"></status>
</kw>
<status status="PASS" endtime="20191028 05:29:01.767" starttime="20191028 05:28:56.967"></status>
</kw>
<status status="PASS" endtime="20191028 05:29:01.767" starttime="20191028 05:28:56.966"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${BUCKET}' == 'generated'</arg>
<arg>Create bucket</arg>
</arguments>
<status status="PASS" endtime="20191028 05:29:01.767" starttime="20191028 05:29:01.767"></status>
</kw>
<status status="PASS" endtime="20191028 05:29:01.767" starttime="20191028 05:28:56.268"></status>
</kw>
<kw name="Execute AWSS3APICli and checkrc" library="commonawslib">
<arguments>
<arg>get-object --bucket ${BUCKET} --key putobject/zerobyte --range bytes=0-0 /tmp/testfile2.result</arg>
<arg>255</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Execute and checkrc" library="commonlib">
<arguments>
<arg>aws s3api --endpoint-url ${ENDPOINT_URL} ${command}</arg>
<arg>${expected_error_code}</arg>
</arguments>
<assign>
<var>${output}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:29:01.770" level="INFO">Running command 'aws s3api --endpoint-url http://s3g:9878 get-object --bucket bucket-22587 --key putobject/zerobyte --range bytes=0-0 /tmp/testfile2.result 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:29:08.610" level="INFO">${rc} = 255</msg>
<msg timestamp="20191028 05:29:08.610" level="INFO">${output} = 
An error occurred (500) when calling the GetObject operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191028 05:29:08.610" starttime="20191028 05:29:01.769"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:29:08.612" level="INFO">
An error occurred (500) when calling the GetObject operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191028 05:29:08.613" starttime="20191028 05:29:08.611"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>${expected_error_code}</arg>
</arguments>
<msg timestamp="20191028 05:29:08.614" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:29:08.614" starttime="20191028 05:29:08.613"></status>
</kw>
<msg timestamp="20191028 05:29:08.615" level="INFO">${output} = 
An error occurred (500) when calling the GetObject operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191028 05:29:08.615" starttime="20191028 05:29:01.768"></status>
</kw>
<msg timestamp="20191028 05:29:08.616" level="INFO">${result} = 
An error occurred (500) when calling the GetObject operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191028 05:29:08.616" starttime="20191028 05:29:01.768"></status>
</kw>
<kw name="Should Contain" library="BuiltIn">
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<arguments>
<arg>${result}</arg>
<arg>InvalidRange</arg>
</arguments>
<msg timestamp="20191028 05:29:08.618" level="FAIL">'
An error occurred (500) when calling the GetObject operation (reached max retries: 4): Internal Server Error' does not contain 'InvalidRange'</msg>
<status status="FAIL" endtime="20191028 05:29:08.619" starttime="20191028 05:29:08.617"></status>
</kw>
<status status="FAIL" endtime="20191028 05:29:08.619" critical="yes" starttime="20191028 05:28:56.266">'
An error occurred (500) when calling the GetObject operation (reached max retries: 4): Internal Server Error' does not contain 'InvalidRange'</status>
</test>
<doc>S3 gateway test with aws cli</doc>
<status status="FAIL" endtime="20191028 05:29:08.625" starttime="20191028 05:26:40.894"></status>
</suite>
<suite source="/opt/hadoop/smoketest/s3/webui.robot" id="s1-s10" name="Webui">
<kw type="setup" name="Setup s3 tests" library="commonawslib">
<kw name="Run Keyword" library="BuiltIn">
<doc>Executes the given keyword with the given arguments.</doc>
<arguments>
<arg>Install aws cli</arg>
</arguments>
<kw name="Install aws cli" library="commonlib">
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>which apt-get</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:29:08.651" level="INFO">Running command 'which apt-get 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:29:08.659" level="INFO">${rc} = 1</msg>
<msg timestamp="20191028 05:29:08.659" level="INFO">${output} = which: no apt-get in (/opt/hadoop/bin/docker:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/hadoop/bin)</msg>
<status status="PASS" endtime="20191028 05:29:08.659" starttime="20191028 05:29:08.649"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 debian</arg>
</arguments>
<status status="PASS" endtime="20191028 05:29:08.661" starttime="20191028 05:29:08.660"></status>
</kw>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>yum --help</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:29:08.663" level="INFO">Running command 'yum --help 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:29:08.850" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:29:08.851" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
ovl: Error while doing RPMdb copy-up:
[Errno 13] Permission denied: '/var/lib/rpm/__db.001'
Usage: yum [options] COMMAND

List of Commands:

check          Check for...</msg>
<status status="PASS" endtime="20191028 05:29:08.851" starttime="20191028 05:29:08.661"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${rc}' == '0'</arg>
<arg>Install aws cli s3 centos</arg>
</arguments>
<kw name="Install aws cli s3 centos" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>sudo yum install -y awscli</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:29:08.857" level="INFO">Running command 'sudo yum install -y awscli 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:29:09.292" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:29:09.293" level="INFO">${output} = Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: d2lzkl7pfhq30w.cloudfront.net
 * extras: mirrors.xtom.com
 * updates: mirro...</msg>
<status status="PASS" endtime="20191028 05:29:09.293" starttime="20191028 05:29:08.855"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:29:09.295" level="INFO">Loaded plugins: fastestmirror, ovl
Loading mirror speeds from cached hostfile
 * base: mirror.sfo12.us.leaseweb.net
 * epel: d2lzkl7pfhq30w.cloudfront.net
 * extras: mirrors.xtom.com
 * updates: mirror.fileplanet.com
Package awscli-1.14.28-5.el7_5.1.noarch already installed and latest version
Nothing to do</msg>
<status status="PASS" endtime="20191028 05:29:09.295" starttime="20191028 05:29:09.294"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:29:09.296" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:29:09.296" starttime="20191028 05:29:09.295"></status>
</kw>
<status status="PASS" endtime="20191028 05:29:09.297" starttime="20191028 05:29:08.854"></status>
</kw>
<status status="PASS" endtime="20191028 05:29:09.297" starttime="20191028 05:29:08.853"></status>
</kw>
<status status="PASS" endtime="20191028 05:29:09.297" starttime="20191028 05:29:08.852"></status>
</kw>
<status status="PASS" endtime="20191028 05:29:09.298" starttime="20191028 05:29:08.648"></status>
</kw>
<status status="PASS" endtime="20191028 05:29:09.298" starttime="20191028 05:29:08.648"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${OZONE_S3_SET_CREDENTIALS}' == 'true'</arg>
<arg>Setup v4 headers</arg>
</arguments>
<kw name="Setup v4 headers" library="commonawslib">
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Kinit test user</arg>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Kinit test user" library="commonlib">
<arguments>
<arg>testuser</arg>
<arg>testuser.keytab</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>hostname</arg>
</arguments>
<assign>
<var>${hostname}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:29:09.305" level="INFO">Running command 'hostname 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:29:09.311" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:29:09.311" level="INFO">${output} = s3g</msg>
<status status="PASS" endtime="20191028 05:29:09.311" starttime="20191028 05:29:09.302"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:29:09.313" level="INFO">s3g</msg>
<status status="PASS" endtime="20191028 05:29:09.313" starttime="20191028 05:29:09.312"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:29:09.314" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:29:09.314" starttime="20191028 05:29:09.313"></status>
</kw>
<msg timestamp="20191028 05:29:09.315" level="INFO">${hostname} = s3g</msg>
<status status="PASS" endtime="20191028 05:29:09.315" starttime="20191028 05:29:09.302"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${TEST_USER}</arg>
<arg>${user}/${hostname}@EXAMPLE.COM</arg>
</arguments>
<msg timestamp="20191028 05:29:09.318" level="INFO">${TEST_USER} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191028 05:29:09.318" starttime="20191028 05:29:09.315"></status>
</kw>
<kw name="Wait Until Keyword Succeeds" library="BuiltIn">
<doc>Runs the specified keyword and retries if it fails.</doc>
<arguments>
<arg>2min</arg>
<arg>10sec</arg>
<arg>Execute</arg>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>kinit -k ${user}/${hostname}@EXAMPLE.COM -t /etc/security/keytabs/${keytab}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:29:09.323" level="INFO">Running command 'kinit -k testuser/s3g@EXAMPLE.COM -t /etc/security/keytabs/testuser.keytab 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:29:09.352" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:29:09.352" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:29:09.352" starttime="20191028 05:29:09.321"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:29:09.354" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:29:09.354" starttime="20191028 05:29:09.353"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:29:09.355" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:29:09.355" starttime="20191028 05:29:09.354"></status>
</kw>
<status status="PASS" endtime="20191028 05:29:09.356" starttime="20191028 05:29:09.320"></status>
</kw>
<status status="PASS" endtime="20191028 05:29:09.356" starttime="20191028 05:29:09.319"></status>
</kw>
<status status="PASS" endtime="20191028 05:29:09.356" starttime="20191028 05:29:09.301"></status>
</kw>
<status status="PASS" endtime="20191028 05:29:09.356" starttime="20191028 05:29:09.300"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'true'</arg>
<arg>Setup secure v4 headers</arg>
</arguments>
<kw name="Setup secure v4 headers" library="commonawslib">
<kw name="Execute" library="commonlib">
<arguments>
<arg>ozone s3 getsecret</arg>
</arguments>
<assign>
<var>${result}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:29:09.361" level="INFO">Running command 'ozone s3 getsecret 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:29:12.034" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:29:12.034" level="INFO">${output} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191028 05:29:12.034" starttime="20191028 05:29:09.359"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:29:12.036" level="INFO">WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-auth-3.2.0.jar) to method sun.security.krb5.Config.getInstance()
WARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
awsAccessKey=testuser/s3g@EXAMPLE.COM
awsSecret=3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a</msg>
<status status="PASS" endtime="20191028 05:29:12.037" starttime="20191028 05:29:12.035"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:29:12.038" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:29:12.038" starttime="20191028 05:29:12.037"></status>
</kw>
<msg timestamp="20191028 05:29:12.039" level="INFO">${result} = WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/opt/hadoop/share/ozone/lib/hadoop-...</msg>
<status status="PASS" endtime="20191028 05:29:12.039" starttime="20191028 05:29:09.358"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsAccessKey=).*</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191028 05:29:12.041" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191028 05:29:12.041" starttime="20191028 05:29:12.039"></status>
</kw>
<kw name="Get Variable Value" library="BuiltIn">
<doc>Returns variable value or ``default`` if the variable does not exist.</doc>
<arguments>
<arg>${accessKey}</arg>
<arg>sdsdasaasdasd</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191028 05:29:12.043" level="INFO">${accessKey} = [u'testuser/s3g@EXAMPLE.COM']</msg>
<status status="PASS" endtime="20191028 05:29:12.043" starttime="20191028 05:29:12.042"></status>
</kw>
<kw name="Get Regexp Matches" library="String">
<doc>Returns a list of all non-overlapping matches in the given string.</doc>
<arguments>
<arg>${result}</arg>
<arg>(?&lt;=awsSecret=).*</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191028 05:29:12.044" level="INFO">${secret} = [u'3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a']</msg>
<status status="PASS" endtime="20191028 05:29:12.044" starttime="20191028 05:29:12.043"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${accessKey[0]}</arg>
</arguments>
<assign>
<var>${accessKey}</var>
</assign>
<msg timestamp="20191028 05:29:12.045" level="INFO">${accessKey} = testuser/s3g@EXAMPLE.COM</msg>
<status status="PASS" endtime="20191028 05:29:12.046" starttime="20191028 05:29:12.044"></status>
</kw>
<kw name="Set Variable" library="BuiltIn">
<doc>Returns the given values which can then be assigned to a variables.</doc>
<arguments>
<arg>${secret[0]}</arg>
</arguments>
<assign>
<var>${secret}</var>
</assign>
<msg timestamp="20191028 05:29:12.047" level="INFO">${secret} = 3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a</msg>
<status status="PASS" endtime="20191028 05:29:12.047" starttime="20191028 05:29:12.046"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set default.s3.signature_version s3v4</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:29:12.051" level="INFO">Running command 'aws configure set default.s3.signature_version s3v4 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:29:12.481" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:29:12.481" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:29:12.481" starttime="20191028 05:29:12.048"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:29:12.483" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:29:12.484" starttime="20191028 05:29:12.482"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:29:12.485" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:29:12.485" starttime="20191028 05:29:12.484"></status>
</kw>
<status status="PASS" endtime="20191028 05:29:12.485" starttime="20191028 05:29:12.047"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_access_key_id ${accessKey}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:29:12.489" level="INFO">Running command 'aws configure set aws_access_key_id testuser/s3g@EXAMPLE.COM 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:29:12.932" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:29:12.932" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:29:12.932" starttime="20191028 05:29:12.487"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:29:12.934" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:29:12.934" starttime="20191028 05:29:12.933"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:29:12.935" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:29:12.936" starttime="20191028 05:29:12.935"></status>
</kw>
<status status="PASS" endtime="20191028 05:29:12.936" starttime="20191028 05:29:12.486"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set aws_secret_access_key ${secret}</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:29:12.940" level="INFO">Running command 'aws configure set aws_secret_access_key 3033373bd5c5cce8955fad50dbfd00acdc11b662bc5cfa803dbb89d79ccb198a 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:29:13.429" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:29:13.429" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:29:13.429" starttime="20191028 05:29:12.938"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:29:13.431" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:29:13.432" starttime="20191028 05:29:13.430"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:29:13.433" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:29:13.433" starttime="20191028 05:29:13.432"></status>
</kw>
<status status="PASS" endtime="20191028 05:29:13.434" starttime="20191028 05:29:12.937"></status>
</kw>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws configure set region us-west-1</arg>
</arguments>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:29:13.438" level="INFO">Running command 'aws configure set region us-west-1 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:29:13.917" level="INFO">${rc} = 0</msg>
<msg timestamp="20191028 05:29:13.917" level="INFO">${output} = </msg>
<status status="PASS" endtime="20191028 05:29:13.917" starttime="20191028 05:29:13.435"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:29:13.919" level="INFO"></msg>
<status status="PASS" endtime="20191028 05:29:13.919" starttime="20191028 05:29:13.918"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:29:13.920" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<status status="PASS" endtime="20191028 05:29:13.920" starttime="20191028 05:29:13.919"></status>
</kw>
<status status="PASS" endtime="20191028 05:29:13.921" starttime="20191028 05:29:13.434"></status>
</kw>
<status status="PASS" endtime="20191028 05:29:13.921" starttime="20191028 05:29:09.358"></status>
</kw>
<status status="PASS" endtime="20191028 05:29:13.922" starttime="20191028 05:29:09.357"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${SECURITY_ENABLED}' == 'false'</arg>
<arg>Setup dummy credentials for S3</arg>
</arguments>
<status status="PASS" endtime="20191028 05:29:13.923" starttime="20191028 05:29:13.922"></status>
</kw>
<status status="PASS" endtime="20191028 05:29:13.923" starttime="20191028 05:29:09.299"></status>
</kw>
<status status="PASS" endtime="20191028 05:29:13.924" starttime="20191028 05:29:09.298"></status>
</kw>
<kw name="Run Keyword If" library="BuiltIn">
<doc>Runs the given keyword with the given arguments, if ``condition`` is true.</doc>
<arguments>
<arg>'${BUCKET}' == 'generated'</arg>
<arg>Create bucket</arg>
</arguments>
<kw name="Create bucket" library="commonawslib">
<kw name="Generate Random String" library="String">
<doc>Generates a string with a desired ``length`` from the given ``chars``.</doc>
<arguments>
<arg>5</arg>
<arg>[NUMBERS]</arg>
</arguments>
<assign>
<var>${postfix}</var>
</assign>
<msg timestamp="20191028 05:29:13.926" level="INFO">${postfix} = 87509</msg>
<status status="PASS" endtime="20191028 05:29:13.927" starttime="20191028 05:29:13.926"></status>
</kw>
<kw name="Set Suite Variable" library="BuiltIn">
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<arguments>
<arg>${BUCKET}</arg>
<arg>bucket-${postfix}</arg>
</arguments>
<msg timestamp="20191028 05:29:13.928" level="INFO">${BUCKET} = bucket-87509</msg>
<status status="PASS" endtime="20191028 05:29:13.928" starttime="20191028 05:29:13.927"></status>
</kw>
<kw name="Execute AWSS3APICli" library="commonawslib">
<arguments>
<arg>create-bucket --bucket ${BUCKET}</arg>
</arguments>
<kw name="Execute" library="commonlib">
<arguments>
<arg>aws s3api --endpoint-url ${ENDPOINT_URL} ${command}</arg>
</arguments>
<assign>
<var>${output}</var>
</assign>
<kw name="Run And Return Rc And Output" library="OperatingSystem">
<doc>Runs the given command in the system and returns the RC and output.</doc>
<arguments>
<arg>${command}</arg>
</arguments>
<assign>
<var>${rc}</var>
<var>${output}</var>
</assign>
<msg timestamp="20191028 05:29:13.933" level="INFO">Running command 'aws s3api --endpoint-url http://s3g:9878 create-bucket --bucket bucket-87509 2&gt;&amp;1'.</msg>
<msg timestamp="20191028 05:29:21.258" level="INFO">${rc} = 255</msg>
<msg timestamp="20191028 05:29:21.258" level="INFO">${output} = 
An error occurred (500) when calling the CreateBucket operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191028 05:29:21.258" starttime="20191028 05:29:13.930"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${output}</arg>
</arguments>
<msg timestamp="20191028 05:29:21.260" level="INFO">
An error occurred (500) when calling the CreateBucket operation (reached max retries: 4): Internal Server Error</msg>
<status status="PASS" endtime="20191028 05:29:21.260" starttime="20191028 05:29:21.259"></status>
</kw>
<kw name="Should Be Equal As Integers" library="BuiltIn">
<doc>Fails if objects are unequal after converting them to integers.</doc>
<arguments>
<arg>${rc}</arg>
<arg>0</arg>
</arguments>
<msg timestamp="20191028 05:29:21.261" level="INFO">Argument types are:
&lt;type 'int'&gt;
&lt;type 'unicode'&gt;</msg>
<msg timestamp="20191028 05:29:21.262" level="FAIL">255 != 0</msg>
<status status="FAIL" endtime="20191028 05:29:21.263" starttime="20191028 05:29:21.260"></status>
</kw>
<status status="FAIL" endtime="20191028 05:29:21.263" starttime="20191028 05:29:13.929"></status>
</kw>
<status status="FAIL" endtime="20191028 05:29:21.263" starttime="20191028 05:29:13.928"></status>
</kw>
<status status="FAIL" endtime="20191028 05:29:21.264" starttime="20191028 05:29:13.925"></status>
</kw>
<status status="FAIL" endtime="20191028 05:29:21.264" starttime="20191028 05:29:13.924"></status>
</kw>
<status status="FAIL" endtime="20191028 05:29:21.264" starttime="20191028 05:29:08.647"></status>
</kw>
<test id="s1-s10-t1" name="S3 Gateway Web UI">
<status status="FAIL" endtime="20191028 05:29:21.265" critical="yes" starttime="20191028 05:29:21.264">Parent suite setup failed:
255 != 0</status>
</test>
<doc>S3 gateway web ui test</doc>
<status status="FAIL" endtime="20191028 05:29:21.266" starttime="20191028 05:29:08.635">Suite setup failed:
255 != 0</status>
</suite>
<status status="FAIL" endtime="20191028 05:29:21.275" starttime="20191028 05:20:21.855"></status>
</suite>
<statistics>
<total>
<stat fail="34" pass="3">Critical Tests</stat>
<stat fail="34" pass="3">All Tests</stat>
</total>
<tag>
</tag>
<suite>
<stat fail="34" id="s1" name="ozonesecure-s3" pass="3">ozonesecure-s3</stat>
<stat fail="1" id="s1-s1" name="Awss3" pass="0">ozonesecure-s3.Awss3</stat>
<stat fail="1" id="s1-s2" name="Bucketcreate" pass="0">ozonesecure-s3.Bucketcreate</stat>
<stat fail="1" id="s1-s3" name="Buckethead" pass="0">ozonesecure-s3.Buckethead</stat>
<stat fail="1" id="s1-s4" name="Bucketlist" pass="0">ozonesecure-s3.Bucketlist</stat>
<stat fail="11" id="s1-s5" name="MultipartUpload" pass="1">ozonesecure-s3.MultipartUpload</stat>
<stat fail="3" id="s1-s6" name="Objectcopy" pass="1">ozonesecure-s3.Objectcopy</stat>
<stat fail="4" id="s1-s7" name="Objectdelete" pass="1">ozonesecure-s3.Objectdelete</stat>
<stat fail="1" id="s1-s8" name="Objectmultidelete" pass="0">ozonesecure-s3.Objectmultidelete</stat>
<stat fail="10" id="s1-s9" name="Objectputget" pass="0">ozonesecure-s3.Objectputget</stat>
<stat fail="1" id="s1-s10" name="Webui" pass="0">ozonesecure-s3.Webui</stat>
</suite>
</statistics>
<errors>
</errors>
</robot>
